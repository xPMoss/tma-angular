"use strict";(self.webpackChunktma_angular=self.webpackChunktma_angular||[]).push([[179],{2011:(bt,Re,V)=>{V.d(Re,{Dh:()=>ye,GT:()=>ve,cc:()=>Le,hO:()=>Ze,on:()=>W,pX:()=>he,xv:()=>Te});var o=V(4650),$=V(9260),P=V(4976);bt=V.hmd(bt);const oe=["ngOnDestroy"],he=(be,Ct,yt,ke={})=>new Proxy(be,{get:(Ae,xe)=>yt.runOutsideAngular(()=>{var ze;if(be[xe])return!(null===(ze=ke?.spy)||void 0===ze)&&ze.get&&ke.spy.get(xe,be[xe]),be[xe];if(oe.indexOf(xe)>-1)return()=>{};const We=Ct.toPromise().then(de=>{const Je=de&&de[xe];return"function"==typeof Je?Je.bind(de):Je&&Je.then?Je.then(ae=>yt.run(()=>ae)):yt.run(()=>Je)});return new Proxy(()=>{},{get:(de,Je)=>We[Je],apply:(de,Je,ae)=>We.then(le=>{var we;const fe=le&&le(...ae);return!(null===(we=ke?.spy)||void 0===we)&&we.apply&&ke.spy.apply(xe,ae,fe),fe})})})}),ve=(be,Ct)=>{Ct.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(ke=>{Object.defineProperty(be.prototype,ke,Object.getOwnPropertyDescriptor(yt.prototype||yt,ke))})})};class me{constructor(Ct){return Ct}}const ye=new o.OlP("angularfire2.app.options"),Te=new o.OlP("angularfire2.app.name");function W(be,Ct,yt){const Ae="object"==typeof yt&&yt||{};Ae.name=Ae.name||"string"==typeof yt&&yt||"[DEFAULT]";const ze=$.Z.apps.filter(We=>We&&We.name===Ae.name)[0]||Ct.runOutsideAngular(()=>$.Z.initializeApp(be,Ae));try{JSON.stringify(be)!==JSON.stringify(ze.options)&&z("error",`${ze.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(ze)}const z=(be,...Ct)=>{(0,o.X6Q)()&&typeof console<"u"&&console[be](...Ct)},ee={provide:me,useFactory:W,deps:[ye,o.R0b,[new o.FiY,Te]]};let Ze=(()=>{class be{constructor(yt){$.Z.registerVersion("angularfire",P.q4.full,"core"),$.Z.registerVersion("angularfire",P.q4.full,"app-compat"),$.Z.registerVersion("angular",o.q4F.full,yt.toString())}static initializeApp(yt,ke){return{ngModule:be,providers:[{provide:ye,useValue:yt},{provide:Te,useValue:ke}]}}}return be.\u0275fac=function(yt){return new(yt||be)(o.LFG(o.Lbi))},be.\u0275mod=o.oAB({type:be}),be.\u0275inj=o.cJS({providers:[ee]}),be})();function Le(be,Ct,yt,ke,Ae){const[,xe,ze]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===be)||[];if(xe)return function Ne(be,Ct){try{return be.toString()===Ct.toString()}catch{return be===Ct}}(Ae,ze)||(Ce("error",`${Ct} was already initialized on the ${yt} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Ae,was:ze})),xe;{const We=ke();return globalThis.\u0275AngularfireInstanceCache.push([be,We,Ae]),We}}const ct=!!bt.hot,Ce=(be,...Ct)=>{(0,o.X6Q)()&&typeof console<"u"&&console[be](...Ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(bt,Re,V)=>{V.d(Re,{q4:()=>Eo,iC:()=>yd,fc:()=>Ga,HU:()=>Ha,vb:()=>Ks,JM:()=>_d});var o=V(4650),$=V(259),P=V(5861),oe=V(6881),he=V(2090),ve=V(4859),me=V(1877);let Te,W;const Ze=new WeakMap,Le=new WeakMap,Ne=new WeakMap,ct=new WeakMap,Ce=new WeakMap;let yt={get(C,E,x){if(C instanceof IDBTransaction){if("done"===E)return Le.get(C);if("objectStoreNames"===E)return C.objectStoreNames||Ne.get(C);if("store"===E)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ze(C[E])},set:(C,E,x)=>(C[E]=x,!0),has:(C,E)=>C instanceof IDBTransaction&&("done"===E||"store"===E)||E in C};function xe(C){return"function"==typeof C?function Ae(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ee(){return W||(W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...E){return C.apply(We(this),E),ze(Ze.get(this))}:function(...E){return ze(C.apply(We(this),E))}:function(E,...x){const j=C.call(We(this),E,...x);return Ne.set(j,E.sort?E.sort():[E]),ze(j)}}(C):(C instanceof IDBTransaction&&function Ct(C){if(Le.has(C))return;const E=new Promise((x,j)=>{const Y=()=>{C.removeEventListener("complete",ie),C.removeEventListener("error",_e),C.removeEventListener("abort",_e)},ie=()=>{x(),Y()},_e=()=>{j(C.error||new DOMException("AbortError","AbortError")),Y()};C.addEventListener("complete",ie),C.addEventListener("error",_e),C.addEventListener("abort",_e)});Le.set(C,E)}(C),((C,E)=>E.some(x=>C instanceof x))(C,function z(){return Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,yt):C)}function ze(C){if(C instanceof IDBRequest)return function be(C){const E=new Promise((x,j)=>{const Y=()=>{C.removeEventListener("success",ie),C.removeEventListener("error",_e)},ie=()=>{x(ze(C.result)),Y()},_e=()=>{j(C.error),Y()};C.addEventListener("success",ie),C.addEventListener("error",_e)});return E.then(x=>{x instanceof IDBCursor&&Ze.set(x,C)}).catch(()=>{}),Ce.set(E,C),E}(C);if(ct.has(C))return ct.get(C);const E=xe(C);return E!==C&&(ct.set(C,E),Ce.set(E,C)),E}const We=C=>Ce.get(C),ae=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],we=new Map;function fe(C,E){if(!(C instanceof IDBDatabase)||E in C||"string"!=typeof E)return;if(we.get(E))return we.get(E);const x=E.replace(/FromIndex$/,""),j=E!==x,Y=le.includes(x);if(!(x in(j?IDBIndex:IDBObjectStore).prototype)||!Y&&!ae.includes(x))return;const ie=function(){var _e=(0,P.Z)(function*(et,...Ke){const ft=this.transaction(et,Y?"readwrite":"readonly");let Mt=ft.store;return j&&(Mt=Mt.index(Ke.shift())),(yield Promise.all([Mt[x](...Ke),Y&&ft.done]))[0]});return function(Ke){return _e.apply(this,arguments)}}();return we.set(E,ie),ie}!function ke(C){yt=C(yt)}(C=>({...C,get:(E,x,j)=>fe(E,x)||C.get(E,x,j),has:(E,x)=>!!fe(E,x)||C.has(E,x)}));const Xe="@firebase/installations",dn="w:0.6.4",gn="FIS_v2",Sn=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function An(C){return C instanceof he.ZR&&C.code.includes("request-failed")}function On({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Hs(C){return{token:C.token,requestStatus:2,expiresIn:cs(C.expiresIn),creationTime:Date.now()}}function Mr(C,E){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(C,E){const j=(yield E.json()).error;return Sn.create("request-failed",{requestName:C,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ls({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Es(C,{refreshToken:E}){const x=ls(C);return x.append("Authorization",function Ta(C){return`${gn} ${C}`}(E)),x}function Ui(C){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,P.Z)(function*(C){const E=yield C();return E.status>=500&&E.status<600?C():E})).apply(this,arguments)}function cs(C){return Number(C.replace("s","000"))}function ut(C,E){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:E},{fid:x}){const j=On(C),Y=ls(C),ie=E.getImmediate({optional:!0});if(ie){const ft=yield ie.getHeartbeatsHeader();ft&&Y.append("x-firebase-client",ft)}const et={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:gn,appId:C.appId,sdkVersion:dn})},Ke=yield Ui(()=>fetch(j,et));if(Ke.ok){const ft=yield Ke.json();return{fid:ft.fid||x,registrationStatus:2,refreshToken:ft.refreshToken,authToken:Hs(ft.authToken)}}throw yield Mr("Create Installation",Ke)})).apply(this,arguments)}function si(C){return new Promise(E=>{setTimeout(E,C)})}const us=/^[cdef][\w-]{21}$/;function jn(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function Nn(C){return function Qn(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return us.test(x)?x:""}catch{return""}}function jt(C){return`${C.appName}!${C.appId}`}const gt=new Map;function Dt(C,E){const x=jt(C);yi(x,E),function oi(C,E){const x=function Gn(){return!St&&"BroadcastChannel"in self&&(St=new BroadcastChannel("[Firebase] FID Change"),St.onmessage=C=>{yi(C.data.key,C.data.fid)}),St}();x&&x.postMessage({key:C,fid:E}),function Bt(){0===gt.size&&St&&(St.close(),St=null)}()}(x,E)}function yi(C,E){const x=gt.get(C);if(x)for(const j of x)j(E)}let St=null;const $n="firebase-installations-store";let bn=null;function ai(){return bn||(bn=function de(C,E,{blocked:x,upgrade:j,blocking:Y,terminated:ie}={}){const _e=indexedDB.open(C,E),et=ze(_e);return j&&_e.addEventListener("upgradeneeded",Ke=>{j(ze(_e.result),Ke.oldVersion,Ke.newVersion,ze(_e.transaction))}),x&&_e.addEventListener("blocked",()=>x()),et.then(Ke=>{ie&&Ke.addEventListener("close",()=>ie()),Y&&Ke.addEventListener("versionchange",()=>Y())}).catch(()=>{}),et}("firebase-installations-database",1,{upgrade:(C,E)=>{0===E&&C.createObjectStore($n)}})),bn}function Un(C,E){return _r.apply(this,arguments)}function _r(){return(_r=(0,P.Z)(function*(C,E){const x=jt(C),Y=(yield ai()).transaction($n,"readwrite"),ie=Y.objectStore($n),_e=yield ie.get(x);return yield ie.put(E,x),yield Y.done,(!_e||_e.fid!==E.fid)&&Dt(C,E.fid),E})).apply(this,arguments)}function li(C){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,P.Z)(function*(C){const E=jt(C),j=(yield ai()).transaction($n,"readwrite");yield j.objectStore($n).delete(E),yield j.done})).apply(this,arguments)}function xi(C,E){return er.apply(this,arguments)}function er(){return(er=(0,P.Z)(function*(C,E){const x=jt(C),Y=(yield ai()).transaction($n,"readwrite"),ie=Y.objectStore($n),_e=yield ie.get(x),et=E(_e);return void 0===et?yield ie.delete(x):yield ie.put(et,x),yield Y.done,et&&(!_e||_e.fid!==et.fid)&&Dt(C,et.fid),et})).apply(this,arguments)}function q(C){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(C){let E;const x=yield xi(C.appConfig,j=>{const Y=U(j),ie=L(C,Y);return E=ie.registrationPromise,ie.installationEntry});return""===x.fid?{installationEntry:yield E}:{installationEntry:x,registrationPromise:E}})).apply(this,arguments)}function U(C){return Ie(C||{fid:jn(),registrationStatus:0})}function L(C,E){if(0===E.registrationStatus){if(!navigator.onLine)return{installationEntry:E,registrationPromise:Promise.reject(Sn.create("app-offline"))};const x={fid:E.fid,registrationStatus:1,registrationTime:Date.now()},j=function k(C,E){return Q.apply(this,arguments)}(C,x);return{installationEntry:x,registrationPromise:j}}return 1===E.registrationStatus?{installationEntry:E,registrationPromise:Ee(C)}:{installationEntry:E}}function Q(){return(Q=(0,P.Z)(function*(C,E){try{const x=yield ut(C,E);return Un(C.appConfig,x)}catch(x){throw An(x)&&409===x.customData.serverCode?yield li(C.appConfig):yield Un(C.appConfig,{fid:E.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Ee(C){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,P.Z)(function*(C){let E=yield vt(C.appConfig);for(;1===E.registrationStatus;)yield si(100),E=yield vt(C.appConfig);if(0===E.registrationStatus){const{installationEntry:x,registrationPromise:j}=yield q(C);return j||x}return E})).apply(this,arguments)}function vt(C){return xi(C,E=>{if(!E)throw Sn.create("installation-not-found");return Ie(E)})}function Ie(C){return function rt(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function dt(C,E){return $t.apply(this,arguments)}function $t(){return($t=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:E},x){const j=Rt(C,x),Y=Es(C,x),ie=E.getImmediate({optional:!0});if(ie){const ft=yield ie.getHeartbeatsHeader();ft&&Y.append("x-firebase-client",ft)}const et={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:dn,appId:C.appId}})},Ke=yield Ui(()=>fetch(j,et));if(Ke.ok)return Hs(yield Ke.json());throw yield Mr("Generate Auth Token",Ke)})).apply(this,arguments)}function Rt(C,{fid:E}){return`${On(C)}/${E}/authTokens:generate`}function tn(C){return tr.apply(this,arguments)}function tr(){return(tr=(0,P.Z)(function*(C,E=!1){let x;const j=yield xi(C.appConfig,ie=>{if(!Lt(ie))throw Sn.create("not-registered");const _e=ie.authToken;if(!E&&mn(_e))return ie;if(1===_e.requestStatus)return x=ue(C,E),ie;{if(!navigator.onLine)throw Sn.create("app-offline");const et=Zt(ie);return x=Ve(C,et),et}});return x?yield x:j.authToken})).apply(this,arguments)}function ue(C,E){return se.apply(this,arguments)}function se(){return(se=(0,P.Z)(function*(C,E){let x=yield Ue(C.appConfig);for(;1===x.authToken.requestStatus;)yield si(100),x=yield Ue(C.appConfig);const j=x.authToken;return 0===j.requestStatus?tn(C,E):j})).apply(this,arguments)}function Ue(C){return xi(C,E=>{if(!Lt(E))throw Sn.create("not-registered");return function nr(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(E.authToken)?Object.assign(Object.assign({},E),{authToken:{requestStatus:0}}):E})}function Ve(C,E){return At.apply(this,arguments)}function At(){return(At=(0,P.Z)(function*(C,E){try{const x=yield dt(C,E),j=Object.assign(Object.assign({},E),{authToken:x});return yield Un(C.appConfig,j),x}catch(x){if(!An(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const j=Object.assign(Object.assign({},E),{authToken:{requestStatus:0}});yield Un(C.appConfig,j)}else yield li(C.appConfig);throw x}})).apply(this,arguments)}function Lt(C){return void 0!==C&&2===C.registrationStatus}function mn(C){return 2===C.requestStatus&&!function Zn(C){const E=Date.now();return E<C.creationTime||C.creationTime+C.expiresIn<E+36e5}(C)}function Zt(C){const E={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:E})}function kr(){return(kr=(0,P.Z)(function*(C){const E=C,{installationEntry:x,registrationPromise:j}=yield q(E);return j?j.catch(console.error):tn(E).catch(console.error),x.fid})).apply(this,arguments)}function Da(){return(Da=(0,P.Z)(function*(C,E=!1){const x=C;return yield on(x),(yield tn(x,E)).token})).apply(this,arguments)}function on(C){return pl.apply(this,arguments)}function pl(){return(pl=(0,P.Z)(function*(C){const{registrationPromise:E}=yield q(C);E&&(yield E)})).apply(this,arguments)}function Bi(C){return Sn.create("missing-app-config-values",{valueName:C})}const ir="installations",Gs=C=>{const E=C.getProvider("app").getImmediate(),x=function hh(C){if(!C||!C.options)throw Bi("App Configuration");if(!C.name)throw Bi("App Name");const E=["projectId","apiKey","appId"];for(const x of E)if(!C.options[x])throw Bi(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(E);return{app:E,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(E,"heartbeat"),_delete:()=>Promise.resolve()}},ml=C=>{const E=C.getProvider("app").getImmediate(),x=(0,oe._getProvider)(E,ir).getImmediate();return{getId:()=>function hs(C){return kr.apply(this,arguments)}(x),getToken:Y=>function fl(C){return Da.apply(this,arguments)}(x,Y)}};(function Gr(){(0,oe._registerComponent)(new ve.wA(ir,Gs,"PUBLIC")),(0,oe._registerComponent)(new ve.wA("installations-internal",ml,"PRIVATE"))})(),(0,oe.registerVersion)(Xe,"0.6.4"),(0,oe.registerVersion)(Xe,"0.6.4","esm2017");const _l="@firebase/remote-config",Pn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Lu{constructor(E,x,j,Y){this.client=E,this.storage=x,this.storageCache=j,this.logger=Y}isCachedDataFresh(E,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-x,Y=j<=E;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${E}. Is cache hit: ${Y}.`),Y}fetch(E){var x=this;return(0,P.Z)(function*(){const[j,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(E.cacheMaxAgeMillis,j))return Y;E.eTag=Y&&Y.eTag;const ie=yield x.client.fetch(E),_e=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&_e.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(_e),ie})()}}function Fc(C=navigator){return C.languages&&C.languages[0]||C.language}class Uu{constructor(E,x,j,Y,ie,_e){this.firebaseInstallations=E,this.sdkVersion=x,this.namespace=j,this.projectId=Y,this.apiKey=ie,this.appId=_e}fetch(E){var x=this;return(0,P.Z)(function*(){const[j,Y]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":E.eTag||"*"},Ke={sdk_version:x.sdkVersion,app_instance_id:j,app_instance_id_token:Y,app_id:x.appId,language_code:Fc()},ft={method:"POST",headers:et,body:JSON.stringify(Ke)},Mt=fetch(_e,ft),kt=new Promise((Tr,Qs)=>{E.signal.addEventListener(()=>{const $a=new Error("The operation was aborted.");$a.name="AbortError",Qs($a)})});let Cr;try{yield Promise.race([Mt,kt]),Cr=yield Mt}catch(Tr){let Qs="fetch-client-network";throw"AbortError"===Tr?.name&&(Qs="fetch-timeout"),Pn.create(Qs,{originalErrorMessage:Tr?.message})}let ti=Cr.status;const Ys=Cr.headers.get("ETag")||void 0;let Lr,Js;if(200===Cr.status){let Tr;try{Tr=yield Cr.json()}catch(Qs){throw Pn.create("fetch-client-parse",{originalErrorMessage:Qs?.message})}Lr=Tr.entries,Js=Tr.state}if("INSTANCE_STATE_UNSPECIFIED"===Js?ti=500:"NO_CHANGE"===Js?ti=304:("NO_TEMPLATE"===Js||"EMPTY_CONFIG"===Js)&&(Lr={}),304!==ti&&200!==ti)throw Pn.create("fetch-status",{httpStatus:ti});return{status:ti,eTag:Ys,config:Lr}})()}}class Bu{constructor(E,x){this.client=E,this.storage=x}fetch(E){var x=this;return(0,P.Z)(function*(){const j=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(E,j)})()}attemptFetch(E,{throttleEndTimeMillis:x,backoffCount:j}){var Y=this;return(0,P.Z)(function*(){yield function yl(C,E){return new Promise((x,j)=>{const Y=Math.max(E-Date.now(),0),ie=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(ie),j(Pn.create("fetch-throttle",{throttleEndTimeMillis:E}))})})}(E.signal,x);try{const ie=yield Y.client.fetch(E);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function bl(C){if(!(C instanceof he.ZR&&C.customData))return!1;const E=Number(C.customData.httpStatus);return 429===E||500===E||503===E||504===E}(ie))throw ie;const _e={throttleEndTimeMillis:Date.now()+(0,he.$s)(j),backoffCount:j+1};return yield Y.storage.setThrottleMetadata(_e),Y.attemptFetch(E,_e)}})()}}class Vu{constructor(E,x,j,Y,ie){this.app=E,this._client=x,this._storageCache=j,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xn(C,E){const x=C.target.error||void 0;return Pn.create(E,{originalErrorMessage:x&&x?.message})}const $s="app_namespace_store";class kp{constructor(E,x,j,Y=function Xy(){return new Promise((C,E)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=j=>{E(Xn(j,"storage-open"))},x.onsuccess=j=>{C(j.target.result)},x.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore($s,{keyPath:"compositeKey"})}}catch(x){E(Pn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=E,this.appName=x,this.namespace=j,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(E){return this.set("last_fetch_status",E)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(E){return this.set("last_successful_fetch_timestamp_millis",E)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(E){return this.set("last_successful_fetch_response",E)}getActiveConfig(){return this.get("active_config")}setActiveConfig(E){return this.set("active_config",E)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(E){return this.set("active_config_etag",E)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(E){return this.set("throttle_metadata",E)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(E){var x=this;return(0,P.Z)(function*(){const j=yield x.openDbPromise;return new Promise((Y,ie)=>{const et=j.transaction([$s],"readonly").objectStore($s),Ke=x.createCompositeKey(E);try{const ft=et.get(Ke);ft.onerror=Mt=>{ie(Xn(Mt,"storage-get"))},ft.onsuccess=Mt=>{const kt=Mt.target.result;Y(kt?kt.value:void 0)}}catch(ft){ie(Pn.create("storage-get",{originalErrorMessage:ft?.message}))}})})()}set(E,x){var j=this;return(0,P.Z)(function*(){const Y=yield j.openDbPromise;return new Promise((ie,_e)=>{const Ke=Y.transaction([$s],"readwrite").objectStore($s),ft=j.createCompositeKey(E);try{const Mt=Ke.put({compositeKey:ft,value:x});Mt.onerror=kt=>{_e(Xn(kt,"storage-set"))},Mt.onsuccess=()=>{ie()}}catch(Mt){_e(Pn.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(E){var x=this;return(0,P.Z)(function*(){const j=yield x.openDbPromise;return new Promise((Y,ie)=>{const et=j.transaction([$s],"readwrite").objectStore($s),Ke=x.createCompositeKey(E);try{const ft=et.delete(Ke);ft.onerror=Mt=>{ie(Xn(Mt,"storage-delete"))},ft.onsuccess=()=>{Y()}}catch(ft){ie(Pn.create("storage-delete",{originalErrorMessage:ft?.message}))}})})()}createCompositeKey(E){return[this.appId,this.appName,this.namespace,E].join()}}class En{constructor(E){this.storage=E}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var E=this;return(0,P.Z)(function*(){const x=E.storage.getLastFetchStatus(),j=E.storage.getLastSuccessfulFetchTimestampMillis(),Y=E.storage.getActiveConfig(),ie=yield x;ie&&(E.lastFetchStatus=ie);const _e=yield j;_e&&(E.lastSuccessfulFetchTimestampMillis=_e);const et=yield Y;et&&(E.activeConfig=et)})()}setLastFetchStatus(E){return this.lastFetchStatus=E,this.storage.setLastFetchStatus(E)}setLastSuccessfulFetchTimestampMillis(E){return this.lastSuccessfulFetchTimestampMillis=E,this.storage.setLastSuccessfulFetchTimestampMillis(E)}setActiveConfig(E){return this.activeConfig=E,this.storage.setActiveConfig(E)}}function $r(){return vh.apply(this,arguments)}function vh(){return(vh=(0,P.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}let fs,yn;!function Ia(){(0,oe._registerComponent)(new ve.wA("remote-config",function C(E,{instanceIdentifier:x}){const j=E.getProvider("app").getImmediate(),Y=E.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!(0,he.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ie,apiKey:_e,appId:et}=j.options;if(!ie)throw Pn.create("registration-project-id");if(!_e)throw Pn.create("registration-api-key");if(!et)throw Pn.create("registration-app-id");const Ke=new kp(et,j.name,x=x||"firebase"),ft=new En(Ke),Mt=new me.Yd(_l);Mt.logLevel=me.in.ERROR;const kt=new Uu(Y,oe.SDK_VERSION,x,ie,_e,et),Cr=new Bu(kt,Ke),ti=new Lu(Cr,Ke,ft,Mt),Ys=new Vu(j,ti,ft,Ke,Mt);return function _h(C){const E=(0,he.m9)(C);E._initializePromise||(E._initializePromise=E._storageCache.loadFromStorage().then(()=>{E._isInitializationComplete=!0}))}(Ys),Ys},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(_l,"0.4.4"),(0,oe.registerVersion)(_l,"0.4.4","esm2017")}();const Bc=new WeakMap,Zr=new WeakMap,vr=new WeakMap,Aa=new WeakMap,Ft=new WeakMap;let Vc={get(C,E,x){if(C instanceof IDBTransaction){if("done"===E)return Zr.get(C);if("objectStoreNames"===E)return C.objectStoreNames||vr.get(C);if("store"===E)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ps(C[E])},set:(C,E,x)=>(C[E]=x,!0),has:(C,E)=>C instanceof IDBTransaction&&("done"===E||"store"===E)||E in C};function jo(C){return"function"==typeof C?function Op(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Sa(){return yn||(yn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...E){return C.apply(wl(this),E),ps(Bc.get(this))}:function(...E){return ps(C.apply(wl(this),E))}:function(E,...x){const j=C.call(wl(this),E,...x);return vr.set(j,E.sort?E.sort():[E]),ps(j)}}(C):(C instanceof IDBTransaction&&function yh(C){if(Zr.has(C))return;const E=new Promise((x,j)=>{const Y=()=>{C.removeEventListener("complete",ie),C.removeEventListener("error",_e),C.removeEventListener("abort",_e)},ie=()=>{x(),Y()},_e=()=>{j(C.error||new DOMException("AbortError","AbortError")),Y()};C.addEventListener("complete",ie),C.addEventListener("error",_e),C.addEventListener("abort",_e)});Zr.set(C,E)}(C),((C,E)=>E.some(x=>C instanceof x))(C,function Hu(){return fs||(fs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Vc):C)}function ps(C){if(C instanceof IDBRequest)return function Gu(C){const E=new Promise((x,j)=>{const Y=()=>{C.removeEventListener("success",ie),C.removeEventListener("error",_e)},ie=()=>{x(ps(C.result)),Y()},_e=()=>{j(C.error),Y()};C.addEventListener("success",ie),C.addEventListener("error",_e)});return E.then(x=>{x instanceof IDBCursor&&Bc.set(x,C)}).catch(()=>{}),Ft.set(E,C),E}(C);if(Aa.has(C))return Aa.get(C);const E=jo(C);return E!==C&&(Aa.set(C,E),Ft.set(E,C)),E}const wl=C=>Ft.get(C);function Pe(C,E,{blocked:x,upgrade:j,blocking:Y,terminated:ie}={}){const _e=indexedDB.open(C,E),et=ps(_e);return j&&_e.addEventListener("upgradeneeded",Ke=>{j(ps(_e.result),Ke.oldVersion,Ke.newVersion,ps(_e.transaction))}),x&&_e.addEventListener("blocked",()=>x()),et.then(Ke=>{ie&&Ke.addEventListener("close",()=>ie()),Y&&Ke.addEventListener("versionchange",()=>Y())}).catch(()=>{}),et}function qt(C,{blocked:E}={}){const x=indexedDB.deleteDatabase(C);return E&&x.addEventListener("blocked",()=>E()),ps(x).then(()=>{})}const wh=["get","getKey","getAll","getAllKeys","count"],jc=["put","add","delete","clear"],ei=new Map;function Cl(C,E){if(!(C instanceof IDBDatabase)||E in C||"string"!=typeof E)return;if(ei.get(E))return ei.get(E);const x=E.replace(/FromIndex$/,""),j=E!==x,Y=jc.includes(x);if(!(x in(j?IDBIndex:IDBObjectStore).prototype)||!Y&&!wh.includes(x))return;const ie=function(){var _e=(0,P.Z)(function*(et,...Ke){const ft=this.transaction(et,Y?"readwrite":"readonly");let Mt=ft.store;return j&&(Mt=Mt.index(Ke.shift())),(yield Promise.all([Mt[x](...Ke),Y&&ft.done]))[0]});return function(Ke){return _e.apply(this,arguments)}}();return ei.set(E,ie),ie}!function bh(C){Vc=C(Vc)}(C=>({...C,get:(E,x,j)=>Cl(E,x)||C.get(E,x,j),has:(E,x)=>!!Cl(E,x)||C.has(E,x)}));const Ho="/firebase-messaging-sw.js",qr="/firebase-cloud-messaging-push-scope",Hc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$u="google.c.a.c_id",Zu="google.c.a.c_l",g_="google.c.a.ts",Na="google.c.a.e";var Vi=(()=>{return(C=Vi||(Vi={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Vi;var C})();function rr(C){const E=new Uint8Array(C);return btoa(String.fromCharCode(...E)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Go(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(x),Y=new Uint8Array(j.length);for(let ie=0;ie<j.length;++ie)Y[ie]=j.charCodeAt(ie);return Y}const zr="fcm_token_details_db",Ch="fcm_token_object_Store";function Th(C){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,P.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(zr))return null;let E=null;return(yield Pe(zr,5,{upgrade:(j=(0,P.Z)(function*(Y,ie,_e,et){var Ke;if(ie<2||!Y.objectStoreNames.contains(Ch))return;const ft=et.objectStore(Ch),Mt=yield ft.index("fcmSenderId").get(C);if(yield ft.clear(),Mt)if(2===ie){const kt=Mt;if(!kt.auth||!kt.p256dh||!kt.endpoint)return;E={token:kt.fcmToken,createTime:null!==(Ke=kt.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:kt.auth,p256dh:kt.p256dh,endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:"string"==typeof kt.vapidKey?kt.vapidKey:rr(kt.vapidKey)}}}else if(3===ie){const kt=Mt;E={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:rr(kt.auth),p256dh:rr(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:rr(kt.vapidKey)}}}else if(4===ie){const kt=Mt;E={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:rr(kt.auth),p256dh:rr(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:rr(kt.vapidKey)}}}}),function(ie,_e,et,Ke){return j.apply(this,arguments)})})).close(),yield qt(zr),yield qt("fcm_vapid_details_db"),yield qt("undefined"),$c(E)?E:null;var j}),Dh.apply(this,arguments)}function $c(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:E}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof E.auth&&E.auth.length>0&&"string"==typeof E.p256dh&&E.p256dh.length>0&&"string"==typeof E.endpoint&&E.endpoint.length>0&&"string"==typeof E.swScope&&E.swScope.length>0&&"string"==typeof E.vapidKey&&E.vapidKey.length>0}const As="firebase-messaging-store";let Dl=null;function Wu(){return Dl||(Dl=Pe("firebase-messaging-database",1,{upgrade:(C,E)=>{0===E&&C.createObjectStore(As)}})),Dl}function El(C){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,P.Z)(function*(C){const E=$o(C),j=yield(yield Wu()).transaction(As).objectStore(As).get(E);if(j)return j;{const Y=yield Th(C.appConfig.senderId);if(Y)return yield Il(C,Y),Y}})).apply(this,arguments)}function Il(C,E){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,P.Z)(function*(C,E){const x=$o(C),Y=(yield Wu()).transaction(As,"readwrite");return yield Y.objectStore(As).put(E,x),yield Y.done,E})).apply(this,arguments)}function Eh(C){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,P.Z)(function*(C){const E=$o(C),j=(yield Wu()).transaction(As,"readwrite");yield j.objectStore(As).delete(E),yield j.done})).apply(this,arguments)}function $o({appConfig:C}){return C.appId}const Qt=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ho(C,E){return In.apply(this,arguments)}function In(){return(In=(0,P.Z)(function*(C,E){const x=yield fo(C),j=po(E),Y={method:"POST",headers:x,body:JSON.stringify(j)};let ie;try{ie=yield(yield fetch(xa(C.appConfig),Y)).json()}catch(_e){throw Qt.create("token-subscribe-failed",{errorInfo:_e?.toString()})}if(ie.error)throw Qt.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw Qt.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Fp(C,E){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,P.Z)(function*(C,E){const x=yield fo(C),j=po(E.subscriptionOptions),Y={method:"PATCH",headers:x,body:JSON.stringify(j)};let ie;try{ie=yield(yield fetch(`${xa(C.appConfig)}/${E.token}`,Y)).json()}catch(_e){throw Qt.create("token-update-failed",{errorInfo:_e?.toString()})}if(ie.error)throw Qt.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw Qt.create("token-update-no-token");return ie.token})).apply(this,arguments)}function Ih(C,E){return Al.apply(this,arguments)}function Al(){return(Al=(0,P.Z)(function*(C,E){const j={method:"DELETE",headers:yield fo(C)};try{const ie=yield(yield fetch(`${xa(C.appConfig)}/${E}`,j)).json();if(ie.error)throw Qt.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw Qt.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function xa({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function fo(C){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,P.Z)(function*({appConfig:C,installations:E}){const x=yield E.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function po({p256dh:C,auth:E,endpoint:x,vapidKey:j}){const Y={web:{endpoint:x,auth:E,p256dh:C}};return j!==Hc&&(Y.web.applicationPubKey=j),Y}const go=6048e5;function Ma(C){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,P.Z)(function*(C){const E=yield Qu(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:E.endpoint,auth:rr(E.getKey("auth")),p256dh:rr(E.getKey("p256dh"))},j=yield El(C.firebaseDependencies);if(j){if(Sh(j.subscriptionOptions,x))return Date.now()>=j.createTime+go?mo(C,{token:j.token,createTime:Date.now(),subscriptionOptions:x}):j.token;try{yield Ih(C.firebaseDependencies,j.token)}catch(Y){console.warn(Y)}return qo(C.firebaseDependencies,x)}return qo(C.firebaseDependencies,x)})).apply(this,arguments)}function Zc(C){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,P.Z)(function*(C){const E=yield El(C.firebaseDependencies);E&&(yield Ih(C.firebaseDependencies,E.token),yield Eh(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function mo(C,E){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,P.Z)(function*(C,E){try{const x=yield Fp(C.firebaseDependencies,E),j=Object.assign(Object.assign({},E),{token:x,createTime:Date.now()});return yield Il(C.firebaseDependencies,j),x}catch(x){throw yield Zc(C),x}})).apply(this,arguments)}function qo(C,E){return _o.apply(this,arguments)}function _o(){return(_o=(0,P.Z)(function*(C,E){const j={token:yield ho(C,E),createTime:Date.now(),subscriptionOptions:E};return yield Il(C,j),j.token})).apply(this,arguments)}function Qu(C,E){return ka.apply(this,arguments)}function ka(){return(ka=(0,P.Z)(function*(C,E){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Go(E)})})).apply(this,arguments)}function Sh(C,E){return E.vapidKey===C.vapidKey&&E.endpoint===C.endpoint&&E.auth===C.auth&&E.p256dh===C.p256dh}function m_(C){const E={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Ah(C,E){if(!E.notification)return;C.notification={};const x=E.notification.title;x&&(C.notification.title=x);const j=E.notification.body;j&&(C.notification.body=j);const Y=E.notification.image;Y&&(C.notification.image=Y);const ie=E.notification.icon;ie&&(C.notification.icon=ie)}(E,C),function Nl(C,E){!E.data||(C.data=E.data)}(E,C),function Lp(C,E){var x,j,Y,ie,_e;if(!(E.fcmOptions||null!==(x=E.notification)&&void 0!==x&&x.click_action))return;C.fcmOptions={};const et=null!==(Y=null===(j=E.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==Y?Y:null===(ie=E.notification)||void 0===ie?void 0:ie.click_action;et&&(C.fcmOptions.link=et);const Ke=null===(_e=E.fcmOptions)||void 0===_e?void 0:_e.analytics_label;Ke&&(C.fcmOptions.analyticsLabel=Ke)}(E,C),E}function Xu(C){return"object"==typeof C&&!!C&&$u in C}function Oa(C,E){const x=[];for(let j=0;j<C.length;j++)x.push(C.charAt(j)),j<E.length&&x.push(E.charAt(j));return x.join("")}function ed(C){return Qt.create("missing-app-config-values",{valueName:C})}Oa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Oa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xl{constructor(E,x,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Up(C){if(!C||!C.options)throw ed("App Configuration Object");if(!C.name)throw ed("App Name");const E=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const j of E)if(!x[j])throw ed(j);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(E);this.firebaseDependencies={app:E,appConfig:Y,installations:x,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Nh(C){return zo.apply(this,arguments)}function zo(){return(zo=(0,P.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Ho,{scope:qr}),C.swRegistration.update().catch(()=>{})}catch(E){throw Qt.create("failed-service-worker-registration",{browserErrorMessage:E?.message})}})).apply(this,arguments)}function Ml(C,E){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,P.Z)(function*(C,E){if(!E&&!C.swRegistration&&(yield Nh(C)),E||!C.swRegistration){if(!(E instanceof ServiceWorkerRegistration))throw Qt.create("invalid-sw-registration");C.swRegistration=E}})).apply(this,arguments)}function qc(C,E){return td.apply(this,arguments)}function td(){return(td=(0,P.Z)(function*(C,E){E?C.vapidKey=E:C.vapidKey||(C.vapidKey=Hc)})).apply(this,arguments)}function zc(){return(zc=(0,P.Z)(function*(C,E){if(!navigator)throw Qt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qt.create("permission-blocked");return yield qc(C,E?.vapidKey),yield Ml(C,E?.serviceWorkerRegistration),Ma(C)})).apply(this,arguments)}function vo(C,E,x){return nd.apply(this,arguments)}function nd(){return(nd=(0,P.Z)(function*(C,E,x){const j=Rl(E);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:x[$u],message_name:x[Zu],message_time:x[g_],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Rl(C){switch(C){case Vi.NOTIFICATION_CLICKED:return"notification_open";case Vi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yo(){return(yo=(0,P.Z)(function*(C,E){const x=E.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===Vi.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(m_(x)):C.onMessageHandler.next(m_(x)));const j=x.data;Xu(j)&&"1"===j[Na]&&(yield vo(C,x.messageType,j))})).apply(this,arguments)}const Ol="@firebase/messaging",id=C=>{const E=new xl(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function kl(C,E){return yo.apply(this,arguments)}(E,x)),E},rd=C=>{const E=C.getProvider("messaging").getImmediate();return{getToken:j=>function xh(C,E){return zc.apply(this,arguments)}(E,j)}};function Rh(){return sd.apply(this,arguments)}function sd(){return(sd=(0,P.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Mh(){(0,oe._registerComponent)(new ve.wA("messaging",id,"PUBLIC")),(0,oe._registerComponent)(new ve.wA("messaging-internal",rd,"PRIVATE")),(0,oe.registerVersion)(Ol,"0.12.4"),(0,oe.registerVersion)(Ol,"0.12.4","esm2017")}();const Yr="analytics",Fl="firebase_id",Kc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ko="https://www.googletagmanager.com/gtag/js",Hn=new me.Yd("@firebase/analytics"),wi=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function od(C){if(!C.startsWith(Ko)){const E=wi.create("invalid-gtag-resource",{gtagURL:C});return Hn.warn(E.message),""}return C}function Ns(C){return Promise.all(C.map(E=>E.catch(x=>x)))}function v_(C,E){const x=function kh(C,E){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(C,E)),x}("firebase-js-sdk-policy",{createScriptURL:od}),j=document.createElement("script"),Y=`${Ko}?l=${C}&id=${E}`;j.src=x?x?.createScriptURL(Y):Y,j.async=!0,document.head.appendChild(j)}function Hp(C,E,x,j,Y,ie){return ad.apply(this,arguments)}function ad(){return(ad=(0,P.Z)(function*(C,E,x,j,Y,ie){const _e=j[Y];try{if(_e)yield E[_e];else{const Ke=(yield Ns(x)).find(ft=>ft.measurementId===Y);Ke&&(yield E[Ke.appId])}}catch(et){Hn.error(et)}C("config",Y,ie)})).apply(this,arguments)}function e0(C,E,x,j,Y){return ld.apply(this,arguments)}function ld(){return(ld=(0,P.Z)(function*(C,E,x,j,Y){try{let ie=[];if(Y&&Y.send_to){let _e=Y.send_to;Array.isArray(_e)||(_e=[_e]);const et=yield Ns(x);for(const Ke of _e){const ft=et.find(kt=>kt.measurementId===Ke),Mt=ft&&E[ft.appId];if(!Mt){ie=[];break}ie.push(Mt)}}0===ie.length&&(ie=Object.values(E)),yield Promise.all(ie),C("event",j,Y||{})}catch(ie){Hn.error(ie)}})).apply(this,arguments)}function n0(C){const E=window.document.getElementsByTagName("script");for(const x of Object.values(E))if(x.src&&x.src.includes(Ko)&&x.src.includes(C))return x;return null}const Ci=new class w_{constructor(E={},x=1e3){this.throttleMetadata=E,this.intervalMillis=x}getThrottleMetadata(E){return this.throttleMetadata[E]}setThrottleMetadata(E,x){this.throttleMetadata[E]=x}deleteThrottleMetadata(E){delete this.throttleMetadata[E]}};function _n(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Bn(C){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,P.Z)(function*(C){var E;const{appId:x,apiKey:j}=C,Y={method:"GET",headers:_n(j)},ie=Kc.replace("{app-id}",x),_e=yield fetch(ie,Y);if(200!==_e.status&&304!==_e.status){let et="";try{const Ke=yield _e.json();null!==(E=Ke.error)&&void 0!==E&&E.message&&(et=Ke.error.message)}catch{}throw wi.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:et})}return _e.json()})).apply(this,arguments)}function Yc(C){return sr.apply(this,arguments)}function sr(){return(sr=(0,P.Z)(function*(C,E=Ci,x){const{appId:j,apiKey:Y,measurementId:ie}=C.options;if(!j)throw wi.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:j};throw wi.create("no-api-key")}const _e=E.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new zs;return setTimeout((0,P.Z)(function*(){et.abort()}),void 0!==x?x:6e4),xs({appId:j,apiKey:Y,measurementId:ie},_e,et,E)})).apply(this,arguments)}function xs(C,E,x){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,P.Z)(function*(C,{throttleEndTimeMillis:E,backoffCount:x},j,Y=Ci){var ie;const{appId:_e,measurementId:et}=C;try{yield Fa(j,E)}catch(Ke){if(et)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${Ke?.message}]`),{appId:_e,measurementId:et};throw Ke}try{const Ke=yield Bn(C);return Y.deleteThrottleMetadata(_e),Ke}catch(Ke){const ft=Ke;if(!yr(ft)){if(Y.deleteThrottleMetadata(_e),et)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:_e,measurementId:et};throw Ke}const Mt=503===Number(null===(ie=ft?.customData)||void 0===ie?void 0:ie.httpStatus)?(0,he.$s)(x,Y.intervalMillis,30):(0,he.$s)(x,Y.intervalMillis),kt={throttleEndTimeMillis:Date.now()+Mt,backoffCount:x+1};return Y.setThrottleMetadata(_e,kt),Hn.debug(`Calling attemptFetch again in ${Mt} millis`),xs(C,kt,j,Y)}})).apply(this,arguments)}function Fa(C,E){return new Promise((x,j)=>{const Y=Math.max(E-Date.now(),0),ie=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(ie),j(wi.create("fetch-throttle",{throttleEndTimeMillis:E}))})})}function yr(C){if(!(C instanceof he.ZR&&C.customData))return!1;const E=Number(C.customData.httpStatus);return 429===E||500===E||503===E||504===E}class zs{constructor(){this.listeners=[]}addEventListener(E){this.listeners.push(E)}abort(){this.listeners.forEach(E=>E())}}let xn,Vl;function Ph(){return(Ph=(0,P.Z)(function*(C,E,x,j,Y){if(Y&&Y.global)C("event",x,j);else{const ie=yield E;C("event",x,Object.assign(Object.assign({},j),{send_to:ie}))}})).apply(this,arguments)}function jl(C){Vl=C}function Yo(C){xn=C}function hd(){return or.apply(this,arguments)}function or(){return(or=(0,P.Z)(function*(){if(!(0,he.hl)())return Hn.warn(wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(C){return Hn.warn(wi.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function Cn(){return(Cn=(0,P.Z)(function*(C,E,x,j,Y,ie,_e){var et;const Ke=Yc(C);Ke.then(ti=>{x[ti.measurementId]=ti.appId,C.options.measurementId&&ti.measurementId!==C.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${ti.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ti=>Hn.error(ti)),E.push(Ke);const ft=hd().then(ti=>{if(ti)return j.getId()}),[Mt,kt]=yield Promise.all([Ke,ft]);n0(ie)||v_(ie,Mt.measurementId),Vl&&(Y("consent","default",Vl),jl(void 0)),Y("js",new Date);const Cr=null!==(et=_e?.config)&&void 0!==et?et:{};return Cr.origin="firebase",Cr.update=!0,null!=kt&&(Cr[Fl]=kt),Y("config",Mt.measurementId,Cr),xn&&(Y("set",xn),Yo(void 0)),Mt.measurementId})).apply(this,arguments)}class Jr{constructor(E){this.app=E}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},Zp=[];const fd={};let Qo,qi,Jo="dataLayer",Ua=!1;function $l(C,E,x){!function Gl(){const C=[];if((0,he.ru)()&&C.push("This is a browser extension environment."),(0,he.zI)()||C.push("Cookies are not available."),C.length>0){const E=C.map((j,Y)=>`(${Y+1}) ${j}`).join(" "),x=wi.create("invalid-analytics-context",{errorInfo:E});Hn.warn(x.message)}}();const j=C.options.appId;if(!j)throw wi.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw wi.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[j])throw wi.create("already-exists",{id:j});if(!Ua){!function wn(C){let E=[];Array.isArray(window[C])?E=window[C]:window[C]=E}(Jo);const{wrappedGtag:ie,gtagCore:_e}=function t0(C,E,x,j,Y){let ie=function(..._e){window[j].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function y_(C,E,x,j){function ie(){return(ie=(0,P.Z)(function*(_e,...et){try{if("event"===_e){const[Ke,ft]=et;yield e0(C,E,x,Ke,ft)}else if("config"===_e){const[Ke,ft]=et;yield Hp(C,E,x,j,Ke,ft)}else if("consent"===_e){const[Ke]=et;C("consent","update",Ke)}else if("get"===_e){const[Ke,ft,Mt]=et;C("get",Ke,ft,Mt)}else if("set"===_e){const[Ke]=et;C("set",Ke)}else C(_e,...et)}catch(Ke){Hn.error(Ke)}})).apply(this,arguments)}return function Y(_e){return ie.apply(this,arguments)}}(ie,C,E,x),{gtagCore:ie,wrappedGtag:window[Y]}}(Pr,Zp,fd,Jo,"gtag");qi=ie,Qo=_e,Ua=!0}return Pr[j]=function $p(C,E,x,j,Y,ie,_e){return Cn.apply(this,arguments)}(C,Zp,fd,E,Qo,Jo,x),new Jr(C)}function Fh(){return To.apply(this,arguments)}function To(){return(To=(0,P.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const Wl="@firebase/analytics";!function Qc(){(0,oe._registerComponent)(new ve.wA(Yr,(E,{options:x})=>$l(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new ve.wA("analytics-internal",function C(E){try{const x=E.getProvider(Yr).getImmediate();return{logEvent:(j,Y,ie)=>function ea(C,E,x,j){C=(0,he.m9)(C),function ht(C,E,x,j,Y){return Ph.apply(this,arguments)}(qi,Pr[C.app.options.appId],E,x,j).catch(Y=>Hn.error(Y))}(x,j,Y,ie)}}catch(x){throw wi.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Wl,"0.10.0"),(0,oe.registerVersion)(Wl,"0.10.0","esm2017")}();var ta=V(4408),ji=V(7565);const md=new class na extends ji.v{}(class Ba extends ta.o{constructor(E,x){super(E,x),this.scheduler=E,this.work=x}schedule(E,x=0){return x>0?super.schedule(E,x):(this.delay=x,this.state=E,this.scheduler.flush(this),this)}execute(E,x){return x>0||this.closed?super.execute(E,x):this._execute(E,x)}requestAsyncId(E,x,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(E,x,j):(E.flush(this),0)}});var r0=V(4986),Xc=V(8505),Do=V(5363),Yl=V(9468);const Eo=new o.GfV("7.4.1"),Va="__angularfire_symbol__analyticsIsSupportedValue",Jl="__angularfire_symbol__analyticsIsSupported",Ql="__angularfire_symbol__remoteConfigIsSupportedValue",Uh="__angularfire_symbol__remoteConfigIsSupported",eu="__angularfire_symbol__messagingIsSupportedValue",zp="__angularfire_symbol__messagingIsSupported";function _d(C,E,x){if(E){if(1===E.length)return E[0];const ie=E.filter(_e=>_e.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[Jl]||(globalThis[Jl]=Fh().then(C=>globalThis[Va]=C).catch(()=>globalThis[Va]=!1)),globalThis[zp]||(globalThis[zp]=Rh().then(C=>globalThis[eu]=C).catch(()=>globalThis[eu]=!1)),globalThis[Uh]||(globalThis[Uh]=$r().then(C=>globalThis[Ql]=C).catch(()=>globalThis[Ql]=!1));const Ks=(C,E)=>{const x=E?[E]:(0,$.C6)(),j=[];return x.forEach(Y=>{Y.container.getProvider(C).instances.forEach(_e=>{j.includes(_e)||j.push(_e)})}),j};function ja(){}class Vh{constructor(E,x=md){this.zone=E,this.delegate=x}now(){return this.delegate.now()}schedule(E,x,j){const Y=this.zone;return this.delegate.schedule(function(_e){Y.runGuarded(()=>{E.apply(this,[_e])})},x,j)}}class Kp{constructor(E){this.zone=E,this.task=null}call(E,x){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ja,{},ja,ja)),x.pipe((0,Xc.b)({next:j,complete:j,error:j})).subscribe(E).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ha=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Vh(Zone.current)),this.insideAngular=x.run(()=>new Vh(Zone.current,r0.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(o.LFG(o.R0b))},C.\u0275prov=o.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function zi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Ga(C){return C.pipe((0,Do.Q)(zi().outsideAngular))}function yd(C){return zi(),function bd(C){return function(x){return(x=x.lift(new Kp(C.ngZone))).pipe((0,Yl.R)(C.outsideAngular),(0,Do.Q)(C.insideAngular))}}(zi())(C)}},1389:(bt,Re,V)=>{V.d(Re,{$:()=>Ho,A:()=>z,D:()=>Le,I:()=>an,J:()=>Gs,L:()=>Ss,N:()=>xi,P:()=>$p,Q:()=>kp,R:()=>br,U:()=>Vo,V:()=>$r,W:()=>vh,X:()=>ju,Y:()=>Hu,Z:()=>Sa,_:()=>Ft,a:()=>bo,a0:()=>Hc,a1:()=>$u,a2:()=>Mi,a3:()=>Ch,a4:()=>Dh,a5:()=>qu,a6:()=>As,a7:()=>Wu,a8:()=>Ku,a9:()=>Yu,aA:()=>de,aB:()=>Ql,aC:()=>li,aD:()=>er,aE:()=>Do,aF:()=>gd,aG:()=>Lh,aH:()=>qn,aL:()=>Wo,aO:()=>fs,aa:()=>Eh,ab:()=>$o,ac:()=>Pp,ad:()=>Fp,ae:()=>Ih,af:()=>xa,ai:()=>go,aj:()=>Ra,ak:()=>Zc,an:()=>Op,ao:()=>Ah,aq:()=>td,ar:()=>Ol,as:()=>ae,at:()=>Ie,au:()=>Ee,av:()=>ke,aw:()=>Cr,ax:()=>Xl,ay:()=>rt,az:()=>Ae,b:()=>Bp,c:()=>qi,d:()=>$l,e:()=>ui,f:()=>Wl,g:()=>na,h:()=>ta,i:()=>b_,j:()=>r0,k:()=>Tr,l:()=>ud,m:()=>CC,p:()=>ye,r:()=>dd,s:()=>wo,u:()=>hd});var o=V(5861),$=V(2090),P=V(6881),oe=V(655),he=V(1877),ve=V(4859);const ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Le=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ne=function Ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new he.Yd("@firebase/auth");function yt(b,...g){be.logLevel<=he.in.ERROR&&be.error(`Auth (${P.SDK_VERSION}): ${b}`,...g)}function ke(b,...g){throw We(b,...g)}function Ae(b,...g){return We(b,...g)}function xe(b,g,_){const T=Object.assign(Object.assign({},Ne()),{[g]:_});return new $.LL("auth","Firebase",T).create(g,{appName:b.name})}function ze(b,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&ke(b,"argument-error"),xe(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(b,...g){if("string"!=typeof b){const _=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=b.name),b._errorFactory.create(_,...T)}return ct.create(b,...g)}function de(b,g,..._){if(!b)throw We(g,..._)}function Je(b){const g="INTERNAL ASSERTION FAILED: "+b;throw yt(g),new Error(g)}function ae(b,g){b||Je(g)}function le(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function we(){return"http:"===fe()||"https:"===fe()}function fe(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class xt{constructor(g,_){this.shortDelay=g,this.longDelay=_,ae(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Xe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(we()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(b,g){ae(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class gn{static initialize(g,_,T){this.fetchImpl=g,_&&(this.headersImpl=_),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const it={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vi=new xt(3e4,6e4);function rn(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Nt(b,g,_,T){return en.apply(this,arguments)}function en(){return(en=(0,o.Z)(function*(b,g,_,T,M={}){return Sn(b,M,(0,o.Z)(function*(){let F={},X={};T&&("GET"===g?X=T:F={body:JSON.stringify(T)});const ge=(0,$.xO)(Object.assign({key:b.config.apiKey},X)).slice(1),qe=yield b._getAdditionalHeaders();return qe["Content-Type"]="application/json",b.languageCode&&(qe["X-Firebase-Locale"]=b.languageCode),gn.fetch()(Mr(b,b.config.apiHost,_,ge),Object.assign({method:g,headers:qe,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Sn(b,g,_){return An.apply(this,arguments)}function An(){return(An=(0,o.Z)(function*(b,g,_){b._canInitEmulator=!1;const T=Object.assign(Object.assign({},it),g);try{const M=new Po(b),F=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const X=yield F.json();if("needConfirmation"in X)throw ls(b,"account-exists-with-different-credential",X);if(F.ok&&!("errorMessage"in X))return X;{const ge=F.ok?X.errorMessage:X.error.message,[qe,ot]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw ls(b,"credential-already-in-use",X);if("EMAIL_EXISTS"===qe)throw ls(b,"email-already-in-use",X);if("USER_DISABLED"===qe)throw ls(b,"user-disabled",X);const wt=T[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw xe(b,wt,ot);ke(b,wt)}}catch(M){if(M instanceof $.ZR)throw M;ke(b,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function On(b,g,_,T){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,o.Z)(function*(b,g,_,T,M={}){const F=yield Nt(b,g,_,T,M);return"mfaPendingCredential"in F&&ke(b,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Mr(b,g,_,T){const M=`${g}${_}?${T}`;return b.config.emulator?dn(b.config,M):`${b.config.apiScheme}://${M}`}class Po{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,T)=>{this.timer=setTimeout(()=>T(Ae(this.auth,"network-request-failed")),vi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ls(b,g,_){const T={appName:b.name};_.email&&(T.email=_.email),_.phoneNumber&&(T.phoneNumber=_.phoneNumber);const M=Ae(b,g,T);return M.customData._tokenResponse=_,M}function Ui(){return(Ui=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Rr(b,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ta(b,g){return ut.apply(this,arguments)}function ut(){return(ut=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Ni(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function us(){return(us=(0,o.Z)(function*(b,g=!1){const _=(0,$.m9)(b),T=yield _.getIdToken(g),M=jn(T);de(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,X=F?.sign_in_provider;return{claims:M,token:T,authTime:Ni(gr(M.auth_time)),issuedAtTime:Ni(gr(M.iat)),expirationTime:Ni(gr(M.exp)),signInProvider:X||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function gr(b){return 1e3*Number(b)}function jn(b){const[g,_,T]=b.split(".");if(void 0===g||void 0===_||void 0===T)return yt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(_);return M?JSON.parse(M):(yt("Failed to decode base64 JWT payload"),null)}catch(M){return yt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function jt(b,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,o.Z)(function*(b,g,_=!1){if(_)return g;try{return yield g}catch(T){throw T instanceof $.ZR&&Dt(T)&&b.auth.currentUser===b&&(yield b.auth.signOut()),T}})).apply(this,arguments)}function Dt({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Yt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),T)}iteration(){var g=this;return(0,o.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class mr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ni(this.lastLoginAt),this.creationTime=Ni(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yi(b){return oi.apply(this,arguments)}function oi(){return(oi=(0,o.Z)(function*(b){var g;const _=b.auth,T=yield b.getIdToken(),M=yield jt(b,Ta(_,{idToken:T}));de(M?.users.length,_,"internal-error");const F=M.users[0];b._notifyReloadListener(F);const X=null!==(g=F.providerUserInfo)&&void 0!==g&&g.length?ds(F.providerUserInfo):[],ge=Bt(b.providerData,X),wt=!!b.isAnonymous&&!(b.email&&F.passwordHash||ge?.length),nn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ge,metadata:new mr(F.createdAt,F.lastLoginAt),isAnonymous:wt};Object.assign(b,nn)})).apply(this,arguments)}function Gn(){return(Gn=(0,o.Z)(function*(b){const g=(0,$.m9)(b);yield yi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Bt(b,g){return[...b.filter(T=>!g.some(M=>M.providerId===T.providerId)),...g]}function ds(b){return b.map(g=>{var{providerId:_}=g,T=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function $n(){return($n=(0,o.Z)(function*(b,g){const _=yield Sn(b,{},(0,o.Z)(function*(){const T=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:F}=b.config,X=Mr(b,M,"/v1/token",`key=${F}`),ge=yield b._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",gn.fetch()(X,{method:"POST",headers:ge,body:T})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){de(g.idToken,"internal-error"),de(typeof g.idToken<"u","internal-error"),de(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Nn(b){const g=jn(b);return de(g,"internal-error"),de(typeof g.exp<"u","internal-error"),de(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var T=this;return(0,o.Z)(function*(){return de(!T.accessToken||T.refreshToken,g,"user-token-expired"),_||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var T=this;return(0,o.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:X}=yield function Jt(b,g){return $n.apply(this,arguments)}(g,_);T.updateTokensAndExpiration(M,F,Number(X))})()}updateTokensAndExpiration(g,_,T){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,_){const{refreshToken:T,accessToken:M,expirationTime:F}=_,X=new bn;return T&&(de("string"==typeof T,"internal-error",{appName:g}),X.refreshToken=T),M&&(de("string"==typeof M,"internal-error",{appName:g}),X.accessToken=M),F&&(de("number"==typeof F,"internal-error",{appName:g}),X.expirationTime=F),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new bn,this.toJSON())}_performRefresh(){return Je("not implemented")}}function ai(b,g){de("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class Un{constructor(g){var{uid:_,auth:T,stsTokenManager:M}=g,F=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=T,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new mr(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,o.Z)(function*(){const T=yield jt(_,_.stsTokenManager.getToken(_.auth,g));return de(T,_.auth,"internal-error"),_.accessToken!==T&&(_.accessToken=T,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),T})()}getIdTokenResult(g){return function Qn(b){return us.apply(this,arguments)}(this,g)}reload(){return function St(b){return Gn.apply(this,arguments)}(this)}_assign(g){this!==g&&(de(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new Un(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var T=this;return(0,o.Z)(function*(){let M=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),M=!0),_&&(yield yi(T)),yield T.auth._persistUserIfCurrent(T),M&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,o.Z)(function*(){const _=yield g.getIdToken();return yield jt(g,function Es(b,g){return Ui.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var T,M,F,X,ge,qe,ot,wt;const nn=null!==(T=_.displayName)&&void 0!==T?T:void 0,Qr=null!==(M=_.email)&&void 0!==M?M:void 0,ia=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,Rs=null!==(X=_.photoURL)&&void 0!==X?X:void 0,Hh=null!==(ge=_.tenantId)&&void 0!==ge?ge:void 0,Dd=null!==(qe=_._redirectEventId)&&void 0!==qe?qe:void 0,Xp=null!==(ot=_.createdAt)&&void 0!==ot?ot:void 0,E_=null!==(wt=_.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:Gh,emailVerified:eg,isAnonymous:$h,providerData:Ed,stsTokenManager:I_}=_;de(Gh&&I_,g,"internal-error");const tg=bn.fromJSON(this.name,I_);de("string"==typeof Gh,g,"internal-error"),ai(nn,g.name),ai(Qr,g.name),de("boolean"==typeof eg,g,"internal-error"),de("boolean"==typeof $h,g,"internal-error"),ai(ia,g.name),ai(Rs,g.name),ai(Hh,g.name),ai(Dd,g.name),ai(Xp,g.name),ai(E_,g.name);const Id=new Un({uid:Gh,auth:g,email:Qr,emailVerified:eg,displayName:nn,isAnonymous:$h,photoURL:Rs,phoneNumber:ia,tenantId:Hh,stsTokenManager:tg,createdAt:Xp,lastLoginAt:E_});return Ed&&Array.isArray(Ed)&&(Id.providerData=Ed.map(ng=>Object.assign({},ng))),Dd&&(Id._redirectEventId=Dd),Id}static _fromIdTokenResponse(g,_,T=!1){return(0,o.Z)(function*(){const M=new bn;M.updateFromServerResponse(_);const F=new Un({uid:_.localId,auth:g,stsTokenManager:M,isAnonymous:T});return yield yi(F),F})()}}const _r=new Map;function li(b){ae(b instanceof Function,"Expected a class definition");let g=_r.get(b);return g?(ae(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,_r.set(b,g),g)}const xi=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,T){var M=this;return(0,o.Z)(function*(){M.storage[_]=T})()}_get(_){var T=this;return(0,o.Z)(function*(){const M=T.storage[_];return void 0===M?null:M})()}_remove(_){var T=this;return(0,o.Z)(function*(){delete T.storage[_]})()}_addListener(_,T){}_removeListener(_,T){}}return b.type="NONE",b})();function er(b,g,_){return`firebase:${b}:${g}:${_}`}class q{constructor(g,_,T){this.persistence=g,this.auth=_,this.userKey=T;const{config:M,name:F}=this.auth;this.fullUserKey=er(this.userKey,M.apiKey,F),this.fullPersistenceKey=er("persistence",M.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,o.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Un._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,o.Z)(function*(){if(_.persistence===g)return;const T=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,T?_.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,T="authUser"){return(0,o.Z)(function*(){if(!_.length)return new q(li(xi),g,T);const M=(yield Promise.all(_.map(function(){var ot=(0,o.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let F=M[0]||li(xi);const X=er(T,g.config.apiKey,g.name);let ge=null;for(const ot of _)try{const wt=yield ot._get(X);if(wt){const nn=Un._fromJSON(g,wt);ot!==F&&(ge=nn),F=ot;break}}catch{}const qe=M.filter(ot=>ot._shouldAllowMigration);return F._shouldAllowMigration&&qe.length?(F=qe[0],ge&&(yield F._set(X,ge.toJSON())),yield Promise.all(_.map(function(){var ot=(0,o.Z)(function*(wt){if(wt!==F)try{yield wt._remove(X)}catch{}});return function(wt){return ot.apply(this,arguments)}}())),new q(F,g,T)):new q(F,g,T)})()}}function Z(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Q(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(U(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ye(g))return"Blackberry";if(vt(g))return"Webos";if(L(g))return"Safari";if((g.includes("chrome/")||k(g))&&!g.includes("edge/"))return"Chrome";if(Ee(g))return"Android";{const T=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function U(b=(0,$.z$)()){return/firefox\//i.test(b)}function L(b=(0,$.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function k(b=(0,$.z$)()){return/crios\//i.test(b)}function Q(b=(0,$.z$)()){return/iemobile/i.test(b)}function Ee(b=(0,$.z$)()){return/android/i.test(b)}function Ye(b=(0,$.z$)()){return/blackberry/i.test(b)}function vt(b=(0,$.z$)()){return/webos/i.test(b)}function Ie(b=(0,$.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function rt(b=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Rt(b=(0,$.z$)()){return Ie(b)||Ee(b)||vt(b)||Ye(b)||/windows phone/i.test(b)||Q(b)}function tr(b,g=[]){let _;switch(b){case"Browser":_=Z((0,$.z$)());break;case"Worker":_=`${Z((0,$.z$)())}-${b}`;break;default:_=b}const T=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${T}`}function se(){return(se=(0,o.Z)(function*(b){return(yield Nt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ue(b,g){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,o.Z)(function*(b,g){return Nt(b,"GET","/v2/recaptchaConfig",rn(b,g))})).apply(this,arguments)}function At(b){return void 0!==b&&void 0!==b.getResponse}function Lt(b){return void 0!==b&&void 0!==b.enterprise}class mn{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Zt(b){return new Promise((g,_)=>{const T=document.createElement("script");T.setAttribute("src",b),T.onload=g,T.onerror=M=>{const F=Ae("internal-error");F.customData=M,_(F)},T.type="text/javascript",T.charset="UTF-8",function Zn(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(T)})}function nr(b){return`__${b}${Math.floor(1e6*Math.random())}`}class Da{constructor(g){this.type="recaptcha-enterprise",this.auth=qn(g)}verify(g="verify",_=!1){var T=this;return(0,o.Z)(function*(){function F(){return F=(0,o.Z)(function*(ge){if(!_){if(null==ge.tenantId&&null!=ge._agentRecaptchaConfig)return ge._agentRecaptchaConfig.siteKey;if(null!=ge.tenantId&&void 0!==ge._tenantRecaptchaConfigs[ge.tenantId])return ge._tenantRecaptchaConfigs[ge.tenantId].siteKey}return new Promise(function(){var qe=(0,o.Z)(function*(ot,wt){Ue(ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nn=>{if(void 0!==nn.recaptchaKey){const Qr=new mn(nn);return null==ge.tenantId?ge._agentRecaptchaConfig=Qr:ge._tenantRecaptchaConfigs[ge.tenantId]=Qr,ot(Qr.siteKey)}wt(new Error("recaptcha Enterprise site key undefined"))}).catch(nn=>{wt(nn)})});return function(ot,wt){return qe.apply(this,arguments)}}())}),F.apply(this,arguments)}function X(ge,qe,ot){const wt=window.grecaptcha;Lt(wt)?wt.enterprise.ready(()=>{wt.enterprise.execute(ge,{action:g}).then(nn=>{qe(nn)}).catch(()=>{qe("NO_RECAPTCHA")})}):ot(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ge,qe)=>{(function M(ge){return F.apply(this,arguments)})(T.auth).then(ot=>{if(!_&&Lt(window.grecaptcha))X(ot,ge,qe);else{if(typeof window>"u")return void qe(new Error("RecaptchaVerifier is only supported in browser"));Zt("https://www.google.com/recaptcha/enterprise.js?render="+ot).then(()=>{X(ot,ge,qe)}).catch(wt=>{qe(wt)})}}).catch(ot=>{qe(ot)})})})()}}function on(b,g,_){return pl.apply(this,arguments)}function pl(){return(pl=(0,o.Z)(function*(b,g,_,T=!1){const M=new Da(b);let F;try{F=yield M.verify(_)}catch{F=yield M.verify(_,!0)}const X=Object.assign({},g);return Object.assign(X,T?{captchaResp:F}:{captchaResponse:F}),Object.assign(X,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(X,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),X})).apply(this,arguments)}class dh{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const T=F=>new Promise((X,ge)=>{try{X(g(F))}catch(qe){ge(qe)}});T.onAbort=_,this.queue.push(T);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===g)return;const T=[];try{for(const M of _.queue)yield M(g),M.onAbort&&T.push(M.onAbort)}catch(M){T.reverse();for(const F of T)try{F()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class Fo{constructor(g,_,T,M){this.app=g,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=T,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bi(this),this.idTokenSubscription=new bi(this),this.beforeStateQueue=new dh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,_){var T=this;return _&&(this._popupRedirectResolver=li(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var M,F;if(!T._deleted&&(T.persistenceManager=yield q.create(T,g),!T._deleted)){if(null!==(M=T._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(_),T.lastNotifiedUid=(null===(F=T.currentUser)||void 0===F?void 0:F.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,o.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,o.Z)(function*(){var T;const M=yield _.assertedPersistence.getCurrentUser();let F=M,X=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ge=null===(T=_.redirectUser)||void 0===T?void 0:T._redirectEventId,qe=F?._redirectEventId,ot=yield _.tryRedirectSignIn(g);(!ge||ge===qe)&&ot?.user&&(F=ot.user,X=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(X)try{yield _.beforeStateQueue.runMiddleware(F)}catch(ge){F=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ge))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return de(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(g){var _=this;return(0,o.Z)(function*(){let T=null;try{T=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,o.Z)(function*(){try{yield yi(g)}catch(T){if("auth/network-request-failed"!==T?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ge(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,o.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,o.Z)(function*(){const T=g?(0,$.m9)(g):null;return T&&de(T.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(T&&T._clone(_))})()}_updateCurrentUser(g,_=!1){var T=this;return(0,o.Z)(function*(){if(!T._deleted)return g&&de(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),_||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,o.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,o.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(li(g))}))}initializeRecaptchaConfig(){var g=this;return(0,o.Z)(function*(){const _=yield Ue(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new mn(_);null==g.tenantId?g._agentRecaptchaConfig=T:g._tenantRecaptchaConfigs[g.tenantId]=T,T.emailPasswordEnabled&&new Da(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,T){return this.registerStateListener(this.authStateSubscription,g,_,T)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,T){return this.registerStateListener(this.idTokenSubscription,g,_,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var T=this;return(0,o.Z)(function*(){const M=yield T.getOrInitRedirectPersistenceManager(_);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const T=g&&li(g)||_._popupRedirectResolver;de(T,_,"argument-error"),_.redirectPersistenceManager=yield q.create(_,[li(T._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,o.Z)(function*(){var T,M;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(T=_._currentUser)||void 0===T?void 0:T._redirectEventId)===g?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,o.Z)(function*(){if(g===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,T,M){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return de(X,this,"internal-error"),X.then(()=>F(this.currentUser)),"function"==typeof _?g.addObserver(_,T,M):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=tr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,o.Z)(function*(){var _;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();M&&(T["X-Firebase-Client"]=M);const F=yield g._getAppCheckToken();return F&&(T["X-Firebase-AppCheck"]=F),T})()}_getAppCheckToken(){var g=this;return(0,o.Z)(function*(){var _;const T=yield null===(_=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return T?.error&&function Ct(b,...g){be.logLevel<=he.in.WARN&&be.warn(`Auth (${P.SDK_VERSION}): ${b}`,...g)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function qn(b){return(0,$.m9)(b)}class bi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function an(b,g,_){const T=qn(b);de(T._canInitEmulator,T,"emulator-config-failed"),de(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const M=!!_?.disableWarnings,F=hh(g),{host:X,port:ge}=function Bi(b){const g=hh(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!_)return{host:"",port:null};const T=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(T);if(M){const F=M[1];return{host:F,port:ir(T.substr(F.length+1))}}{const[F,X]=T.split(":");return{host:F,port:ir(X)}}}(g);T.config.emulator={url:`${F}//${X}${null===ge?"":`:${ge}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:X,port:ge,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function gl(){function b(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function hh(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function ir(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class Gs{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Je("not implemented")}_getIdTokenResponse(g){return Je("not implemented")}_linkToIdToken(g,_){return Je("not implemented")}_getReauthenticationResolver(g){return Je("not implemented")}}function ml(b,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:resetPassword",rn(b,g))})).apply(this,arguments)}function _l(b,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ap(b,g){return Is.apply(this,arguments)}function Is(){return(Is=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",rn(b,g))})).apply(this,arguments)}function Np(b,g){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signInWithPassword",rn(b,g))})).apply(this,arguments)}function Ou(b,g){return fh.apply(this,arguments)}function fh(){return(fh=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:sendOobCode",rn(b,g))})).apply(this,arguments)}function f_(b,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,o.Z)(function*(b,g){return Ou(b,g)})).apply(this,arguments)}function ph(b,g){return kc.apply(this,arguments)}function kc(){return(kc=(0,o.Z)(function*(b,g){return Ou(b,g)})).apply(this,arguments)}function xp(b,g){return gh.apply(this,arguments)}function gh(){return(gh=(0,o.Z)(function*(b,g){return Ou(b,g)})).apply(this,arguments)}function mh(b,g){return _h.apply(this,arguments)}function _h(){return(_h=(0,o.Z)(function*(b,g){return Ou(b,g)})).apply(this,arguments)}function Oc(){return(Oc=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,g))})).apply(this,arguments)}function Pc(){return(Pc=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signInWithEmailLink",rn(b,g))})).apply(this,arguments)}class Fu extends Gs{constructor(g,_,T,M=null){super("password",T),this._email=g,this._password=_,this._tenantId=M}static _fromEmailAndPassword(g,_){return new Fu(g,_,"password")}static _fromEmailAndCode(g,_,T=null){return new Fu(g,_,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,o.Z)(function*(){var T;switch(_.signInMethod){case"password":const M={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=g._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const F=yield on(g,M,"signInWithPassword");return Np(g,F)}return Np(g,M).catch(function(){var F=(0,o.Z)(function*(X){if("auth/missing-recaptcha-token"===X.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ge=yield on(g,M,"signInWithPassword");return Np(g,ge)}return Promise.reject(X)});return function(X){return F.apply(this,arguments)}}());case"emailLink":return function p_(b,g){return Oc.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:ke(g,"internal-error")}})()}_linkToIdToken(g,_){var T=this;return(0,o.Z)(function*(){switch(T.signInMethod){case"password":return _l(g,{idToken:_,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Mp(b,g){return Pc.apply(this,arguments)}(g,{idToken:_,email:T._email,oobCode:T._password});default:ke(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Uo(b,g){return vl.apply(this,arguments)}function vl(){return(vl=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signInWithIdp",rn(b,g))})).apply(this,arguments)}class Ss extends Gs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ss(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):ke("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:M}=_,F=(0,oe._T)(_,["providerId","signInMethod"]);if(!T||!M)return null;const X=new Ss(T,M);return X.idToken=F.idToken||void 0,X.accessToken=F.accessToken||void 0,X.secret=F.secret,X.nonce=F.nonce,X.pendingToken=F.pendingToken||null,X}_getIdTokenResponse(g){return Uo(g,this.buildRequest())}_linkToIdToken(g,_){const T=this.buildRequest();return T.idToken=_,Uo(g,T)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Uo(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Lu(b,g){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:sendVerificationCode",rn(b,g))})).apply(this,arguments)}function yl(){return(yl=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,g))})).apply(this,arguments)}function Bu(){return(Bu=(0,o.Z)(function*(b,g){const _=yield On(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,g));if(_.temporaryProof)throw ls(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Or={USER_NOT_FOUND:"user-not-found"};function Vu(){return(Vu=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signInWithPhoneNumber",rn(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Or)})).apply(this,arguments)}class Xn extends Gs{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Xn({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Xn({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Uu(b,g){return yl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function bl(b,g){return Bu.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Lc(b,g){return Vu.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:T,verificationCode:M}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:T,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:T,phoneNumber:M,temporaryProof:F}=g;return T||_||M||F?new Xn({verificationId:_,verificationCode:T,phoneNumber:M,temporaryProof:F}):null}}class uo{constructor(g){var _,T,M,F,X,ge;const qe=(0,$.zd)((0,$.pd)(g)),ot=null!==(_=qe.apiKey)&&void 0!==_?_:null,wt=null!==(T=qe.oobCode)&&void 0!==T?T:null,nn=function $s(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=qe.mode)&&void 0!==M?M:null);de(ot&&wt&&nn,"argument-error"),this.apiKey=ot,this.operation=nn,this.code=wt,this.continueUrl=null!==(F=qe.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(X=qe.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(ge=qe.tenantId)&&void 0!==ge?ge:null}static parseLink(g){const _=function Rp(b){const g=(0,$.zd)((0,$.pd)(b)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,T=(0,$.zd)((0,$.pd)(b)).deep_link_id;return(T?(0,$.zd)((0,$.pd)(T)).link:null)||T||_||g||b}(g);try{return new uo(_)}catch{return null}}}let kp=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,T){return Fu._fromEmailAndPassword(_,T)}static credentialWithLink(_,T){const M=uo.parseLink(T);return de(M,"argument-error"),Fu._fromEmailAndCode(_,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class En{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ia extends En{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ju extends Ia{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return de("providerId"in _&&"signInMethod"in _,"argument-error"),Ss._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return de(g.idToken||g.accessToken,"argument-error"),Ss._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ju.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ju.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:T,oauthTokenSecret:M,pendingToken:F,nonce:X,providerId:ge}=g;if(!T&&!M&&!_&&!F||!ge)return null;try{return new ju(ge)._credential({idToken:_,accessToken:T,nonce:X,pendingToken:F})}catch{return null}}}let Vo=(()=>{class b extends Ia{constructor(){super("facebook.com")}static credential(_){return Ss._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),$r=(()=>{class b extends Ia{constructor(){super("google.com"),this.addScope("profile")}static credential(_,T){return Ss._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:T})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:T,oauthAccessToken:M}=_;if(!T&&!M)return null;try{return b.credential(T,M)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),vh=(()=>{class b extends Ia{constructor(){super("github.com")}static credential(_){return Ss._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class fs extends Gs{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Uo(g,this.buildRequest())}_linkToIdToken(g,_){const T=this.buildRequest();return T.idToken=_,Uo(g,T)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Uo(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:M,pendingToken:F}=_;return T&&M&&F&&T===M?new fs(T,F):null}static _create(g,_){return new fs(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Hu extends En{constructor(g){de(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Hu.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Hu.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=fs.fromJSON(g);return de(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:T}=g;if(!_||!T)return null;try{return fs._create(T,_)}catch{return null}}}let Sa=(()=>{class b extends Ia{constructor(){super("twitter.com")}static credential(_,T){return Ss._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:T})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:T,oauthTokenSecret:M}=_;if(!T||!M)return null;try{return b.credential(T,M)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Bc(b,g){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signUp",rn(b,g))})).apply(this,arguments)}class vr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,T,M=!1){return(0,o.Z)(function*(){const F=yield Un._fromIdTokenResponse(g,T,M),X=Aa(T);return new vr({user:F,providerId:X,_tokenResponse:T,operationType:_})})()}static _forOperation(g,_,T){return(0,o.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const M=Aa(T);return new vr({user:g,providerId:M,_tokenResponse:T,operationType:_})})()}}function Aa(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Ft(b){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,o.Z)(function*(b){var g;const _=qn(b);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new vr({user:_.currentUser,providerId:null,operationType:"signIn"});const T=yield Bc(_,{returnSecureToken:!0}),M=yield vr._fromIdTokenResponse(_,"signIn",T,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class yh extends $.ZR{constructor(g,_,T,M){var F;super(_.code,_.message),this.operationType=T,this.user=M,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:g.name,tenantId:null!==(F=g.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,_,T,M){return new yh(g,_,T,M)}}function Vc(b,g,_,T){return("reauthenticate"===g?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?yh._fromErrorAndOperation(b,F,g,T):F})}function bh(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Op(b,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,o.Z)(function*(b,g){const _=(0,$.m9)(b);yield Pe(!0,_,g);const{providerUserInfo:T}=yield Rr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),M=bh(T||[]);return _.providerData=_.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ps(b,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,o.Z)(function*(b,g,_=!1){const T=yield jt(b,g._linkToIdToken(b.auth,yield b.getIdToken()),_);return vr._forOperation(b,"link",T)})).apply(this,arguments)}function Pe(b,g,_){return qt.apply(this,arguments)}function qt(){return(qt=(0,o.Z)(function*(b,g,_){yield yi(g);const M=!1===b?"provider-already-linked":"no-such-provider";de(bh(g.providerData).has(_)===b,g.auth,M)})).apply(this,arguments)}function wh(b,g){return jc.apply(this,arguments)}function jc(){return(jc=(0,o.Z)(function*(b,g,_=!1){const{auth:T}=b,M="reauthenticate";try{const F=yield jt(b,Vc(T,M,g,b),_);de(F.idToken,T,"internal-error");const X=jn(F.idToken);de(X,T,"internal-error");const{sub:ge}=X;return de(b.uid===ge,T,"user-mismatch"),vr._forOperation(b,M,F)}catch(F){throw"auth/user-not-found"===F?.code&&ke(T,"user-mismatch"),F}})).apply(this,arguments)}function ei(b,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,o.Z)(function*(b,g,_=!1){const T="signIn",M=yield Vc(b,T,g),F=yield vr._fromIdTokenResponse(b,T,M);return _||(yield b._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Ho(b,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,o.Z)(function*(b,g){return ei(qn(b),g)})).apply(this,arguments)}function Hc(b,g){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,o.Z)(function*(b,g){const _=(0,$.m9)(b);return yield Pe(!1,_,g.providerId),ps(_,g)})).apply(this,arguments)}function $u(b,g){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,o.Z)(function*(b,g){return wh((0,$.m9)(b),g)})).apply(this,arguments)}function g_(b,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,o.Z)(function*(b,g){return On(b,"POST","/v1/accounts:signInWithCustomToken",rn(b,g))})).apply(this,arguments)}function Mi(b,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,o.Z)(function*(b,g){const _=qn(b),T=yield g_(_,{token:g,returnSecureToken:!0}),M=yield vr._fromIdTokenResponse(_,"signIn",T);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class rr{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Go._fromServerResponse(g,_):"totpInfo"in _?zr._fromServerResponse(g,_):ke(g,"internal-error")}}class Go extends rr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Go(_)}}class zr extends rr{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new zr(_)}}function Tl(b,g,_){var T;de((null===(T=_.url)||void 0===T?void 0:T.length)>0,b,"invalid-continue-uri"),de(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(de(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(de(_.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Ch(b,g,_){return Th.apply(this,arguments)}function Th(){return Th=(0,o.Z)(function*(b,g,_){var T;const M=qn(b),F={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const X=yield on(M,F,"getOobCode",!0);_&&Tl(M,X,_),yield ph(M,X)}else _&&Tl(M,F,_),yield ph(M,F).catch(function(){var X=(0,o.Z)(function*(ge){if("auth/missing-recaptcha-token"!==ge.code)return Promise.reject(ge);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const qe=yield on(M,F,"getOobCode",!0);_&&Tl(M,qe,_),yield ph(M,qe)}});return function(ge){return X.apply(this,arguments)}}())}),Th.apply(this,arguments)}function Dh(b,g,_){return $c.apply(this,arguments)}function $c(){return($c=(0,o.Z)(function*(b,g,_){yield ml((0,$.m9)(b),{oobCode:g,newPassword:_})})).apply(this,arguments)}function qu(b,g){return zu.apply(this,arguments)}function zu(){return(zu=(0,o.Z)(function*(b,g){yield Ap((0,$.m9)(b),{oobCode:g})})).apply(this,arguments)}function As(b,g){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,o.Z)(function*(b,g){const _=(0,$.m9)(b),T=yield ml(_,{oobCode:g}),M=T.requestType;switch(de(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(T.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(T.mfaInfo,_,"internal-error");default:de(T.email,_,"internal-error")}let F=null;return T.mfaInfo&&(F=rr._fromServerResponse(qn(_),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function Wu(b,g){return El.apply(this,arguments)}function El(){return(El=(0,o.Z)(function*(b,g){const{data:_}=yield As((0,$.m9)(b),g);return _.email})).apply(this,arguments)}function Ku(b,g,_){return Il.apply(this,arguments)}function Il(){return Il=(0,o.Z)(function*(b,g,_){var T;const M=qn(b),F={returnSecureToken:!0,email:g,password:_,clientType:"CLIENT_TYPE_WEB"};let X;if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const ot=yield on(M,F,"signUpPassword");X=Bc(M,ot)}else X=Bc(M,F).catch(function(){var ot=(0,o.Z)(function*(wt){if("auth/missing-recaptcha-token"===wt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nn=yield on(M,F,"signUpPassword");return Bc(M,nn)}return Promise.reject(wt)});return function(wt){return ot.apply(this,arguments)}}());const ge=yield X.catch(ot=>Promise.reject(ot)),qe=yield vr._fromIdTokenResponse(M,"signIn",ge);return yield M._updateCurrentUser(qe.user),qe}),Il.apply(this,arguments)}function Yu(b,g,_){return Ho((0,$.m9)(b),kp.credential(g,_))}function Eh(b,g,_){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,o.Z)(function*(b,g,_){var T;const M=qn(b),F={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function X(ge,qe){de(qe.handleCodeInApp,M,"argument-error"),qe&&Tl(M,ge,qe)}if(null!==(T=M._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const ge=yield on(M,F,"getOobCode",!0);X(ge,_),yield xp(M,ge)}else X(F,_),yield xp(M,F).catch(function(){var ge=(0,o.Z)(function*(qe){if("auth/missing-recaptcha-token"!==qe.code)return Promise.reject(qe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ot=yield on(M,F,"getOobCode",!0);X(ot,_),yield xp(M,ot)}});return function(qe){return ge.apply(this,arguments)}}())}),Zs.apply(this,arguments)}function $o(b,g){return"EMAIL_SIGNIN"===uo.parseLink(g)?.operation}function Pp(b,g,_){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b),M=kp.credentialWithLink(g,_||le());return de(M._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Ho(T,M)})).apply(this,arguments)}function ho(b,g){return In.apply(this,arguments)}function In(){return(In=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:createAuthUri",rn(b,g))})).apply(this,arguments)}function Fp(b,g){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,o.Z)(function*(b,g){const T={identifier:g,continueUri:we()?le():"http://localhost"},{signinMethods:M}=yield ho((0,$.m9)(b),T);return M||[]})).apply(this,arguments)}function Ih(b,g){return Al.apply(this,arguments)}function Al(){return(Al=(0,o.Z)(function*(b,g){const _=(0,$.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Tl(_.auth,M,g);const{email:F}=yield f_(_.auth,M);F!==b.email&&(yield b.reload())})).apply(this,arguments)}function xa(b,g,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};_&&Tl(T.auth,F,_);const{email:X}=yield mh(T.auth,F);X!==b.email&&(yield b.reload())})).apply(this,arguments)}function Zo(b,g){return po.apply(this,arguments)}function po(){return(po=(0,o.Z)(function*(b,g){return Nt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function go(b,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,o.Z)(function*(b,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const T=(0,$.m9)(b),F={idToken:yield T.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},X=yield jt(T,Zo(T.auth,F));T.displayName=X.displayName||null,T.photoURL=X.photoUrl||null;const ge=T.providerData.find(({providerId:qe})=>"password"===qe);ge&&(ge.displayName=T.displayName,ge.photoURL=T.photoURL),yield T._updateTokensIfNecessary(X)})).apply(this,arguments)}function Ra(b,g){return Wr((0,$.m9)(b),g,null)}function Zc(b,g){return Wr((0,$.m9)(b),null,g)}function Wr(b,g,_){return mo.apply(this,arguments)}function mo(){return(mo=(0,o.Z)(function*(b,g,_){const{auth:T}=b,F={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(F.email=g),_&&(F.password=_);const X=yield jt(b,_l(T,F));yield b._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class qo{constructor(g,_,T={}){this.isNewUser=g,this.providerId=_,this.profile=T}}class _o extends qo{constructor(g,_,T,M){super(g,_,T),this.username=M}}class Qu extends qo{constructor(g,_){super(g,"facebook.com",_)}}class ka extends _o{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Sh extends qo{constructor(g,_){super(g,"google.com",_)}}class m_ extends _o{constructor(g,_,T){super(g,"twitter.com",_,T)}}function Ah(b){const{user:g,_tokenResponse:_}=b;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ju(b){var g,_;if(!b)return null;const{providerId:T}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},F=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!T&&b?.idToken){const X=null===(_=null===(g=jn(b.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new qo(F,"anonymous"!==X&&"custom"!==X?X:null)}if(!T)return null;switch(T){case"facebook.com":return new Qu(F,M);case"github.com":return new ka(F,M);case"google.com":return new Sh(F,M);case"twitter.com":return new m_(F,M,b.screenName||null);case"custom":case"anonymous":return new qo(F,null);default:return new qo(F,T,M)}}(_)}class Kr{constructor(g,_,T){this.type=g,this.credential=_,this.auth=T}static _fromIdtoken(g,_){return new Kr("enroll",g,_)}static _fromMfaPendingCredential(g){return new Kr("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,T;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Kr._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(T=g.multiFactorSession)&&void 0!==T&&T.idToken)return Kr._fromIdtoken(g.multiFactorSession.idToken)}return null}}class qc{constructor(g,_,T){this.session=g,this.hints=_,this.signInResolver=T}static _fromError(g,_){const T=qn(g),M=_.customData._serverResponse,F=(M.mfaInfo||[]).map(ge=>rr._fromServerResponse(T,ge));de(M.mfaPendingCredential,T,"internal-error");const X=Kr._fromMfaPendingCredential(M.mfaPendingCredential);return new qc(X,F,function(){var ge=(0,o.Z)(function*(qe){const ot=yield qe._process(T,X);delete M.mfaInfo,delete M.mfaPendingCredential;const wt=Object.assign(Object.assign({},M),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(_.operationType){case"signIn":const nn=yield vr._fromIdTokenResponse(T,_.operationType,wt);return yield T._updateCurrentUser(nn.user),nn;case"reauthenticate":return de(_.user,T,"internal-error"),vr._forOperation(_.user,_.operationType,wt);default:ke(T,"internal-error")}});return function(qe){return ge.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,o.Z)(function*(){return _.signInResolver(g)})()}}function td(b,g){var _;const T=(0,$.m9)(b),M=g;return de(g.customData.operationType,T,"argument-error"),de(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,T,"argument-error"),qc._fromError(T,M)}function xh(b,g){return Nt(b,"POST","/v2/accounts/mfaEnrollment:start",rn(b,g))}class kl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(T=>rr._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new kl(g)}getSession(){var g=this;return(0,o.Z)(function*(){return Kr._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var T=this;return(0,o.Z)(function*(){const M=g,F=yield T.getSession(),X=yield jt(T.user,M._process(T.user.auth,F,_));return yield T.user._updateTokensIfNecessary(X),T.user.reload()})()}unenroll(g){var _=this;return(0,o.Z)(function*(){const T="string"==typeof g?g:g.uid,M=yield _.user.getIdToken();try{const F=yield jt(_.user,function Rl(b,g){return Nt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(b,g))}(_.user.auth,{idToken:M,mfaEnrollmentId:T}));_.enrolledFactors=_.enrolledFactors.filter(({uid:X})=>X!==T),yield _.user._updateTokensIfNecessary(F),yield _.user.reload()}catch(F){throw F}})()}}const yo=new WeakMap;function Ol(b){const g=(0,$.m9)(b);return yo.has(g)||yo.set(g,kl._fromUser(g)),yo.get(g)}const qs="__sak";class id{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(qs,"1"),this.storage.removeItem(qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bp=(()=>{class b extends id{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,T)=>this.onStorageEvent(_,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rd(){const b=(0,$.z$)();return L(b)||Ie(b)}()&&function tn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Rt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const T of Object.keys(this.listeners)){const M=this.storage.getItem(T),F=this.localCache[T];M!==F&&_(T,F,M)}}onStorageEvent(_,T=!1){if(!_.key)return void this.forAllChangedKeys((ge,qe,ot)=>{this.notifyListeners(ge,ot)});const M=_.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(M);if(_.newValue!==ge)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!T)return}const F=()=>{const ge=this.storage.getItem(M);!T&&this.localCache[M]===ge||this.notifyListeners(M,ge)},X=this.storage.getItem(M);!function $t(){return(0,$.w1)()&&10===document.documentMode}()||X===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,T){this.localCache[_]=T;const M=this.listeners[_];if(M)for(const F of Array.from(M))F(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,T,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:T,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(T)}_removeListener(_,T){this.listeners[_]&&(this.listeners[_].delete(T),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,T){var M=()=>super._set,F=this;return(0,o.Z)(function*(){yield M().call(F,_,T),F.localCache[_]=JSON.stringify(T)})()}_get(_){var T=()=>super._get,M=this;return(0,o.Z)(function*(){const F=yield T().call(M,_);return M.localCache[_]=JSON.stringify(F),F})()}_remove(_){var T=()=>super._remove,M=this;return(0,o.Z)(function*(){yield T().call(M,_),delete M.localCache[_]})()}}return b.type="LOCAL",b})(),bo=(()=>{class b extends id{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,T){}_removeListener(_,T){}}return b.type="SESSION",b})();let Vp=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const T=this.receivers.find(F=>F.isListeningto(_));if(T)return T;const M=new b(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var T=this;return(0,o.Z)(function*(){const M=_,{eventId:F,eventType:X,data:ge}=M.data,qe=T.handlersMap[X];if(!qe?.size)return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:X});const ot=Array.from(qe).map(function(){var nn=(0,o.Z)(function*(Qr){return Qr(M.origin,ge)});return function(Qr){return nn.apply(this,arguments)}}()),wt=yield function __(b){return Promise.all(b.map(function(){var g=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(T){return{fulfilled:!1,reason:T}}});return function(_){return g.apply(this,arguments)}}()))}(ot);M.ports[0].postMessage({status:"done",eventId:F,eventType:X,response:wt})})()}_subscribe(_,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(T)}_unsubscribe(_,T){this.handlersMap[_]&&T&&this.handlersMap[_].delete(T),(!T||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Wo(b="",g=10){let _="";for(let T=0;T<g;T++)_+=Math.floor(10*Math.random());return b+_}class Wc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,T=50){var M=this;return(0,o.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let X,ge;return new Promise((qe,ot)=>{const wt=Wo("",20);F.port1.start();const nn=setTimeout(()=>{ot(new Error("unsupported_event"))},T);ge={messageChannel:F,onMessage(Qr){const ia=Qr;if(ia.data.eventId===wt)switch(ia.data.status){case"ack":clearTimeout(nn),X=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),qe(ia.data.response);break;default:clearTimeout(nn),clearTimeout(X),ot(new Error("invalid_response"))}}},M.handlers.add(ge),F.port1.addEventListener("message",ge.onMessage),M.target.postMessage({eventType:g,eventId:wt,data:_},[F.port2])}).finally(()=>{ge&&M.removeMessageHandler(ge)})})()}}function ci(){return window}function Fl(){return typeof ci().WorkerGlobalScope<"u"&&"function"==typeof ci().importScripts}function Pa(){return(Pa=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hn="firebaseLocalStorageDb",wi="firebaseLocalStorage",od="fbase_key";class Ns{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function kh(b,g){return b.transaction([wi],g?"readwrite":"readonly").objectStore(wi)}function wn(){const b=indexedDB.open(Hn,1);return new Promise((g,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const T=b.result;try{T.createObjectStore(wi,{keyPath:od})}catch(M){_(M)}}),b.addEventListener("success",(0,o.Z)(function*(){const T=b.result;T.objectStoreNames.contains(wi)?g(T):(T.close(),yield function v_(){const b=indexedDB.deleteDatabase(Hn);return new Ns(b).toPromise()}(),g(yield wn()))}))})}function Hp(b,g,_){return ad.apply(this,arguments)}function ad(){return(ad=(0,o.Z)(function*(b,g,_){const T=kh(b,!0).put({[od]:g,value:_});return new Ns(T).toPromise()})).apply(this,arguments)}function ld(){return(ld=(0,o.Z)(function*(b,g){const _=kh(b,!1).get(g),T=yield new Ns(_).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function y_(b,g){const _=kh(b,!0).delete(g);return new Ns(_).toPromise()}const b_=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield wn()),_.db})()}_withRetries(_){var T=this;return(0,o.Z)(function*(){let M=0;for(;;)try{const F=yield T._openDb();return yield _(F)}catch(F){if(M++>3)throw F;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return Fl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=Vp._getInstance(function Ko(){return Fl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var T=(0,o.Z)(function*(M,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(M,F){return T.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var T=(0,o.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return T.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var T,M;if(_.activeServiceWorker=yield function jp(){return Pa.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Wc(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(T=F[0])||void 0===T?void 0:T.fulfilled)&&(null===(M=F[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var T=this;return(0,o.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Kc(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:_},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield wn();return yield Hp(_,qs,"1"),yield y_(_,qs),!0}catch{}return!1})()}_withPendingWrite(_){var T=this;return(0,o.Z)(function*(){T.pendingWrites++;try{yield _()}finally{T.pendingWrites--}})()}_set(_,T){var M=this;return(0,o.Z)(function*(){return M._withPendingWrite((0,o.Z)(function*(){return yield M._withRetries(F=>Hp(F,_,T)),M.localCache[_]=T,M.notifyServiceWorker(_)}))})()}_get(_){var T=this;return(0,o.Z)(function*(){const M=yield T._withRetries(F=>function e0(b,g){return ld.apply(this,arguments)}(F,_));return T.localCache[_]=M,M})()}_remove(_){var T=this;return(0,o.Z)(function*(){return T._withPendingWrite((0,o.Z)(function*(){return yield T._withRetries(M=>y_(M,_)),delete T.localCache[_],T.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const T=yield _._withRetries(X=>{const ge=kh(X,!1).getAll();return new Ns(ge).toPromise()});if(!T)return[];if(0!==_.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:X,value:ge}of T)F.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(ge)&&(_.notifyListeners(X,ge),M.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!F.has(X)&&(_.notifyListeners(X,null),M.push(X));return M})()}notifyListeners(_,T){this.localCache[_]=T;const M=this.listeners[_];if(M)for(const F of Array.from(M))F(T)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(T)}_removeListener(_,T){this.listeners[_]&&(this.listeners[_].delete(T),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function w_(b,g){return Nt(b,"POST","/v2/accounts/mfaSignIn:start",rn(b,g))}const Yc=1e12;class sr{constructor(g){this.auth=g,this.counter=Yc,this._widgets=new Map}render(g,_){const T=this.counter;return this._widgets.set(T,new xs(g,this.auth.name,_||{})),this.counter++,T}reset(g){var _;const T=g||Yc;null===(_=this._widgets.get(T))||void 0===_||_.delete(),this._widgets.delete(T)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Yc))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,o.Z)(function*(){var T;return null===(T=_._widgets.get(g||Yc))||void 0===T||T.execute(),""})()}}class xs{constructor(g,_,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;de(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ul(b){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<b;T++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fa=nr("rcb"),yr=new xt(3e4,6e4);class xn{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ci().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return de(function ht(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),g,"argument-error"),this.shouldResolveImmediately(_)&&At(ci().grecaptcha)?Promise.resolve(ci().grecaptcha):new Promise((T,M)=>{const F=ci().setTimeout(()=>{M(Ae(g,"network-request-failed"))},yr.get());ci()[Fa]=()=>{ci().clearTimeout(F),delete ci()[Fa];const ge=ci().grecaptcha;if(!ge||!At(ge))return void M(Ae(g,"internal-error"));const qe=ge.render;ge.render=(ot,wt)=>{const nn=qe(ot,wt);return this.counter++,nn},this.hostLanguage=_,T(ge)},Zt(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Fa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),M(Ae(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=ci().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ph{load(g){return(0,o.Z)(function*(){return new sr(g)})()}clearedOneInstance(){}}const Gp="recaptcha",La={theme:"light",type:"image"};class br{constructor(g,_=Object.assign({},La),T){this.parameters=_,this.type=Gp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(T),this.isInvisible="invisible"===this.parameters.size,de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;de(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ph:new xn,this.validateStartingState()}verify(){var g=this;return(0,o.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(_)||new Promise(F=>{const X=ge=>{!ge||(g.tokenChangeListeners.delete(X),F(ge))};g.tokenChangeListeners.add(X),g.isInvisible&&T.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(T=>T(_)),"function"==typeof g)g(_);else if("string"==typeof g){const T=ci()[g];"function"==typeof T&&T(_)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,o.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const T=document.createElement("div");_.appendChild(T),_=T}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,o.Z)(function*(){de(we()&&!Fl(),g.auth,"internal-error"),yield function Bl(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function ue(b){return se.apply(this,arguments)}(g.auth);de(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ws{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Xn._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function wo(b,g,_){return wr.apply(this,arguments)}function wr(){return(wr=(0,o.Z)(function*(b,g,_){const T=qn(b),M=yield jl(T,g,(0,$.m9)(_));return new Ws(M,F=>Ho(T,F))})).apply(this,arguments)}function ud(b,g,_){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b);yield Pe(!1,T,"phone");const M=yield jl(T.auth,g,(0,$.m9)(_));return new Ws(M,F=>Hc(T,F))})).apply(this,arguments)}function dd(b,g,_){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b),M=yield jl(T.auth,g,(0,$.m9)(_));return new Ws(M,F=>$u(T,F))})).apply(this,arguments)}function jl(b,g,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,o.Z)(function*(b,g,_){var T;const M=yield _.verify();try{let F;if(de("string"==typeof M,b,"argument-error"),de(_.type===Gp,b,"argument-error"),F="string"==typeof g?{phoneNumber:g}:g,"session"in F){const X=F.session;if("phoneNumber"in F)return de("enroll"===X.type,b,"internal-error"),(yield xh(b,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{de("signin"===X.type,b,"internal-error");const ge=(null===(T=F.multiFactorHint)||void 0===T?void 0:T.uid)||F.multiFactorUid;return de(ge,b,"missing-multi-factor-info"),(yield w_(b,{mfaPendingCredential:X.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Lu(b,{phoneNumber:F.phoneNumber,recaptchaToken:M});return X}}finally{_._reset()}})).apply(this,arguments)}function hd(b,g){return or.apply(this,arguments)}function or(){return(or=(0,o.Z)(function*(b,g){yield ps((0,$.m9)(b),g)})).apply(this,arguments)}let $p=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=qn(_)}verifyPhoneNumber(_,T){return jl(this.auth,_,(0,$.m9)(T))}static credential(_,T){return Xn._fromVerification(_,T)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:T,temporaryProof:M}=_;return T&&M?Xn._fromTokenResponse(T,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Cn(b,g){return g?li(g):(de(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Jr extends Gs{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Uo(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Uo(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Uo(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Pr(b){return ei(b.auth,new Jr(b),b.bypassAuthState)}function Zp(b){const{auth:g,user:_}=b;return de(_,g,"internal-error"),wh(_,new Jr(b),b.bypassAuthState)}function fd(b){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,o.Z)(function*(b){const{auth:g,user:_}=b;return de(_,g,"internal-error"),ps(_,new Jr(b),b.bypassAuthState)})).apply(this,arguments)}class Hl{constructor(g,_,T,M,F=!1){this.auth=g,this.resolver=T,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,o.Z)(function*(T,M){g.pendingPromise={resolve:T,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(F){g.reject(F)}});return function(T,M){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,o.Z)(function*(){const{urlResponse:T,sessionId:M,postBody:F,tenantId:X,error:ge,type:qe}=g;if(ge)return void _.reject(ge);const ot={auth:_.auth,requestUri:T,sessionId:M,tenantId:X||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(qe)(ot))}catch(wt){_.reject(wt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Pr;case"linkViaPopup":case"linkViaRedirect":return fd;case"reauthViaPopup":case"reauthViaRedirect":return Zp;default:ke(this.auth,"internal-error")}}resolve(g){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qo=new xt(2e3,1e4);function qi(b,g,_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,o.Z)(function*(b,g,_){const T=qn(b);ze(b,g,En);const M=Cn(T,_);return new Co(T,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function ui(b,g,_){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b);ze(T.auth,g,En);const M=Cn(T.auth,_);return new Co(T.auth,"reauthViaPopup",g,M,T).executeNotNull()})).apply(this,arguments)}function $l(b,g,_){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b);ze(T.auth,g,En);const M=Cn(T.auth,_);return new Co(T.auth,"linkViaPopup",g,M,T).executeNotNull()})).apply(this,arguments)}let Co=(()=>{class b extends Hl{constructor(_,T,M,F,X){super(_,T,F,X),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const T=yield _.execute();return de(T,_.auth,"internal-error"),T})()}onExecution(){var _=this;return(0,o.Z)(function*(){ae(1===_.filter.length,"Popup operations only handle one event");const T=Wo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],T),_.authWindow.associatedEvent=T,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Ae(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var T,M;this.pollId=null!==(M=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ae(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Qo.get())};_()}}return b.currentPopupAction=null,b})();const To=new Map;class C_ extends Hl{constructor(g,_,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,o.Z)(function*(){let T=To.get(_.auth._key());if(!T){try{const F=(yield function pd(b,g){return Ms.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;T=()=>Promise.resolve(F)}catch(M){T=()=>Promise.reject(M)}To.set(_.auth._key(),T)}return _.bypassAuthState||To.set(_.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,T=this;return(0,o.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(T,g);if("unknown"!==g.type){if(g.eventId){const M=yield T.auth._redirectUserForId(g.eventId);if(M)return T.user=M,_().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function Ms(){return(Ms=(0,o.Z)(function*(b,g){const _=zl(g),T=ea(b);if(!(yield T._isAvailable()))return!1;const M="true"===(yield T._get(_));return yield T._remove(_),M})).apply(this,arguments)}function ql(b,g){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,o.Z)(function*(b,g){return ea(b)._set(zl(g),"true")})).apply(this,arguments)}function Lh(){To.clear()}function gd(b,g){To.set(b._key(),g)}function ea(b){return li(b._redirectPersistence)}function zl(b){return er("pendingRedirect",b.config.apiKey,b.name)}function Wl(b,g,_){return function Kl(b,g,_){return Qc.apply(this,arguments)}(b,g,_)}function Qc(){return(Qc=(0,o.Z)(function*(b,g,_){const T=qn(b);ze(b,g,En),yield T._initializationPromise;const M=Cn(T,_);return yield ql(M,T),M._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function ta(b,g,_){return function Ba(b,g,_){return ji.apply(this,arguments)}(b,g,_)}function ji(){return(ji=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b);ze(T.auth,g,En),yield T.auth._initializationPromise;const M=Cn(T.auth,_);yield ql(M,T.auth);const F=yield Eo(T);return M._openRedirect(T.auth,g,"reauthViaRedirect",F)})).apply(this,arguments)}function na(b,g,_){return function md(b,g,_){return qp.apply(this,arguments)}(b,g,_)}function qp(){return(qp=(0,o.Z)(function*(b,g,_){const T=(0,$.m9)(b);ze(T.auth,g,En),yield T.auth._initializationPromise;const M=Cn(T.auth,_);yield Pe(!1,T,g.providerId),yield ql(M,T.auth);const F=yield Eo(T);return M._openRedirect(T.auth,g,"linkViaRedirect",F)})).apply(this,arguments)}function r0(b,g){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,o.Z)(function*(b,g){return yield qn(b)._initializationPromise,Do(b,g,!1)})).apply(this,arguments)}function Do(b,g){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,o.Z)(function*(b,g,_=!1){const T=qn(b),M=Cn(T,g),X=yield new C_(T,M,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield T._persistUserIfCurrent(X.user),yield T._setRedirectUser(null,g)),X})).apply(this,arguments)}function Eo(b){return Va.apply(this,arguments)}function Va(){return(Va=(0,o.Z)(function*(b){const g=Wo(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Ql{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(_=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function zp(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eu(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var T;if(g.error&&!eu(g)){const M=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";_.onError(Ae(this.auth,M))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const T=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uh(g))}saveEventToCache(g){this.cachedEventUids.add(Uh(g)),this.lastProcessedEventTime=Date.now()}}function Uh(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function eu({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Xl(b){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,o.Z)(function*(b,g={}){return Nt(b,"GET","/v1/projects",g)})).apply(this,arguments)}const T_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bh=/^https?/;function Ks(){return(Ks=(0,o.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Xl(b);for(const _ of g)try{if(ja(_))return}catch{}ke(b,"unauthorized-domain")})).apply(this,arguments)}function ja(b){const g=le(),{protocol:_,hostname:T}=new URL(g);if(b.startsWith("chrome-extension://")){const X=new URL(b);return""===X.hostname&&""===T?"chrome-extension:"===_&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===T}if(!Bh.test(_))return!1;if(T_.test(b))return T===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(T)}const Vh=new xt(3e4,6e4);function Kp(){const b=ci().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let zi=null;function ec(b){return zi=zi||function Ha(b){return new Promise((g,_)=>{var T,M,F;function X(){Kp(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Kp(),_(Ae(b,"network-request-failed"))},timeout:Vh.get()})}if(null!==(M=null===(T=ci().gapi)||void 0===T?void 0:T.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(F=ci().gapi)||void 0===F||!F.load){const ge=nr("iframefcb");return ci()[ge]=()=>{gapi.load?X():_(Ae(b,"network-request-failed"))},Zt(`https://apis.google.com/js/api.js?onload=${ge}`).catch(qe=>_(qe))}X()}}).catch(g=>{throw zi=null,g})}(b),zi}const Fr=new xt(5e3,15e3),yd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jh(b){const g=b.config;de(g.authDomain,b,"auth-domain-config-required");const _=g.emulator?dn(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,T={apiKey:g.apiKey,appName:b.name,v:P.SDK_VERSION},M=bd.get(b.config.apiHost);M&&(T.eid=M);const F=b._getFrameworks();return F.length&&(T.fw=F.join(",")),`${_}?${(0,$.xO)(T).slice(1)}`}function C(){return C=(0,o.Z)(function*(b){const g=yield ec(b),_=ci().gapi;return de(_,b,"internal-error"),g.open({where:document.body,url:jh(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yd,dontclear:!0},T=>new Promise(function(){var M=(0,o.Z)(function*(F,X){yield T.restyle({setHideOnLeave:!1});const ge=Ae(b,"network-request-failed"),qe=ci().setTimeout(()=>{X(ge)},Fr.get());function ot(){ci().clearTimeout(qe),F(T)}T.ping(ot).then(ot,()=>{X(ge)})});return function(F,X){return M.apply(this,arguments)}}()))}),C.apply(this,arguments)}const E={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _e{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const kt=encodeURIComponent("fac");function Cr(b,g,_,T,M,F){return ti.apply(this,arguments)}function ti(){return(ti=(0,o.Z)(function*(b,g,_,T,M,F){de(b.config.authDomain,b,"auth-domain-config-required"),de(b.config.apiKey,b,"invalid-api-key");const X={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:T,v:P.SDK_VERSION,eventId:M};if(g instanceof En){g.setDefaultLanguage(b.languageCode),X.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(X.customParameters=JSON.stringify(g.getCustomParameters()));for(const[wt,nn]of Object.entries(F||{}))X[wt]=nn}if(g instanceof Ia){const wt=g.getScopes().filter(nn=>""!==nn);wt.length>0&&(X.scopes=wt.join(","))}b.tenantId&&(X.tid=b.tenantId);const ge=X;for(const wt of Object.keys(ge))void 0===ge[wt]&&delete ge[wt];const qe=yield b._getAppCheckToken(),ot=qe?`#${kt}=${encodeURIComponent(qe)}`:"";return`${Ys(b)}?${(0,$.xO)(ge).slice(1)}${ot}`})).apply(this,arguments)}function Ys({config:b}){return b.emulator?dn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}const Lr="webStorageSupport",Tr=class Js{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=Do,this._overrideRedirectResult=gd}_openPopup(g,_,T,M){var F=this;return(0,o.Z)(function*(){var X;ae(null===(X=F.eventManagers[g._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const ge=yield Cr(g,_,T,le(),M);return function et(b,g,_,T=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),X=Math.max((window.screen.availWidth-T)/2,0).toString();let ge="";const qe=Object.assign(Object.assign({},E),{width:T.toString(),height:M.toString(),top:F,left:X}),ot=(0,$.z$)().toLowerCase();_&&(ge=k(ot)?"_blank":_),U(ot)&&(g=g||"http://localhost",qe.scrollbars="yes");const wt=Object.entries(qe).reduce((Qr,[ia,Rs])=>`${Qr}${ia}=${Rs},`,"");if(function dt(b=(0,$.z$)()){var g;return Ie(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ot)&&"_self"!==ge)return function Ke(b,g){const _=document.createElement("a");_.href=b,_.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(T)}(g||"",ge),new _e(null);const nn=window.open(g||"",ge,wt);de(nn,b,"popup-blocked");try{nn.focus()}catch{}return new _e(nn)}(g,ge,Wo())})()}_openRedirect(g,_,T,M){var F=this;return(0,o.Z)(function*(){return yield F._originValidation(g),function Yr(b){ci().location.href=b}(yield Cr(g,_,T,le(),M)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:M,promise:F}=this.eventManagers[_];return M?Promise.resolve(M):(ae(F,"If manager is not set, promise should be"),F)}const T=this.initAndGetManager(g);return this.eventManagers[_]={promise:T},T.catch(()=>{delete this.eventManagers[_]}),T}initAndGetManager(g){var _=this;return(0,o.Z)(function*(){const T=yield function wd(b){return C.apply(this,arguments)}(g),M=new Ql(g);return T.register("authEvent",F=>(de(F?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:M},_.iframes[g._key()]=T,M})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Lr,{type:Lr},M=>{var F;const X=null===(F=M?.[0])||void 0===F?void 0:F[Lr];void 0!==X&&_(!!X),ke(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function _d(b){return Ks.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Rt()||L()||Ie()}};class $a extends class Qs{constructor(g){this.factorId=g}_process(g,_,T){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,T);case"signin":return this._finalizeSignIn(g,_.credential);default:return Je("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new $a(g)}_finalizeEnroll(g,_,T){return function zc(b,g){return Nt(b,"POST","/v2/accounts/mfaEnrollment:finalize",rn(b,g))}(g,{idToken:_,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ci(b,g){return Nt(b,"POST","/v2/accounts/mfaSignIn:finalize",rn(b,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let CC=(()=>{class b{constructor(){}static assertion(_){return $a._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Yp="@firebase/auth";class Jp{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(T=>{g(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function o0(b){(0,P._registerComponent)(new ve.wA("auth",(g,{options:_})=>{const T=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),F=g.getProvider("app-check-internal"),{apiKey:X,authDomain:ge}=T.options;de(X&&!X.includes(":"),"invalid-api-key",{appName:T.name});const qe={apiKey:X,authDomain:ge,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tr(b)},ot=new Fo(T,M,F,qe);return function Ea(b,g){const _=g?.persistence||[],T=(Array.isArray(_)?_:[_]).map(li);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(T,g?.popupRedirectResolver)}(ot,_),ot},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,T)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new ve.wA("auth-internal",g=>{const _=qn(g.getProvider("auth").getImmediate());return new Jp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Yp,"0.23.2",function Qp(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,P.registerVersion)(Yp,"0.23.2","esm2017")}("Browser")},2090:(bt,Re,V)=>{V.d(Re,{$s:()=>li,BH:()=>xe,DV:()=>cs,Dv:()=>yi,G6:()=>dn,GJ:()=>Ui,L:()=>Te,LL:()=>en,Pz:()=>Ae,Sg:()=>ze,UG:()=>Je,UI:()=>ut,US:()=>ve,Wj:()=>Gn,Wl:()=>Hs,Yr:()=>xt,ZB:()=>ee,ZR:()=>Nt,aH:()=>ke,b$:()=>we,cI:()=>On,dS:()=>ds,eu:()=>it,g5:()=>P,gK:()=>oi,gQ:()=>Nn,h$:()=>ye,hl:()=>gn,hu:()=>$,jU:()=>ae,lb:()=>Bt,m9:()=>er,ne:()=>jt,p$:()=>z,pd:()=>jn,r3:()=>Rr,ru:()=>le,tV:()=>W,uI:()=>de,ug:()=>Jt,vZ:()=>Ni,w1:()=>Xe,w9:()=>Es,xO:()=>us,xb:()=>Ta,z$:()=>We,zI:()=>vi,zd:()=>gr});const $=function(q,Z){if(!q)throw P(Z)},P=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},oe=function(q){const Z=[];let U=0;for(let L=0;L<q.length;L++){let k=q.charCodeAt(L);k<128?Z[U++]=k:k<2048?(Z[U++]=k>>6|192,Z[U++]=63&k|128):55296==(64512&k)&&L+1<q.length&&56320==(64512&q.charCodeAt(L+1))?(k=65536+((1023&k)<<10)+(1023&q.charCodeAt(++L)),Z[U++]=k>>18|240,Z[U++]=k>>12&63|128,Z[U++]=k>>6&63|128,Z[U++]=63&k|128):(Z[U++]=k>>12|224,Z[U++]=k>>6&63|128,Z[U++]=63&k|128)}return Z},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,Z){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,L=[];for(let k=0;k<q.length;k+=3){const Q=q[k],Ee=k+1<q.length,Ye=Ee?q[k+1]:0,vt=k+2<q.length,Ie=vt?q[k+2]:0;let $t=(15&Ye)<<2|Ie>>6,Rt=63&Ie;vt||(Rt=64,Ee||($t=64)),L.push(U[Q>>2],U[(3&Q)<<4|Ye>>4],U[$t],U[Rt])}return L.join("")},encodeString(q,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(q):this.encodeByteArray(oe(q),Z)},decodeString(q,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(q):function(q){const Z=[];let U=0,L=0;for(;U<q.length;){const k=q[U++];if(k<128)Z[L++]=String.fromCharCode(k);else if(k>191&&k<224){const Q=q[U++];Z[L++]=String.fromCharCode((31&k)<<6|63&Q)}else if(k>239&&k<365){const vt=((7&k)<<18|(63&q[U++])<<12|(63&q[U++])<<6|63&q[U++])-65536;Z[L++]=String.fromCharCode(55296+(vt>>10)),Z[L++]=String.fromCharCode(56320+(1023&vt))}else{const Q=q[U++],Ee=q[U++];Z[L++]=String.fromCharCode((15&k)<<12|(63&Q)<<6|63&Ee)}}return Z.join("")}(this.decodeStringToByteArray(q,Z))},decodeStringToByteArray(q,Z){this.init_();const U=Z?this.charToByteMapWebSafe_:this.charToByteMap_,L=[];for(let k=0;k<q.length;){const Q=U[q.charAt(k++)],Ye=k<q.length?U[q.charAt(k)]:0;++k;const Ie=k<q.length?U[q.charAt(k)]:64;++k;const dt=k<q.length?U[q.charAt(k)]:64;if(++k,null==Q||null==Ye||null==Ie||null==dt)throw new me;L.push(Q<<2|Ye>>4),64!==Ie&&(L.push(Ye<<4&240|Ie>>2),64!==dt&&L.push(Ie<<6&192|dt))}return L},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(q){const Z=oe(q);return ve.encodeByteArray(Z,!0)},Te=function(q){return ye(q).replace(/\./g,"")},W=function(q){try{return ve.decodeString(q,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function z(q){return ee(void 0,q)}function ee(q,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return Z}for(const U in Z)!Z.hasOwnProperty(U)||!Ze(U)||(q[U]=ee(q[U],Z[U]));return q}function Ze(q){return"__proto__"!==q}const be=()=>{try{return function Le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Z=q&&W(q[1]);return Z&&JSON.parse(Z)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},ke=()=>{var q;return null===(q=be())||void 0===q?void 0:q.config},Ae=q=>{var Z;return null===(Z=be())||void 0===Z?void 0:Z[`_${q}`]};class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,U)=>{this.resolve=Z,this.reject=U})}wrapCallback(Z){return(U,L)=>{U?this.reject(U):this.resolve(L),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(U):Z(U,L))}}}function ze(q,Z){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const L=Z||"demo-project",k=q.iat||0,Q=q.sub||q.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ee=Object.assign({iss:`https://securetoken.google.com/${L}`,aud:L,iat:k,exp:k+3600,auth_time:k,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},q);return[Te(JSON.stringify({alg:"none",type:"JWT"})),Te(JSON.stringify(Ee)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Je(){var q;const Z=null===(q=be())||void 0===q?void 0:q.forceEnvironment;if("node"===Z)return!0;if("browser"===Z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ae(){return"object"==typeof self&&self.self===self}function le(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const q=We();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function xt(){return!1}function dn(){return!Je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gn(){try{return"object"==typeof indexedDB}catch{return!1}}function it(){return new Promise((q,Z)=>{try{let U=!0;const L="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(L);k.onsuccess=()=>{k.result.close(),U||self.indexedDB.deleteDatabase(L),q(!0)},k.onupgradeneeded=()=>{U=!1},k.onerror=()=>{var Q;Z((null===(Q=k.error)||void 0===Q?void 0:Q.message)||"")}}catch(U){Z(U)}})}function vi(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Nt extends Error{constructor(Z,U,L){super(U),this.code=Z,this.customData=L,this.name="FirebaseError",Object.setPrototypeOf(this,Nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}}class en{constructor(Z,U,L){this.service=Z,this.serviceName=U,this.errors=L}create(Z,...U){const L=U[0]||{},k=`${this.service}/${Z}`,Q=this.errors[Z],Ee=Q?function Sn(q,Z){return q.replace(An,(U,L)=>{const k=Z[L];return null!=k?String(k):`<${L}?>`})}(Q,L):"Error";return new Nt(k,`${this.serviceName}: ${Ee} (${k}).`,L)}}const An=/\{\$([^}]+)}/g;function On(q){return JSON.parse(q)}function Hs(q){return JSON.stringify(q)}const Mr=function(q){let Z={},U={},L={},k="";try{const Q=q.split(".");Z=On(W(Q[0])||""),U=On(W(Q[1])||""),k=Q[2],L=U.d||{},delete U.d}catch{}return{header:Z,claims:U,data:L,signature:k}},Es=function(q){const U=Mr(q).claims;return!!U&&"object"==typeof U&&U.hasOwnProperty("iat")},Ui=function(q){const Z=Mr(q).claims;return"object"==typeof Z&&!0===Z.admin};function Rr(q,Z){return Object.prototype.hasOwnProperty.call(q,Z)}function cs(q,Z){if(Object.prototype.hasOwnProperty.call(q,Z))return q[Z]}function Ta(q){for(const Z in q)if(Object.prototype.hasOwnProperty.call(q,Z))return!1;return!0}function ut(q,Z,U){const L={};for(const k in q)Object.prototype.hasOwnProperty.call(q,k)&&(L[k]=Z.call(U,q[k],k,q));return L}function Ni(q,Z){if(q===Z)return!0;const U=Object.keys(q),L=Object.keys(Z);for(const k of U){if(!L.includes(k))return!1;const Q=q[k],Ee=Z[k];if(si(Q)&&si(Ee)){if(!Ni(Q,Ee))return!1}else if(Q!==Ee)return!1}for(const k of L)if(!U.includes(k))return!1;return!0}function si(q){return null!==q&&"object"==typeof q}function us(q){const Z=[];for(const[U,L]of Object.entries(q))Array.isArray(L)?L.forEach(k=>{Z.push(encodeURIComponent(U)+"="+encodeURIComponent(k))}):Z.push(encodeURIComponent(U)+"="+encodeURIComponent(L));return Z.length?"&"+Z.join("&"):""}function gr(q){const Z={};return q.replace(/^\?/,"").split("&").forEach(L=>{if(L){const[k,Q]=L.split("=");Z[decodeURIComponent(k)]=decodeURIComponent(Q)}}),Z}function jn(q){const Z=q.indexOf("?");if(!Z)return"";const U=q.indexOf("#",Z);return q.substring(Z,U>0?U:void 0)}class Nn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,U){U||(U=0);const L=this.W_;if("string"==typeof Z)for(let dt=0;dt<16;dt++)L[dt]=Z.charCodeAt(U)<<24|Z.charCodeAt(U+1)<<16|Z.charCodeAt(U+2)<<8|Z.charCodeAt(U+3),U+=4;else for(let dt=0;dt<16;dt++)L[dt]=Z[U]<<24|Z[U+1]<<16|Z[U+2]<<8|Z[U+3],U+=4;for(let dt=16;dt<80;dt++){const $t=L[dt-3]^L[dt-8]^L[dt-14]^L[dt-16];L[dt]=4294967295&($t<<1|$t>>>31)}let Ie,rt,k=this.chain_[0],Q=this.chain_[1],Ee=this.chain_[2],Ye=this.chain_[3],vt=this.chain_[4];for(let dt=0;dt<80;dt++){dt<40?dt<20?(Ie=Ye^Q&(Ee^Ye),rt=1518500249):(Ie=Q^Ee^Ye,rt=1859775393):dt<60?(Ie=Q&Ee|Ye&(Q|Ee),rt=2400959708):(Ie=Q^Ee^Ye,rt=3395469782);const $t=(k<<5|k>>>27)+Ie+vt+rt+L[dt]&4294967295;vt=Ye,Ye=Ee,Ee=4294967295&(Q<<30|Q>>>2),Q=k,k=$t}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+Q&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+Ye&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update(Z,U){if(null==Z)return;void 0===U&&(U=Z.length);const L=U-this.blockSize;let k=0;const Q=this.buf_;let Ee=this.inbuf_;for(;k<U;){if(0===Ee)for(;k<=L;)this.compress_(Z,k),k+=this.blockSize;if("string"==typeof Z){for(;k<U;)if(Q[Ee]=Z.charCodeAt(k),++Ee,++k,Ee===this.blockSize){this.compress_(Q),Ee=0;break}}else for(;k<U;)if(Q[Ee]=Z[k],++Ee,++k,Ee===this.blockSize){this.compress_(Q),Ee=0;break}}this.inbuf_=Ee,this.total_+=U}digest(){const Z=[];let U=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&U,U/=256;this.compress_(this.buf_);let L=0;for(let k=0;k<5;k++)for(let Q=24;Q>=0;Q-=8)Z[L]=this.chain_[k]>>Q&255,++L;return Z}}function jt(q,Z){const U=new gt(q,Z);return U.subscribe.bind(U)}class gt{constructor(Z,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{Z(this)}).catch(L=>{this.error(L)})}next(Z){this.forEachObserver(U=>{U.next(Z)})}error(Z){this.forEachObserver(U=>{U.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,U,L){let k;if(void 0===Z&&void 0===U&&void 0===L)throw new Error("Missing Observer.");k=function Yt(q,Z){if("object"!=typeof q||null===q)return!1;for(const U of Z)if(U in q&&"function"==typeof q[U])return!0;return!1}(Z,["next","error","complete"])?Z:{next:Z,error:U,complete:L},void 0===k.next&&(k.next=mr),void 0===k.error&&(k.error=mr),void 0===k.complete&&(k.complete=mr);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),Q}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,Z)}sendOne(Z,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{U(this.observers[Z])}catch(L){typeof console<"u"&&console.error&&console.error(L)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mr(){}const yi=function(q,Z,U,L){let k;if(L<Z?k="at least "+Z:L>U&&(k=0===U?"none":"no more than "+U),k)throw new Error(q+" failed: Was called with "+L+(1===L?" argument.":" arguments.")+" Expects "+k+".")};function oi(q,Z){return`${q} failed: ${Z} argument `}function Gn(q,Z,U,L){if((!L||U)&&"function"!=typeof U)throw new Error(oi(q,Z)+"must be a valid function.")}function Bt(q,Z,U,L){if((!L||U)&&("object"!=typeof U||null===U))throw new Error(oi(q,Z)+"must be a valid context object.")}const ds=function(q){const Z=[];let U=0;for(let L=0;L<q.length;L++){let k=q.charCodeAt(L);if(k>=55296&&k<=56319){const Q=k-55296;L++,$(L<q.length,"Surrogate pair missing trail surrogate."),k=65536+(Q<<10)+(q.charCodeAt(L)-56320)}k<128?Z[U++]=k:k<2048?(Z[U++]=k>>6|192,Z[U++]=63&k|128):k<65536?(Z[U++]=k>>12|224,Z[U++]=k>>6&63|128,Z[U++]=63&k|128):(Z[U++]=k>>18|240,Z[U++]=k>>12&63|128,Z[U++]=k>>6&63|128,Z[U++]=63&k|128)}return Z},Jt=function(q){let Z=0;for(let U=0;U<q.length;U++){const L=q.charCodeAt(U);L<128?Z++:L<2048?Z+=2:L>=55296&&L<=56319?(Z+=4,U++):Z+=3}return Z};function li(q,Z=1e3,U=2){const L=Z*Math.pow(U,q),k=Math.round(.5*L*(Math.random()-.5)*2);return Math.min(144e5,L+k)}function er(q){return q&&q._delegate?q._delegate:q}},141:(bt,Re,V)=>{var o=V(4650);let $=null;function P(){return $}const me=new o.OlP("DocumentToken");let ye=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Te(){return(0,o.LFG)(z)}()},providedIn:"platform"}),n})();const W=new o.OlP("Location Initialized");let z=(()=>{class n extends ye{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ee()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ee()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ze(){return new z((0,o.LFG)(me))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Le(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ne(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ct(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(Ct)},providedIn:"root"}),n})();const be=new o.OlP("appBaseHref");let Ct=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Le(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ct(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+ct(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+ct(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ye),o.LFG(be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yt=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Le(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+ct(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+ct(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ye),o.LFG(be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(e){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Ne(ze(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ct(i))}normalize(e){return n.stripTrailingSlash(function xe(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,ze(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ct(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ct(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=ct,n.joinWithSlash=Le,n.stripTrailingSlash=Ne,n.\u0275fac=function(e){return new(e||n)(o.LFG(Ce))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ae(){return new ke((0,o.LFG)(Ce))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}function Da(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}class qn{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bi=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new qn(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,c),Lo(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Lo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Lo(n,t){n.context.$implicit=t.item}let an=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new hh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Bi("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Bi("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class hh{constructor(){this.$implicit=null,this.ngIf=null}}function Bi(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let Is=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=i.createEmbeddedView(r,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[o.TTD]}),n})();let bl=(()=>{class n{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw function Pn(n,t){return new o.vHH(2100,!1)}();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"slice",type:n,pure:!1,standalone:!0}),n})(),Or=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Lc="browser";function uo(n){return"server"===n}let Ia=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new ju((0,o.LFG)(me),window)}),n})();class ju{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function $r(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Vo(this.window.history)||Vo(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Vo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Uc{}class Zs extends class Eh extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){$||($=n)}(new Zs)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Pp(){return $o=$o||document.querySelector("base"),$o?$o.getAttribute("href"):null}();return null==e?null:function ho(n){Qt=Qt||document.createElement("a"),Qt.setAttribute("href",n);const t=Qt.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){$o=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Da(document.cookie,t)}}let Qt,$o=null;const In=new o.OlP("TRANSITION_ID"),Sl=[{provide:o.ip1,useFactory:function Fp(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=P(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[In,me,o.zs3],multi:!0}];let Al=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const xa=new o.OlP("EventManagerPlugins");let fo=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(xa),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Zo{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=P().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let po=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),go=(()=>{class n extends po{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Ma),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Ma))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Ma(n){P().remove(n)}const Ra={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zc=/%COMP%/g;function ka(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?ka(n,r,e):(r=r.replace(Zc,n),e.push(r))}return e}function Sh(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ah=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Nl(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Up(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new ed(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=ka(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(fo),o.LFG(go),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Nl{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Ra[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Oa(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Oa(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Ra[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Ra[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Sh(i)):this.eventManager.addEventListener(t,e,Sh(i))}}function Oa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Up extends Nl{constructor(t,e,i,r){super(t),this.component=i;const s=ka(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function _o(n){return"_ngcontent-%COMP%".replace(Zc,n)}(r+"-"+i.id),this.hostAttr=function Qu(n){return"_nghost-%COMP%".replace(Zc,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class ed extends Nl{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ka(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let xl=(()=>{class n extends Zo{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Nh=["alt","control","meta","shift"],zo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ml={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Kr=(()=>{class n extends Zo{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),c="code."),Nh.forEach(v=>{const w=i.indexOf(v);w>-1&&(i.splice(w,1),c+=v+".")}),c+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=c,p}static matchEventFullKeyCode(e,i){let r=zo[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Nh.forEach(c=>{c!==r&&(0,Ml[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ol=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:Lc},{provide:o.g9A,useValue:function nd(){Zs.makeCurrent()},multi:!0},{provide:me,useFactory:function kl(){return(0,o.RDi)(document),document},deps:[]}]),qs=new o.OlP(""),id=[{provide:o.rWj,useClass:class Ih{addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const h=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?P().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],rd=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function Rl(){return new o.qLn},deps:[]},{provide:xa,useClass:xl,multi:!0,deps:[me,o.R0b,o.Lbi]},{provide:xa,useClass:Kr,multi:!0,deps:[me]},{provide:Ah,useClass:Ah,deps:[fo,go,o.AFp]},{provide:o.FYo,useExisting:Ah},{provide:po,useExisting:go},{provide:go,useClass:go,deps:[me]},{provide:fo,useClass:fo,deps:[xa,o.R0b]},{provide:Uc,useClass:Al,deps:[]},[]];let Mh=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:In,useExisting:o.AFp},Sl]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(qs,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...rd,...id],imports:[Or,o.hGG]}),n})(),bo=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Pl(){return new bo((0,o.LFG)(me))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var _n=V(8996),Bn=V(9751);const{isArray:Oh}=Array,{getPrototypeOf:Yc,prototype:sr,keys:xs}=Object;function Ul(n){if(1===n.length){const t=n[0];if(Oh(t))return{args:t,keys:null};if(function Fa(n){return n&&"object"==typeof n&&Yc(n)===sr}(t)){const e=xs(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var yr=V(8421),zs=V(3269),xn=V(5403),ht=V(4004);const{isArray:Ph}=Array;function La(n){return(0,ht.U)(t=>function Gp(n,t){return Ph(t)?n(...t):n(t)}(n,t))}function br(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}let Ws=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),wo=(()=>{class n extends Ws{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const wr=new o.OlP("NgValueAccessor"),dd={provide:wr,useExisting:(0,o.Gpc)(()=>Yo),multi:!0},jl=new o.OlP("CompositionEventMode");let Yo=(()=>{class n extends Ws{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Vl(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(jl,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([dd]),o.qOj]}),n})();const Cn=new o.OlP("NgValidators"),Jr=new o.OlP("NgAsyncValidators");function Zl(n){return null!=n}function Co(n){return(0,o.QGY)(n)?(0,_n.D)(n):n}function Fh(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function To(n,t){return t.map(e=>e(n))}function pd(n){return n.map(t=>function C_(n){return!n.validate}(t)?t:e=>t.validate(e))}function ql(n){return null!=n?function Ms(n){if(!n)return null;const t=n.filter(Zl);return 0==t.length?null:function(e){return Fh(To(e,t))}}(pd(n)):null}function Lh(n){return null!=n?function Xo(n){if(!n)return null;const t=n.filter(Zl);return 0==t.length?null:function(e){return function Bl(...n){const t=(0,zs.jO)(n),{args:e,keys:i}=Ul(n),r=new Bn.y(s=>{const{length:c}=e;if(!c)return void s.complete();const h=new Array(c);let p=c,v=c;for(let w=0;w<c;w++){let S=!1;(0,yr.Xf)(e[w]).subscribe((0,xn.x)(s,N=>{S||(S=!0,v--),h[w]=N},()=>p--,void 0,()=>{(!p||!S)&&(v||s.next(i?br(i,h):h),s.complete())}))}});return t?r.pipe(La(t)):r}(To(e,t).map(Co)).pipe((0,ht.U)(Fh))}}(pd(n)):null}function gd(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Wl(n){return n?Array.isArray(n)?n:[n]:[]}function Kl(n,t){return Array.isArray(n)?n.includes(t):n===t}function Qc(n,t){const e=Wl(t);return Wl(n).forEach(r=>{Kl(e,r)||e.push(r)}),e}function ta(n,t){return Wl(t).filter(e=>!Kl(n,e))}class Ba{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ql(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Lh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ji extends Ba{get formDirective(){return null}get path(){return null}}class na extends Ba{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class md{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xc=(()=>{class n extends md{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(na,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})(),Do=(()=>{class n extends md{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ji,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o.qOj]}),n})();const zi="VALID",ec="INVALID",Fr="PENDING",Ga="DISABLED";function vd(n){return(wd(n)?n.validators:n)||null}function yd(n){return Array.isArray(n)?ql(n):n||null}function bd(n,t){return(wd(t)?t.asyncValidators:n)||null}function jh(n){return Array.isArray(n)?Lh(n):n||null}function wd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function C(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[e])throw new o.vHH(1001,"")}function E(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new o.vHH(1002,"")})}class x{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=yd(this._rawValidators),this._composedAsyncValidatorFn=jh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===zi}get invalid(){return this.status===ec}get pending(){return this.status==Fr}get disabled(){return this.status===Ga}get enabled(){return this.status!==Ga}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=yd(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=jh(t)}addValidators(t){this.setValidators(Qc(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Qc(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ta(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ta(t,this._rawAsyncValidators))}hasValidator(t){return Kl(this._rawValidators,t)}hasAsyncValidator(t){return Kl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Fr,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ga,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zi,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zi||this.status===Fr)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ga:zi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Fr,this._hasOwnPendingAsyncValidator=!0;const e=Co(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?Ga:this.errors?ec:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fr)?Fr:this._anyControlsHaveStatus(ec)?ec:zi}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wd(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class j extends x{constructor(t,e,i){super(vd(e),bd(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){E(this,0,t),Object.keys(t).forEach(i=>{C(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class _e extends j{}function ft(n,t){ti(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function Lr(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Tr(n,t)})}(n,t),function Qs(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Js(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Tr(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Cr(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function kt(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ti(n,t){const e=function ea(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(gd(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function zl(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(gd(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();kt(t._rawValidators,r),kt(t._rawAsyncValidators,r)}function Tr(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const a0={provide:ji,useExisting:(0,o.Gpc)(()=>Io)},tc=(()=>Promise.resolve())();let Io=(()=>{class n extends ji{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new j({},ql(e),Lh(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){tc.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),ft(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){tc.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){tc.then(()=>{const i=this._findContainer(e.path),r=new j({});(function $a(n,t){ti(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){tc.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){tc.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function Jp(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Cn,10),o.Y36(Jr,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([a0]),o.qOj]}),n})();function l0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function b(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const g=class extends x{constructor(t=null,e,i){super(vd(e),bd(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=b(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){l0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){l0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){b(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},nn={provide:na,useExisting:(0,o.Gpc)(()=>ia)},Qr=(()=>Promise.resolve())();let ia=(()=>{class n extends na{constructor(e,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new g,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Qp(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Yo?e=s:function s0(n){return Object.getPrototypeOf(n.constructor)===wo}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Yp(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ft(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Qr.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,o.D6c)(i);Qr.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function Ke(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ji,9),o.Y36(Cn,10),o.Y36(Jr,10),o.Y36(wr,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([nn]),o.qOj,o.TTD]}),n})(),Rs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Gh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const tg=new o.OlP("NgModelWithFormControlWarning"),EC={provide:wr,useExisting:(0,o.Gpc)(()=>u0),multi:!0};function x_(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let u0=(()=>{class n extends wo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=x_(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function $S(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([EC]),o.qOj]}),n})(),d0=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(x_(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(u0,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Zh={provide:wr,useExisting:(0,o.Gpc)(()=>h0),multi:!0};function IC(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let h0=(()=>{class n extends wo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,c)=>{s._setSelected(r.indexOf(c.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const c=s;for(let h=0;h<c.length;h++){const v=this._getOptionValue(c[h].value);r.push(v)}}else{const c=i.options;for(let h=0;h<c.length;h++){const p=c[h];if(p.selected){const v=this._getOptionValue(p.value);r.push(v)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function ZS(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Zh]),o.qOj]}),n})(),M_=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(IC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(IC(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(h0,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),JS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gh]}),n})(),QS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[JS]}),n})(),k_=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:tg,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[JS]}),n})();class XS extends x{constructor(t,e,i){super(vd(e),bd(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){E(this,0,t),t.forEach((i,r)=>{C(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function eA(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let QO=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return eA(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new j(r,s)}record(e,i=null){const r=this._reduceControls(e);return new _e(r,i)}control(e,i,r){let s={};return this.useNonNullable?(eA(i)?s=i:(s.validators=i,s.asyncValidators=r),new g(e,{...s,nonNullable:!0})):new g(e,i,r)}array(e,i,r){const s=e.map(c=>this._createControl(c));return new XS(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof g||e instanceof x?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:k_}),n})();function mt(...n){const t=(0,zs.yG)(n);return(0,_n.D)(n,t)}var ar=V(5577),ra=V(576);function Za(n,t){return(0,ra.m)(t)?(0,ar.z)(n,t,1):(0,ar.z)(n,1)}var Wi=V(4482);function zn(n,t){return(0,Wi.e)((e,i)=>{let r=0;e.subscribe((0,xn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}class Wh{}class OC{}class ic{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ic?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ic;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ic?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class PC{encodeKey(t){return FC(t)}encodeValue(t){return FC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const iA=/%(\d[a-f0-9])/gi,rA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FC(n){return encodeURIComponent(n).replace(iA,(t,e)=>rA[e]??t)}function Kh(n){return`${n}`}class nu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new PC,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nA(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,h]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],p=e.get(c)||[];p.push(h),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(Kh):[Kh(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new nu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Kh(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(Kh(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class sA{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function UC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function BC(n){return typeof Blob<"u"&&n instanceof Blob}function Xr(n){return typeof FormData<"u"&&n instanceof FormData}class Yh{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function LC(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ic),this.context||(this.context=new sA),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+c}}else this.params=new nu,this.urlWithParams=e}serializeBody(){return null===this.body?null:UC(this.body)||BC(this.body)||Xr(this.body)||function m0(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof nu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Xr(this.body)?null:BC(this.body)?this.body.type||null:UC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,h=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,v=t.params||this.params;const w=t.context??this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce((S,N)=>S.set(N,t.setHeaders[N]),p)),t.setParams&&(v=Object.keys(t.setParams).reduce((S,N)=>S.set(N,t.setParams[N]),v)),new Yh(e,i,s,{params:v,headers:p,context:w,reportProgress:h,responseType:r,withCredentials:c})}}var Ri=(()=>((Ri=Ri||{})[Ri.Sent=0]="Sent",Ri[Ri.UploadProgress=1]="UploadProgress",Ri[Ri.ResponseHeader=2]="ResponseHeader",Ri[Ri.DownloadProgress=3]="DownloadProgress",Ri[Ri.Response=4]="Response",Ri[Ri.User=5]="User",Ri))();class Dr{constructor(t,e=200,i="OK"){this.headers=t.headers||new ic,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Nd extends Dr{constructor(t={}){super(t),this.type=Ri.ResponseHeader}clone(t={}){return new Nd({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class rg extends Dr{constructor(t={}){super(t),this.type=Ri.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new rg({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class VC extends Dr{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function _0(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let O_=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Yh)s=e;else{let p,v;p=r.headers instanceof ic?r.headers:new ic(r.headers),r.params&&(v=r.params instanceof nu?r.params:new nu({fromObject:r.params})),s=new Yh(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:v,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=mt(s).pipe(Za(p=>this.handler.handle(p)));if(e instanceof Yh||"events"===r.observe)return c;const h=c.pipe(zn(p=>p instanceof rg));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,ht.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ht.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ht.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ht.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new nu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,_0(r,i))}post(e,i,r={}){return this.request("POST",e,_0(r,i))}put(e,i,r={}){return this.request("PUT",e,_0(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Wh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class jC{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const v0=new o.OlP("HTTP_INTERCEPTORS");let oA=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const lA=/^\)\]\}',?\n/;let cA=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Bn.y(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((O,G)=>r.setRequestHeader(O,G.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const O=e.detectContentTypeHeader();null!==O&&r.setRequestHeader("Content-Type",O)}if(e.responseType){const O=e.responseType.toLowerCase();r.responseType="json"!==O?O:"text"}const s=e.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const O=r.statusText||"OK",G=new ic(r.getAllResponseHeaders()),J=function lP(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return c=new Nd({headers:G,status:r.status,statusText:O,url:J}),c},p=()=>{let{headers:O,status:G,statusText:J,url:te}=h(),De=null;204!==G&&(De=typeof r.response>"u"?r.responseText:r.response),0===G&&(G=De?200:0);let Oe=G>=200&&G<300;if("json"===e.responseType&&"string"==typeof De){const Be=De;De=De.replace(lA,"");try{De=""!==De?JSON.parse(De):null}catch(He){De=Be,Oe&&(Oe=!1,De={error:He,text:De})}}Oe?(i.next(new rg({body:De,headers:O,status:G,statusText:J,url:te||void 0})),i.complete()):i.error(new VC({error:De,headers:O,status:G,statusText:J,url:te||void 0}))},v=O=>{const{url:G}=h(),J=new VC({error:O,status:r.status||0,statusText:r.statusText||"Unknown Error",url:G||void 0});i.error(J)};let w=!1;const S=O=>{w||(i.next(h()),w=!0);let G={type:Ri.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(G.total=O.total),"text"===e.responseType&&!!r.responseText&&(G.partialText=r.responseText),i.next(G)},N=O=>{let G={type:Ri.UploadProgress,loaded:O.loaded};O.lengthComputable&&(G.total=O.total),i.next(G)};return r.addEventListener("load",p),r.addEventListener("error",v),r.addEventListener("timeout",v),r.addEventListener("abort",v),e.reportProgress&&(r.addEventListener("progress",S),null!==s&&r.upload&&r.upload.addEventListener("progress",N)),r.send(s),i.next({type:Ri.Sent}),()=>{r.removeEventListener("error",v),r.removeEventListener("abort",v),r.removeEventListener("load",p),r.removeEventListener("timeout",v),e.reportProgress&&(r.removeEventListener("progress",S),null!==s&&r.upload&&r.upload.removeEventListener("progress",N)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Uc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const P_=new o.OlP("XSRF_COOKIE_NAME"),HC=new o.OlP("XSRF_HEADER_NAME");class sa{}let y0=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Da(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me),o.LFG(o.Lbi),o.LFG(P_))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),og=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(sa),o.LFG(HC))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),uA=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(v0,[]);this.chain=i.reduceRight((r,s)=>new jC(r,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(OC),o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ag=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:og,useClass:oA}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:P_,useValue:e.cookieName}:[],e.headerName?{provide:HC,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[og,{provide:v0,useExisting:og,multi:!0},{provide:sa,useClass:y0},{provide:P_,useValue:"XSRF-TOKEN"},{provide:HC,useValue:"X-XSRF-TOKEN"}]}),n})(),hA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[O_,{provide:Wh,useClass:uA},cA,{provide:OC,useExisting:cA}],imports:[ag.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var di=V(7579);class lr extends di.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const rc=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ru=V(4671),$C=V(9672);function F_(...n){const t=(0,zs.yG)(n),e=(0,zs.jO)(n),{args:i,keys:r}=Ul(n);if(0===i.length)return(0,_n.D)([],t);const s=new Bn.y(function b0(n,t,e=ru.y){return i=>{ZC(t,()=>{const{length:r}=n,s=new Array(r);let c=r,h=r;for(let p=0;p<r;p++)ZC(t,()=>{const v=(0,_n.D)(n[p],t);let w=!1;v.subscribe((0,xn.x)(i,S=>{s[p]=S,w||(w=!0,h--),h||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>br(r,c):ru.y));return e?s.pipe(La(e)):s}function ZC(n,t,e){n?(0,$C.f)(e,n,t):t()}var lg=V(8189);function cg(...n){return function fA(){return(0,lg.J)(1)}()((0,_n.D)(n,(0,zs.yG)(n)))}function qC(n){return new Bn.y(t=>{(0,yr.Xf)(n()).subscribe(t)})}var pA=V(9635);function Jh(n,t){const e=(0,ra.m)(n)?n:()=>n,i=r=>r.error(e());return new Bn.y(t?r=>t.schedule(i,0,r):i)}var oa=V(515),w0=V(727);function ug(){return(0,Wi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,xn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class zC extends Bn.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Wi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new w0.w0;const e=this.getSubject();t.add(this.source.subscribe((0,xn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=w0.w0.EMPTY)}return t}refCount(){return ug()(this)}}function Ti(n,t){return(0,Wi.e)((e,i)=>{let r=null,s=0,c=!1;const h=()=>c&&!r&&i.complete();e.subscribe((0,xn.x)(i,p=>{r?.unsubscribe();let v=0;const w=s++;(0,yr.Xf)(n(p,w)).subscribe(r=(0,xn.x)(i,S=>i.next(t?t(p,S,w,v++):S),()=>{r=null,h()}))},()=>{c=!0,h()}))})}function cr(n){return n<=0?()=>oa.E:(0,Wi.e)((t,e)=>{let i=0;t.subscribe((0,xn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function su(...n){const t=(0,zs.yG)(n);return(0,Wi.e)((e,i)=>{(t?cg(n,e,t):cg(n,e)).subscribe(i)})}function qa(n){return(0,Wi.e)((t,e)=>{let i=!1;t.subscribe((0,xn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function C0(n=WC){return(0,Wi.e)((t,e)=>{let i=!1;t.subscribe((0,xn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function WC(){return new rc}function sc(n,t){const e=arguments.length>=2;return i=>i.pipe(n?zn((r,s)=>n(r,s,i)):ru.y,cr(1),e?qa(t):C0(()=>new rc))}var Er=V(8505);function aa(n){return(0,Wi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,xn.x)(e,void 0,void 0,c=>{s=(0,yr.Xf)(n(c,aa(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function gA(n,t,e,i,r){return(s,c)=>{let h=e,p=t,v=0;s.subscribe((0,xn.x)(c,w=>{const S=v++;p=h?n(p,w,S):(h=!0,w),i&&c.next(p)},r&&(()=>{h&&c.next(p),c.complete()})))}}function ou(n,t){return(0,Wi.e)(gA(n,t,arguments.length>=2,!0))}function L_(n){return n<=0?()=>oa.E:(0,Wi.e)((t,e)=>{let i=[];t.subscribe((0,xn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function T0(n,t){const e=arguments.length>=2;return i=>i.pipe(n?zn((r,s)=>n(r,s,i)):ru.y,L_(1),e?qa(t):C0(()=>new rc))}function E0(n){return(0,ht.U)(()=>n)}function Qh(n){return(0,Wi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const zt="primary",Xh=Symbol("RouteTitle");class I0{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function xd(n){return new I0(n)}function S0(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],h=n[s];if(c.startsWith(":"))r[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function za(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!A0(n[r],t[r]))return!1;return!0}function A0(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function KC(n){return Array.prototype.concat.apply([],n)}function YC(n){return n.length>0?n[n.length-1]:null}function ur(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function oc(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,_n.D)(Promise.resolve(n)):mt(n)}const _A={exact:function So(n,t,e){if(!Rd(n.segments,t.segments)||!U_(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!So(n.children[i],t.children[i],e))return!1;return!0},subset:x0},N0={exact:function vA(n,t){return za(n,t)},subset:function yA(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>A0(n[e],t[e]))},ignored:()=>!0};function XC(n,t,e){return _A[e.paths](n.root,t.root,e.matrixParams)&&N0[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function x0(n,t,e){return eT(n,t,t.segments,e)}function eT(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Rd(r,e)||t.hasChildren()||!U_(r,e,i))}if(n.segments.length===e.length){if(!Rd(n.segments,e)||!U_(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!x0(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Rd(n.segments,r)&&U_(n.segments,r,i)&&n.children[zt])&&eT(n.children[zt],t,s,i)}}function U_(n,t,e){return t.every((i,r)=>N0[e](n[r].parameters,i.parameters))}class Md{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xd(this.queryParams)),this._queryParamMap}toString(){return tT.serialize(this)}}class sn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ur(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hg(this)}}class ef{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=xd(this.parameters)),this._parameterMap}toString(){return TA(this)}}function Rd(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let Ht=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new B_},providedIn:"root"}),n})();class B_{parse(t){const e=new fP(t);return new Md(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${fg(t.root,!0)}`,i=function sT(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${pg(e)}=${pg(r)}`).join("&"):`${pg(e)}=${pg(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function CA(n){return encodeURI(n)}(t.fragment)}`:""}`}}const tT=new B_;function hg(n){return n.segments.map(t=>TA(t)).join("/")}function fg(n,t){if(!n.hasChildren())return hg(n);if(t){const e=n.children[zt]?fg(n.children[zt],!1):"",i=[];return ur(n.children,(r,s)=>{s!==zt&&i.push(`${s}:${fg(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function wA(n,t){let e=[];return ur(n.children,(i,r)=>{r===zt&&(e=e.concat(t(i,r)))}),ur(n.children,(i,r)=>{r!==zt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===zt?[fg(n.children[zt],!1)]:[`${r}:${fg(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${hg(n)}/${e[0]}`:`${hg(n)}/(${e.join("//")})`}}function nT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pg(n){return nT(n).replace(/%3B/gi,";")}function V_(n){return nT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function j_(n){return decodeURIComponent(n)}function iT(n){return j_(n.replace(/\+/g,"%20"))}function TA(n){return`${V_(n.path)}${function rT(n){return Object.keys(n).map(t=>`;${V_(t)}=${V_(n[t])}`).join("")}(n.parameters)}`}const kd=/^[^\/()?;=#]+/;function H_(n){const t=n.match(kd);return t?t[0]:""}const M0=/^[^=?&#]+/,DA=/^[^&#]+/;class fP{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[zt]=new sn(t,e)),i}parseSegment(){const t=H_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new o.vHH(4009,!1);return this.capture(t),new ef(j_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=H_(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=H_(this.remaining);r&&(i=r,this.capture(i))}t[j_(e)]=j_(i)}parseQueryParam(t){const e=function R0(n){const t=n.match(M0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function hP(n){const t=n.match(DA);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=iT(e),s=iT(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=H_(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new o.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=zt);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[zt]:new sn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new o.vHH(4011,!1)}}function oT(n){return n.segments.length>0?new sn([],{[zt]:n}):n}function G_(n){const t={};for(const i of Object.keys(n.children)){const s=G_(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function aT(n){if(1===n.numberOfChildren&&n.children[zt]){const t=n.children[zt];return new sn(n.segments.concat(t.segments),t.children)}return n}(new sn(n.segments,t))}function tf(n){return n instanceof Md}function $_(n,t,e,i,r){if(0===e.length)return rf(t.root,t.root,t.root,i,r);const s=function dT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uT(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return ur(s.outlets,(p,v)=>{h[v]="string"==typeof p?p.split("/"):p}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?t++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new uT(e,t,i)}(e);return s.toRoot()?rf(t.root,t.root,new sn([],{}),i,r):function c(p){const v=function IA(n,t,e,i){if(n.isAbsolute)return new sf(t.root,!0,0);if(-1===i)return new sf(e,e===t.root,0);return function O0(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new o.vHH(4005,!1);r=i.segments.length}return new sf(i,!1,r-s)}(e,i+(mg(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,p),w=v.processChildren?Z_(v.segmentGroup,v.index,s.commands):_g(v.segmentGroup,v.index,s.commands);return rf(t.root,v.segmentGroup,w,i,r)}(n.snapshot?._lastPathIndex)}function mg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function nf(n){return"object"==typeof n&&null!=n&&n.outlets}function rf(n,t,e,i,r){let c,s={};i&&ur(i,(p,v)=>{s[v]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),c=n===t?e:cT(n,t,e);const h=oT(G_(c));return new Md(h,s,r)}function cT(n,t,e){const i={};return ur(n.children,(r,s)=>{i[s]=r===t?e:cT(r,t,e)}),new sn(n.segments,i)}class uT{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&mg(i[0]))throw new o.vHH(4003,!1);const r=i.find(nf);if(r&&r!==YC(i))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sf{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function _g(n,t,e){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return Z_(n,t,e);const i=function P0(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],h=e[i];if(nf(h))break;const p=`${h}`,v=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&v&&"object"==typeof v&&void 0===v.outlets){if(!L0(p,v,c))return s;i+=2}else{if(!L0(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new sn(n.segments.slice(0,i.pathIndex),{});return s.children[zt]=new sn(n.segments.slice(i.pathIndex),n.children),Z_(s,0,r)}return i.match&&0===r.length?new sn(n.segments,{}):i.match&&!n.hasChildren()?F0(n,t,e):i.match?Z_(n,0,r):F0(n,t,e)}function Z_(n,t,e){if(0===e.length)return new sn(n.segments,{});{const i=function fT(n){return nf(n[0])?n[0].outlets:{[zt]:n}}(e),r={};return ur(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=_g(n.children[c],t,s))}),ur(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new sn(n.segments,r)}}function F0(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(nf(s)){const p=pP(s.outlets);return new sn(i,p)}if(0===r&&mg(e[0])){i.push(new ef(n.segments[t].path,Od(e[0]))),r++;continue}const c=nf(s)?s.outlets[zt]:`${s}`,h=r<e.length-1?e[r+1]:null;c&&h&&mg(h)?(i.push(new ef(c,Od(h))),r+=2):(i.push(new ef(c,{})),r++)}return new sn(i,{})}function pP(n){const t={};return ur(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=F0(new sn([],{}),0,e))}),t}function Od(n){const t={};return ur(n,(e,i)=>t[i]=`${e}`),t}function L0(n,t,e){return n==e.path&&za(t,e.parameters)}class Wa{constructor(t,e){this.id=t,this.url=e}}class af extends Wa{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ir extends Wa{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vg extends Wa{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pT extends Wa{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class U0 extends Wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ac extends Wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B0 extends Wa{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gT extends Wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V0 extends Wa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gP{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mT{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mP{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q_{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z_{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j0{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W_{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class SA{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=G0(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=G0(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=$0(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return $0(t,this._root).map(e=>e.value)}}function G0(n,t){if(n===t.value)return t;for(const e of t.children){const i=G0(n,e);if(i)return i}return null}function $0(n,t){if(n===t.value)return[t];for(const e of t.children){const i=$0(n,e);if(i.length)return i.unshift(t),i}return[]}class lc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function lf(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Z0 extends SA{constructor(t,e){super(t),this.snapshot=e,vT(this,t)}toString(){return this.snapshot.toString()}}function AA(n,t){const e=function NA(n,t){const c=new K_([],{},{},"",{},zt,t,null,n.root,-1,{});return new Y_("",new lc(c,[]))}(n,t),i=new lr([new ef("",{})]),r=new lr({}),s=new lr({}),c=new lr({}),h=new lr(""),p=new cf(i,r,c,h,s,zt,t,e.root);return p.snapshot=e.root,new Z0(new lc(p,[]),e)}class cf{constructor(t,e,i,r,s,c,h,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,ht.U)(v=>v[Xh]))??mt(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(t=>xd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(t=>xd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function q0(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function _T(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class K_{constructor(t,e,i,r,s,c,h,p,v,w,S,N){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.[Xh],this.routeConfig=p,this._urlSegment=v,this._lastPathIndex=w,this._correctedLastPathIndex=N??w,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Y_ extends SA{constructor(t,e){super(e),this.url=t,vT(this,e)}toString(){return xA(this._root)}}function vT(n,t){t.value._routerState=n,t.children.forEach(e=>vT(n,e))}function xA(n){const t=n.children.length>0?` { ${n.children.map(xA).join(", ")} } `:"";return`${n.value}${t}`}function yT(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,za(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),za(t.params,e.params)||n.params.next(e.params),function dg(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!za(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),za(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function bT(n,t){const e=za(n.params,t.params)&&function bA(n,t){return Rd(n,t)&&n.every((e,i)=>za(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||bT(n.parent,t.parent))}function J_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function vP(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return J_(n,i,r);return J_(n,i)})}(n,t,e);return new lc(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(h=>J_(n,h)),c}}const i=function yP(n){return new cf(new lr(n.url),new lr(n.params),new lr(n.queryParams),new lr(n.fragment),new lr(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>J_(n,s));return new lc(i,r)}}const wT="ngNavigationCancelingError";function MA(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=tf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=cc(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function cc(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[wT]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Q_(n){return CT(n)&&tf(n.url)}function CT(n){return n&&n[wT]}class TT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Pd,this.attachRef=null}}let Pd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new TT,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yg=!1;let bg=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=r||zt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,yg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,yg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,yg);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new o.vHH(4013,yg);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new RA(e,h,r.injector);if(i&&function au(n){return!!n.resolveComponentFactory}(i)){const v=i.resolveComponentFactory(c);this.activated=r.createComponent(v,r.length,p)}else this.activated=r.createComponent(c,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Pd),o.Y36(o.s_b),o.$8M("name"),o.Y36(o.sBO),o.Y36(o.lqb))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class RA{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===cf?this.route:t===Pd?this.childContexts:this.parent.get(t,e)}}let X_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[bg],encapsulation:2}),n})();function DT(n,t){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function wg(n){const t=n.children&&n.children.map(wg),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==zt&&(e.component=X_),e}function gs(n){return n.outlet||zt}function W0(n,t){const e=n.filter(i=>gs(i)===t);return e.push(...n.filter(i=>gs(i)!==t)),e}function ff(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Y0{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),yT(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=lf(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),ur(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=lf(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=lf(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=lf(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new j0(s.value.snapshot))}),t.children.length&&this.forwardEvent(new q_(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(yT(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),yT(h.route.value),this.activateChildRoutes(t,null,c.children)}else{const h=ff(r.snapshot),p=h?.get(o._Vd)??null;c.attachRef=null,c.route=r,c.resolver=p,c.injector=h,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class J0{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class pf{constructor(t,e){this.component=t,this.route=e}}function OA(n,t,e){const i=n._root;return mf(i,t?t._root:null,e,[i.value])}function gf(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,o.Z0I)(n)?t.get(n):n:i}function mf(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=lf(t);return n.children.forEach(c=>{(function PA(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function ET(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Rd(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Rd(n.url,t.url)||!za(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bT(n,t)||!za(n.queryParams,t.queryParams);default:return!bT(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new J0(i)):(s.data=c.data,s._resolvedData=c._resolvedData),mf(n,t,s.component?h?h.children:null:e,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new pf(h.outlet.component,c))}else c&&_f(t,h,r),r.canActivateChecks.push(new J0(i)),mf(n,null,s.component?h?h.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),ur(s,(c,h)=>_f(c,e.getContext(h),r)),r}function _f(n,t,e){const i=lf(n),r=n.value;ur(i,(s,c)=>{_f(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new pf(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Cg(n){return"function"==typeof n}function X0(n){return n instanceof rc||"EmptyError"===n?.name}const ev=Symbol("INITIAL_VALUE");function Fd(){return Ti(n=>F_(n.map(t=>t.pipe(cr(1),su(ev)))).pipe((0,ht.U)(t=>{for(const e of t)if(!0!==e){if(e===ev)return ev;if(!1===e||e instanceof Md)return e}return!0}),zn(t=>t!==ev),cr(1)))}function xT(n){return(0,pA.z)((0,Er.b)(t=>{if(tf(t))throw MA(0,t)}),(0,ht.U)(t=>!0===t))}const MT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tb(n,t,e,i,r){const s=nb(n,t,e);return s.matched?function $A(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?mt(r.map(c=>{const h=gf(c,n);return oc(function Q0(n){return n&&Cg(n.canMatch)}(h)?h.canMatch(t,e):n.runInContext(()=>h(t,e)))})).pipe(Fd(),xT()):mt(!0)}(i=DT(t,i),t,e).pipe((0,ht.U)(c=>!0===c?s:{...MT})):mt(s)}function nb(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...MT}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||S0)(e,n,t);if(!r)return{...MT};const s={};ur(r.posParams,(h,p)=>{s[p]=h.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function tv(n,t,e,i,r="corrected"){if(e.length>0&&function qA(n,t,e){return e.some(i=>Ld(n,t,i)&&gs(i)!==zt)}(n,e,i)){const c=new sn(t,function ib(n,t,e,i){const r={};r[zt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&gs(s)!==zt){const c=new sn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[gs(s)]=c}return r}(n,t,i,new sn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function zA(n,t,e){return e.some(i=>Ld(n,t,i))}(n,e,i)){const c=new sn(n.segments,function ZA(n,t,e,i,r,s){const c={};for(const h of i)if(Ld(n,e,h)&&!r[gs(h)]){const p=new sn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[gs(h)]=p}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new sn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Ld(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function nv(n,t,e,i){return!!(gs(n)===i||i!==zt&&Ld(t,e,n))&&("**"===n.path||nb(t,n,e).matched)}function Tg(n,t,e){return 0===t.length&&!n.children[e]}const rb=!1;class vf{constructor(t){this.segmentGroup=t||null}}class WA{constructor(t){this.urlTree=t}}function yf(n){return Jh(new vf(n))}function sb(n){return Jh(new WA(n))}class uc{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=tv(this.urlTree.root,[],[],this.config).segmentGroup,e=new sn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,zt).pipe((0,ht.U)(s=>this.createUrlTree(G_(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(aa(s=>{if(s instanceof WA)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof vf?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,zt).pipe((0,ht.U)(r=>this.createUrlTree(G_(r),t.queryParams,t.fragment))).pipe(aa(r=>{throw r instanceof vf?this.noMatchError(r):r}))}noMatchError(t){return new o.vHH(4002,rb)}createUrlTree(t,e,i){const r=oT(t);return new Md(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,ht.U)(s=>new sn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,_n.D)(r).pipe(Za(s=>{const c=i.children[s],h=W0(e,s);return this.expandSegmentGroup(t,h,c,s).pipe((0,ht.U)(p=>({segment:p,outlet:s})))}),ou((s,c)=>(s[c.outlet]=c.segment,s),{}),T0())}expandSegment(t,e,i,r,s,c){return(0,_n.D)(i).pipe(Za(h=>this.expandSegmentAgainstRoute(t,e,i,h,r,s,c).pipe(aa(v=>{if(v instanceof vf)return mt(null);throw v}))),sc(h=>!!h),aa((h,p)=>{if(X0(h))return Tg(e,r,s)?mt(new sn([],{})):yf(e);throw h}))}expandSegmentAgainstRoute(t,e,i,r,s,c,h){return nv(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):yf(e):yf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?sb(s):this.lineralizeSegments(i,s).pipe((0,ar.z)(c=>{const h=new sn(c,{});return this.expandSegment(t,h,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:h,consumedSegments:p,remainingSegments:v,positionalParamSegments:w}=nb(e,r,s);if(!h)return yf(e);const S=this.applyRedirectCommands(p,r.redirectTo,w);return r.redirectTo.startsWith("/")?sb(S):this.lineralizeSegments(r,S).pipe((0,ar.z)(N=>this.expandSegment(t,e,i,N.concat(v),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=DT(i,t),i.loadChildren?(i._loadedRoutes?mt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,ht.U)(h=>(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,new sn(r,{})))):mt(new sn(r,{}))):tb(e,i,r,t).pipe(Ti(({matched:c,consumedSegments:h,remainingSegments:p})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,ar.z)(w=>{const S=w.injector??t,N=w.routes,{segmentGroup:O,slicedSegments:G}=tv(e,h,p,N),J=new sn(O.segments,O.children);if(0===G.length&&J.hasChildren())return this.expandChildren(S,N,J).pipe((0,ht.U)(Be=>new sn(h,Be)));if(0===N.length&&0===G.length)return mt(new sn(h,{}));const te=gs(i)===s;return this.expandSegment(S,J,N,G,te?zt:s,!0).pipe((0,ht.U)(Oe=>new sn(h.concat(Oe.segments),Oe.children)))})):yf(e)))}getChildConfig(t,e,i){return e.children?mt({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?mt({routes:e._loadedRoutes,injector:e._loadedInjector}):function eb(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?mt(!0):mt(r.map(c=>{const h=gf(c,n);return oc(function IT(n){return n&&Cg(n.canLoad)}(h)?h.canLoad(t,e):n.runInContext(()=>h(t,e)))})).pipe(Fd(),xT())}(t,e,i).pipe((0,ar.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Er.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function kT(n){return Jh(cc(rb,3))}())):mt({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return mt(i);if(r.numberOfChildren>1||!r.children[zt])return Jh(new o.vHH(4e3,rb));r=r.children[zt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Md(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return ur(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=e[h]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return ur(e.children,(h,p)=>{c[p]=this.createSegmentGroup(t,h,i,r)}),new sn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new o.vHH(4001,rb);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class Dg{}class OT{constructor(t,e,i,r,s,c,h,p){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=p}recognize(){const t=tv(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,zt).pipe((0,ht.U)(e=>{if(null===e)return null;const i=new K_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new lc(i,e),s=new Y_(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=q0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,_n.D)(Object.keys(i.children)).pipe(Za(r=>{const s=i.children[r],c=W0(e,r);return this.processSegmentGroup(t,c,s,r)}),ou((r,s)=>r&&s?(r.push(...s),r):null),function D0(n,t=!1){return(0,Wi.e)((e,i)=>{let r=0;e.subscribe((0,xn.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),qa(null),T0(),(0,ht.U)(r=>{if(null===r)return null;const s=PT(r);return function YA(n){n.sort((t,e)=>t.value.outlet===zt?-1:e.value.outlet===zt?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,_n.D)(e).pipe(Za(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),sc(c=>!!c),aa(c=>{if(X0(c))return Tg(i,r,s)?mt([]):mt(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!nv(e,i,r,s))return mt(null);let c;if("**"===e.path){const h=r.length>0?YC(r).parameters:{},p=QA(i)+r.length;c=mt({snapshot:new K_(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UT(e),gs(e),e.component??e._loadedComponent??null,e,FT(i),p,BT(e),p),consumedSegments:[],remainingSegments:[]})}else c=tb(i,e,r,t).pipe((0,ht.U)(({matched:h,consumedSegments:p,remainingSegments:v,parameters:w})=>{if(!h)return null;const S=QA(i)+p.length;return{snapshot:new K_(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UT(e),gs(e),e.component??e._loadedComponent??null,e,FT(i),S,BT(e),S),consumedSegments:p,remainingSegments:v}}));return c.pipe(Ti(h=>{if(null===h)return mt(null);const{snapshot:p,consumedSegments:v,remainingSegments:w}=h;t=e._injector??t;const S=e._loadedInjector??t,N=function JA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:O,slicedSegments:G}=tv(i,v,w,N.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===G.length&&O.hasChildren())return this.processChildren(S,N,O).pipe((0,ht.U)(te=>null===te?null:[new lc(p,te)]));if(0===N.length&&0===G.length)return mt([new lc(p,[])]);const J=gs(e)===s;return this.processSegment(S,N,O,G,J?zt:s).pipe((0,ht.U)(te=>null===te?null:[new lc(p,te)]))}))}}function Eg(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function PT(n){const t=[],e=new Set;for(const i of n){if(!Eg(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=PT(i.children);t.push(new lc(i.value,r))}return t.filter(i=>!e.has(i))}function FT(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function QA(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function UT(n){return n.data||{}}function BT(n){return n.resolve||{}}function jT(n){return"string"==typeof n.title||null===n.title}function ub(n){return Ti(t=>{const e=n(t);return e?(0,_n.D)(e).pipe((0,ht.U)(()=>t)):mt(t)})}let HT=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===zt);return i}getResolvedTitleForRoute(e){return e.data[Xh]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(GT)},providedIn:"root"}),n})(),GT=(()=>{class n extends HT{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(bo))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Bd{}class Ig extends class IP{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const rv=new o.OlP("",{providedIn:"root",factory:()=>({})}),hb=new o.OlP("ROUTES");let Ao=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return mt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=oc(e.loadComponent()).pipe((0,Er.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Qh(()=>{this.componentLoaders.delete(e)})),r=new zC(i,()=>new di.x).pipe(ug());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return mt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,ht.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,v,w=!1;Array.isArray(h)?v=h:(p=h.create(e).injector,v=KC(p.get(hb,[],o.XFs.Self|o.XFs.Optional)));return{routes:v.map(wg),injector:p}}),Qh(()=>{this.childrenLoaders.delete(i)})),c=new zC(s,()=>new di.x).pipe(ug());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return oc(e()).pipe((0,ar.z)(i=>i instanceof o.YKP||Array.isArray(i)?mt(i):(0,_n.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Sg{}class es{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ov(n){throw n}function No(n,t,e){return t.parse("/")}const fb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Vd(){const n=(0,o.f3M)(Ht),t=(0,o.f3M)(Pd),e=(0,o.f3M)(ke),i=(0,o.f3M)(o.zs3),r=(0,o.f3M)(o.Sil),s=(0,o.f3M)(hb,{optional:!0})??[],c=(0,o.f3M)(rv,{optional:!0})??{},h=(0,o.f3M)(GT),p=(0,o.f3M)(HT,{optional:!0}),v=(0,o.f3M)(Sg,{optional:!0}),w=(0,o.f3M)(Bd,{optional:!0}),S=new Fn(null,n,t,e,i,r,KC(s));return v&&(S.urlHandlingStrategy=v),w&&(S.routeReuseStrategy=w),S.titleStrategy=p??h,function wf(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,S),S}let Fn=(()=>{class n{constructor(e,i,r,s,c,h,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new di.x,this.errorHandler=ov,this.malformedUriErrorHandler=No,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mt(void 0),this.urlHandlingStrategy=new es,this.routeReuseStrategy=new Ig,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(Ao),this.configLoader.onLoadEndListener=N=>this.triggerEvent(new mT(N)),this.configLoader.onLoadStartListener=N=>this.triggerEvent(new gP(N)),this.ngModule=c.get(o.h0i),this.console=c.get(o.c2e);const S=c.get(o.R0b);this.isNgZoneEnabled=S instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function QC(){return new Md(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=AA(this.currentUrlTree,this.rootComponentType),this.transitions=new lr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(zn(r=>0!==r.id),(0,ht.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ti(r=>{let s=!1,c=!1;return mt(r).pipe((0,Er.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ti(h=>{const p=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return jd(h.source)&&(this.browserUrlTree=h.extractedUrl),mt(h).pipe(Ti(S=>{const N=this.transitions.getValue();return i.next(new af(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?oa.E:Promise.resolve(S)}),function iv(n,t,e,i){return Ti(r=>function ob(n,t,e,i,r){return new uc(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,ht.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Er.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function VT(n,t,e,i,r,s){return(0,ar.z)(c=>function ab(n,t,e,i,r,s,c="emptyOnly",h="legacy"){return new OT(n,t,e,i,r,c,h,s).recognize().pipe(Ti(p=>null===p?function KA(n){return new Bn.y(t=>t.error(n))}(new Dg):mt(p)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,ht.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Er.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(O,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new U0(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);i.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:O,source:G,restoredState:J,extras:te}=h,De=new af(N,this.serializeUrl(O),G,J);i.next(De);const Oe=AA(O,this.rootComponentType).snapshot;return mt(r={...h,targetSnapshot:Oe,urlAfterRedirects:O,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),oa.E}),(0,Er.b)(h=>{const p=new ac(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,ht.U)(h=>r={...h,guards:OA(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function VA(n,t){return(0,ar.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?mt({...e,guardsResult:!0}):function ST(n,t,e,i){return(0,_n.D)(n).pipe((0,ar.z)(r=>function Ka(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?mt(s.map(h=>{const p=ff(t)??r,v=gf(h,p);return oc(function LA(n){return n&&Cg(n.canDeactivate)}(v)?v.canDeactivate(n,t,e,i):p.runInContext(()=>v(n,t,e,i))).pipe(sc())})).pipe(Fd()):mt(!0)}(r.component,r.route,e,t,i)),sc(r=>!0!==r,!0))}(c,i,r,n).pipe((0,ar.z)(h=>h&&function Xs(n){return"boolean"==typeof n}(h)?function jA(n,t,e,i){return(0,_n.D)(t).pipe(Za(r=>cg(function AT(n,t){return null!==n&&t&&t(new mP(n)),mt(!0)}(r.route.parent,i),function HA(n,t){return null!==n&&t&&t(new z_(n)),mt(!0)}(r.route,i),function GA(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function TP(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>qC(()=>mt(c.guards.map(p=>{const v=ff(c.node)??e,w=gf(p,v);return oc(function DP(n){return n&&Cg(n.canActivateChild)}(w)?w.canActivateChild(i,n):v.runInContext(()=>w(i,n))).pipe(sc())})).pipe(Fd())));return mt(s).pipe(Fd())}(n,r.path,e),function NT(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return mt(!0);const r=i.map(s=>qC(()=>{const c=ff(t)??e,h=gf(s,c);return oc(function FA(n){return n&&Cg(n.canActivate)}(h)?h.canActivate(t,n):c.runInContext(()=>h(t,n))).pipe(sc())}));return mt(r).pipe(Fd())}(n,r.route,e))),sc(r=>!0!==r,!0))}(i,s,n,t):mt(h)),(0,ht.U)(h=>({...e,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Er.b)(h=>{if(r.guardsResult=h.guardsResult,tf(h.guardsResult))throw MA(0,h.guardsResult);const p=new B0(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),zn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),ub(h=>{if(h.guards.canActivateChecks.length)return mt(h).pipe((0,Er.b)(p=>{const v=new gT(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),Ti(p=>{let v=!1;return mt(p).pipe(function lb(n,t){return(0,ar.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return mt(e);let s=0;return(0,_n.D)(r).pipe(Za(c=>function XA(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!jT(r)&&(s[Xh]=r.title),function cb(n,t,e,i){const r=function eN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return mt({});const s={};return(0,_n.D)(r).pipe((0,ar.z)(c=>function tN(n,t,e,i){const r=ff(t)??i,s=gf(n,r);return oc(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(sc(),(0,Er.b)(h=>{s[c]=h}))),L_(1),E0(s),aa(c=>X0(c)?oa.E:Jh(c)))}(s,n,t,i).pipe((0,ht.U)(c=>(n._resolvedData=c,n.data=q0(n,e).resolve,r&&jT(r)&&(n.data[Xh]=r.title),null)))}(c.route,i,n,t)),(0,Er.b)(()=>s++),L_(1),(0,ar.z)(c=>s===r.length?mt(e):oa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Er.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,Er.b)(p=>{const v=new V0(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}))}),ub(h=>{const p=v=>{const w=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Er.b)(S=>{v.component=S}),(0,ht.U)(()=>{})));for(const S of v.children)w.push(...p(S));return w};return F_(p(h.targetSnapshot.root)).pipe(qa(),cr(1))}),ub(()=>this.afterPreactivation()),(0,ht.U)(h=>{const p=function _P(n,t,e){const i=J_(n,t._root,e?e._root:void 0);return new Z0(i,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return r={...h,targetRouterState:p}}),(0,Er.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,t,e)=>(0,ht.U)(i=>(new Y0(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Er.b)({next(){s=!0},complete(){s=!0}}),Qh(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),aa(h=>{if(c=!0,CT(h)){Q_(h)||(this.navigated=!0,this.restoreHistory(r,!0));const p=new vg(r.id,this.serializeUrl(r.extractedUrl),h.message,h.cancellationCode);if(i.next(p),Q_(h)){const v=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jd(r.source)};this.scheduleNavigation(v,"imperative",null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new pT(r.id,this.serializeUrl(r.extractedUrl),h,r.targetSnapshot??void 0);i.next(p);try{r.resolve(this.errorHandler(h))}catch(v){r.reject(v)}}return oa.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(r.state=h)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(wg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=i,v=r||this.routerState.root,w=p?this.currentUrlTree.fragment:c;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...s};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=s||null}return null!==S&&(S=this.removeEmptyProps(S)),$_(v,this.currentUrlTree,e,S,w??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=tf(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function Cf(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new o.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...fb}:!1===i?{...bf}:i,tf(e))return XC(this.currentUrlTree,e,r);const s=this.parseUrl(e);return XC(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ir(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let h,p,v;c?(h=c.resolve,p=c.reject,v=c.promise):v=new Promise((N,O)=>{h=N,p=O});const w=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),S=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:w,targetPageId:S,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:h,reject:p,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(N=>Promise.reject(N))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new vg(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:function(){return Vd()},providedIn:"root"}),n})();function jd(n){return"imperative"!==n}let ms=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new di.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,o.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,o.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,o.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Fn),o.Y36(cf),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})(),_s=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new di.x,this.subscription=e.events.subscribe(s=>{s instanceof Ir&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,o.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,o.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,o.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){return!!(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Fn),o.Y36(cf),o.Y36(Ce))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&o.uIk("target",i.target)("href",i.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})();class pb{}let ZT=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(zn(e=>e instanceof Ir),Za(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,o.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,h=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,_n.D)(r).pipe((0,lg.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):mt(null);const s=r.pipe((0,ar.z)(c=>null===c?mt(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,_n.D)([s,c]).pipe((0,lg.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Fn),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(pb),o.LFG(Ao))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const av=new o.OlP("");let gb=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof af?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ir&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof W_&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new W_(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Df(n,t){return{\u0275kind:n,\u0275providers:t}}function lv(n){return[{provide:hb,multi:!0,useValue:n}]}function mb(){const n=(0,o.f3M)(o.zs3);return t=>{const e=n.get(o.z2F);if(t!==e.components[0])return;const i=n.get(Fn),r=n.get(cv);1===n.get(Ng)&&i.initialNavigation(),n.get(hv,null,o.XFs.Optional)?.setUpPreloading(),n.get(av,null,o.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const cv=new o.OlP("",{factory:()=>new di.x}),Ng=new o.OlP("",{providedIn:"root",factory:()=>1});const hv=new o.OlP("");function aN(n){return Df(0,[{provide:hv,useExisting:ZT},{provide:pb,useExisting:n}])}const _b=new o.OlP("ROUTER_FORROOT_GUARD"),vb=[ke,{provide:Ht,useClass:B_},{provide:Fn,useFactory:Vd},Pd,{provide:cf,useFactory:function qT(n){return n.routerState.root},deps:[Fn]},Ao];function WT(){return new o.PXZ("Router",Fn)}let yb=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[vb,[],lv(e),{provide:_b,useFactory:YT,deps:[[Fn,new o.FiY,new o.tp0]]},{provide:rv,useValue:i||{}},i?.useHash?{provide:Ce,useClass:yt}:{provide:Ce,useClass:Ct},{provide:av,useFactory:()=>{const n=(0,o.f3M)(Fn),t=(0,o.f3M)(Ia),e=(0,o.f3M)(rv);return e.scrollOffset&&t.setOffset(e.scrollOffset),new gb(n,t,e)}},i?.preloadingStrategy?aN(i.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:WT},i?.initialNavigation?JT(i):[],[{provide:wb,useFactory:mb},{provide:o.tb,multi:!0,useExisting:wb}]]}}static forChild(e){return{ngModule:n,providers:[lv(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(_b,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[X_]}),n})();function YT(n){return"guarded"}function JT(n){return["disabled"===n.initialNavigation?Df(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const t=(0,o.f3M)(Fn);return()=>{t.setUpLocationChangeListener()}}},{provide:Ng,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Df(2,[{provide:Ng,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:t=>{const e=t.get(W,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(Fn),h=t.get(cv);(function r(s){t.get(Fn).events.pipe(zn(h=>h instanceof Ir||h instanceof vg||h instanceof pT),(0,ht.U)(h=>h instanceof Ir||h instanceof vg&&(0===h.code||1===h.code)&&null),zn(h=>null!==h),cr(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||h.closed?mt(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const wb=new o.OlP("");let XT=(()=>{class n{constructor(){this.debug=!0,this.debug&&console.log("HomeService()")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ne=V(5861);const xg_firebase={apiKey:"AIzaSyCHwyX_gJ_ZVg-u6EwfKpDonVy9n7J39RM",authDomain:"the-movie-app-344909.firebaseapp.com",databaseURL:"https://the-movie-app-344909-default-rtdb.europe-west1.firebasedatabase.app",projectId:"the-movie-app-344909",storageBucket:"the-movie-app-344909.appspot.com",messagingSenderId:"146570405981",appId:"1:146570405981:web:8d60c8e38e0b0cc41e85b4",measurementId:"G-T44447336X"},xg_tmdb_api_key="837510eb0be61188d342d8c49173bb6e";let ts=(()=>{class n{constructor(e){this.http=e,this.debug=!1,this.timer={start:Date.now(),stop:null,time:null},this.debug&&console.log("TmdbService()"),this.api_key=xg_tmdb_api_key}static init(e){}getDetailsTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getDetailsTmdb()-----//");let c="https://api.themoviedb.org/3/movie/"+e;c+="?api_key="+i.api_key,c+="&language=sv";let p,h=yield fetch(c);try{p=yield h.json()}catch(v){console.log("ERROR!!"),console.log(v),console.log(e),p={results:null}}return i.timer.stop=Date.now(),i.timer.time=(i.timer.stop-i.timer.start)/1e3,p})()}getImagesTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getImagesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/";r+=e,r+="/images",r+="?api_key="+i.api_key,r+="&language=null,en,sv";const s=yield fetch(r);let c;try{c=yield s.json()}catch(h){console.log("ERROR!!"),console.log(h),console.log(e),c={results:null}}return c})()}getWatchProvidersTMDB(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getWatchProvidersTMDB()-----//");let r="https://api.themoviedb.org/3/movie/";return r+=e,r+="/watch/providers",r+="?api_key="+i.api_key,(yield(yield fetch(r)).json()).results.SE})()}searchMoviesTmdb(e,i){this.debug&&console.log("//-----searchMoviesTmdb()-----//"),e=(e=e.toLowerCase()).split(" ").join("+");let r="https://api.themoviedb.org/3/search/movie";return r+="?api_key="+this.api_key,r+="&language=sv",r+="&include_adult=false",r+="&query="+e,r+="&page="+i,this.http.get(r)}movieDiscoverTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----movieDiscoverTmdb()-----//"),i.debug&&console.log("discoverMoviesTmdb params"),i.debug&&console.log("params.with_genres"+e.with_genres);let r="https://api.themoviedb.org/3/discover/movie";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&include_video=false",r+="&page="+e.page,r+="&certification_country=US",null!=e.certification&&(r+="&certification="+e.certification),null!=e.with_genres&&(r+="&with_genres="+e.with_genres),null!=e.without_genres&&(r+="&without_genres="+e.without_genres),r+=null!=e.sort_by?"&sort_by="+e.sort_by:"&sort_by=popularity.desc",yield(yield fetch(r)).json()})()}getKeywordsTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getKeywordsTmdb()-----//");let r="https://api.themoviedb.org/3/movie/";return r+=e,r+="/keywords",r+="?api_key="+i.api_key,yield(yield fetch(r)).json()})()}getAlternativeTitlesTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getAlternativeTitlesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/"+e;r+="/alternative_titles",r+="?api_key="+i.api_key,r+="&page=1";let c=yield(yield fetch(r)).json();return c=c.results,c})()}getRecommendationsTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getRecommendationsTMDB()-----//");let r="https://api.themoviedb.org/3/movie/"+e;r+="/recommendations",r+="?api_key="+i.api_key,r+="&language=sv",r+="&page=1";let c=yield(yield fetch(r)).json();return c=c.results,c})()}getSimilarMoviesTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getSimilarMoviesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/";r+=e,r+="/similar",r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page=1";let c=yield(yield fetch(r)).json();return c=c.results,c})()}getTrendingMovies(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getTrendingMovies()-----//");let r="https://api.themoviedb.org/3/trending/movie/day";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page="+e,yield(yield fetch(r)).json()})()}getTopRatedTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getTopRatedTmdb()-----//");let r="https://api.themoviedb.org/3/movie/top_rated";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page="+e,yield(yield fetch(r)).json()})()}getPopularTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&console.log("//-----getPopularTmdb()-----//");let r="https://api.themoviedb.org/3/movie/popular";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page="+e,yield(yield fetch(r)).json()})()}getMovieCertificationsTmdb(){var e=this;return(0,ne.Z)(function*(){e.debug&&console.log("//-----getMovieCertificationsTmdb()-----//");let i="https://api.themoviedb.org/3/certification/movie";return i+="/list?api_key="+e.api_key,yield(yield fetch(i)).json()})()}getReleaseDatesTmdb(e){var i=this;return(0,ne.Z)(function*(){i.debug&&i.debug&&console.log("//-----getReleaseDatesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/"+e;r+="/release_dates",r+="?api_key="+i.api_key;let c,s=yield fetch(r);try{c=yield s.json()}catch(h){console.log("ERROR!!"),console.log(h),c={results:null}}return c})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(O_))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eD{constructor(){this.debug=!1}setAvgCertification(){this.debug&&console.log("Certification.setAvgCertification()"),this.debug&&console.log(this.countries);let t=new Array,e=0,i=0,r="",s="";this.countries.forEach(h=>{let p=new Array,v=0,w=0;r+=h.iso_3166_1+":[ ",h.release_dates.forEach(S=>{if(S.certification){let N=null;N="AU"==h.iso_3166_1?this.calcAU(S.certification):"DE"==h.iso_3166_1?this.calcDE(S.certification):"FI"==h.iso_3166_1?this.calcFI(S.certification):"FR"==h.iso_3166_1?this.calcFR(S.certification):"NO"==h.iso_3166_1?this.calcNO(S.certification):"SE"==h.iso_3166_1?this.calcSE(S.certification):"US"==h.iso_3166_1?this.calcUS(S.certification):null,!isNaN(N)&&null!=N&&null!=N&&(r+=N.toString()+"",p.push(N)),r+="("+S.certification+"), "}}),p.forEach(S=>{v+=S}),p.length>0&&(w=v/p.length,t.push(w)),r+="]",r+=".[total:"+v+"]",r+=".[length:"+p.length+"]",r+=".[cAvg:"+w+"]",r+="\n"}),this.debug&&(s+="Result:["),t.forEach(h=>{this.debug&&(s+=h+", "),e+=h}),i=e/t.length,this.debug&&(s+="]"),this.debug&&(s+=".[total:"+e+"]"),this.debug&&(s+=".[length:"+t.length+"]"),this.debug&&(s+=".[result:"+i+"]"),this.debug&&console.log(r),this.debug&&console.log(t),this.debug&&console.log(s);let c=this.setAvg(i);this.avg_rating=Math.round(c)}setAvg(t){let e;return e=t<6?0:t>=6&&t<7?6:t>=7&&t<9?7:t>=9&&t<10?9:t>=10&&t<11?10:t>=11&&t<12?11:t>=12&&t<13?12:t>=13&&t<15||t>=13&&t<15?13:t>=15&&t<16?15:t>=16&&t<17?16:t>=17&&t<18?17:18,e}calcAU(t){let e=null;return"G"==t&&(e=0),"PG"==t&&(e=10),"M"==t&&(e=13),"MA15+"==t&&(e=15),("X18+"==t||"R18+"==t)&&(e=18),e}calcFI(t){let e=null;return"S"==t&&(e=0),"K-7"==t&&(e=7),"K-12"==t&&(e=12),"K-16"==t&&(e=16),"K-18"==t&&(e=18),e}calcUS(t){let e=null;return"G"==t&&(e=0),"PG"==t&&(e=10),"PG-13"==t&&(e=13),("R"==t||"NC-17"==t)&&(e=17),e}calcSE(t){let e=null;return"Btl"==t&&(e=0),"7"==t&&(e=7),"11"==t&&(e=11),"15"==t&&(e=15),"18"==t&&(e=18),e}calcNO(t){let e=null;return"A"==t&&(e=0),"6"==t&&(e=6),"9"==t&&(e=9),"12"==t&&(e=12),"15"==t&&(e=15),"18"==t&&(e=18),e}calcDE(t){let e=null;return"A"==t&&(e=0),"6"==t&&(e=6),"12"==t&&(e=12),"16"==t&&(e=16),"18"==t&&(e=18),e}calcFR(t){let e=null;return"U"==t&&(e=0),"10"==t&&(e=10),"12"==t&&(e=12),"16"==t&&(e=16),"18"==t&&(e=18),e}calcGB(t){let e=null;return"U"==t&&(e=0),"PG"==t&&(e=0),"12"==t&&(e=12),"15"==t&&(e=15),"12A"==t&&(e=18),"R18"==t&&(e=18),e}}class tD{constructor(){this.counter=0,this.timing=0,this.isEven=!1,this.nIntervId=setInterval(()=>{this.counter++,this.timing++,this.timing>100&&(this.timing=0),this.isEven=this.counter%2==0},100)}count(){this.counter++}start(){this.nIntervId=setInterval(this.count,1e3)}stop(){clearInterval(this.nIntervId)}reset(){console.log("timer.reset()"),clearInterval(this.nIntervId),this.counter=0,this.timing=0}}class la{constructor(t){this.lists=[],this.base_url="https://image.tmdb.org/t/p/",this.preloading=!0,this.loading=!0,this.poster_loading=!0,this.backdrop_loading=!0,this.posters_loading=!0,this.backdrops_loading=!0,this.show=!1,this.placeholder_url="https://via.placeholder.com/",this.ticker={start:Date.now(),stop:null,time:null},this.preloading=!0,this.loading=!0,this.poster_loading=!0,this.backdrop_loading=!0,this.posters_loading=!0,this.backdrops_loading=!0,this.timer=new tD,this.tmdb=new ts(this.http),this.id=t.id,this.saved=t.saved,this.seen=t.seen,this.title=t.title,this.lists=t.lists,this.vote=t.vote}setData(t){this.id=t.id,this.saved=t.saved,this.seen=t.seen,this.title=t.title,this.lists=t.lists,this.vote=t.vote}preload(){var t=this;return(0,ne.Z)(function*(){let e=yield t.tmdb.getDetailsTmdb(t.id);t.poster_path=e.poster_path,t.poster_loading=!1,t.backdrop_path=e.backdrop_path,t.backdrop_loading=!1,t.overview=e.overview,t.title=e.title,t.genres=e.genres,t.runtime=e.runtime,t.length=t.timeConvert(t.runtime),t.budget=e.budget,t.tagline=e.tagline,t.vote_count=e.vote_count,t.vote_average=Math.round(e.vote_average/2);let r=yield t.tmdb.getKeywordsTmdb(t.id);t.keywords=r.keywords,t.preloading=!1})()}init(){var t=this;return(0,ne.Z)(function*(){let e=yield t.tmdb.getImagesTmdb(t.id);if(e){let r=e.backdrops;t.backdrops=[],r.length>0&&(r.forEach(s=>{t.backdrops.push(s)}),t.backdrops_loading=!1)}let i=yield t.tmdb.getWatchProvidersTMDB(t.id).then(r=>({...t,...r}));return t.flatrate=i.flatrate,t.loading=!1,t.posters_loading=!1,t.loading||t.timer.stop(),t.ticker.stop=Date.now(),t.ticker.time=(t.ticker.stop-t.ticker.start)/1e3,!0})()}checkRating(t){var e=this;return(0,ne.Z)(function*(){let i=!1,r="",s=yield e.tmdb.getReleaseDatesTmdb(e.id);return s.results&&(yield e.setCert(s),e.certifications.avg_rating>t?(r+="[AGE<"+e.certifications.avg_rating+"]",r+=":["+e.title+"]",i=!1):(r+="-----[SHOW][AGE<"+e.certifications.avg_rating+"]",r+=":["+e.title+"]",r+=":[SHOW]-----",i=!0)),i})()}setCert(t){var e=this;return(0,ne.Z)(function*(){let i=t.results,r=new Array;i.forEach(s=>{"AU"==s.iso_3166_1&&r.push(s),"DE"==s.iso_3166_1&&r.push(s),"GB"==s.iso_3166_1&&r.push(s),"FI"==s.iso_3166_1&&r.push(s),"FR"==s.iso_3166_1&&r.push(s),"NO"==s.iso_3166_1&&r.push(s),"SE"==s.iso_3166_1&&r.push(s),"US"==s.iso_3166_1&&r.push(s)}),r&&(e.release_dates=r,e.certifications=new eD,e.certifications.countries=r,e.certifications.setAvgCertification())})()}timeConvert(t){var i=t/60,r=Math.floor(i);return r+"h "+Math.round(60*(i-r))+"min"}*clock(){for(console.log("Tick!");;)yield,console.log("Tick!"),yield,console.log("Tock!")}}const nD=[{id:252171,title:"A Girl Walks Home Alone at Night",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:447332,title:"A Quiet Place",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:520763,title:"A Quiet Place Part II",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:73,title:"American History X",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:396806,title:"Anon",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:329865,title:"Arrival",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:18785,title:"Baksm\xe4llan",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:271404,title:"Beyond Skyline",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:569547,title:"Black Mirror: Bandersnatch",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:257117,title:"Blood Punch",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:513310,title:"Boss Level",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:425972,title:"Cargo",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:801335,title:"Carter",seen:!1,vote:0,saved:!0,lists:["Saved","Korea"]},{id:76726,title:"Chronicle",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:354912,title:"Coco",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:461130,title:"Code 8",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:220289,title:"Coherence",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:11655,title:"Cronos",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:475961,title:"Curvature",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:924,title:"Dawn of the Dead",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:923,title:"Dawn of the Dead",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:293660,title:"Deadpool",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:497,title:"Den gr\xf6na milen",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:44040,title:"Devil",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:43920,title:"Dog Pound",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:646380,title:"Don't Look Up",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:520901,title:"Doom: Annihilation",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:568124,title:"Encanto",seen:!0,vote:0,saved:!0,lists:["Saved","Family"]},{id:522681,title:"Escape Room",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:29917,title:"Exam",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:568091,title:"Fractured",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:550988,title:"Free Guy",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:453405,title:"Gemini Man",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:801335,title:"Girl in the Basement",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:450465,title:"Glass",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:440021,title:"Happy Death Day",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:512196,title:"Happy Death Day 2U",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:376865,title:"High Life",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:254302,title:"High-Rise",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:575774,title:"His House",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:475210,title:"How It Ends",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:49530,title:"In Time",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:581726,title:"Infinite",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:797861,title:"Infinitum: Subject Unknown",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:5595,title:"La Habitaci\xf3n de Fermat",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:37933,title:"Legender fr\xe5n \xd6v\xe4rlden",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:783461,title:"Looop Lapeta",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:590223,title:"Love and Monsters",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:508943,title:"Luca",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:769,title:"Maffiabr\xf6der",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:521936,title:"Mega Time Squad",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:675054,title:"MexZombies",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:458576,title:"Monster Hunter",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:597208,title:"Nightmare Alley",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:278,title:"Nyckeln till frihet",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:762504,title:"Nope",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:466272,title:"Once Upon a Time\u2026 in Hollywood",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:513434,title:"One Cut of the Dead",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:775996,title:"Outside the Wire",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:19898,title:"Pandorum",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:496243,title:"Parasit",seen:!0,vote:0,saved:!0,lists:["Saved","Korea"]},{id:635731,title:"Pig",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:12429,title:"Ponyo p\xe5 klippan vid havet",seen:!0,vote:0,saved:!0,lists:["Saved","Ghibli"]},{id:605116,title:"Project Power",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:1576,title:"Resident Evil",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:313943,title:"Revolt",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:653569,title:"Save Yourselves!",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:214,title:"Saw III",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:424,title:"Schindler's List",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:273477,title:"Scouts Guide to the Zombie Apocalypse",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:55165,title:"Simple Simon",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:50123,title:"Skins",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:11466,title:"Slim Susie",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:581389,title:"Space Sweepers",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:129,title:"Spirited Away",seen:!0,vote:0,saved:!0,lists:["Saved","Ghibli"]},{id:594718,title:"Sputnik",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:169644,title:"Stalled",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:559581,title:"Stowaway",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:549294,title:"Synchronic",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:577922,title:"Tenet",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:696806,title:"The Adam Project",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:22970,title:"The Cabin in the Woods",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:376134,title:"The Discovery",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:442249,title:"The First Purge",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:602223,title:"The Forever Purge",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:425552,title:"The Lure",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:333484,title:"The Magnificent Seven",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:198663,title:"The Maze Runner",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:242090,title:"The One I Love",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:158015,title:"The Purge",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:316727,title:"The Purge: Election Year",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:180299,title:"The Raid: Retaliation",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:11152,title:"The Ruins",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:242095,title:"The Signal",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:588228,title:"The Tomorrow War",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:293670,title:"The Wailing",seen:!1,vote:0,saved:!0,lists:["Saved","Korea"]},{id:535167,title:"The Wandering Earth",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:14139,title:"Timecrimes",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:26466,title:"Triangle",seen:!0,vote:4,saved:!0,lists:["Saved","Time"]},{id:366171,title:"To Your Last Death",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:496704,title:"Tremors: A Cold Day in Hell",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:529216,title:"Under stormen",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:500664,title:"Upgrade",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:643586,title:"Willy's Wonderland",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:72190,title:"World War Z",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:437311,title:"\xd3rbita 9",seen:!1,vote:0,saved:!0,lists:["Saved"]}],Cb=[{id:28,name:"Action",active:!1},{id:12,name:"\xc4ventyr",active:!1},{id:16,name:"Animerat",active:!1},{id:35,name:"Komedi",active:!1},{id:80,name:"Kriminal",active:!1},{id:99,name:"Dokument\xe4r",active:!1},{id:18,name:"Drama",active:!1},{id:10751,name:"Familj",active:!1},{id:14,name:"Fantasy",active:!1},{id:36,name:"Historisk",active:!1},{id:27,name:"Skr\xe4ck",active:!1},{id:10402,name:"Music",active:!1},{id:9648,name:"Mystik",active:!1},{id:10749,name:"Romantik",active:!1},{id:878,name:"Science Fiction",active:!1},{id:10770,name:"TV-film",active:!1},{id:53,name:"Thriller",active:!1},{id:10752,name:"Krig",active:!1},{id:37,name:"V\xe4stern",active:!1}];var iD=V(1389),B=V(2090),ns=V(6881),Ja=V(1877),ca=V(4859);class rD{constructor(){this.ageRating=18}}class Tb{constructor(){this.vote={min:0,max:10},this.favorite={movies:[],genres:[],keywords:[]},this.liked={movies:[],genres:[],keywords:[]},this.disliked={movies:[],genres:[],keywords:[]},this.owned={movies:[],providers:[]}}}class uN{constructor(){this.liked={movies:[],genres:[],keywords:[]},this.disliked={movies:[],genres:[],keywords:[]}}}var If=V(4986),Tn=V(4976);function Db(){return(0,Wi.e)((n,t)=>{let e,i=!1;n.subscribe((0,xn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function Sf(n,t=ru.y){return n=n??dN,(0,Wi.e)((e,i)=>{let r,s=!0;e.subscribe((0,xn.x)(i,c=>{const h=t(c);(s||!n(r,h))&&(s=!1,r=h,i.next(c))}))})}function dN(n,t){return n===t}var lt,Ki=V(2011),lu=(V(9568),V(3942)),fN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ua={},Eb=Eb||{},Vt=fN||self;function Ib(){}function Af(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Hd(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var Sb="closure_uid_"+(1e9*Math.random()>>>0),sD=0;function Xa(n,t,e){return n.call.apply(n.bind,arguments)}function da(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Wn(n,t,e){return(Wn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xa:da).apply(null,arguments)}function Mg(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function dr(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return t.prototype[r].apply(i,c)}}function cu(){this.s=this.s,this.o=this.o}cu.prototype.s=!1,cu.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Qa(n){Object.prototype.hasOwnProperty.call(n,Sb)&&n[Sb]||(n[Sb]=++sD)}(this)},cu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oD=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function Ab(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function fv(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(Af(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function Yi(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Yi.prototype.h=function(){this.defaultPrevented=!0};var gN=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Ib,t),Vt.removeEventListener("test",Ib,t)}catch{}return n}();function Rg(n){return/^[\s\xa0]*$/.test(n)}var aD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pv(n,t){return n<t?-1:n>t?1:0}function kg(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function eo(n){return-1!=kg().indexOf(n)}function Nb(n){return Nb[" "](n),n}function xb(n,t,e){return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Nb[" "]=Ib;var Pg,n,lD=eo("Opera"),uu=eo("Trident")||eo("MSIE"),Og=eo("Edge"),gv=Og||uu,Mb=eo("Gecko")&&!(-1!=kg().toLowerCase().indexOf("webkit")&&!eo("Edge"))&&!(eo("Trident")||eo("MSIE"))&&!eo("Edge"),cD=-1!=kg().toLowerCase().indexOf("webkit")&&!eo("Edge");function Rb(){var n=Vt.document;return n?n.documentMode:void 0}e:{var mv="",_v=(n=kg(),Mb?/rv:([^\);]+)(\)|;)/.exec(n):Og?/Edge\/([\d\.]+)/.exec(n):uu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):cD?/WebKit\/(\S+)/.exec(n):lD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_v&&(mv=_v?_v[1]:""),uu){var vv=Rb();if(null!=vv&&vv>parseFloat(mv)){Pg=String(vv);break e}}Pg=mv}var mN={},vN=Vt.document&&uu&&(Rb()||parseInt(Pg,10))||void 0;function Fg(n,t){if(Yi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Mb){e:{try{Nb(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yN[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fg.$.h.call(this)}}dr(Fg,Yi);var yN={2:"touch",3:"pen",4:"mouse"};Fg.prototype.h=function(){Fg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lg="closure_listenable_"+(1e6*Math.random()|0),bN=0;function wN(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++bN,this.fa=this.ia=!1}function yv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ob(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function dD(n){const t={};for(const e in n)t[e]=n[e];return t}const hD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fD(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<hD.length;s++)e=hD[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function bv(n){this.src=n,this.g={},this.h=0}function Pb(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=oD(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(yv(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function Fb(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==t&&s.capture==!!e&&s.la==i)return r}return-1}bv.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=Fb(n,t,i,r);return-1<c?(t=n[c],e||(t.ia=!1)):((t=new wN(t,this.src,s,!!i,r)).ia=e,n.push(t)),t};var wv="closure_lm_"+(1e6*Math.random()|0),Cv={};function Lb(n,t,e,i,r){if(i&&i.once)return Bb(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Lb(n,t[s],e,i,r);return null}return e=Gb(e),n&&n[Lg]?n.O(t,e,Hd(i)?!!i.capture:!!i,r):Ub(n,t,e,!1,i,r)}function Ub(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=Hd(r)?!!r.capture:!!r,h=Dv(n);if(h||(n[wv]=h=new bv(n)),(e=h.add(t,e,i,c,s)).proxy)return e;if(i=function pD(){const t=Hb;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)gN||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(jb(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function Bb(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Bb(n,t[s],e,i,r);return null}return e=Gb(e),n&&n[Lg]?n.P(t,e,Hd(i)?!!i.capture:!!i,r):Ub(n,t,e,!0,i,r)}function Vb(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Vb(n,t[s],e,i,r);else i=Hd(i)?!!i.capture:!!i,e=Gb(e),n&&n[Lg]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=Fb(s=n.g[t],e,i,r))&&(yv(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=Dv(n))&&(t=n.g[t.toString()],n=-1,t&&(n=Fb(t,e,i,r)),(e=-1<n?t[n]:null)&&Tv(e))}function Tv(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[Lg])Pb(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(jb(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=Dv(t))?(Pb(e,n),0==e.h&&(e.src=null,t[wv]=null)):yv(n)}}}function jb(n){return n in Cv?Cv[n]:Cv[n]="on"+n}function Hb(n,t){if(n.fa)n=!0;else{t=new Fg(t,this);var e=n.listener,i=n.la||n.src;n.ia&&Tv(n),n=e.call(i,t)}return n}function Dv(n){return(n=n[wv])instanceof bv?n:null}var dc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gb(n){return"function"==typeof n?n:(n[dc]||(n[dc]=function(t){return n.handleEvent(t)}),n[dc])}function Ar(){cu.call(this),this.i=new bv(this),this.S=this,this.J=null}function ki(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new Yi(t,n);else if(t instanceof Yi)t.target=t.target||n;else{var r=t;fD(t=new Yi(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=$b(c,i,!0,t)&&r}if(r=$b(c=t.g=n,i,!0,t)&&r,r=$b(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=$b(c=t.g=e[s],i,!1,t)&&r}function $b(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.fa&&c.capture==e){var h=c.listener,p=c.la||c.src;c.ia&&Pb(n.i,c),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}dr(Ar,cu),Ar.prototype[Lg]=!0,Ar.prototype.removeEventListener=function(n,t,e,i){Vb(this,n,t,e,i)},Ar.prototype.N=function(){if(Ar.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)yv(e[i]);delete n.g[t],n.h--}}this.J=null},Ar.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Ar.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var Ug=Vt.JSON.stringify;function NP(){var n=_D;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var qb,Zb=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xP,n=>n.reset());class xP{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Ot(n){Vt.setTimeout(()=>{throw n},0)}function mD(n,t){qb||function CN(){var n=Vt.Promise.resolve(void 0);qb=function(){n.then(Ev)}}(),du||(qb(),du=!0),_D.add(n,t)}var du=!1,_D=new class gD{constructor(){this.h=this.g=null}add(t,e){const i=Zb.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function Ev(){for(var n;n=NP();){try{n.h.call(n.g)}catch(e){Ot(e)}var t=Zb;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}du=!1}function Gd(n,t){Ar.call(this),this.h=n||1,this.g=t||Vt,this.j=Wn(this.qb,this),this.l=Date.now()}function hi(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vD(n,t,e){if("function"==typeof n)e&&(n=Wn(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wn(n.handleEvent,n)}return 2147483647<Number(t)?-1:Vt.setTimeout(n,t||0)}function zb(n){n.g=vD(()=>{n.g=null,n.i&&(n.i=!1,zb(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}dr(Gd,Ar),(lt=Gd.prototype).ga=!1,lt.T=null,lt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ki(this,"tick"),this.ga&&(hi(this),this.start()))}},lt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.N=function(){Gd.$.N.call(this),hi(this),delete this.g};class yD extends cu{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:zb(this)}N(){super.N(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bg(n){cu.call(this),this.h=n,this.g={}}dr(Bg,cu);var Wb=[];function Kb(n,t,e,i){Array.isArray(e)||(e&&(Wb[0]=e.toString()),e=Wb);for(var r=0;r<e.length;r++){var s=Lb(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Yb(n){Ob(n.g,function(t,e){this.g.hasOwnProperty(e)&&Tv(t)},n),n.g={}}function Vg(){this.g=!0}function Nf(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function EN(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return Ug(e)}catch{return t}}(n,e)+(i?" "+i:"")})}Bg.prototype.N=function(){Bg.$.N.call(this),Yb(this)},Bg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vg.prototype.Ea=function(){this.g=!1},Vg.prototype.info=function(){};var $d={},bD=null;function Zd(){return bD=bD||new Ar}function Jb(n){Yi.call(this,$d.Ta,n)}function xf(n){const t=Zd();ki(t,new Jb(t))}function Qb(n,t){Yi.call(this,$d.STAT_EVENT,n),this.stat=t}function vs(n){const t=Zd();ki(t,new Qb(t,n))}function Mf(n,t){Yi.call(this,$d.Ua,n),this.size=t}function hc(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},t)}$d.Ta="serverreachability",dr(Jb,Yi),$d.STAT_EVENT="statevent",dr(Qb,Yi),$d.Ua="timingevent",dr(Mf,Yi);var Iv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},wD={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xb(){}function tw(){}Xb.prototype.h=null;var iw,Rf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nw(){Yi.call(this,"d")}function Sv(){Yi.call(this,"c")}function Av(){}function Nv(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new Bg(this),this.P=MP,this.V=new Gd(n=gv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new IN}function IN(){this.i=null,this.g="",this.h=!1}dr(nw,Yi),dr(Sv,Yi),dr(Av,Xb),Av.prototype.g=function(){return new XMLHttpRequest},Av.prototype.i=function(){return{}},iw=new Av;var MP=45e3,CD={},Hg={};function kf(n,t,e){n.L=1,n.v=kv(el(t)),n.s=e,n.S=!0,TD(n,null)}function TD(n,t){n.G=Date.now(),$g(n),n.A=el(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),kD(e.i,"t",i),n.C=0,e=n.l.I,n.h=new IN,n.g=WD(n.l,e?t:null,!n.s),0<n.O&&(n.M=new yD(Wn(n.Pa,n,n.g),n.O)),Kb(n.U,n.g,"readystatechange",n.nb),t=n.I?dD(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),xf(),function TN(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var v=h[p].split("=");if(1<v.length){var w=v[0];v=v[1];var S=w.split("_");c=2<=S.length&&"type"==S[1]?c+(w+"=")+v+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function DD(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function rw(n,t,e){let r,i=!0;for(;!n.J&&n.C<e.length;){if(r=Gg(n,e),r==Hg){4==t&&(n.o=4,vs(14),i=!1),Nf(n.j,n.m,null,"[Incomplete Response]");break}if(r==CD){n.o=4,vs(15),Nf(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Nf(n.j,n.m,r,null),Mv(n,r)}DD(n)&&r!=Hg&&r!=CD&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,vs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ca&&(n.ca=!0,(t=n.l).g==n&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),Vv(t),t.L=!0,vs(11))):(Nf(n.j,n.m,e,"[Invalid Chunked Response]"),qd(n),Zg(n))}function Gg(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?Hg:(e=Number(t.substring(e,i)),isNaN(e)?CD:(i+=1)+e>t.length?Hg:(t=t.substr(i,e),n.C=i+e,t))}function $g(n){n.Y=Date.now()+n.P,ED(n,n.P)}function ED(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hc(Wn(n.lb,n),t)}function xv(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Zg(n){0==n.l.H||n.J||$D(n.l,n)}function qd(n){xv(n);var t=n.M;t&&"function"==typeof t.ra&&t.ra(),n.M=null,hi(n.V),Yb(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.ra())}function Mv(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||Wg(e.h,n)))if(!n.K&&Wg(e.h,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;Xg(e),yw(e)}ww(e),vs(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.M&&0==e.A&&!e.v&&(e.v=hc(Wn(e.ib,e),6e3));if(1>=PD(e.h)&&e.na){try{e.na()}catch{}e.na=void 0}}else Wd(e,11)}else if((n.K||e.g==n)&&Xg(e),!Rg(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let v=r[t];if(e.V=v[0],v=v[1],2==e.H)if("c"==v[0]){e.J=v[1],e.oa=v[2];const w=v[3];null!=w&&(e.qa=w,e.j.info("VER="+e.qa));const S=v[4];null!=S&&(e.Ga=S,e.j.info("SVER="+e.Ga));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(e.K=i=1.5*N,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const O=n.g;if(O){const G=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var s=i.h;s.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ov(s,s.h),s.h=null))}if(i.F){const J=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(i.Da=J,Kn(i.G,i.F,J))}}e.H=3,e.l&&e.l.Ba(),e.ca&&(e.S=Date.now()-n.G,e.j.info("Handshake RTT: "+e.S+"ms"));var c=n;if((i=e).wa=zD(i,i.I?i.oa:null,i.Y),c.K){FD(i.h,c);var h=c,p=i.K;p&&h.setTimeout(p),h.B&&(xv(h),$g(h)),i.g=c}else GD(i);0<e.i.length&&Uv(e)}else"stop"!=v[0]&&"close"!=v[0]||Wd(e,7);else 3==e.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Wd(e,7):Lv(e):"noop"!=v[0]&&e.l&&e.l.Aa(v),e.A=0)}xf()}catch{}}function Of(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(Af(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function AN(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Af(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function SN(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Af(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(lt=Nv.prototype).setTimeout=function(n){this.P=n},lt.nb=function(n){n=n.target;const t=this.M;t&&3==nl(n)?t.l():this.Pa(n)},lt.Pa=function(n){try{if(n==this.g)e:{const w=nl(this.g);var t=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||gv||this.g&&(this.h.h||this.g.ja()||_w(this.g)))){this.J||4!=w||7==t||xf(),xv(this);var e=this.g.da();this.aa=e;t:if(DD(this)){var i=_w(this.g);n="";var r=i.length,s=4==nl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qd(this),Zg(this);var c="";break t}this.h.i=new Vt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==e,function DN(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,w,e),this.i){if(this.ba&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rg(h)){var v=h;break t}}v=null}if(!(e=v)){this.i=!1,this.o=3,vs(12),qd(this),Zg(this);break e}Nf(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mv(this,e)}this.S?(rw(this,w,c),gv&&this.i&&3==w&&(Kb(this.U,this.V,"tick",this.mb),this.V.start())):(Nf(this.j,this.m,c,null),Mv(this,c)),4==w&&qd(this),this.i&&!this.J&&(4==w?$D(this.l,this):(this.i=!1,$g(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,vs(12)):(this.o=0,vs(13)),qd(this),Zg(this)}}}catch{}},lt.mb=function(){if(this.g){var n=nl(this.g),t=this.g.ja();this.C<t.length&&(xv(this),rw(this,n,t),this.i&&4!=n&&$g(this))}},lt.cancel=function(){this.J=!0,qd(this)},lt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function jg(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(xf(),vs(17)),qd(this),this.o=2,Zg(this)):ED(this,this.Y-n)};var ID=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zd(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zd){this.h=void 0!==t?t:n.h,Rv(this,n.j),this.s=n.s,this.g=n.g,qg(this,n.m),this.l=n.l,t=n.i;var e=new zg;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),AD(this,e),this.o=n.o}else n&&(e=String(n).match(ID))?(this.h=!!t,Rv(this,e[1]||"",!0),this.s=Pf(e[2]||""),this.g=Pf(e[3]||"",!0),qg(this,e[4]),this.l=Pf(e[5]||"",!0),AD(this,e[6]||"",!0),this.o=Pf(e[7]||"")):(this.h=!!t,this.i=new zg(null,this.h))}function el(n){return new zd(n)}function Rv(n,t,e){n.j=e?Pf(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function qg(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function AD(n,t,e){t instanceof zg?(n.i=t,function RN(n,t){t&&!n.j&&(hu(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(MD(this,i),kD(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=Ff(t,MN)),n.i=new zg(t,n.h))}function Kn(n,t,e){n.i.set(t,e)}function kv(n){return Kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Pf(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ff(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,NN),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function NN(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zd.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Ff(t,ND,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Ff(t,ND,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(Ff(e,"/"==e.charAt(0)?sw:xN,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Ff(e,xD)),n.join("")};var ND=/[#\/\?@]/g,xN=/[#\?:]/g,sw=/[#\?]/g,MN=/[#\?@]/g,xD=/#/g;function zg(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function hu(n){n.g||(n.g=new Map,n.h=0,n.i&&function SD(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function MD(n,t){hu(n),t=Lf(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function RD(n,t){return hu(n),t=Lf(n,t),n.g.has(t)}function kD(n,t,e){MD(n,t),0<e.length&&(n.i=null,n.g.set(Lf(n,t),Ab(e)),n.h+=e.length)}function Lf(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function ow(n){this.l=n||OD,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ka&&Vt.g.Ka()&&Vt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=zg.prototype).add=function(n,t){hu(this),this.i=null,n=Lf(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},lt.forEach=function(n,t){hu(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},lt.sa=function(){hu(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},lt.Z=function(n){hu(this);let t=[];if("string"==typeof n)RD(this,n)&&(t=t.concat(this.g.get(Lf(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},lt.set=function(n,t){return hu(this),this.i=null,RD(this,n=Lf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},lt.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.Z(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var OD=10;function aw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function PD(n){return n.h?1:n.g?n.g.size:0}function Wg(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function Ov(n,t){n.g?n.g.add(t):n.h=t}function FD(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function LD(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return Ab(n.i)}function Kg(){}function lw(){this.g=new Kg}function UD(n,t,e){const i=e||"";try{Of(n,function(r,s){let c=r;Hd(r)&&(c=Ug(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Pv(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function Yg(n){this.l=n.fc||null,this.j=n.ob||!1}function Uf(n,t){Ar.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=uw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ow.prototype.cancel=function(){if(this.i=LD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Kg.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},Kg.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},dr(Yg,Xb),Yg.prototype.g=function(){return new Uf(this.l,this.j)},Yg.prototype.i=function(n){return function(){return n}}({}),dr(Uf,Ar);var uw=0;function dw(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function tl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Bf(n)}function Bf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=Uf.prototype).open=function(n,t){if(this.readyState!=uw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Bf(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||Vt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tl(this)),this.readyState=uw},lt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Bf(this)),this.g&&(this.readyState=3,Bf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dw(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},lt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?tl(this):Bf(this),3==this.readyState&&dw(this)}},lt.Za=function(n){this.g&&(this.response=this.responseText=n,tl(this))},lt.Ya=function(n){this.g&&(this.response=n,tl(this))},lt.ka=function(){this.g&&tl(this)},lt.setRequestHeader=function(n,t){this.v.append(n,t)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Uf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ON=Vt.JSON.parse;function Hi(n){Ar.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hw,this.L=this.M=!1}dr(Hi,Ar);var hw="",fw=/^https?$/i,PN=["POST","PUT"];function BD(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,gw(n),Jg(n)}function gw(n){n.F||(n.F=!0,ki(n,"complete"),ki(n,"error"))}function Fv(n){if(n.h&&typeof Eb<"u"&&(!n.C[1]||4!=nl(n)||2!=n.da()))if(n.v&&4==nl(n))vD(n.La,0,n);else if(ki(n,"readystatechange"),4==nl(n)){n.h=!1;try{const h=n.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===h){var r=String(n.I).match(ID)[1]||null;if(!r&&Vt.self&&Vt.self.location){var s=Vt.self.location.protocol;r=s.substr(0,s.length-1)}i=!fw.test(r?r.toLowerCase():"")}e=i}if(e)ki(n,"complete"),ki(n,"success");else{n.m=6;try{var c=2<nl(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",gw(n)}}finally{Jg(n)}}}function Jg(n,t){if(n.g){mw(n);const e=n.g,i=n.C[0]?Ib:null;n.g=null,n.C=null,t||ki(n,"ready");try{e.onreadystatechange=i}catch{}}}function mw(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function nl(n){return n.g?n.g.readyState:0}function _w(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case hw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function VD(n){let t="";return Ob(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function vw(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=VD(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Kn(n,t,e))}function Qg(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function jD(n){this.Ga=0,this.i=[],this.j=new Vg,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qg("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qg("baseRetryDelayMs",5e3,n),this.hb=Qg("retryDelaySeedMs",1e4,n),this.eb=Qg("forwardChannelMaxRetries",2,n),this.xa=Qg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new ow(n&&n.concurrentRequestLimit),this.Ja=new lw,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Lv(n){if(bw(n),3==n.H){var t=n.W++,e=el(n.G);Kn(e,"SID",n.J),Kn(e,"RID",t),Kn(e,"TYPE","terminate"),Bv(n,e),(t=new Nv(n,n.j,t,void 0)).L=2,t.v=kv(el(e)),e=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(e=Vt.navigator.sendBeacon(t.v.toString(),"")),!e&&Vt.Image&&((new Image).src=t.v,e=!0),e||(t.g=WD(t.l,null),t.g.ha(t.v)),t.G=Date.now(),$g(t)}qD(n)}function yw(n){n.g&&(Vv(n),n.g.cancel(),n.g=null)}function bw(n){yw(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),Xg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function Uv(n){aw(n.h)||n.m||(n.m=!0,mD(n.Na,n),n.C=0)}function LN(n,t){var e;e=t?t.m:n.W++;const i=el(n.G);Kn(i,"SID",n.J),Kn(i,"RID",e),Kn(i,"AID",n.V),Bv(n,i),n.o&&n.s&&vw(i,n.o,n.s),e=new Nv(n,n.j,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.i=t.F.concat(n.i)),t=HD(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Ov(n.h,e),kf(e,i,t)}function Bv(n,t){n.ma&&Ob(n.ma,function(e,i){Kn(t,i,e)}),n.l&&Of({},function(e,i){Kn(t,i,e)})}function HD(n,t,e){e=Math.min(n.i.length,e);var i=n.l?Wn(n.l.Va,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<e;p++){let v=r[p].h;const w=r[p].g;if(v-=s,0>v)s=Math.max(0,r[p].h-100),h=!1;else try{UD(w,c,"req"+v+"_")}catch{i&&i(w)}}if(h){i=c.join("&");break e}}}return n=n.i.splice(0,e),t.F=n,i}function GD(n){n.g||n.u||(n.ba=1,mD(n.Ma,n),n.A=0)}function ww(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=hc(Wn(n.Ma,n),ZD(n,n.A)),n.A++,0))}function Vv(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Cw(n){n.g=new Nv(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=el(n.wa);Kn(t,"RID","rpc"),Kn(t,"SID",n.J),Kn(t,"CI",n.M?"0":"1"),Kn(t,"AID",n.V),Kn(t,"TYPE","xmlhttp"),Bv(n,t),n.o&&n.s&&vw(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.oa,e.L=1,e.v=kv(el(t)),e.s=null,e.S=!0,TD(e,n)}function Xg(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function $D(n,t){var e=null;if(n.g==t){Xg(n),Vv(n),n.g=null;var i=2}else{if(!Wg(n.h,t))return;e=t.F,FD(n.h,t),i=1}if(0!=n.H)if(n.ta=t.aa,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var r=n.C;ki(i=Zd(),new Mf(i,e)),Uv(n)}else GD(n);else if(3==(r=t.o)||0==r&&0<n.ta||!(1==i&&function FN(n,t){return!(PD(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=hc(Wn(n.Na,n,t),ZD(n,n.C)),n.C++,0)))}(n,t)||2==i&&ww(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:Wd(n,5);break;case 4:Wd(n,10);break;case 3:Wd(n,6);break;default:Wd(n,2)}}function ZD(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.l||(e*=2),e*t}function Wd(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=Wn(n.pb,n);e||(e=new zd("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Rv(e,"https"),kv(e)),function cw(n,t){const e=new Vg;if(Vt.Image){const i=new Image;i.onload=Mg(Pv,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Mg(Pv,e,i,"TestLoadImage: error",!1,t),i.onabort=Mg(Pv,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Mg(Pv,e,i,"TestLoadImage: timeout",!1,t),Vt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else vs(2);n.H=0,n.l&&n.l.za(t),qD(n),bw(n)}function qD(n){if(n.H=0,n.pa=[],n.l){const t=LD(n.h);(0!=t.length||0!=n.i.length)&&(fv(n.pa,t),fv(n.pa,n.i),n.h.i.length=0,Ab(n.i),n.i.length=0),n.l.ya()}}function zD(n,t,e){var i=e instanceof zd?el(e):new zd(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),qg(i,i.m);else{var r=Vt.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new zd(null,void 0);i&&Rv(s,i),t&&(s.g=t),r&&qg(s,r),e&&(s.l=e),i=s}return t=n.Da,(e=n.F)&&t&&Kn(i,e,t),Kn(i,"VER",n.qa),Bv(n,i),i}function WD(n,t,e){if(t&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Hi(e&&n.Ha&&!n.va?new Yg({ob:!0}):n.va)).Oa(n.I),t}function Vf(){}function em(){if(uu&&!(10<=Number(vN)))throw Error("Environmental error: no available transport.")}function ks(n,t){Ar.call(this),this.g=new jD(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!Rg(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Rg(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Kd(this)}function Tw(n){nw.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function Dw(){Sv.call(this),this.status=1}function Kd(n){this.g=n}function ha(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function YD(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var s=n.g[3],c=(t=n.g[0])+(s^(e=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;c=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=e+(c<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=t+(r^s&(e^r))+i[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=t+(e^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=t+(r^(e|~s))+i[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(t=e+((c=t+(r^(e|~s))+i[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((r=s+((c=r+(t^(s|~e))+i[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Ln(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==t||(e[r]=s,i=!1)}this.g=e}(lt=Hi.prototype).Oa=function(n){this.M=n},lt.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iw.g(),this.C=function ew(n){return n.h||(n.h=n.i())}(this.u?this.u:iw),this.g.onreadystatechange=Wn(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(s){return void BD(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=Vt.FormData&&n instanceof Vt.FormData,!(0<=oD(PN,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mw(this),0<this.B&&((this.L=function pw(n){return uu&&function _N(){return xb(mN,9,function(){let n=0;const t=aD(String(Pg)).split("."),e=aD("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=pv(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||pv(0==r[2].length,0==s[2].length)||pv(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wn(this.ua,this)):this.A=vD(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){BD(this,s)}},lt.ua=function(){typeof Eb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ki(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ki(this,"complete"),ki(this,"abort"),Jg(this))},lt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jg(this,!0)),Hi.$.N.call(this)},lt.La=function(){this.s||(this.G||this.v||this.l?Fv(this):this.kb())},lt.kb=function(){Fv(this)},lt.da=function(){try{return 2<nl(this)?this.g.status:-1}catch{return-1}},lt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),ON(t)}},lt.Ia=function(){return this.m},lt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=jD.prototype).qa=8,lt.H=1,lt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Nv(this,this.j,n,void 0);let s=this.s;if(this.U&&(s?(s=dD(s),fD(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=HD(this,r,t),Kn(e=el(this.G),"RID",n),Kn(e,"CVER",22),this.F&&Kn(e,"X-HTTP-Session-Id",this.F),Bv(this,e),s&&(this.O?t="headers="+encodeURIComponent(String(VD(s)))+"&"+t:this.o&&vw(e,this.o,s)),Ov(this.h,r),this.bb&&Kn(e,"TYPE","init"),this.P?(Kn(e,"$req",t),Kn(e,"SID","null"),r.ba=!0,kf(r,e,null)):kf(r,e,t),this.H=2}}else 3==this.H&&(n?LN(this,n):0==this.i.length||aw(this.h)||LN(this))},lt.Ma=function(){if(this.u=null,Cw(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=hc(Wn(this.jb,this),n)}},lt.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,vs(10),yw(this),Cw(this))},lt.ib=function(){null!=this.v&&(this.v=null,yw(this),ww(this),vs(19))},lt.pb=function(n){n?(this.j.info("Successfully pinged google.com"),vs(2)):(this.j.info("Failed to ping google.com"),vs(1))},(lt=Vf.prototype).Ba=function(){},lt.Aa=function(){},lt.za=function(){},lt.ya=function(){},lt.Va=function(){},em.prototype.g=function(n,t){return new ks(n,t)},dr(ks,Ar),ks.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,t=this.l,e=this.h||void 0;vs(0),n.Y=t,n.ma=e||{},n.M=n.aa,n.G=zD(n,null,n.Y),Uv(n)},ks.prototype.close=function(){Lv(this.g)},ks.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=Ug(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.fb++,n)),3==t.H&&Uv(t)},ks.prototype.N=function(){this.g.l=null,delete this.j,Lv(this.g),delete this.g,ks.$.N.call(this)},dr(Tw,nw),dr(Dw,Sv),dr(Kd,Vf),Kd.prototype.Ba=function(){ki(this.g,"a")},Kd.prototype.Aa=function(n){ki(this.g,new Tw(n))},Kd.prototype.za=function(n){ki(this.g,new Dw)},Kd.prototype.ya=function(){ki(this.g,"b")},dr(ha,function KD(){this.blockSize=-1}),ha.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ha.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=e;)YD(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<t;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){YD(this,i),r=0;break}}else for(;s<t;)if(i[r++]=n[s++],r==this.blockSize){YD(this,i),r=0;break}}this.h=r,this.i+=t},ha.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var UN={};function jv(n){return-128<=n&&128>n?xb(UN,n,function(t){return new Ln([0|t],0>t?-1:0)}):new Ln([0|n],0>n?-1:0)}function il(n){if(isNaN(n)||!isFinite(n))return jf;if(0>n)return Gi(il(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=Yd;return new Ln(t,0)}var Yd=4294967296,jf=jv(0),tm=jv(1),fa=jv(16777216);function fc(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function Os(n){return-1==n.h}function Gi(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new Ln(e,~n.h).add(tm)}function Hv(n,t){return n.add(Gi(t))}function Gv(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function nm(n,t){this.g=n,this.h=t}function Jd(n,t){if(fc(t))throw Error("division by zero");if(fc(n))return new nm(jf,jf);if(Os(n))return t=Jd(Gi(n),t),new nm(Gi(t.g),Gi(t.h));if(Os(t))return t=Jd(n,Gi(t)),new nm(Gi(t.g),t.h);if(30<n.g.length){if(Os(n)||Os(t))throw Error("slowDivide_ only works with positive integers.");for(var e=tm,i=t;0>=i.X(n);)e=im(e),i=im(i);var r=Hf(e,1),s=Hf(i,1);for(i=Hf(i,2),e=Hf(e,2);!fc(i);){var c=s.add(i);0>=c.X(n)&&(r=r.add(e),s=c),i=Hf(i,1),e=Hf(e,1)}return t=Hv(n,r.R(t)),new nm(r,t)}for(r=jf;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),c=(s=il(e)).R(t);Os(c)||0<c.X(n);)c=(s=il(e-=i)).R(t);fc(s)&&(s=tm),r=r.add(s),n=Hv(n,c)}return new nm(r,n)}function im(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Ln(e,n.h)}function Hf(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],s=0;s<i;s++)r[s]=0<t?n.D(s+e)>>>t|n.D(s+e+1)<<32-t:n.D(s+e);return new Ln(r,n.h)}(lt=Ln.prototype).ea=function(){if(Os(this))return-Gi(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:Yd+i)*t,t*=Yd}return n},lt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(fc(this))return"0";if(Os(this))return"-"+Gi(this).toString(n);for(var t=il(Math.pow(n,6)),e=this,i="";;){var r=Jd(e,t).g,s=((0<(e=Hv(e,r.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(fc(e=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},lt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},lt.X=function(n){return Os(n=Hv(this,n))?-1:fc(n)?0:1},lt.abs=function(){return Os(this)?Gi(this):this},lt.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),c=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=c>>>16,e[r]=(c&=65535)<<16|(s&=65535)}return new Ln(e,-2147483648&e[e.length-1]?-1:0)},lt.R=function(n){if(fc(this)||fc(n))return jf;if(Os(this))return Os(n)?Gi(this).R(Gi(n)):Gi(Gi(this).R(n));if(Os(n))return Gi(this.R(Gi(n)));if(0>this.X(fa)&&0>n.X(fa))return il(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,c=65535&this.D(i),h=n.D(r)>>>16,p=65535&n.D(r);e[2*i+2*r]+=c*p,Gv(e,2*i+2*r),e[2*i+2*r+1]+=s*p,Gv(e,2*i+2*r+1),e[2*i+2*r+1]+=c*h,Gv(e,2*i+2*r+1),e[2*i+2*r+2]+=s*h,Gv(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new Ln(e,0)},lt.gb=function(n){return Jd(this,n).h},lt.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new Ln(e,this.h&n.h)},lt.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new Ln(e,this.h|n.h)},lt.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new Ln(e,this.h^n.h)},em.prototype.createWebChannel=em.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,Iv.NO_ERROR=0,Iv.TIMEOUT=8,Iv.HTTP_ERROR=6,wD.COMPLETE="complete",tw.EventType=Rf,Rf.OPEN="a",Rf.CLOSE="b",Rf.ERROR="c",Rf.MESSAGE="d",Ar.prototype.listen=Ar.prototype.O,Hi.prototype.listenOnce=Hi.prototype.P,Hi.prototype.getLastError=Hi.prototype.Sa,Hi.prototype.getLastErrorCode=Hi.prototype.Ia,Hi.prototype.getStatus=Hi.prototype.da,Hi.prototype.getResponseJson=Hi.prototype.Wa,Hi.prototype.getResponseText=Hi.prototype.ja,Hi.prototype.send=Hi.prototype.ha,Hi.prototype.setWithCredentials=Hi.prototype.Oa,ha.prototype.digest=ha.prototype.l,ha.prototype.reset=ha.prototype.reset,ha.prototype.update=ha.prototype.j,Ln.prototype.add=Ln.prototype.add,Ln.prototype.multiply=Ln.prototype.R,Ln.prototype.modulo=Ln.prototype.gb,Ln.prototype.compare=Ln.prototype.X,Ln.prototype.toNumber=Ln.prototype.ea,Ln.prototype.toString=Ln.prototype.toString,Ln.prototype.getBits=Ln.prototype.D,Ln.fromNumber=il,Ln.fromString=function JD(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return Gi(JD(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=il(Math.pow(t,8)),i=jf,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),c=parseInt(n.substring(r,r+s),t);8>s?(s=il(Math.pow(t,s)),i=i.R(s).add(il(c))):i=(i=i.R(e)).add(il(c))}return i};var BN=ua.createWebChannelTransport=function(){return new em},QD=ua.getStatEventTarget=function(){return Zd()},$v=ua.ErrorCode=Iv,Ew=ua.EventType=wD,XD=ua.Event=$d,eE=ua.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},VN=ua.FetchXmlHttpFactory=Yg,Iw=ua.WebChannel=tw,Sw=ua.XhrIo=Hi,Aw=ua.Md5=ha,Qd=ua.Integer=Ln;const Zv="@firebase/firestore";class Ji{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");let Gf="9.22.0";const fu=new Ja.Yd("@firebase/firestore");function Nw(){return fu.logLevel}function je(n,...t){if(fu.logLevel<=Ja.in.DEBUG){const e=t.map(qv);fu.debug(`Firestore (${Gf}): ${n}`,...e)}}function Di(n,...t){if(fu.logLevel<=Ja.in.ERROR){const e=t.map(qv);fu.error(`Firestore (${Gf}): ${n}`,...e)}}function to(n,...t){if(fu.logLevel<=Ja.in.WARN){const e=t.map(qv);fu.warn(`Firestore (${Gf}): ${n}`,...e)}}function qv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function pt(n="Unexpected state"){const t=`FIRESTORE (${Gf}) INTERNAL ASSERTION FAILED: `+n;throw Di(t),new Error(t)}function Tt(n,t){n||pt()}function st(n,t){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends B.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class xw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ys{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ji.UNAUTHENTICATED))}shutdown(){}}class $f{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class GN{constructor(t){this.t=t,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=v=>this.i!==r?(r=this.i,e(v)):Promise.resolve();let c=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Qi,t.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const v=c;t.enqueueRetryable((0,ne.Z)(function*(){yield v.promise,yield s(i.currentUser)}))},p=v=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>p(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Qi)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt("string"==typeof i.accessToken),new xw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Tt(null===t||"string"==typeof t),new Ji(t)}}class $N{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class RP{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new $N(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZN{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tE{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const i=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.T;return this.T=s.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Tt("string"==typeof e.token),this.T=e.token,new ZN(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function rm(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class nE{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=rm(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Ut(n,t){return n<t?-1:n>t?1:0}function Zf(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function Mw(n){return n+"\0"}class fi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return fi.fromMillis(Date.now())}static fromDate(t){return fi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new fi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ut(this.nanoseconds,t.nanoseconds):Ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Et(t)}static min(){return new Et(new fi(0,0))}static max(){return new Et(new fi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sm{constructor(t,e,i){void 0===e?e=0:e>t.length&&pt(),void 0===i?i=t.length-e:i>t.length-e&&pt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===sm.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof sm?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class hn extends sm{construct(t,e,i){return new hn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new hn(e)}static emptyPath(){return new hn([])}}const iE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ei extends sm{construct(t,e,i){return new Ei(t,e,i)}static isValidIdentifier(t){return iE.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ei.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ei(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const h=t[r];if("\\"===h){if(r+1===t.length)throw new Fe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Fe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===h?(c=!c,r++):"."!==h||c?(i+=h,r++):(s(),r++)}if(s(),c)throw new Fe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ei(e)}static emptyPath(){return new Ei([])}}class Qe{constructor(t){this.path=t}static fromPath(t){return new Qe(hn.fromString(t))}static fromName(t){return new Qe(hn.fromString(t).popFirst(5))}static empty(){return new Qe(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===hn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return hn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Qe(new hn(t.slice()))}}class qf{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function rE(n){return n.fields.find(t=>2===t.kind)}function pu(n){return n.fields.filter(t=>2!==t.kind)}qf.UNKNOWN_ID=-1;class om{constructor(t,e){this.fieldPath=t,this.kind=e}}class am{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new am(0,xo.min())}}function Rw(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Et.fromTimestamp(1e9===i?new fi(e+1,0):new fi(e,i));return new xo(r,Qe.empty(),t)}function zv(n){return new xo(n.readTime,n.key,-1)}class xo{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new xo(Et.min(),Qe.empty(),-1)}static max(){return new xo(Et.max(),Qe.empty(),-1)}}function kw(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Qe.comparator(n.documentKey,t.documentKey),0!==e?e:Ut(n.largestBatchId,t.largestBatchId))}const WN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function gu(n){return Ow.apply(this,arguments)}function Ow(){return Ow=(0,ne.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==WN)throw n;je("LocalStore","Unexpectedly lost primary lease")}),Ow.apply(this,arguments)}class ce{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ce((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ce?e:ce.resolve(e)}catch(e){return ce.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.reject(e)}static resolve(t){return new ce((e,i)=>{e(t)})}static reject(t){return new ce((e,i)=>{i(t)})}static waitFor(t){return new ce((e,i)=>{let r=0,s=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=ce.resolve(!1);for(const i of t)e=e.next(r=>r?ce.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new ce((i,r)=>{const s=t.length,c=new Array(s);let h=0;for(let p=0;p<s;p++){const v=p;e(t[v]).next(w=>{c[v]=w,++h,h===s&&i(c)},w=>r(w))}})}static doWhile(t,e){return new ce((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class lm{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new Qi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new Wf(t,e.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=Wv(i.target.error);this.v.reject(new Wf(t,r))}}static open(t,e,i,r){try{return new lm(e,t.transaction(r,i))}catch(s){throw new Wf(e,s)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(je("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new KN(e)}}class pa{constructor(t,e,i){this.name=t,this.version=e,this.V=i,12.2===pa.S((0,B.z$)())&&Di("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return je("SimpleDb","Removing database:",t),_u(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,B.hl)())return!1;if(pa.C())return!0;const t=(0,B.z$)(),e=pa.S(t),i=0<e&&e<10,r=pa.N(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(t){var e=this;return(0,ne.Z)(function*(){return e.db||(je("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new Wf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;r("VersionError"===h.name?new Fe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Fe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Wf(t,h))},s.onupgradeneeded=c=>{je("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.V.O(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{je("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=i=>e.F(i)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,ne.Z)(function*(){const c="readonly"===e;let h=0;for(;;){++h;try{s.db=yield s.$(t);const p=lm.open(s.db,t,c?"readonly":"readwrite",i),v=r(p).next(w=>(p.P(),w)).catch(w=>(p.abort(w),ce.reject(w))).toPromise();return v.catch(()=>{}),yield p.R,v}catch(p){const v=p,w="FirebaseError"!==v.name&&h<3;if(je("SimpleDb","Transaction failed with error:",v.message,"Retrying:",w),s.close(),!w)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oE{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return _u(this.L.delete())}}class Wf extends Fe{constructor(t,e){super(pe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function mu(n){return"IndexedDbTransactionError"===n.name}class KN{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(je("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),_u(i)}add(t){return je("SimpleDb","ADD",this.store.name,t,t),_u(this.store.add(t))}get(t){return _u(this.store.get(t)).next(e=>(void 0===e&&(e=null),je("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return je("SimpleDb","DELETE",this.store.name,t),_u(this.store.delete(t))}count(){return je("SimpleDb","COUNT",this.store.name),_u(this.store.count())}j(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(c,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ce((s,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}H(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ce((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}J(t,e){je("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,c,h)=>h.delete())}X(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Z(t){const e=this.cursor({});return new ce((i,r)=>{e.onerror=s=>{const c=Wv(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(h=>{h?c.continue():i()}):i()}})}W(t,e){const i=[];return new ce((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const h=c.target.result;if(!h)return void r();const p=new oE(h),v=e(h.primaryKey,h.value,p);if(v instanceof ce){const w=v.catch(S=>(p.done(),ce.reject(S)));i.push(w)}p.isDone?r():null===p.K?h.continue():h.continue(p.K)}}).next(()=>ce.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function _u(n){return new ce((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=Wv(i.target.error);e(r)}})}let aE=!1;function Wv(n){const t=pa.S((0,B.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aE||(aE=!0,setTimeout(()=>{throw i},0)),i}}return n}class lE{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;je("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,ne.Z)(function*(){e.task=null;try{je("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(i){mu(i)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield gu(i)}yield e.et(6e4)}))}}class cE{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,ne.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.st(i,t))})()}st(t,e){const i=new Set;let r=e,s=!0;return ce.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return je("IndexBackiller",`Processing collection: ${c}`),this.it(t,c,r).next(h=>{r-=h,i.add(c)});s=!1})).next(()=>e-r)}it(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.rt(r,s)).next(h=>(je("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(t,e,h))).next(()=>c.size)}))}rt(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=zv(s);kw(c,i)>0&&(i=c)}),new xo(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Ps=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return n.ct=-1,n})();function cm(n){return null==n}function um(n){return 0===n&&1/n==-1/0}function YN(n){return"number"==typeof n&&Number.isInteger(n)&&!um(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ur(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=JN(t)),t=kP(n.get(e),t);return JN(t)}function kP(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function JN(n){return n+"\x01\x01"}function pc(n){const t=n.length;if(Tt(t>=2),2===t)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&pt(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:pt()}s=c+2}return new hn(i)}const QN=["userId","batchId"];function Pw(n,t){return[n,Ur(t)]}function XN(n,t,e){return[n,Ur(t),e]}const OP={},PP=["prefixPath","collectionGroup","readTime","documentId"],Kv=["prefixPath","collectionGroup","documentId"],FP=["collectionGroup","readTime","prefixPath","documentId"],uE=["canonicalId","targetId"],Yv=["targetId","path"],dE=["path","targetId"],hE=["collectionId","parent"],LP=["indexId","uid"],Fw=["uid","sequenceNumber"],fE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ex=["indexId","uid","orderedDocumentKey"],pE=["userId","collectionPath","documentId"],UP=["userId","collectionPath","largestBatchId"],BP=["userId","collectionGroup","largestBatchId"],gE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tx=[...gE,"documentOverlays"],dm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mE=dm,VP=[...mE,"indexConfiguration","indexState","indexEntries"];class _E extends sE{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function Br(n,t){const e=st(n);return pa.M(e.ht,t)}function vE(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function vu(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yE(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class ni{constructor(t,e){this.comparator=t,this.root=e||Nr.EMPTY}insert(t,e){return new ni(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(t){return new ni(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jv(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jv(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jv(this.root,t,this.comparator,!0)}}class Jv{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Nr{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Nr.RED,this.left=r??Nr.EMPTY,this.right=s??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Nr(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Nr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const t=this.left.check();if(t!==this.right.check())throw pt();return t+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1,Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Nr(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yn{constructor(t){this.comparator=t,this.data=new ni(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nx(this.data.getIterator())}getIteratorFrom(t){return new nx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Yn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Yn(this.comparator);return e.data=t,e}}class nx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function is(n){return n.hasNext()?n.getNext():void 0}class Fs{constructor(t){this.fields=t,t.sort(Ei.comparator)}static empty(){return new Fs([])}unionWith(t){let e=new Yn(Ei.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Fs(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Zf(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Qv("Invalid base64 string: "+r):r}}(t);return new Mn(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Mn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rl(n){if(Tt(!!n),"string"==typeof n){let t=0;const e=rx.exec(n);if(Tt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Oi(n.seconds),nanos:Oi(n.nanos)}}function Oi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gc(n){return"string"==typeof n?Mn.fromBase64String(n):Mn.fromUint8Array(n)}function Kf(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function hm(n){const t=n.mapValue.fields.__previous_value__;return Kf(t)?hm(t):t}function Yf(n){const t=rl(n.mapValue.fields.__local_write_time__.timestampValue);return new fi(t.seconds,t.nanos)}class sx{constructor(t,e,i,r,s,c,h,p,v){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=v}}class mc{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new mc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof mc&&t.projectId===this.projectId&&t.database===this.database}}const _c={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xv={nullValue:"NULL_VALUE"};function vc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kf(n)?4:Bw(n)?9007199254740991:10:pt()}function sl(n,t){if(n===t)return!0;const e=vc(n);if(e!==vc(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Yf(n).isEqual(Yf(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=rl(i.timestampValue),c=rl(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,gc(n.bytesValue).isEqual(gc(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Oi(i.geoPointValue.latitude)===Oi(r.geoPointValue.latitude)&&Oi(i.geoPointValue.longitude)===Oi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Oi(i.integerValue)===Oi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Oi(i.doubleValue),c=Oi(r.doubleValue);return s===c?um(s)===um(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return Zf(n.arrayValue.values||[],t.arrayValue.values||[],sl);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(vE(s)!==vE(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!sl(s[h],c[h])))return!1;return!0}(n,t);default:return pt()}var r}function Xd(n,t){return void 0!==(n.values||[]).find(e=>sl(e,t))}function bs(n,t){if(n===t)return 0;const e=vc(n),i=vc(t);if(e!==i)return Ut(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=Oi(r.integerValue||r.doubleValue),h=Oi(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return Lw(n.timestampValue,t.timestampValue);case 4:return Lw(Yf(n),Yf(t));case 5:return Ut(n.stringValue,t.stringValue);case 6:return function(r,s){const c=gc(r),h=gc(s);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const v=Ut(c[p],h[p]);if(0!==v)return v}return Ut(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Ut(Oi(r.latitude),Oi(s.latitude));return 0!==c?c:Ut(Oi(r.longitude),Oi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const v=bs(c[p],h[p]);if(v)return v}return Ut(c.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===_c.mapValue&&s===_c.mapValue)return 0;if(r===_c.mapValue)return 1;if(s===_c.mapValue)return-1;const c=r.fields||{},h=Object.keys(c),p=s.fields||{},v=Object.keys(p);h.sort(),v.sort();for(let w=0;w<h.length&&w<v.length;++w){const S=Ut(h[w],v[w]);if(0!==S)return S;const N=bs(c[h[w]],p[v[w]]);if(0!==N)return N}return Ut(h.length,v.length)}(n.mapValue,t.mapValue);default:throw pt()}}function Lw(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Ut(n,t);const e=rl(n),i=rl(t),r=Ut(e.seconds,i.seconds);return 0!==r?r:Ut(e.nanos,i.nanos)}function yu(n){return ga(n)}function ga(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=rl(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gc(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=ga(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const h of r)c?c=!1:s+=",",s+=`${h}:${ga(i.fields[h])}`;return s+"}"}(n.mapValue):pt();var t}function Jf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Uw(n){return!!n&&"integerValue"in n}function fm(n){return!!n&&"arrayValue"in n}function bE(n){return!!n&&"nullValue"in n}function wE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pm(n){return!!n&&"mapValue"in n}function ty(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return vu(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=ty(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ty(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Bw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ox(n){return"nullValue"in n?Xv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Jf(mc.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function CE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Jf(mc.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_c:pt()}function ax(n,t){const e=bs(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function ny(n,t){const e=bs(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class xr{constructor(t){this.value=t}static empty(){return new xr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!pm(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ty(e)}setAll(t){let e=Ei.emptyPath(),i={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=h.popLast()}c?i[h.lastSegment()]=ty(c):r.push(h.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());pm(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return sl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];pm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){vu(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new xr(ty(this.value))}}function Vw(n){const t=[];return vu(n.fields,(e,i)=>{const r=new Ei([e]);if(pm(i)){const s=Vw(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new Fs(t)}class Jn{constructor(t,e,i,r,s,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=c,this.documentState=h}static newInvalidDocument(t){return new Jn(t,0,Et.min(),Et.min(),Et.min(),xr.empty(),0)}static newFoundDocument(t,e,i,r){return new Jn(t,1,e,Et.min(),i,r,0)}static newNoDocument(t,e){return new Jn(t,2,e,Et.min(),Et.min(),xr.empty(),0)}static newUnknownDocument(t,e){return new Jn(t,3,e,Et.min(),Et.min(),xr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Jn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yc{constructor(t,e){this.position=t,this.inclusive=e}}function jw(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?Qe.comparator(Qe.fromName(c.referenceValue),e.key):bs(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function gm(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!sl(n.position[e],t.position[e]))return!1;return!0}class bc{constructor(t,e="asc"){this.field=t,this.dir=e}}function TE(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class DE{}class ln extends DE{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new jP(t,e,i):"array-contains"===e?new $P(t,i):"in"===e?new NE(t,i):"not-in"===e?new ry(t,i):"array-contains-any"===e?new ux(t,i):new ln(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new HP(t,i):new GP(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(bs(e,this.value)):null!==e&&vc(this.value)===vc(e)&&this.matchesComparison(bs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Rn extends DE{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new Rn(t,e)}matches(t){return Qf(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(e=>e.isInequality());return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function Qf(n){return"and"===n.op}function Hw(n){return"or"===n.op}function EE(n){return lx(n)&&Qf(n)}function lx(n){for(const t of n.filters)if(t instanceof Rn)return!1;return!0}function iy(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+yu(n.value);if(EE(n))return n.filters.map(t=>iy(t)).join(",");{const t=n.filters.map(e=>iy(e)).join(",");return`${n.op}(${t})`}}function IE(n,t){return n instanceof ln?(e=n,(i=t)instanceof ln&&e.op===i.op&&e.field.isEqual(i.field)&&sl(e.value,i.value)):n instanceof Rn?function(e,i){return i instanceof Rn&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,s,c)=>r&&IE(s,i.filters[c]),!0)}(n,t):void pt();var e,i}function SE(n,t){const e=n.filters.concat(t);return Rn.create(e,n.op)}function AE(n){return n instanceof ln?`${(t=n).field.canonicalString()} ${t.op} ${yu(t.value)}`:n instanceof Rn?function(t){return t.op.toString()+" {"+t.getFilters().map(AE).join(" ,")+"}"}(n):"Filter";var t}class jP extends ln{constructor(t,e,i){super(t,e,i),this.key=Qe.fromName(i.referenceValue)}matches(t){const e=Qe.comparator(t.key,this.key);return this.matchesComparison(e)}}class HP extends ln{constructor(t,e){super(t,"in",e),this.keys=cx(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class GP extends ln{constructor(t,e){super(t,"not-in",e),this.keys=cx(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function cx(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Qe.fromName(i.referenceValue))}class $P extends ln{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return fm(e)&&Xd(e.arrayValue,this.value)}}class NE extends ln{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Xd(this.value.arrayValue,e)}}class ry extends ln{constructor(t,e){super(t,"not-in",e)}matches(t){if(Xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Xd(this.value.arrayValue,e)}}class ux extends ln{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!fm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Xd(this.value.arrayValue,i))}}class dx{constructor(t,e=null,i=[],r=[],s=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=h,this.dt=null}}function sy(n,t=null,e=[],i=[],r=null,s=null,c=null){return new dx(n,t,e,i,r,s,c)}function no(n){const t=st(n);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>iy(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),cm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>yu(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>yu(i)).join(",")),t.dt=e}return t.dt}function Xf(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!TE(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!IE(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!gm(n.startAt,t.startAt)&&gm(n.endAt,t.endAt)}function ep(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tp(n,t){return n.filters.filter(e=>e instanceof ln&&e.field.isEqual(t))}function xE(n,t,e){let i=Xv,r=!0;for(const s of tp(n,t)){let c=Xv,h=!0;switch(s.op){case"<":case"<=":c=ox(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=Xv}ax({value:i,inclusive:r},{value:c,inclusive:h})<0&&(i=c,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];ax({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function oy(n,t,e){let i=_c,r=!0;for(const s of tp(n,t)){let c=_c,h=!0;switch(s.op){case">=":case">":c=CE(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=_c}ny({value:i,inclusive:r},{value:c,inclusive:h})>0&&(i=c,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];ny({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class ma{constructor(t,e=null,i=[],r=[],s=null,c="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.wt=null,this._t=null}}function mm(n,t,e,i,r,s,c,h){return new ma(n,t,e,i,r,s,c,h)}function _m(n){return new ma(n)}function hx(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ME(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Gw(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function ay(n){return null!==n.collectionGroup}function eh(n){const t=st(n);if(null===t.wt){t.wt=[];const e=Gw(t),i=ME(t);if(null!==e&&null===i)e.isKeyField()||t.wt.push(new bc(e)),t.wt.push(new bc(Ei.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new bc(Ei.keyField(),s))}}}return t.wt}function ws(n){const t=st(n);if(!t._t)if("F"===t.limitType)t._t=sy(t.path,t.collectionGroup,eh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of eh(t))e.push(new bc(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new yc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yc(t.startAt.position,t.startAt.inclusive):null;t._t=sy(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function $w(n,t){t.getFirstInequalityField(),Gw(n);const e=n.filters.concat([t]);return new ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function ly(n,t,e){return new ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function np(n,t){return Xf(ws(n),ws(t))&&n.limitType===t.limitType}function Zw(n){return`${no(ws(n))}|lt:${n.limitType}`}function cy(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>AE(i)).join(", ")}]`),cm(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>yu(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>yu(i)).join(",")),`Target(${e})`}(ws(n))}; limitType=${n.limitType})`}function vm(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Qe.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of eh(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const h=jw(r,s,c);return r.inclusive?h<=0:h<0}(e.startAt,eh(e),i)||e.endAt&&!function(r,s,c){const h=jw(r,s,c);return r.inclusive?h>=0:h>0}(e.endAt,eh(e),i)));var e,i}function RE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qw(n){return(t,e)=>{let i=!1;for(const r of eh(n)){const s=zw(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function zw(n,t,e){const i=n.field.isKeyField()?Qe.comparator(t.key,e.key):function(r,s,c){const h=s.data.field(r),p=c.data.field(r);return null!==h&&null!==p?bs(h,p):pt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return pt()}}class bu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){vu(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return yE(this.inner)}size(){return this.innerSize}}const kE=new ni(Qe.comparator);function rs(){return kE}const OE=new ni(Qe.comparator);function ym(...n){let t=OE;for(const e of n)t=t.insert(e.key,e);return t}function fx(n){let t=OE;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function wc(){return bm()}function PE(){return bm()}function bm(){return new bu(n=>n.toString(),(n,t)=>n.isEqual(t))}const px=new ni(Qe.comparator),ZP=new Yn(Qe.comparator);function Wt(...n){let t=ZP;for(const e of n)t=t.add(e);return t}const qP=new Yn(Ut);function FE(){return qP}function gx(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:um(t)?"-0":t}}function LE(n){return{integerValue:""+n}}function mx(n,t){return YN(t)?LE(t):gx(n,t)}class Ww{constructor(){this._=void 0}}function zP(n,t,e){return n instanceof wm?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Kf(r)&&(r=hm(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof a?l(n,t):n instanceof u?d(n,t):function(i,r){const s=UE(i,r),c=m(s)+m(i.gt);return Uw(s)&&Uw(i.gt)?LE(c):gx(i.serializer,c)}(n,t)}function WP(n,t,e){return n instanceof a?l(n,t):n instanceof u?d(n,t):e}function UE(n,t){return n instanceof f?Uw(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class wm extends Ww{}class a extends Ww{constructor(t){super(),this.elements=t}}function l(n,t){const e=y(t);for(const i of n.elements)e.some(r=>sl(r,i))||e.push(i);return{arrayValue:{values:e}}}class u extends Ww{constructor(t){super(),this.elements=t}}function d(n,t){let e=y(t);for(const i of n.elements)e=e.filter(r=>!sl(r,i));return{arrayValue:{values:e}}}class f extends Ww{constructor(t,e){super(),this.serializer=t,this.gt=e}}function m(n){return Oi(n.integerValue||n.doubleValue)}function y(n){return fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D{constructor(t,e){this.field=t,this.transform=e}}class A{constructor(t,e){this.version=t,this.transformResults=e}}class R{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new R}static exists(t){return new R(void 0,t)}static updateTime(t){return new R(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function H(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class K{}function re(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Mo(n.key,R.none()):new It(n.key,n.data,R.none());{const e=n.data,i=xr.empty();let r=new Yn(Ei.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new Me(n.key,i,new Fs(r.toArray()),R.none())}}function Se(n,t,e){n instanceof It?function(i,r,s){const c=i.value.clone(),h=Dn(i.fieldTransforms,r,s.transformResults);c.setAll(h),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof Me?function(i,r,s){if(!H(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=Dn(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(Pt(i)),h.setAll(c),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function $e(n,t,e,i){return n instanceof It?function(r,s,c,h){if(!H(r.precondition,s))return c;const p=r.value.clone(),v=ii(r.fieldTransforms,h,s);return p.setAll(v),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof Me?function(r,s,c,h){if(!H(r.precondition,s))return c;const p=ii(r.fieldTransforms,h,s),v=s.data;return v.setAll(Pt(r)),v.setAll(p),s.convertToFoundDocument(s.version,v).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,t,e,i):(c=e,H(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function tt(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=UE(i.transform,r||null);null!=s&&(null===e&&(e=xr.empty()),e.set(i.field,s))}return e||null}function _t(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Zf(e,i,(r,s)=>function I(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof a&&i instanceof a||e instanceof u&&i instanceof u?Zf(e.elements,i.elements,sl):e instanceof f&&i instanceof f?sl(e.gt,i.gt):e instanceof wm&&i instanceof wm);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class It extends K{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Me extends K{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Pt(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Dn(n,t,e){const i=new Map;Tt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,h=t.data.field(s.field);i.set(s.field,WP(c,h,e[r]))}return i}function ii(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,zP(s,c,t))}return i}class Mo extends K{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cm extends K{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tm{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Se(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=$e(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=$e(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=PE();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=e.has(r.key)?null:h;const p=re(c,h);null!==p&&i.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(Et.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Wt())}isEqual(t){return this.batchId===t.batchId&&Zf(this.mutations,t.mutations,(e,i)=>_t(e,i))&&Zf(this.baseMutations,t.baseMutations,(e,i)=>_t(e,i))}}class Dm{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Tt(t.mutations.length===i.length);let r=px;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new Dm(t,e,i,r)}}class Em{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yw{constructor(t,e){this.count=t,this.unchangedNames=e}}var Pi,fn;function uy(n){switch(n){default:return pt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function KP(n){if(void 0===n)return Di("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Pi.OK:return pe.OK;case Pi.CANCELLED:return pe.CANCELLED;case Pi.UNKNOWN:return pe.UNKNOWN;case Pi.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Pi.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Pi.INTERNAL:return pe.INTERNAL;case Pi.UNAVAILABLE:return pe.UNAVAILABLE;case Pi.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Pi.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Pi.NOT_FOUND:return pe.NOT_FOUND;case Pi.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Pi.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Pi.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Pi.ABORTED:return pe.ABORTED;case Pi.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Pi.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Pi.DATA_LOSS:return pe.DATA_LOSS;default:return pt()}}(fn=Pi||(Pi={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class _x{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return BE}static getOrCreateInstance(){return null===BE&&(BE=new _x),BE}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let BE=null;function YP(){return new TextEncoder}const O6=new Qd([4294967295,4294967295],0);function JP(n){const t=YP().encode(n),e=new Aw;return e.update(t),new Uint8Array(e.digest())}function QP(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Qd([e,i],0),new Qd([r,s],0)]}class vx{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Jw(`Invalid padding: ${e}`);if(i<0)throw new Jw(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new Jw(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new Jw(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=Qd.fromNumber(this.It)}Et(t,e,i){let r=t.add(e.multiply(Qd.fromNumber(i)));return 1===r.compare(O6)&&(r=new Qd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=JP(t),[i,r]=QP(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);if(!this.At(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),c=new vx(s,r,e);return i.forEach(h=>c.insert(h)),c}insert(t){if(0===this.It)return;const e=JP(t),[i,r]=QP(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);this.Rt(c)}}Rt(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class Jw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qw{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Xw.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Qw(Et.min(),r,new ni(Ut),rs(),Wt())}}class Xw{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Xw(i,e,Wt(),Wt(),Wt())}}class VE{constructor(t,e,i,r){this.Pt=t,this.removedTargetIds=e,this.key=i,this.bt=r}}class XP{constructor(t,e){this.targetId=t,this.Vt=e}}class eF{constructor(t,e,i=Mn.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class tF{constructor(){this.St=0,this.Dt=iF(),this.Ct=Mn.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=Wt(),e=Wt(),i=Wt();return this.Dt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:pt()}}),new Xw(this.Ct,this.xt,t,e,i)}Ft(){this.Nt=!1,this.Dt=iF()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class P6{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=rs(),this.zt=nF(),this.Wt=new ni(Ut)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,e=>{const i=this.Zt(e);switch(t.state){case 0:this.te(e)&&i.$t(t.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(t.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(e);break;case 3:this.te(e)&&(i.Kt(),i.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),i.$t(t.resumeToken));break;default:pt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach((i,r)=>{this.te(r)&&e(r)})}ne(t){var e;const i=t.targetId,r=t.Vt.count,s=this.se(i);if(s){const c=s.target;if(ep(c))if(0===r){const h=new Qe(c.path);this.Yt(i,h,Jn.newNoDocument(h,Et.min()))}else Tt(1===r);else{const h=this.ie(i);if(h!==r){const p=this.re(t,h);0!==p&&(this.ee(i),this.Wt=this.Wt.insert(i,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=_x.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(v,w,S){var N,O,G,J,te,De;const Oe={localCacheCount:w,existenceFilterCount:S.count},Be=S.unchangedNames;return Be&&(Oe.bloomFilter={applied:0===v,hashCount:null!==(N=Be?.hashCount)&&void 0!==N?N:0,bitmapLength:null!==(J=null===(G=null===(O=Be?.bits)||void 0===O?void 0:O.bitmap)||void 0===G?void 0:G.length)&&void 0!==J?J:0,padding:null!==(De=null===(te=Be?.bits)||void 0===te?void 0:te.padding)&&void 0!==De?De:0}),Oe}(p,h,t.Vt))}}}}re(t,e){const{unchangedNames:i,count:r}=t.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=i;let p,v;try{p=gc(s).toUint8Array()}catch(w){if(w instanceof Qv)return to("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw w}try{v=new vx(p,c,h)}catch(w){return to(w instanceof Jw?"BloomFilter error: ":"Applying bloom filter failed: ",w),1}return 0===v.It?1:r!==e-this.oe(t.targetId,v)?2:0}oe(t,e){const i=this.Gt.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.vt(h)||(this.Yt(t,s,null),r++)}),r}ce(t){const e=new Map;this.Qt.forEach((s,c)=>{const h=this.se(c);if(h){if(s.current&&ep(h.target)){const p=new Qe(h.target.path);null!==this.jt.get(p)||this.ae(c,p)||this.Yt(c,p,Jn.newNoDocument(p,t))}s.Mt&&(e.set(c,s.Ot()),s.Ft())}});let i=Wt();this.zt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const v=this.se(p);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.jt.forEach((s,c)=>c.setReadTime(t));const r=new Qw(t,e,this.Wt,this.jt,i);return this.jt=rs(),this.zt=nF(),this.Wt=new ni(Ut),r}Jt(t,e){if(!this.te(t))return;const i=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,i),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,i){if(!this.te(t))return;const r=this.Zt(t);this.ae(t,e)?r.Bt(e,1):r.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),i&&(this.jt=this.jt.insert(e,i))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new tF,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Yn(Ut),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||je("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new tF),this.Gt.getRemoteKeysForTarget(t).forEach(e=>{this.Yt(t,e,null)})}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function nF(){return new ni(Qe.comparator)}function iF(){return new ni(Qe.comparator)}const F6={asc:"ASCENDING",desc:"DESCENDING"},L6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U6={and:"AND",or:"OR"};class B6{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function yx(n,t){return n.useProto3Json||cm(t)?t:{value:t}}function dy(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function rF(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function V6(n,t){return dy(n,t.toTimestamp())}function hr(n){return Tt(!!n),Et.fromTimestamp(function(t){const e=rl(t);return new fi(e.seconds,e.nanos)}(n))}function bx(n,t){return(e=n,new hn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function sF(n){const t=hn.fromString(n);return Tt(pF(t)),t}function e1(n,t){return bx(n.databaseId,t.path)}function wu(n,t){const e=sF(t);if(e.get(1)!==n.databaseId.projectId)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Qe(aF(e))}function wx(n,t){return bx(n.databaseId,t)}function oF(n){const t=sF(n);return 4===t.length?hn.emptyPath():aF(t)}function t1(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aF(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lF(n,t,e){return{name:e1(n,t),fields:e.value.mapValue.fields}}function cF(n,t,e){const i=wu(n,t.name),r=hr(t.updateTime),s=t.createTime?hr(t.createTime):Et.min(),c=new xr({mapValue:{fields:t.fields}}),h=Jn.newFoundDocument(i,r,s,c);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function n1(n,t){let e;if(t instanceof It)e={update:lF(n,t.key,t.value)};else if(t instanceof Mo)e={delete:e1(n,t.key)};else if(t instanceof Me)e={update:lF(n,t.key,t.data),updateMask:W6(t.fieldMask)};else{if(!(t instanceof Cm))return pt();e={verify:e1(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof wm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof a)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof u)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof f)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw pt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:V6(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:pt()),e;var r}function Cx(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?R.updateTime(hr(r.updateTime)):void 0!==r.exists?R.exists(r.exists):R.none():R.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let h=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),h=new wm):"appendMissingElements"in c?h=new a(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new u(c.removeAllFromArray.values||[]):"increment"in c?h=new f(s,c.increment):pt();const p=Ei.fromServerFormat(c.fieldPath);return new D(p,h)}(n,r)):[];var r;if(t.update){const r=wu(n,t.update.name),s=new xr({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Fs((t.updateMask.fieldPaths||[]).map(v=>Ei.fromServerFormat(v)));return new Me(r,s,c,e,i)}return new It(r,s,e,i)}if(t.delete){const r=wu(n,t.delete);return new Mo(r,e)}if(t.verify){const r=wu(n,t.verify);return new Cm(r,e)}return pt()}function uF(n,t){return{documents:[wx(n,t.path)]}}function Tx(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=wx(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=wx(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0!==p.length)return fF(Rn.create(p,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(v=>{return{field:ip((w=v).field),direction:Z6(w.dir)};var w})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=yx(n,t.limit);var h,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function dF(n){let t=oF(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Tt(1===i);const w=e.from[0];w.allDescendants?r=w.collectionId:t=t.child(w.collectionId)}let s=[];e.where&&(s=function(w){const S=hF(w);return S instanceof Rn&&EE(S)?S.getFilters():[S]}(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(w=>{return new bc(hy((S=w).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;e.limit&&(h=function(w){let S;return S="object"==typeof w?w.value:w,cm(S)?null:S}(e.limit));let p=null;var w;e.startAt&&(p=new yc((w=e.startAt).values||[],!!w.before));let v=null;return e.endAt&&(v=function(w){return new yc(w.values||[],!w.before)}(e.endAt)),mm(t,r,c,s,h,"F",p,v)}function hF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=hy(t.unaryFilter.field);return ln.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=hy(t.unaryFilter.field);return ln.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hy(t.unaryFilter.field);return ln.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=hy(t.unaryFilter.field);return ln.create(s,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(n):void 0!==n.fieldFilter?ln.create(hy((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Rn.create(t.compositeFilter.filters.map(e=>hF(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return pt()}}(t.compositeFilter.op))}(n):pt();var t}function Z6(n){return F6[n]}function q6(n){return L6[n]}function z6(n){return U6[n]}function ip(n){return{fieldPath:n.canonicalString()}}function hy(n){return Ei.fromServerFormat(n.fieldPath)}function fF(n){return n instanceof ln?function(t){if("=="===t.op){if(wE(t.value))return{unaryFilter:{field:ip(t.field),op:"IS_NAN"}};if(bE(t.value))return{unaryFilter:{field:ip(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(wE(t.value))return{unaryFilter:{field:ip(t.field),op:"IS_NOT_NAN"}};if(bE(t.value))return{unaryFilter:{field:ip(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ip(t.field),op:q6(t.op),value:t.value}}}(n):n instanceof Rn?function(t){const e=t.getFilters().map(i=>fF(i));return 1===e.length?e[0]:{compositeFilter:{op:z6(t.op),filters:e}}}(n):pt()}function W6(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function pF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class th{constructor(t,e,i,r,s=Et.min(),c=Et.min(),h=Mn.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(t){return new th(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new th(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new th(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new th(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class gF{constructor(t){this.fe=t}}function mF(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:jE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:e1(r=n.fe,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:dy(r,s.version.toTimestamp()),createTime:dy(r,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Im(t.version)};else{if(!t.isUnknownDocument())return pt();i.unknownDocument={path:e.path.toArray(),version:Im(t.version)}}var r,s;return i}function jE(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Im(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Sm(n){const t=new fi(n.seconds,n.nanoseconds);return Et.fromTimestamp(t)}function Am(n,t){const e=(t.baseMutations||[]).map(s=>Cx(n.fe,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>Cx(n.fe,s)),r=fi.fromMillis(t.localWriteTimeMs);return new Tm(t.batchId,r,e,i)}function i1(n){const t=Sm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Sm(n.lastLimboFreeSnapshotVersion):Et.min();let i;var r;return void 0!==n.query.documents?(Tt(1===(r=n.query).documents.length),i=ws(_m(oF(r.documents[0])))):i=ws(dF(n.query)),new th(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Mn.fromBase64String(n.resumeToken))}function _F(n,t){const e=Im(t.snapshotVersion),i=Im(t.lastLimboFreeSnapshotVersion);let r;r=ep(t.target)?uF(n.fe,t.target):Tx(n.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:no(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Dx(n){const t=dF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ly(t,t.limit,"L"):t}function Ex(n,t){return new Em(t.largestBatchId,Cx(n.fe,t.overlayMutation))}function vF(n,t){const e=t.path.lastSegment();return[n,Ur(t.path.popLast()),e]}function yF(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Im(i.readTime),documentKey:Ur(i.documentKey.path),largestBatchId:i.largestBatchId}}class Y6{getBundleMetadata(t,e){return bF(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Sm(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return bF(t).put({bundleId:(i=e).id,createTime:Im(hr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return wF(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:Dx(r.bundledQuery),readTime:Sm(r.readTime)};var r})}saveNamedQuery(t,e){return wF(t).put({name:(i=e).name,readTime:Im(hr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function bF(n){return Br(n,"bundles")}function wF(n){return Br(n,"namedQueries")}class HE{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){return new HE(t,e.uid||"")}getOverlay(t,e){return r1(t).get(vF(this.userId,e)).next(i=>i?Ex(this.serializer,i):null)}getOverlays(t,e){const i=wc();return ce.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const h=new Em(e,c);r.push(this.we(t,h))}),ce.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Ur(c.getCollectionPath())));const s=[];return r.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(r1(t).J("collectionPathOverlayIndex",h))}),ce.waitFor(s)}getOverlaysForCollection(t,e,i){const r=wc(),s=Ur(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return r1(t).j("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const v=Ex(this.serializer,p);r.set(v.getKey(),v)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=wc();let c;const h=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return r1(t).X({index:"collectionGroupOverlayIndex",range:h},(p,v,w)=>{const S=Ex(this.serializer,v);s.size()<r||S.largestBatchId===c?(s.set(S.getKey(),S),c=S.largestBatchId):w.done()}).next(()=>s)}we(t,e){return r1(t).put(function(i,r,s){const[c,h,p]=vF(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:n1(i.fe,s.mutation)}}(this.serializer,this.userId,e))}}function r1(n){return Br(n,"documentOverlays")}class Nm{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(Oi(t.integerValue));else if("doubleValue"in t){const i=Oi(t.doubleValue);isNaN(i)?this.ye(e,13):(this.ye(e,15),um(i)?e.pe(0):e.pe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ye(e,20),"string"==typeof i?e.Ie(i):(e.Ie(`${i.seconds||""}`),e.pe(i.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(gc(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ye(e,45),e.pe(i.latitude||0),e.pe(i.longitude||0)}else"mapValue"in t?Bw(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):pt()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const i=t.fields||{};this.ye(e,55);for(const r of Object.keys(i))this.Te(r,e),this.me(i[r],e)}Pe(t,e){const i=t.values||[];this.ye(e,50);for(const r of i)this.me(r,e)}ve(t,e){this.ye(e,37),Qe.fromName(t).path.forEach(i=>{this.ye(e,60),this.be(i,e)})}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function J6(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function CF(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=J6(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Nm.Ve=new Nm;class Q6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.De(i.value),i=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ne(i.value),i=e.next();this.ke()}Me(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=e.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=e.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(t){const e=this.Fe(t),i=CF(e);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Le(t){const e=this.Fe(t),i=CF(e);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class X6{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class ej{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class s1{constructor(){this.je=new Q6,this.ze=new X6(this.je),this.We=new ej(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class xm{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new xm(this.indexId,this.documentKey,this.arrayValue,i)}}function rp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=TF(n.arrayValue,t.arrayValue),0!==e?e:(e=TF(n.directionalValue,t.directionalValue),0!==e?e:Qe.comparator(n.documentKey,t.documentKey)))}function TF(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class tj{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const i=e;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(t){Tt(t.collectionGroup===this.collectionId);const e=rE(t);if(void 0!==e&&!this.en(e))return!1;const i=pu(t);let r=0,s=0;for(;r<i.length&&this.en(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ze){const c=i[r];if(!this.nn(this.Ze,c)||!this.sn(this.Ye[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ye.length||!this.sn(this.Ye[s++],c))return!1}return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function DF(n){var t,e;if(Tt(n instanceof ln||n instanceof Rn),n instanceof ln){if(n instanceof NE){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>ln.create(n.field,"==",s)))||[];return Rn.create(r,"or")}return n}const i=n.filters.map(r=>DF(r));return Rn.create(i,n.op)}function nj(n){if(0===n.getFilters().length)return[];const t=Ax(DF(n));return Tt(EF(t)),Ix(t)||Sx(t)?[t]:t.getFilters()}function Ix(n){return n instanceof ln}function Sx(n){return n instanceof Rn&&EE(n)}function EF(n){return Ix(n)||Sx(n)||function(t){if(t instanceof Rn&&Hw(t)){for(const e of t.getFilters())if(!Ix(e)&&!Sx(e))return!1;return!0}return!1}(n)}function Ax(n){if(Tt(n instanceof ln||n instanceof Rn),n instanceof ln)return n;if(1===n.filters.length)return Ax(n.filters[0]);const t=n.filters.map(i=>Ax(i));let e=Rn.create(t,n.op);return e=GE(e),EF(e)?e:(Tt(e instanceof Rn),Tt(Qf(e)),Tt(e.filters.length>1),e.filters.reduce((i,r)=>Nx(i,r)))}function Nx(n,t){let e;return Tt(n instanceof ln||n instanceof Rn),Tt(t instanceof ln||t instanceof Rn),e=n instanceof ln?t instanceof ln?Rn.create([n,t],"and"):IF(n,t):t instanceof ln?IF(t,n):function(i,r){if(Tt(i.filters.length>0&&r.filters.length>0),Qf(i)&&Qf(r))return SE(i,r.getFilters());const s=Hw(i)?i:r,c=Hw(i)?r:i,h=s.filters.map(p=>Nx(p,c));return Rn.create(h,"or")}(n,t),GE(e)}function IF(n,t){if(Qf(t))return SE(t,n.getFilters());{const e=t.filters.map(i=>Nx(n,i));return Rn.create(e,"or")}}function GE(n){if(Tt(n instanceof ln||n instanceof Rn),n instanceof ln)return n;const t=n.getFilters();if(1===t.length)return GE(t[0]);if(lx(n))return n;const e=t.map(r=>GE(r)),i=[];return e.forEach(r=>{r instanceof ln?i.push(r):r instanceof Rn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Rn.create(i,n.op)}class ij{constructor(){this.rn=new xx}addToCollectionParentIndex(t,e){return this.rn.add(e),ce.resolve()}getCollectionParents(t,e){return ce.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return ce.resolve()}deleteFieldIndex(t,e){return ce.resolve()}getDocumentsMatchingTarget(t,e){return ce.resolve(null)}getIndexType(t,e){return ce.resolve(0)}getFieldIndexes(t,e){return ce.resolve([])}getNextCollectionGroupToUpdate(t){return ce.resolve(null)}getMinOffset(t,e){return ce.resolve(xo.min())}getMinOffsetFromCollectionGroup(t,e){return ce.resolve(xo.min())}updateCollectionGroup(t,e,i){return ce.resolve()}updateIndexEntries(t,e){return ce.resolve()}}class xx{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Yn(hn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Yn(hn.comparator)).toArray()}}const $E=new Uint8Array(0);class rj{constructor(t,e){this.user=t,this.databaseId=e,this.on=new xx,this.un=new bu(i=>no(i),(i,r)=>Xf(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:i,parent:Ur(r)};return SF(t).put(s)}return ce.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[Mw(e),""],!1,!0);return SF(t).j(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(pc(c.parent))}return i})}addFieldIndex(t,e){const i=ZE(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=a1(t);return s.next(h=>{c.put(yF(h,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=ZE(t),r=a1(t),s=o1(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=o1(t);let r=!0;const s=new Map;return ce.forEach(this.cn(e),c=>this.an(t,c).next(h=>{r&&(r=!!h),s.set(c,h)})).next(()=>{if(r){let c=Wt();const h=[];return ce.forEach(s,(p,v)=>{var w;je("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Be=>`${Be.fieldPath}:${Be.kind}`).join(",")}`} to execute ${no(e)}`);const S=function(Be,He){const nt=rE(He);if(void 0===nt)return null;for(const at of tp(Be,nt.fieldPath))switch(at.op){case"array-contains-any":return at.value.arrayValue.values||[];case"array-contains":return[at.value]}return null}(v,p),N=function(Be,He){const nt=new Map;for(const at of pu(He))for(const Gt of tp(Be,at.fieldPath))switch(Gt.op){case"==":case"in":nt.set(at.fieldPath.canonicalString(),Gt.value);break;case"not-in":case"!=":return nt.set(at.fieldPath.canonicalString(),Gt.value),Array.from(nt.values())}return null}(v,p),O=function(Be,He){const nt=[];let at=!0;for(const Gt of pu(He)){const Xt=0===Gt.kind?xE(Be,Gt.fieldPath,Be.startAt):oy(Be,Gt.fieldPath,Be.startAt);nt.push(Xt.value),at&&(at=Xt.inclusive)}return new yc(nt,at)}(v,p),G=function(Be,He){const nt=[];let at=!0;for(const Gt of pu(He)){const Xt=0===Gt.kind?oy(Be,Gt.fieldPath,Be.endAt):xE(Be,Gt.fieldPath,Be.endAt);nt.push(Xt.value),at&&(at=Xt.inclusive)}return new yc(nt,at)}(v,p),J=this.hn(p,v,O),te=this.hn(p,v,G),De=this.ln(p,v,N),Oe=this.fn(p.indexId,S,J,O.inclusive,te,G.inclusive,De);return ce.forEach(Oe,Be=>i.H(Be,e.limit).next(He=>{He.forEach(nt=>{const at=Qe.fromSegments(nt.documentKey);c.has(at)||(c=c.add(at),h.push(at))})}))}).next(()=>h)}return ce.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:nj(Rn.create(t.filters,"and")).map(i=>sy(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}fn(t,e,i,r,s,c,h){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),v=p/(null!=e?e.length:1),w=[];for(let S=0;S<p;++S){const N=e?this.dn(e[S/v]):$E,O=this.wn(t,N,i[S%v],r),G=this._n(t,N,s[S%v],c),J=h.map(te=>this.wn(t,N,te,!0));w.push(...this.createRange(O,G,J))}return w}wn(t,e,i,r){const s=new xm(t,Qe.empty(),e,i);return r?s:s.Je()}_n(t,e,i,r){const s=new xm(t,Qe.empty(),e,i);return r?s.Je():s}an(t,e){const i=new tj(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const h of s)i.tn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(t,e){let i=2;const r=this.cn(e);return ce.forEach(r,s=>this.an(t,s).next(c=>{c?0!==i&&c.fields.length<function(h){let p=new Yn(Ei.comparator),v=!1;for(const w of h.filters)for(const S of w.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:p=p.add(S.field));for(const w of h.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(v?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}mn(t,e){const i=new s1;for(const r of pu(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.He(r.kind);Nm.Ve._e(s,c)}return i.Qe()}dn(t){const e=new s1;return Nm.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const i=new s1;return Nm.Ve._e(Jf(this.databaseId,e),i.He(function(r){const s=pu(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Qe()}ln(t,e,i){if(null===i)return[];let r=[];r.push(new s1);let s=0;for(const c of pu(t)){const h=i[s++];for(const p of r)if(this.yn(e,c.fieldPath)&&fm(h))r=this.pn(r,c,h);else{const v=p.He(c.kind);Nm.Ve._e(h,v)}}return this.In(r)}hn(t,e,i){return this.ln(t,e,i.position)}In(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Qe();return e}pn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const h of r){const p=new s1;p.seed(h.Qe()),Nm.Ve._e(c,p.He(e.kind)),s.push(p)}return s}yn(t,e){return!!t.filters.find(i=>i instanceof ln&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=ZE(t),r=a1(t);return(e?i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.j()).next(s=>{const c=[];return ce.forEach(s,h=>r.get([h.indexId,this.uid]).next(p=>{c.push(function(v,w){const S=w?new am(w.sequenceNumber,new xo(Sm(w.readTime),new Qe(pc(w.documentKey)),w.largestBatchId)):am.empty(),N=v.fields.map(([O,G])=>new om(Ei.fromServerFormat(O),G));return new qf(v.indexId,v.collectionGroup,N,S)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Ut(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=ZE(t),s=a1(t);return this.Tn(t).next(c=>r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>ce.forEach(h,p=>s.put(yF(p.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return ce.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?ce.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),ce.forEach(h,p=>this.En(t,r,p).next(v=>{const w=this.An(s,p);return v.isEqual(w)?ce.resolve():this.vn(t,s,p,v,w)}))))})}Rn(t,e,i,r){return o1(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,i,r){return o1(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,e.key),e.key.path.toArray()])}En(t,e,i){const r=o1(t);let s=new Yn(rp);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,e)])},(c,h)=>{s=s.add(new xm(i.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>s)}An(t,e){let i=new Yn(rp);const r=this.mn(e,t);if(null==r)return i;const s=rE(e);if(null!=s){const c=t.data.field(s.fieldPath);if(fm(c))for(const h of c.arrayValue.values||[])i=i.add(new xm(e.indexId,t.key,this.dn(h),r))}else i=i.add(new xm(e.indexId,t.key,$E,r));return i}vn(t,e,i,r,s){je("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(h,p,v,w,S){const N=h.getIterator(),O=p.getIterator();let G=is(N),J=is(O);for(;G||J;){let te=!1,De=!1;if(G&&J){const Oe=v(G,J);Oe<0?De=!0:Oe>0&&(te=!0)}else null!=G?De=!0:te=!0;te?(w(J),J=is(O)):De?(S(G),G=is(N)):(G=is(N),J=is(O))}}(r,s,rp,h=>{c.push(this.Rn(t,e,i,h))},h=>{c.push(this.Pn(t,e,i,h))}),ce.waitFor(c)}Tn(t){let e=1;return a1(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,h)=>rp(c,h)).filter((c,h,p)=>!h||0!==rp(c,p[h-1]));const r=[];r.push(t);for(const c of i){const h=rp(c,t),p=rp(c,e);if(0===h)r[0]=t.Je();else if(h>0&&p<0)r.push(c),r.push(c.Je());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2){if(this.bn(r[c],r[c+1]))return[];s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,$E,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,$E,[]]))}return s}bn(t,e){return rp(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(AF)}getMinOffset(t,e){return ce.mapArray(this.cn(e),i=>this.an(t,i).next(r=>r||pt())).next(AF)}}function SF(n){return Br(n,"collectionParents")}function o1(n){return Br(n,"indexEntries")}function ZE(n){return Br(n,"indexConfiguration")}function a1(n){return Br(n,"indexState")}function AF(n){Tt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;kw(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new xo(t.readTime,t.documentKey,e)}const NF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ls{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Ls(t,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xF(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let h=0;const p=i.X({range:c},(w,S,N)=>(h++,N.delete()));s.push(p.next(()=>{Tt(1===h)}));const v=[];for(const w of e.mutations){const S=XN(t,w.key.path,e.batchId);s.push(r.delete(S)),v.push(w.key)}return ce.waitFor(s).next(()=>v)}function qE(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw pt();t=n.noDocument}return JSON.stringify(t).length}Ls.DEFAULT_COLLECTION_PERCENTILE=10,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ls.DEFAULT=new Ls(41943040,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ls.DISABLED=new Ls(-1,0,0);class zE{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(t,e,i,r){Tt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new zE(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sp(t).X({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=fy(t),c=sp(t);return c.add({}).next(h=>{Tt("number"==typeof h);const p=new Tm(h,e,i,r),v=function(N,O,G){const J=G.baseMutations.map(De=>n1(N.fe,De)),te=G.mutations.map(De=>n1(N.fe,De));return{userId:O,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:J,mutations:te}}(this.serializer,this.userId,p),w=[];let S=new Yn((N,O)=>Ut(N.canonicalString(),O.canonicalString()));for(const N of r){const O=XN(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),w.push(c.put(v)),w.push(s.put(O,OP))}return S.forEach(N=>{w.push(this.indexManager.addToCollectionParentIndex(t,N))}),t.addOnCommittedListener(()=>{this.Vn[h]=p.keys()}),ce.waitFor(w).next(()=>p)})}lookupMutationBatch(t,e){return sp(t).get(e).next(i=>i?(Tt(i.userId===this.userId),Am(this.serializer,i)):null)}Sn(t,e){return this.Vn[e]?ce.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Vn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return sp(t).X({index:"userMutationsIndex",range:r},(c,h,p)=>{h.userId===this.userId&&(Tt(h.batchId>=i),s=Am(this.serializer,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return sp(t).X({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sp(t).j("userMutationsIndex",e).next(i=>i.map(r=>Am(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Pw(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return fy(t).X({range:r},(c,h,p)=>{const[v,w,S]=c,N=pc(w);if(v===this.userId&&e.path.isEqual(N))return sp(t).get(S).next(O=>{if(!O)throw pt();Tt(O.userId===this.userId),s.push(Am(this.serializer,O))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Yn(Ut);const r=[];return e.forEach(s=>{const c=Pw(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=fy(t).X({range:h},(v,w,S)=>{const[N,O,G]=v,J=pc(O);N===this.userId&&s.path.isEqual(J)?i=i.add(G):S.done()});r.push(p)}),ce.waitFor(r).next(()=>this.Dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=Pw(this.userId,i),c=IDBKeyRange.lowerBound(s);let h=new Yn(Ut);return fy(t).X({range:c},(p,v,w)=>{const[S,N,O]=p,G=pc(N);S===this.userId&&i.isPrefixOf(G)?G.length===r&&(h=h.add(O)):w.done()}).next(()=>this.Dn(t,h))}Dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(sp(t).get(s).next(c=>{if(null===c)throw pt();Tt(c.userId===this.userId),i.push(Am(this.serializer,c))}))}),ce.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return xF(t.ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Cn(e.batchId)}),ce.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ce.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return fy(t).X({range:i},(s,c,h)=>{if(s[0]===this.userId){const p=pc(s[1]);r.push(p)}else h.done()}).next(()=>{Tt(0===r.length)})})}containsKey(t,e){return MF(t,this.userId,e)}xn(t){return RF(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function MF(n,t,e){const i=Pw(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return fy(n).X({range:s,Y:!0},(h,p,v)=>{const[w,S,N]=h;w===t&&S===r&&(c=!0),v.done()}).next(()=>c)}function sp(n){return Br(n,"mutations")}function fy(n){return Br(n,"documentMutations")}function RF(n){return Br(n,"mutationQueues")}class Mm{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Mm(0)}static Mn(){return new Mm(-1)}}class sj{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next(e=>{const i=new Mm(e.highestTargetId);return e.highestTargetId=i.next(),this.On(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.$n(t).next(e=>Et.fromTimestamp(new fi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.$n(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.$n(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.On(t,r)))}addTargetData(t,e){return this.Fn(t,e).next(()=>this.$n(t).next(i=>(i.targetCount+=1,this.Bn(e,i),this.On(t,i))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>py(t).delete(e.targetId)).next(()=>this.$n(t)).next(i=>(Tt(i.targetCount>0),i.targetCount-=1,this.On(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return py(t).X((c,h)=>{const p=i1(h);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>ce.waitFor(s)).next(()=>r)}forEachTarget(t,e){return py(t).X((i,r)=>{const s=i1(r);e(s)})}$n(t){return kF(t).get("targetGlobalKey").next(e=>(Tt(null!==e),e))}On(t,e){return kF(t).put("targetGlobalKey",e)}Fn(t,e){return py(t).put(_F(this.serializer,e))}Bn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.$n(t).next(e=>e.targetCount)}getTargetData(t,e){const i=no(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return py(t).X({range:r,index:"queryTargetsIndex"},(c,h,p)=>{const v=i1(h);Xf(e,v.target)&&(s=v,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=op(t);return e.forEach(c=>{const h=Ur(c.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(t,i,c))}),ce.waitFor(r)}removeMatchingKeys(t,e,i){const r=op(t);return ce.forEach(e,s=>{const c=Ur(s.path);return ce.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=op(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=op(t);let s=Wt();return r.X({range:i,Y:!0},(c,h,p)=>{const v=pc(c[1]),w=new Qe(v);s=s.add(w)}).next(()=>s)}containsKey(t,e){const i=Ur(e.path),r=IDBKeyRange.bound([i],[Mw(i)],!1,!0);let s=0;return op(t).X({index:"documentTargetsIndex",Y:!0,range:r},([c,h],p,v)=>{0!==c&&(s++,v.done())}).next(()=>s>0)}le(t,e){return py(t).get(e).next(i=>i?i1(i):null)}}function py(n){return Br(n,"targets")}function kF(n){return Br(n,"targetGlobal")}function op(n){return Br(n,"targetDocuments")}function OF([n,t],[e,i]){const r=Ut(n,e);return 0===r?Ut(t,i):r}class oj{constructor(t){this.Ln=t,this.buffer=new Yn(OF),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();OF(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class PF{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){var e=this;je("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,ne.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){mu(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield gu(i)}yield e.Qn(3e5)}))}}class aj{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ce.resolve(Ps.ct);const i=new oj(e);return this.jn.forEachTarget(t,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(t,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(NF)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NF):this.Hn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let i,r,s,c,h,p,v;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),r=this.params.maximumSequenceNumbersToCollect):r=S,c=Date.now(),this.nthSequenceNumber(t,r))).next(S=>(i=S,h=Date.now(),this.removeTargets(t,i,e))).next(S=>(s=S,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(S=>(v=Date.now(),Nw()<=Ja.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${r} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${S} documents in `+(v-p)+`ms\nTotal Duration: ${v-w}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:S})))}}class lj{constructor(t,e){this.db=t,this.garbageCollector=function FF(n,t){return new aj(n,t)}(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Jn(t){let e=0;return this.Wn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,(i,r)=>e(r))}addReference(t,e,i){return WE(t,i)}removeReference(t,e,i){return WE(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return WE(t,e)}Xn(t,e){return function(i,r){let s=!1;return RF(i).Z(c=>MF(i,c,r).next(h=>(h&&(s=!0),ce.resolve(!h)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(t,(c,h)=>{if(h<=e){const p=this.Xn(t,c).next(v=>{if(!v)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Et.min()),op(t).delete([0,Ur(c.path)])))});r.push(p)}}).next(()=>ce.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return WE(t,e)}Yn(t,e){const i=op(t);let r,s=Ps.ct;return i.X({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:v})=>{0===c?(s!==Ps.ct&&e(new Qe(pc(r)),s),s=v,r=p):s=Ps.ct}).next(()=>{s!==Ps.ct&&e(new Qe(pc(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function WE(n,t){return op(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ur(t.path),sequenceNumber:i}));var i}class LF{constructor(){this.changes=new bu(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Jn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ce.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cj{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Rm(t).put(i)}removeEntry(t,e,i){return Rm(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],jE(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Zn(t,i)))}getEntry(t,e){let i=Jn.newInvalidDocument(e);return Rm(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(l1(e))},(r,s)=>{i=this.ts(e,s)}).next(()=>i)}es(t,e){let i={size:0,document:Jn.newInvalidDocument(e)};return Rm(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(l1(e))},(r,s)=>{i={document:this.ts(e,s),size:qE(s)}}).next(()=>i)}getEntries(t,e){let i=rs();return this.ns(t,e,(r,s)=>{const c=this.ts(r,s);i=i.insert(r,c)}).next(()=>i)}ss(t,e){let i=rs(),r=new ni(Qe.comparator);return this.ns(t,e,(s,c)=>{const h=this.ts(s,c);i=i.insert(s,h),r=r.insert(s,qE(c))}).next(()=>({documents:i,rs:r}))}ns(t,e,i){if(e.isEmpty())return ce.resolve();let r=new Yn(jF);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(l1(r.first()),l1(r.last())),c=r.getIterator();let h=c.getNext();return Rm(t).X({index:"documentKeyIndex",range:s},(p,v,w)=>{const S=Qe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&jF(h,S)<0;)i(h,null),h=c.getNext();h&&h.isEqual(S)&&(i(h,v),h=c.hasNext()?c.getNext():null),h?w.G(l1(h)):w.done()}).next(()=>{for(;h;)i(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const s=e.path,c=[s.popLast().toArray(),s.lastSegment(),jE(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rm(t).j(IDBKeyRange.bound(c,h,!0)).next(p=>{let v=rs();for(const w of p){const S=this.ts(Qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);S.isFoundDocument()&&(vm(e,S)||r.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(t,e,i,r){let s=rs();const c=VF(e,i),h=VF(e,xo.max());return Rm(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,v,w)=>{const S=this.ts(Qe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);s=s.insert(S.key,S),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(t){return new uj(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return BF(t).get("remoteDocumentGlobalKey").next(e=>(Tt(!!e),e))}Zn(t,e){return BF(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const i=function K6(n,t){let e;if(t.document)e=cF(n.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Qe.fromSegments(t.noDocument.path),r=Sm(t.noDocument.readTime);e=Jn.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return pt();{const i=Qe.fromSegments(t.unknownDocument.path),r=Sm(t.unknownDocument.version);e=Jn.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new fi(i[0],i[1]);return Et.fromTimestamp(r)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(Et.min()))return i}return Jn.newInvalidDocument(t)}}function UF(n){return new cj(n)}class uj extends LF{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new bu(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Yn((s,c)=>Ut(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.us.get(s);if(e.push(this.os.removeEntry(t,s,h.readTime)),c.isValidDocument()){const p=mF(this.os.serializer,c);r=r.add(s.path.popLast()),i+=qE(p)-h.size,e.push(this.os.addEntry(t,s,p))}else if(i-=h.size,this.trackRemovals){const p=mF(this.os.serializer,c.convertToNoDocument(Et.min()));e.push(this.os.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.os.updateMetadata(t,i)),ce.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next(i=>(this.us.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.os.ss(t,e).next(({documents:i,rs:r})=>(r.forEach((s,c)=>{this.us.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function BF(n){return Br(n,"remoteDocumentGlobal")}function Rm(n){return Br(n,"remoteDocumentsV14")}function l1(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function VF(n,t){const e=t.documentKey.path.toArray();return[n,jE(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function jF(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Ut(e[s],i[s]),r)return r;return r=Ut(e.length,i.length),r||(r=Ut(e[e.length-2],i[i.length-2]),r||Ut(e[e.length-1],i[i.length-1]))}class dj{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class HF{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&$e(i.mutation,r,Fs.empty(),fi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Wt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Wt()){const r=wc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=ym();return s.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=wc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Wt()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,r){let s=rs();const c=bm(),h=bm();return e.forEach((p,v)=>{const w=i.get(v.key);r.has(v.key)&&(void 0===w||w.mutation instanceof Me)?s=s.insert(v.key,v):void 0!==w?(c.set(v.key,w.mutation.getFieldMask()),$e(w.mutation,v,w.mutation.getFieldMask(),fi.now())):c.set(v.key,Fs.empty())}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((v,w)=>c.set(v,w)),e.forEach((v,w)=>{var S;return h.set(v,new dj(w,null!==(S=c.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(t,e){const i=bm();let r=new ni((c,h)=>c-h),s=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(p=>{const v=e.get(p);if(null===v)return;let w=i.get(p)||Fs.empty();w=h.applyToLocalView(v,w),i.set(p,w);const S=(r.get(h.batchId)||Wt()).add(p);r=r.insert(h.batchId,S)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),v=p.key,w=p.value,S=PE();w.forEach(N=>{if(!s.has(N)){const O=re(e.get(N),i.get(N));null!==O&&S.set(N,O),s=s.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(t,v,S))}return ce.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return Qe.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):ay(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):ce.resolve(wc());let h=-1,p=s;return c.next(v=>ce.forEach(v,(w,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),s.get(w)?ce.resolve():this.remoteDocumentCache.getEntry(t,w).next(N=>{p=p.insert(w,N)}))).next(()=>this.populateOverlays(t,v,s)).next(()=>this.computeViews(t,p,v,Wt())).next(w=>({batchId:h,changes:fx(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Qe(e)).next(i=>{let r=ym();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=ym();return this.indexManager.getCollectionParents(t,r).next(c=>ce.forEach(c,h=>{const p=(v=e,w=h.child(r),new ma(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,w;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(v=>{v.forEach((w,S)=>{s=s.insert(w,S)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(s=>{r.forEach((h,p)=>{const v=p.getKey();null===s.get(v)&&(s=s.insert(v,Jn.newInvalidDocument(v)))});let c=ym();return s.forEach((h,p)=>{const v=r.get(h);void 0!==v&&$e(v.mutation,p,Fs.empty(),fi.now()),vm(e,p)&&(c=c.insert(h,p))}),c})}}class hj{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return ce.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var i;return this.cs.set(e.id,{id:(i=e).id,version:i.version,createTime:hr(i.createTime)}),ce.resolve()}getNamedQuery(t,e){return ce.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,{name:(i=e).name,query:Dx(i.bundledQuery),readTime:hr(i.readTime)}),ce.resolve();var i}}class fj{constructor(){this.overlays=new ni(Qe.comparator),this.ls=new Map}getOverlay(t,e){return ce.resolve(this.overlays.get(e))}getOverlays(t,e){const i=wc();return ce.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.we(t,e,s)}),ce.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),ce.resolve()}getOverlaysForCollection(t,e,i){const r=wc(),s=e.length+1,c=new Qe(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,v=p.getKey();if(!e.isPrefixOf(v.path))break;v.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return ce.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new ni((v,w)=>v-w);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===e&&v.largestBatchId>i){let w=s.get(v.largestBatchId);null===w&&(w=wc(),s=s.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const h=wc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,w)=>h.set(v,w)),!(h.size()>=r)););return ce.resolve(h)}we(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Em(e,i));let s=this.ls.get(e);void 0===s&&(s=Wt(),this.ls.set(e,s)),this.ls.set(e,s.add(i.key))}}class Mx{constructor(){this.fs=new Yn(ss.ds),this.ws=new Yn(ss._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const i=new ss(t,e);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.ys(new ss(t,e))}ps(t,e){t.forEach(i=>this.removeReference(i,e))}Is(t){const e=new Qe(new hn([])),i=new ss(e,t),r=new ss(e,t+1),s=[];return this.ws.forEachInRange([i,r],c=>{this.ys(c),s.push(c.key)}),s}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new Qe(new hn([])),i=new ss(e,t),r=new ss(e,t+1);let s=Wt();return this.ws.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new ss(t,0),i=this.fs.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class ss{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return Qe.comparator(t.key,e.key)||Ut(t.As,e.As)}static _s(t,e){return Ut(t.As,e.As)||Qe.comparator(t.key,e.key)}}class pj{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Yn(ss.ds)}checkEmpty(t){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.vs;this.vs++;const c=new Tm(s,e,i,r);this.mutationQueue.push(c);for(const h of r)this.Rs=this.Rs.add(new ss(h.key,s)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(t,e){return ce.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.bs(e+1),s=r<0?0:r;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new ss(e,0),r=new ss(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],c=>{const h=this.Ps(c.As);s.push(h)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Yn(Ut);return e.forEach(r=>{const s=new ss(r,0),c=new ss(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,c],h=>{i=i.add(h.As)})}),ce.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Qe.isDocumentKey(s)||(s=s.child(""));const c=new ss(new Qe(s),0);let h=new Yn(Ut);return this.Rs.forEachWhile(p=>{const v=p.key.path;return!!i.isPrefixOf(v)&&(v.length===r&&(h=h.add(p.As)),!0)},c),ce.resolve(this.Vs(h))}Vs(t){const e=[];return t.forEach(i=>{const r=this.Ps(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Tt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return ce.forEach(e.mutations,r=>{const s=new ss(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Rs=i})}Cn(t){}containsKey(t,e){const i=new ss(e,0),r=this.Rs.firstAfterOrEqual(i);return ce.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ce.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class gj{constructor(t){this.Ds=t,this.docs=new ni(Qe.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Ds(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ce.resolve(i?i.document.mutableCopy():Jn.newInvalidDocument(e))}getEntries(t,e){let i=rs();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Jn.newInvalidDocument(r))}),ce.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=rs();const c=e.path,h=new Qe(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:v,value:{document:w}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||kw(zv(w),i)<=0||(r.has(w.key)||vm(e,w))&&(s=s.insert(w.key,w.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(t,e,i,r){pt()}Cs(t,e){return ce.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new mj(this)}getSize(t){return ce.resolve(this.size)}}class mj extends LF{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.os.addEntry(t,r)):this.os.removeEntry(i)}),ce.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class _j{constructor(t){this.persistence=t,this.xs=new bu(e=>no(e),Xf),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Mx,this.targetCount=0,this.Ms=Mm.kn()}forEachTarget(t,e){return this.xs.forEach((i,r)=>e(r)),ce.resolve()}getLastRemoteSnapshotVersion(t){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ce.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ns&&(this.Ns=e),ce.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new Mm(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,ce.resolve()}updateTargetData(t,e){return this.Fn(e),ce.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,ce.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=e&&null===i.get(h.targetId)&&(this.xs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),ce.waitFor(s).next(()=>r)}getTargetCount(t){return ce.resolve(this.targetCount)}getTargetData(t,e){const i=this.xs.get(e)||null;return ce.resolve(i)}addMatchingKeys(t,e,i){return this.ks.gs(e,i),ce.resolve()}removeMatchingKeys(t,e,i){this.ks.ps(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),ce.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),ce.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ks.Es(e);return ce.resolve(i)}containsKey(t,e){return ce.resolve(this.ks.containsKey(e))}}class Rx{constructor(t,e){this.$s={},this.overlays={},this.Os=new Ps(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new _j(this),this.indexManager=new ij,this.remoteDocumentCache=new gj(i=>this.referenceDelegate.Ls(i)),this.serializer=new gF(e),this.qs=new hj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new fj,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.$s[t.toKey()];return i||(i=new pj(e,this.referenceDelegate),this.$s[t.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,i){je("MemoryPersistence","Starting transaction:",t);const r=new vj(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(t,e){return ce.or(Object.values(this.$s).map(i=>()=>i.containsKey(t,e)))}}class vj extends sE{constructor(t){super(),this.currentSequenceNumber=t}}class KE{constructor(t){this.persistence=t,this.Qs=new Mx,this.js=null}static zs(t){return new KE(t)}get Ws(){if(this.js)return this.js;throw pt()}addReference(t,e,i){return this.Qs.addReference(i,e),this.Ws.delete(i.toString()),ce.resolve()}removeReference(t,e,i){return this.Qs.removeReference(i,e),this.Ws.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),ce.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ws,i=>{const r=Qe.fromPath(i);return this.Hs(t,r).next(s=>{s||e.removeEntry(r,Et.min())})}).next(()=>(this.js=null,e.apply(t)))}updateLimboDocument(t,e){return this.Hs(t,e).next(i=>{i?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(t){return 0}Hs(t,e){return ce.or([()=>ce.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class yj{constructor(t){this.serializer=t}O(t,e,i,r){const s=new lm("createOrUpgrade",e);var h;i<1&&r>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QN,{unique:!0}),h.createObjectStore("documentMutations"),GF(t),function(h){h.createObjectStore("remoteDocuments")}(t));let c=ce.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),GF(t)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",v)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(h,p){return p.store("mutations").j().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QN,{unique:!0});const w=p.store("mutations"),S=v.map(N=>w.put(N));return ce.waitFor(S)})}(t,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Ys(s))),i<6&&r>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(s)))),i<7&&r>=7&&(c=c.next(()=>this.Zs(s))),i<8&&r>=8&&(c=c.next(()=>this.ti(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.ei(s))),i<11&&r>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:pE});p.createIndex("collectionPathOverlayIndex",UP,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",BP,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:PP});p.createIndex("documentKeyIndex",Kv),p.createIndex("collectionGroupIndex",FP)}(t)).next(()=>this.ni(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.si(t,s))),i<15&&r>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:LP}).createIndex("sequenceNumberIndex",Fw,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:fE}).createIndex("documentKeyIndex",ex,{unique:!1})}(t))),c}Xs(t){let e=0;return t.store("remoteDocuments").X((i,r)=>{e+=qE(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.j().next(r=>ce.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",c).next(h=>ce.forEach(h,p=>{Tt(p.userId===s.userId);const v=Am(this.serializer,p);return xF(t,s.userId,v).next(()=>{})}))}))}Zs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((c,h)=>{const p=new hn(c),v=[0,Ur(p)];s.push(e.get(v).next(w=>w?ce.resolve():e.put({targetId:0,path:Ur(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:hE});const i=e.store("collectionParents"),r=new xx,s=c=>{if(r.add(c)){const h=c.lastSegment(),p=c.popLast();return i.put({collectionId:h,parent:Ur(p)})}};return e.store("remoteDocuments").X({Y:!0},(c,h)=>{const p=new hn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([c,h,p],v)=>{const w=pc(h);return s(w.popLast())}))}ei(t){const e=t.store("targets");return e.X((i,r)=>{const s=i1(r),c=_F(this.serializer,s);return e.put(c)})}ni(t,e){const i=e.store("remoteDocuments"),r=[];return i.X((s,c)=>{const h=e.store("remoteDocumentsV14"),p=(v=c,v.document?new Qe(hn.fromString(v.document.name).popFirst(5)):v.noDocument?Qe.fromSegments(v.noDocument.path):v.unknownDocument?Qe.fromSegments(v.unknownDocument.path):pt()).path.toArray();var v;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(h.put(w))}).next(()=>ce.waitFor(r))}si(t,e){const i=e.store("mutations"),r=UF(this.serializer),s=new Rx(KE.zs,this.serializer.fe);return i.j().next(c=>{const h=new Map;return c.forEach(p=>{var v;let w=null!==(v=h.get(p.userId))&&void 0!==v?v:Wt();Am(this.serializer,p).keys().forEach(S=>w=w.add(S)),h.set(p.userId,w)}),ce.forEach(h,(p,v)=>{const w=new Ji(v),S=HE.de(this.serializer,w),N=s.getIndexManager(w),O=zE.de(w,this.serializer,N,s.referenceDelegate);return new HF(r,O,S,N).recalculateAndSaveOverlaysForDocumentKeys(new _E(e,Ps.ct),p).next()})})}}function GF(n){n.createObjectStore("targetDocuments",{keyPath:Yv}).createIndex("documentTargetsIndex",dE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uE,{unique:!0}),n.createObjectStore("targetGlobal")}const kx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ox{constructor(t,e,i,r,s,c,h,p,v,w,S=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ii=s,this.window=c,this.document=h,this.ri=v,this.oi=w,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=N=>Promise.resolve(),!Ox.D())throw new Fe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lj(this,r),this.di=e+"main",this.serializer=new gF(p),this.wi=new pa(this.di,this.ui,new yj(this.serializer)),this.Bs=new sj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UF(this.serializer),this.qs=new Y6,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===w&&Di("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,kx);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Bs.getHighestSequenceNumber(t))}).then(t=>{this.Os=new Ps(t,this.ri)}).then(()=>{this.Fs=!0}).catch(t=>(this.wi&&this.wi.close(),Promise.reject(t)))}Ii(t){var e=this;return this.fi=function(){var i=(0,ne.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B(function(){var e=(0,ne.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((0,ne.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>JE(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(t).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(t)).next(e=>this.isPrimary&&!e?this.Ai(t).next(()=>!1):!!e&&this.vi(t).next(()=>!0))).catch(t=>{if(mu(t))return je("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ii.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Ti(t){return c1(t).get("owner").next(e=>ce.resolve(this.Ri(e)))}Pi(t){return JE(t).delete(this.clientId)}bi(){var t=this;return(0,ne.Z)(function*(){if(t.isPrimary&&!t.Vi(t.li,18e5)){t.li=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Br(i,"clientMetadata");return r.j().next(s=>{const c=t.Si(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return ce.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(t._i)for(const i of e)t._i.removeItem(t.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?ce.resolve(!0):c1(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,kx);return!1}}return!(!this.networkEnabled||!this.inForeground)||JE(t).j().next(i=>void 0===this.Si(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&h)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&je("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ne.Z)(function*(){t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),yield t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new _E(e,Ps.ct);return t.Ai(i).next(()=>t.Pi(i))}),t.wi.close(),t.Mi()})()}Si(t,e){return t.filter(i=>this.Vi(i.updateTimeMs,e)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>JE(t).j().next(e=>this.Si(e,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(t,e){return zE.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new rj(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return HE.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,i){je("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.ui)?VP:14===c?mE:13===c?dm:12===c?tx:11===c?gE:void pt();var c;let h;return this.wi.runTransaction(t,r,s,p=>(h=new _E(p,this.Os?this.Os.next():Ps.ct),"readwrite-primary"===e?this.Ti(h).next(v=>!!v||this.Ei(h)).next(v=>{if(!v)throw Di(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Fe(pe.FAILED_PRECONDITION,WN);return i(h)}).next(v=>this.vi(h).next(()=>v)):this.Oi(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Oi(t){return c1(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Fe(pe.FAILED_PRECONDITION,kx)})}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return c1(t).put("owner",e)}static D(){return pa.D()}Ai(t){const e=c1(t);return e.get("owner").next(i=>this.Ri(i)?(je("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ce.resolve())}Vi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Di(`Detected an update time that is in the future: ${t} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,B.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const i=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return je("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Di("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){Di("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function c1(n){return Br(n,"owner")}function JE(n){return Br(n,"clientMetadata")}function Px(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class Fx{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Fi=i,this.Bi=r}static Li(t,e){let i=Wt(),r=Wt();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Fx(t,e.fromCache,i,r)}}class $F{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ki(t,e).next(s=>s||this.Gi(t,e,r,i)).next(s=>s||this.Qi(t,e))}Ki(t,e){if(hx(e))return ce.resolve(null);let i=ws(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=ly(e,null,"F"),i=ws(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=Wt(...s);return this.Ui.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(p=>{const v=this.ji(e,h);return this.zi(e,v,c,p.readTime)?this.Ki(t,ly(e,null,"F")):this.Wi(t,v,e,p)}))})))}Gi(t,e,i,r){return hx(e)||r.isEqual(Et.min())?this.Qi(t,e):this.Ui.getDocuments(t,i).next(s=>{const c=this.ji(e,s);return this.zi(e,c,i,r)?this.Qi(t,e):(Nw()<=Ja.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cy(e)),this.Wi(t,c,e,Rw(r,-1)))})}ji(t,e){let i=new Yn(qw(t));return e.forEach((r,s)=>{vm(t,s)&&(i=i.add(s))}),i}zi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(t,e){return Nw()<=Ja.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",cy(e)),this.Ui.getDocumentsMatchingQuery(t,e,xo.min())}Wi(t,e,i,r){return this.Ui.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class bj{constructor(t,e,i,r){this.persistence=t,this.Hi=e,this.serializer=r,this.Ji=new ni(Ut),this.Yi=new bu(s=>no(s),Xf),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new HF(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ji))}}function ZF(n,t,e,i){return new bj(n,t,e,i)}function qF(n,t){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,ne.Z)(function*(n,t){const e=st(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.tr(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],h=[];let p=Wt();for(const v of r){c.push(v.batchId);for(const w of v.mutations)p=p.add(w.key)}for(const v of s){h.push(v.batchId);for(const w of v.mutations)p=p.add(w.key)}return e.localDocuments.getDocuments(i,p).next(v=>({er:v,removedBatchIds:c,addedBatchIds:h}))})})}),Lx.apply(this,arguments)}function wj(n,t){const e=st(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,v){const w=p.batch,S=w.keys();let N=ce.resolve();return S.forEach(O=>{N=N.next(()=>v.getEntry(h,O)).next(G=>{const J=p.docVersions.get(O);Tt(null!==J),G.version.compareTo(J)<0&&(w.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),v.addEntry(G)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(h,w))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let h=Wt();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function zF(n){const t=st(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Cj(n,t){const e=st(n),i=t.snapshotVersion;let r=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Zi.newChangeBuffer({trackRemovals:!0});r=e.Ji;const h=[];t.targetChanges.forEach((w,S)=>{const N=r.get(S);if(!N)return;h.push(e.Bs.removeMatchingKeys(s,w.removedDocuments,S).next(()=>e.Bs.addMatchingKeys(s,w.addedDocuments,S)));let O=N.withSequenceNumber(s.currentSequenceNumber);var G,J,te;null!==t.targetMismatches.get(S)?O=O.withResumeToken(Mn.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),r=r.insert(S,O),J=O,te=w,(0===(G=N).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&h.push(e.Bs.updateTargetData(s,O))});let p=rs(),v=Wt();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(WF(s,c,t.documentUpdates).next(w=>{p=w.nr,v=w.sr})),!i.isEqual(Et.min())){const w=e.Bs.getLastRemoteSnapshotVersion(s).next(S=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(w)}return ce.waitFor(h).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,v)).next(()=>p)}).then(s=>(e.Ji=r,s))}function WF(n,t,e){let i=Wt(),r=Wt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=rs();return e.forEach((h,p)=>{const v=s.get(h);p.isFoundDocument()!==v.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(Et.min())?(t.removeEntry(h,p.readTime),c=c.insert(h,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||0===p.version.compareTo(v.version)&&v.hasPendingWrites?(t.addEntry(p),c=c.insert(h,p)):je("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",p.version)}),{nr:c,sr:r}})}function Tj(n,t){const e=st(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function gy(n,t){const e=st(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Bs.getTargetData(i,t).next(s=>s?(r=s,ce.resolve(r)):e.Bs.allocateTargetId(i).next(c=>(r=new th(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(i.targetId,i),e.Yi.set(t,i.targetId)),i})}function my(n,t,e){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,ne.Z)(function*(n,t,e){const i=st(n),r=i.Ji.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!mu(c))throw c;je("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}),Ux.apply(this,arguments)}function QE(n,t,e){const i=st(n);let r=Et.min(),s=Wt();return i.persistence.runTransaction("Execute query","readonly",c=>function(h,p,v){const w=st(h),S=w.Yi.get(v);return void 0!==S?ce.resolve(w.Ji.get(S)):w.Bs.getTargetData(p,v)}(i,c,ws(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>i.Hi.getDocumentsMatchingQuery(c,t,e?r:Et.min(),e?s:Wt())).next(h=>(JF(i,RE(t),h),{documents:h,ir:s})))}function KF(n,t){const e=st(n),i=st(e.Bs),r=e.Ji.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.le(s,t).next(c=>c?c.target:null))}function YF(n,t){const e=st(n),i=e.Xi.get(t)||Et.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Zi.getAllFromCollectionGroup(r,t,Rw(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(JF(e,t,r),r))}function JF(n,t,e){let i=n.Xi.get(t)||Et.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(t,i)}function Bx(){return Bx=(0,ne.Z)(function*(n,t,e,i){const r=st(n);let s=Wt(),c=rs();for(const v of e){const w=t.rr(v.metadata.name);v.document&&(s=s.add(w));const S=t.ur(v);S.setReadTime(t.cr(v.metadata.readTime)),c=c.insert(w,S)}const h=r.Zi.newChangeBuffer({trackRemovals:!0}),p=yield gy(r,(v=i,ws(_m(hn.fromString(`__bundle__/docs/${v}`)))));var v;return r.persistence.runTransaction("Apply bundle documents","readwrite",v=>WF(v,h,c).next(w=>(h.apply(v),w)).next(w=>r.Bs.removeMatchingKeysForTargetId(v,p.targetId).next(()=>r.Bs.addMatchingKeys(v,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(v,w.nr,w.sr)).next(()=>w.nr)))}),Bx.apply(this,arguments)}function Ej(n,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,ne.Z)(function*(n,t,e=Wt()){const i=yield gy(n,ws(Dx(t.bundledQuery))),r=st(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=hr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.qs.saveNamedQuery(s,t);const h=i.withResumeToken(Mn.EMPTY_BYTE_STRING,c);return r.Ji=r.Ji.insert(h.targetId,h),r.Bs.updateTargetData(s,h).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,e,i.targetId)).next(()=>r.qs.saveNamedQuery(s,t))})}),Vx.apply(this,arguments)}function QF(n,t){return`firestore_clients_${n}_${t}`}function XF(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function jx(n,t){return`firestore_targets_${n}_${t}`}class XE{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static ar(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Fe(r.error.code,r.error.message))),c?new XE(t,e,r.state,s):(Di("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class u1{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static ar(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Fe(i.error.code,i.error.message))),s?new u1(t,i.state,r):(Di("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class eI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=FE();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=YN(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new eI(t,s):(Di("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Hx{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Hx(e.clientId,e.onlineState):(Di("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Gx{constructor(){this.activeTargetIds=FE()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class $x{constructor(t,e,i,r,s){this.window=t,this.ii=e,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ni(Ut),this.started=!1,this.yr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=QF(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Gx),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ne.Z)(function*(){const e=yield t.syncEngine.$i();for(const r of e){if(r===t.wr)continue;const s=t.getItem(QF(t.persistenceKey,r));if(s){const c=eI.ar(r,s);c&&(t.gr=t.gr.insert(c.clientId,c))}}t.Pr();const i=t.storage.getItem(t.vr);if(i){const r=t.br(i);r&&t.Vr(r)}for(const r of t.yr)t.mr(r);t.yr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,i){this.Dr(t,e,i),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(jx(this.persistenceKey,t));if(i){const r=u1.ar(t,i);r&&(e=r.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(jx(this.persistenceKey,t))}updateQueryState(t,e,i){this.kr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Cr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return je("SharedClientState","READ",t,e),e}setItem(t,e){je("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){je("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(je("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void Di("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ne.Z)(function*(){if(e.started){if(null!==i.key)if(e.Tr.test(i.key)){if(null==i.newValue){const r=e.Or(i.key);return e.Fr(r,null)}{const r=e.Br(i.key,i.newValue);if(r)return e.Fr(r.clientId,r)}}else if(e.Er.test(i.key)){if(null!==i.newValue){const r=e.Lr(i.key,i.newValue);if(r)return e.qr(r)}}else if(e.Ar.test(i.key)){if(null!==i.newValue){const r=e.Ur(i.key,i.newValue);if(r)return e.Kr(r)}}else if(i.key===e.vr){if(null!==i.newValue){const r=e.br(i.newValue);if(r)return e.Vr(r)}}else if(i.key===e.Ir){const r=function(s){let c=Ps.ct;if(null!=s)try{const h=JSON.parse(s);Tt("number"==typeof h),c=h}catch(h){Di("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(i.newValue);r!==Ps.ct&&e.sequenceNumberHandler(r)}else if(i.key===e.Rr){const r=e.Gr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,i){const r=new XE(this.currentUser,t,e,i),s=XF(this.persistenceKey,this.currentUser,t);this.setItem(s,r.hr())}Cr(t){const e=XF(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:t}))}kr(t,e,i){const r=jx(this.persistenceKey,t),s=new u1(t,e,i);this.setItem(r,s.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const i=this.Or(t);return eI.ar(i,e)}Lr(t,e){const i=this.Er.exec(t),r=Number(i[1]);return XE.ar(new Ji(void 0!==i[2]?i[2]:null),r,e)}Ur(t,e){const i=this.Ar.exec(t),r=Number(i[1]);return u1.ar(r,e)}br(t){return Hx.ar(t)}Gr(t){return JSON.parse(t)}qr(t){var e=this;return(0,ne.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.jr(t.batchId,t.state,t.error);je("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const i=e?this.gr.insert(t,e):this.gr.remove(t),r=this.Sr(this.gr),s=this.Sr(i),c=[],h=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Wr(c,h).then(()=>{this.gr=i})}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=FE();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class e2{constructor(){this.Hr=new Gx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,i){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new Gx,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ij{Yr(t){}shutdown(){}}class t2{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tI=null;function Zx(){return null===tI?tI=268435456+Math.round(2147483648*Math.random()):tI++,"0x"+tI.toString(16)}const Sj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Aj{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const Us="WebChannelConnection";class Nj extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.mo=(t.ssl?"https":"http")+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,i,r,s){const c=Zx(),h=this.To(t,e);je("RestConnection",`Sending RPC '${t}' ${c}:`,h,i);const p={};return this.Eo(p,r,s),this.Ao(t,h,p,i).then(v=>(je("RestConnection",`Received RPC '${t}' ${c}: `,v),v),v=>{throw to("RestConnection",`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}vo(t,e,i,r,s,c){return this.Io(t,e,i,r,s)}Eo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Gf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}To(t,e){return`${this.mo}/v1/${e}:${Sj[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,i,r){const s=Zx();return new Promise((c,h)=>{const p=new Sw;p.setWithCredentials(!0),p.listenOnce(Ew.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case $v.NO_ERROR:const w=p.getResponseJson();je(Us,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(w)),c(w);break;case $v.TIMEOUT:je(Us,`RPC '${t}' ${s} timed out`),h(new Fe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case $v.HTTP_ERROR:const S=p.getStatus();if(je(Us,`RPC '${t}' ${s} failed with status:`,S,"response text:",p.getResponseText()),S>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const O=N?.error;if(O&&O.status&&O.message){const G=function(J){const te=J.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(te)>=0?te:pe.UNKNOWN}(O.status);h(new Fe(G,O.message))}else h(new Fe(pe.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Fe(pe.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{je(Us,`RPC '${t}' ${s} completed.`)}});const v=JSON.stringify(r);je(Us,`RPC '${t}' ${s} sending request:`,r),p.send(e,"POST",v,i,15)})}Ro(t,e,i){const r=Zx(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=BN(),h=QD(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.xmlHttpFactory=new VN({})),this.Eo(p.initMessageHeaders,e,i),p.encodeInitMessageHeaders=!0;const w=s.join("");je(Us,`Creating RPC '${t}' stream ${r}: ${w}`,p);const S=c.createWebChannel(w,p);let N=!1,O=!1;const G=new Aj({ro:te=>{O?je(Us,`Not sending because RPC '${t}' stream ${r} is closed:`,te):(N||(je(Us,`Opening RPC '${t}' stream ${r} transport.`),S.open(),N=!0),je(Us,`RPC '${t}' stream ${r} sending:`,te),S.send(te))},oo:()=>S.close()}),J=(te,De,Oe)=>{te.listen(De,Be=>{try{Oe(Be)}catch(He){setTimeout(()=>{throw He},0)}})};return J(S,Iw.EventType.OPEN,()=>{O||je(Us,`RPC '${t}' stream ${r} transport opened.`)}),J(S,Iw.EventType.CLOSE,()=>{O||(O=!0,je(Us,`RPC '${t}' stream ${r} transport closed`),G.wo())}),J(S,Iw.EventType.ERROR,te=>{O||(O=!0,to(Us,`RPC '${t}' stream ${r} transport errored:`,te),G.wo(new Fe(pe.UNAVAILABLE,"The operation could not be completed")))}),J(S,Iw.EventType.MESSAGE,te=>{var De;if(!O){const Oe=te.data[0];Tt(!!Oe);const Be=Oe,He=Be.error||(null===(De=Be[0])||void 0===De?void 0:De.error);if(He){je(Us,`RPC '${t}' stream ${r} received error:`,He);const nt=He.status;let at=function(Xt){const _i=Pi[Xt];if(void 0!==_i)return KP(_i)}(nt),Gt=He.message;void 0===at&&(at=pe.INTERNAL,Gt="Unknown error status: "+nt+" with message "+He.message),O=!0,G.wo(new Fe(at,Gt)),S.close()}else je(Us,`RPC '${t}' stream ${r} received:`,Oe),G._o(Oe)}}),J(h,XD.STAT_EVENT,te=>{te.stat===eE.PROXY?je(Us,`RPC '${t}' stream ${r} detected buffering proxy`):te.stat===eE.NOPROXY&&je(Us,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{G.fo()},0),G}}function n2(){return typeof window<"u"?window:null}function nI(){return typeof document<"u"?document:null}function d1(n){return new B6(n,!0)}class qx{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ii=t,this.timerId=e,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,e-i);r>0&&je("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class r2{constructor(t,e,i,r,s,c,h,p){this.ii=t,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new qx(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var t=this;return(0,ne.Z)(function*(){t.Uo()&&(yield t.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}zo(){var t=this;return(0,ne.Z)(function*(){if(t.Ko())return t.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(t,e){var i=this;return(0,ne.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==t?i.qo.reset():e&&e.code===pe.RESOURCE_EXHAUSTED?(Di(e.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):e&&e.code===pe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.ao(e)})()}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===e&&this.Zo(i,r)},i=>{t(()=>{const r=new Fe(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(t,e){const i=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var t=this;this.state=5,this.qo.No((0,ne.Z)(function*(){t.state=0,t.start()}))}tu(t){return je("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget(()=>this.Fo===t?e():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xj extends r2{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function H6(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:pt(),r=t.targetChange.targetIds||[],s=function(p,v){return p.useProto3Json?(Tt(void 0===v||"string"==typeof v),Mn.fromBase64String(v||"")):(Tt(void 0===v||v instanceof Uint8Array),Mn.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(p){const v=void 0===p.code?pe.UNKNOWN:KP(p.code);return new Fe(v,p.message||"")}(c);e=new eF(i,r,s,h||null)}else if("documentChange"in t){const i=t.documentChange,r=wu(n,i.document.name),s=hr(i.document.updateTime),c=i.document.createTime?hr(i.document.createTime):Et.min(),h=new xr({mapValue:{fields:i.document.fields}}),p=Jn.newFoundDocument(r,s,c,h);e=new VE(i.targetIds||[],i.removedTargetIds||[],p.key,p)}else if("documentDelete"in t){const i=t.documentDelete,r=wu(n,i.document),s=i.readTime?hr(i.readTime):Et.min(),c=Jn.newNoDocument(r,s);e=new VE([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=wu(n,i.document);e=new VE([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return pt();{const i=t.filter,{count:r=0,unchangedNames:s}=i,c=new Yw(r,s);e=new XP(i.targetId,c)}}var p;return e}(this.serializer,t),i=function(r){if(!("targetChange"in r))return Et.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Et.min():s.readTime?hr(s.readTime):Et.min()}(t);return this.listener.nu(e,i)}su(t){const e={};e.database=t1(this.serializer),e.addTarget=function(r,s){let c;const h=s.target;if(c=ep(h)?{documents:uF(r,h)}:{query:Tx(r,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=rF(r,s.resumeToken);const p=yx(r,s.expectedCount);null!==p&&(c.expectedCount=p)}else if(s.snapshotVersion.compareTo(Et.min())>0){c.readTime=dy(r,s.snapshotVersion.toTimestamp());const p=yx(r,s.expectedCount);null!==p&&(c.expectedCount=p)}return c}(this.serializer,t);const i=function $6(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Wo(e)}iu(t){const e={};e.database=t1(this.serializer),e.removeTarget=t,this.Wo(e)}}class Mj extends r2{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(Tt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function G6(n,t){return n&&n.length>0?(Tt(void 0!==t),n.map(e=>function(i,r){let s=hr(i.updateTime?i.updateTime:r);return s.isEqual(Et.min())&&(s=hr(r)),new A(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=hr(t.commitTime);return this.listener.cu(i,e)}return Tt(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=t1(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>n1(this.serializer,i))};this.Wo(e)}}class Rj extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Fe(pe.UNKNOWN,r.toString())})}vo(t,e,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.vo(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fe(pe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Oj{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Di(e),this.mu=!1):je("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Pj{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(h=>{i.enqueueAndForget((0,ne.Z)(function*(){var p;ap(c)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,ne.Z)(function*(v){const w=st(v);w.vu.add(4),yield _y(w),w.bu.set("Unknown"),w.vu.delete(4),yield h1(w)}),function(v){return p.apply(this,arguments)})(c))}))}),this.bu=new Oj(i,r)}}function h1(n){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,ne.Z)(function*(n){if(ap(n))for(const t of n.Ru)yield t(!0)}),Wx.apply(this,arguments)}function _y(n){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,ne.Z)(function*(n){for(const t of n.Ru)yield t(!1)}),Kx.apply(this,arguments)}function iI(n,t){const e=st(n);e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),Qx(e)?Jx(e):yy(e).Ko()&&Yx(e,t))}function f1(n,t){const e=st(n),i=yy(e);e.Au.delete(t),i.Ko()&&s2(e,t),0===e.Au.size&&(i.Ko()?i.jo():ap(e)&&e.bu.set("Unknown"))}function Yx(n,t){if(n.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}yy(n).su(t)}function s2(n,t){n.Vu.qt(t),yy(n).iu(t)}function Jx(n){n.Vu=new P6({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),le:t=>n.Au.get(t)||null,ue:()=>n.datastore.serializer.databaseId}),yy(n).start(),n.bu.gu()}function Qx(n){return ap(n)&&!yy(n).Uo()&&n.Au.size>0}function ap(n){return 0===st(n).vu.size}function o2(n){n.Vu=void 0}function Fj(n){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,ne.Z)(function*(n){n.Au.forEach((t,e)=>{Yx(n,t)})}),Xx.apply(this,arguments)}function Lj(n,t){return eM.apply(this,arguments)}function eM(){return eM=(0,ne.Z)(function*(n,t){o2(n),Qx(n)?(n.bu.Iu(t),Jx(n)):n.bu.set("Unknown")}),eM.apply(this,arguments)}function Uj(n,t,e){return tM.apply(this,arguments)}function tM(){return tM=(0,ne.Z)(function*(n,t,e){if(n.bu.set("Online"),t instanceof eF&&2===t.state&&t.cause)try{yield(i=(0,ne.Z)(function*(r,s){const c=s.cause;for(const h of s.targetIds)r.Au.has(h)&&(yield r.remoteSyncer.rejectListen(h,c),r.Au.delete(h),r.Vu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){je("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield rI(n,i)}else if(t instanceof VE?n.Vu.Ht(t):t instanceof XP?n.Vu.ne(t):n.Vu.Xt(t),!e.isEqual(Et.min()))try{const i=yield zF(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.Vu.ce(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const v=r.Au.get(p);v&&r.Au.set(p,v.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach((h,p)=>{const v=r.Au.get(h);if(!v)return;r.Au.set(h,v.withResumeToken(Mn.EMPTY_BYTE_STRING,v.snapshotVersion)),s2(r,h);const w=new th(v.target,h,p,v.sequenceNumber);Yx(r,w)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){je("RemoteStore","Failed to raise snapshot:",i),yield rI(n,i)}var i}),tM.apply(this,arguments)}function rI(n,t,e){return nM.apply(this,arguments)}function nM(){return nM=(0,ne.Z)(function*(n,t,e){if(!mu(t))throw t;n.vu.add(1),yield _y(n),n.bu.set("Offline"),e||(e=()=>zF(n.localStore)),n.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield e(),n.vu.delete(1),yield h1(n)}))}),nM.apply(this,arguments)}function a2(n,t){return t().catch(e=>rI(n,e,t))}function vy(n){return iM.apply(this,arguments)}function iM(){return iM=(0,ne.Z)(function*(n){const t=st(n),e=lp(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Bj(t);)try{const r=yield Tj(t.localStore,i);if(null===r){0===t.Eu.length&&e.jo();break}i=r.batchId,Vj(t,r)}catch(r){yield rI(t,r)}l2(t)&&c2(t)}),iM.apply(this,arguments)}function Bj(n){return ap(n)&&n.Eu.length<10}function Vj(n,t){n.Eu.push(t);const e=lp(n);e.Ko()&&e.ou&&e.uu(t.mutations)}function l2(n){return ap(n)&&!lp(n).Uo()&&n.Eu.length>0}function c2(n){lp(n).start()}function jj(n){return rM.apply(this,arguments)}function rM(){return rM=(0,ne.Z)(function*(n){lp(n).hu()}),rM.apply(this,arguments)}function Hj(n){return sM.apply(this,arguments)}function sM(){return sM=(0,ne.Z)(function*(n){const t=lp(n);for(const e of n.Eu)t.uu(e.mutations)}),sM.apply(this,arguments)}function Gj(n,t,e){return oM.apply(this,arguments)}function oM(){return oM=(0,ne.Z)(function*(n,t,e){const i=n.Eu.shift(),r=Dm.from(i,t,e);yield a2(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield vy(n)}),oM.apply(this,arguments)}function $j(n,t){return aM.apply(this,arguments)}function aM(){return aM=(0,ne.Z)(function*(n,t){var e;t&&lp(n).ou&&(yield(e=(0,ne.Z)(function*(i,r){if(uy(s=r.code)&&s!==pe.ABORTED){const c=i.Eu.shift();lp(i).Qo(),yield a2(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield vy(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),l2(n)&&c2(n)}),aM.apply(this,arguments)}function u2(n,t){return lM.apply(this,arguments)}function lM(){return lM=(0,ne.Z)(function*(n,t){const e=st(n);e.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const i=ap(e);e.vu.add(3),yield _y(e),i&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),yield h1(e)}),lM.apply(this,arguments)}function cM(n,t){return uM.apply(this,arguments)}function uM(){return uM=(0,ne.Z)(function*(n,t){const e=st(n);t?(e.vu.delete(2),yield h1(e)):t||(e.vu.add(2),yield _y(e),e.bu.set("Unknown"))}),uM.apply(this,arguments)}function yy(n){return n.Su||(n.Su=function(t,e,i){const r=st(t);return r.fu(),new xj(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:Fj.bind(null,n),ao:Lj.bind(null,n),nu:Uj.bind(null,n)}),n.Ru.push(function(){var t=(0,ne.Z)(function*(e){e?(n.Su.Qo(),Qx(n)?Jx(n):n.bu.set("Unknown")):(yield n.Su.stop(),o2(n))});return function(e){return t.apply(this,arguments)}}())),n.Su}function lp(n){return n.Du||(n.Du=function(t,e,i){const r=st(t);return r.fu(),new Mj(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:jj.bind(null,n),ao:$j.bind(null,n),au:Hj.bind(null,n),cu:Gj.bind(null,n)}),n.Ru.push(function(){var t=(0,ne.Z)(function*(e){e?(n.Du.Qo(),yield vy(n)):(yield n.Du.stop(),n.Eu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Du}class dM{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,h=new dM(t,e,c,r,s);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(n,t){if(Di("AsyncQueue",`${t}: ${n}`),mu(n))return new Fe(pe.UNAVAILABLE,`${t}: ${n}`);throw n}class wy{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Qe.comparator(e.key,i.key):(e,i)=>Qe.comparator(e.key,i.key),this.keyedMap=ym(),this.sortedSet=new ni(this.comparator)}static emptySet(t){return new wy(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof wy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new wy;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class d2{constructor(){this.Cu=new ni(Qe.comparator)}track(t){const e=t.doc.key,i=this.Cu.get(e);i?0!==t.type&&3===i.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==i.type?this.Cu=this.Cu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Cu=this.Cu.remove(e):1===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):pt():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Cy{constructor(t,e,i,r,s,c,h,p,v){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new Cy(t,e,wy.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&np(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class Zj{constructor(){this.Nu=void 0,this.listeners=[]}}class qj{constructor(){this.queries=new bu(t=>Zw(t),np),this.onlineState="Unknown",this.ku=new Set}}function hM(n,t){return fM.apply(this,arguments)}function fM(){return fM=(0,ne.Z)(function*(n,t){const e=st(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new Zj),r)try{s.Nu=yield e.onListen(i)}catch(c){const h=by(c,`Initialization of query '${cy(t.query)}' failed`);return void t.onError(h)}e.queries.set(i,s),s.listeners.push(t),t.Mu(e.onlineState),s.Nu&&t.$u(s.Nu)&&mM(e)}),fM.apply(this,arguments)}function pM(n,t){return gM.apply(this,arguments)}function gM(){return gM=(0,ne.Z)(function*(n,t){const e=st(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),gM.apply(this,arguments)}function zj(n,t){const e=st(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const h of c.listeners)h.$u(r)&&(i=!0);c.Nu=r}}i&&mM(e)}function Wj(n,t,e){const i=st(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function mM(n){n.ku.forEach(t=>{t.next()})}class _M{constructor(t,e,i){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Cy(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){return!t.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(t){t=Cy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class Kj{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class h2{constructor(t){this.serializer=t}rr(t){return wu(this.serializer,t)}ur(t){return t.metadata.exists?cF(this.serializer,t.document,!1):Jn.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return hr(t)}}class Yj{constructor(t,e,i){this.ju=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=f2(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const i=hn.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,i=new h2(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const c of r.metadata.queries){const h=(e.get(c)||Wt()).add(s);e.set(c,h)}}return e}complete(){var t=this;return(0,ne.Z)(function*(){const e=yield function Dj(n,t,e,i){return Bx.apply(this,arguments)}(t.localStore,new h2(t.serializer),t.documents,t.ju.id),i=t.Wu(t.documents);for(const r of t.queries)yield Ej(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:e}})()}}function f2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class p2{constructor(t){this.key=t}}class g2{constructor(t){this.key=t}}class m2{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Wt(),this.mutatedKeys=Wt(),this.tc=qw(t),this.ec=new wy(this.tc)}get nc(){return this.Yu}sc(t,e){const i=e?e.ic:new d2,r=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,v="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((w,S)=>{const N=r.get(w),O=vm(this.query,S)?S:null,G=!!N&&this.mutatedKeys.has(N.key),J=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let te=!1;N&&O?N.data.isEqual(O.data)?G!==J&&(i.track({type:3,doc:O}),te=!0):this.rc(N,O)||(i.track({type:2,doc:O}),te=!0,(p&&this.tc(O,p)>0||v&&this.tc(O,v)<0)&&(h=!0)):!N&&O?(i.track({type:0,doc:O}),te=!0):N&&!O&&(i.track({type:1,doc:N}),te=!0,(p||v)&&(h=!0)),te&&(O?(c=c.add(O),s=J?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{ec:c,ic:i,zi:h,mutatedKeys:s}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const s=t.ic.xu();s.sort((v,w)=>function(S,N){const O=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return O(S)-O(N)}(v.type,w.type)||this.tc(v.doc,w.doc)),this.oc(i);const c=e?this.uc():[],h=0===this.Zu.size&&this.current?1:0,p=h!==this.Xu;return this.Xu=h,0!==s.length||p?{snapshot:new Cy(this.query,t.ec,r,s,t.mutatedKeys,0===h,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new d2,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=Wt(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const e=[];return t.forEach(i=>{this.Zu.has(i)||e.push(new g2(i))}),this.Zu.forEach(i=>{t.has(i)||e.push(new p2(i))}),e}hc(t){this.Yu=t.ir,this.Zu=Wt();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return Cy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Jj{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Qj{constructor(t){this.key=t,this.fc=!1}}class Xj{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new bu(h=>Zw(h),np),this._c=new Map,this.mc=new Set,this.gc=new ni(Qe.comparator),this.yc=new Map,this.Ic=new Mx,this.Tc={},this.Ec=new Map,this.Ac=Mm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function eH(n,t){return vM.apply(this,arguments)}function vM(){return vM=(0,ne.Z)(function*(n,t){const e=jM(n);let i,r;const s=e.wc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const c=yield gy(e.localStore,ws(t)),h=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield yM(e,t,i,"current"===h,c.resumeToken),e.isPrimaryClient&&iI(e.remoteStore,c)}return r}),vM.apply(this,arguments)}function yM(n,t,e,i,r){return bM.apply(this,arguments)}function bM(){return bM=(0,ne.Z)(function*(n,t,e,i,r){n.Rc=(S,N,O)=>{return(G=(0,ne.Z)(function*(J,te,De,Oe){let Be=te.view.sc(De);Be.zi&&(Be=yield QE(J.localStore,te.query,!1).then(({documents:at})=>te.view.sc(at,Be)));const He=Oe&&Oe.targetChanges.get(te.targetId),nt=te.view.applyChanges(Be,J.isPrimaryClient,He);return xM(J,te.targetId,nt.cc),nt.snapshot}),function(J,te,De,Oe){return G.apply(this,arguments)})(n,S,N,O);var G};const s=yield QE(n.localStore,t,!0),c=new m2(t,s.ir),h=c.sc(s.documents),p=Xw.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),v=c.applyChanges(h,n.isPrimaryClient,p);xM(n,e,v.cc);const w=new Jj(t,e,c);return n.wc.set(t,w),n._c.has(e)?n._c.get(e).push(t):n._c.set(e,[t]),v.snapshot}),bM.apply(this,arguments)}function tH(n,t){return wM.apply(this,arguments)}function wM(){return wM=(0,ne.Z)(function*(n,t){const e=st(n),i=e.wc.get(t),r=e._c.get(i.targetId);if(r.length>1)return e._c.set(i.targetId,r.filter(s=>!np(s,t))),void e.wc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield my(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),f1(e.remoteStore,i.targetId),Ty(e,i.targetId)}).catch(gu))):(Ty(e,i.targetId),yield my(e.localStore,i.targetId,!0))}),wM.apply(this,arguments)}function CM(){return CM=(0,ne.Z)(function*(n,t,e){const i=HM(n);try{const r=yield function(s,c){const h=st(s),p=fi.now(),v=c.reduce((N,O)=>N.add(O.key),Wt());let w,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let O=rs(),G=Wt();return h.Zi.getEntries(N,v).next(J=>{O=J,O.forEach((te,De)=>{De.isValidDocument()||(G=G.add(te))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,O)).next(J=>{w=J;const te=[];for(const De of c){const Oe=tt(De,w.get(De.key).overlayedDocument);null!=Oe&&te.push(new Me(De.key,Oe,Vw(Oe.value.mapValue),R.exists(!0)))}return h.mutationQueue.addMutationBatch(N,p,te,c)}).next(J=>{S=J;const te=J.applyToLocalDocumentSet(w,G);return h.documentOverlayCache.saveOverlays(N,J.batchId,te)})}).then(()=>({batchId:S.batchId,changes:fx(w)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,h){let p=s.Tc[s.currentUser.toKey()];p||(p=new ni(Ut)),p=p.insert(c,h),s.Tc[s.currentUser.toKey()]=p}(i,r.batchId,e),yield nh(i,r.changes),yield vy(i.remoteStore)}catch(r){const s=by(r,"Failed to persist write");e.reject(s)}}),CM.apply(this,arguments)}function _2(n,t){return TM.apply(this,arguments)}function TM(){return TM=(0,ne.Z)(function*(n,t){const e=st(n);try{const i=yield Cj(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.yc.get(s);c&&(Tt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.fc=!0:r.modifiedDocuments.size>0?Tt(c.fc):r.removedDocuments.size>0&&(Tt(c.fc),c.fc=!1))}),yield nh(e,i,t)}catch(i){yield gu(i)}}),TM.apply(this,arguments)}function v2(n,t,e){const i=st(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.wc.forEach((s,c)=>{const h=c.view.Mu(t);h.snapshot&&r.push(h.snapshot)}),function(s,c){const h=st(s);h.onlineState=c;let p=!1;h.queries.forEach((v,w)=>{for(const S of w.listeners)S.Mu(c)&&(p=!0)}),p&&mM(h)}(i.eventManager,t),r.length&&i.dc.nu(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function iH(n,t,e){return DM.apply(this,arguments)}function DM(){return DM=(0,ne.Z)(function*(n,t,e){const i=st(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.yc.get(t),s=r&&r.key;if(s){let c=new ni(Qe.comparator);c=c.insert(s,Jn.newNoDocument(s,Et.min()));const h=Wt().add(s),p=new Qw(Et.min(),new Map,new ni(Ut),c,h);yield _2(i,p),i.gc=i.gc.remove(s),i.yc.delete(t),MM(i)}else yield my(i.localStore,t,!1).then(()=>Ty(i,t,e)).catch(gu)}),DM.apply(this,arguments)}function rH(n,t){return EM.apply(this,arguments)}function EM(){return EM=(0,ne.Z)(function*(n,t){const e=st(n),i=t.batch.batchId;try{const r=yield wj(e.localStore,t);NM(e,i,null),AM(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield nh(e,r)}catch(r){yield gu(r)}}),EM.apply(this,arguments)}function sH(n,t,e){return IM.apply(this,arguments)}function IM(){return IM=(0,ne.Z)(function*(n,t,e){const i=st(n);try{const r=yield function(s,c){const h=st(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return h.mutationQueue.lookupMutationBatch(p,c).next(w=>(Tt(null!==w),v=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,v,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>h.localDocuments.getDocuments(p,v))})}(i.localStore,t);NM(i,t,e),AM(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield nh(i,r)}catch(r){yield gu(r)}}),IM.apply(this,arguments)}function SM(){return SM=(0,ne.Z)(function*(n,t){const e=st(n);ap(e.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=st(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Ec.get(i)||[];r.push(t),e.Ec.set(i,r)}catch(i){const r=by(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),SM.apply(this,arguments)}function AM(n,t){(n.Ec.get(t)||[]).forEach(e=>{e.resolve()}),n.Ec.delete(t)}function NM(n,t,e){const i=st(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function Ty(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n._c.get(t))n.wc.delete(i),e&&n.dc.Pc(i,e);n._c.delete(t),n.isPrimaryClient&&n.Ic.Is(t).forEach(i=>{n.Ic.containsKey(i)||y2(n,i)})}function y2(n,t){n.mc.delete(t.path.canonicalString());const e=n.gc.get(t);null!==e&&(f1(n.remoteStore,e),n.gc=n.gc.remove(t),n.yc.delete(e),MM(n))}function xM(n,t,e){for(const i of e)i instanceof p2?(n.Ic.addReference(i.key,t),aH(n,i)):i instanceof g2?(je("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,t),n.Ic.containsKey(i.key)||y2(n,i.key)):pt()}function aH(n,t){const e=t.key,i=e.path.canonicalString();n.gc.get(e)||n.mc.has(i)||(je("SyncEngine","New document in limbo: "+e),n.mc.add(i),MM(n))}function MM(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const t=n.mc.values().next().value;n.mc.delete(t);const e=new Qe(hn.fromString(t)),i=n.Ac.next();n.yc.set(i,new Qj(e)),n.gc=n.gc.insert(e,i),iI(n.remoteStore,new th(ws(_m(e.path)),i,"TargetPurposeLimboResolution",Ps.ct))}}function nh(n,t,e){return RM.apply(this,arguments)}function RM(){return RM=(0,ne.Z)(function*(n,t,e){const i=st(n),r=[],s=[],c=[];var h;i.wc.isEmpty()||(i.wc.forEach((h,p)=>{c.push(i.Rc(p,t,e).then(v=>{if((v||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,v?.fromCache?"not-current":"current"),v){r.push(v);const w=Fx.Li(p.targetId,v);s.push(w)}}))}),yield Promise.all(c),i.dc.nu(r),yield(h=(0,ne.Z)(function*(p,v){const w=st(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ce.forEach(v,N=>ce.forEach(N.Fi,O=>w.persistence.referenceDelegate.addReference(S,N.targetId,O)).next(()=>ce.forEach(N.Bi,O=>w.persistence.referenceDelegate.removeReference(S,N.targetId,O)))))}catch(S){if(!mu(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const O=w.Ji.get(N),J=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);w.Ji=w.Ji.insert(N,J)}}}),function(p,v){return h.apply(this,arguments)})(i.localStore,s))}),RM.apply(this,arguments)}function lH(n,t){return kM.apply(this,arguments)}function kM(){return kM=(0,ne.Z)(function*(n,t){const e=st(n);if(!e.currentUser.isEqual(t)){je("SyncEngine","User change. New user:",t.toKey());const i=yield qF(e.localStore,t);e.currentUser=t,(r=e).Ec.forEach(c=>{c.forEach(h=>{h.reject(new Fe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield nh(e,i.er)}var r}),kM.apply(this,arguments)}function cH(n,t){const e=st(n),i=e.yc.get(t);if(i&&i.fc)return Wt().add(i.key);{let r=Wt();const s=e._c.get(t);if(!s)return r;for(const c of s){const h=e.wc.get(c);r=r.unionWith(h.view.nc)}return r}}function uH(n,t){return OM.apply(this,arguments)}function OM(){return OM=(0,ne.Z)(function*(n,t){const e=st(n),i=yield QE(e.localStore,t.query,!0),r=t.view.hc(i);return e.isPrimaryClient&&xM(e,t.targetId,r.cc),r}),OM.apply(this,arguments)}function dH(n,t){return PM.apply(this,arguments)}function PM(){return PM=(0,ne.Z)(function*(n,t){const e=st(n);return YF(e.localStore,t).then(i=>nh(e,i))}),PM.apply(this,arguments)}function hH(n,t,e,i){return FM.apply(this,arguments)}function FM(){return FM=(0,ne.Z)(function*(n,t,e,i){const r=st(n),s=yield function(c,h){const p=st(c),v=st(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>v.Sn(w,h).next(S=>S?p.localDocuments.getDocuments(w,S):ce.resolve(null)))}(r.localStore,t);var h;null!==s?("pending"===e?yield vy(r.remoteStore):"acknowledged"===e||"rejected"===e?(NM(r,t,i||null),AM(r,t),h=t,st(st(r.localStore).mutationQueue).Cn(h)):pt(),yield nh(r,s)):je("SyncEngine","Cannot apply mutation batch with id: "+t)}),FM.apply(this,arguments)}function LM(){return LM=(0,ne.Z)(function*(n,t){const e=st(n);if(jM(e),HM(e),!0===t&&!0!==e.vc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield b2(e,i.toArray());e.vc=!0,yield cM(e.remoteStore,!0);for(const s of r)iI(e.remoteStore,s)}else if(!1===t&&!1!==e.vc){const i=[];let r=Promise.resolve();e._c.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(Ty(e,c),my(e.localStore,c,!0))),f1(e.remoteStore,c)}),yield r,yield b2(e,i),function(s){const c=st(s);c.yc.forEach((h,p)=>{f1(c.remoteStore,p)}),c.Ic.Ts(),c.yc=new Map,c.gc=new ni(Qe.comparator)}(e),e.vc=!1,yield cM(e.remoteStore,!1)}}),LM.apply(this,arguments)}function b2(n,t,e){return UM.apply(this,arguments)}function UM(){return UM=(0,ne.Z)(function*(n,t,e){const i=st(n),r=[],s=[];for(const c of t){let h;const p=i._c.get(c);if(p&&0!==p.length){h=yield gy(i.localStore,ws(p[0]));for(const v of p){const w=i.wc.get(v),S=yield uH(i,w);S.snapshot&&s.push(S.snapshot)}}else{const v=yield KF(i.localStore,c);h=yield gy(i.localStore,v),yield yM(i,w2(v),c,!1,h.resumeToken)}r.push(h)}return i.dc.nu(s),r}),UM.apply(this,arguments)}function w2(n){return mm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pH(n){const t=st(n);return st(st(t.localStore).persistence).$i()}function gH(n,t,e,i){return BM.apply(this,arguments)}function BM(){return BM=(0,ne.Z)(function*(n,t,e,i){const r=st(n);if(r.vc)return void je("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield YF(r.localStore,RE(s[0])),h=Qw.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Mn.EMPTY_BYTE_STRING);yield nh(r,c,h);break}case"rejected":yield my(r.localStore,t,!0),Ty(r,t,i);break;default:pt()}}),BM.apply(this,arguments)}function mH(n,t,e){return VM.apply(this,arguments)}function VM(){return VM=(0,ne.Z)(function*(n,t,e){const i=jM(n);if(i.vc){for(const r of t){if(i._c.has(r)){je("SyncEngine","Adding an already active target "+r);continue}const s=yield KF(i.localStore,r),c=yield gy(i.localStore,s);yield yM(i,w2(s),c.targetId,!1,c.resumeToken),iI(i.remoteStore,c)}for(const r of e)i._c.has(r)&&(yield my(i.localStore,r,!1).then(()=>{f1(i.remoteStore,r),Ty(i,r)}).catch(gu))}}),VM.apply(this,arguments)}function jM(n){const t=st(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=_2.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cH.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=iH.bind(null,t),t.dc.nu=zj.bind(null,t.eventManager),t.dc.Pc=Wj.bind(null,t.eventManager),t}function HM(n){const t=st(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rH.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sH.bind(null,t),t}class p1{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ne.Z)(function*(){e.serializer=d1(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return ZF(this.persistence,new $F,t.initialUser,this.serializer)}createPersistence(t){return new Rx(KE.zs,this.serializer)}createSharedClientState(t){return new e2}terminate(){var t=this;return(0,ne.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class GM extends p1{constructor(t,e,i){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,ne.Z)(function*(){yield e().call(i,t),yield i.Vc.initialize(i,t),yield HM(i.Vc.syncEngine),yield vy(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return ZF(this.persistence,new $F,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new PF(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new cE(e,this.persistence);return new lE(t.asyncQueue,i)}createPersistence(t){const e=Px(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ls.withCacheSize(this.cacheSizeBytes):Ls.DEFAULT;return new Ox(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,n2(),nI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new e2}}class C2 extends GM{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,ne.Z)(function*(){yield e().call(i,t);const r=i.Vc.syncEngine;i.sharedClientState instanceof $x&&(i.sharedClientState.syncEngine={jr:hH.bind(null,r),zr:gH.bind(null,r),Wr:mH.bind(null,r),$i:pH.bind(null,r),Qr:dH.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,ne.Z)(function*(c){yield function fH(n,t){return LM.apply(this,arguments)}(i.Vc.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=n2();if(!$x.D(e))throw new Fe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Px(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new $x(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class Dy{initialize(t,e){var i=this;return(0,ne.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>v2(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=lH.bind(null,i.syncEngine),yield cM(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new qj}createDatastore(t){const e=d1(t.databaseInfo.databaseId),i=new Nj(t.databaseInfo);return new Rj(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=h=>v2(this.syncEngine,h,0),c=t2.D()?new t2:new Ij,new Pj(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,h,p,v){const w=new Xj(i,r,s,c,h,p);return v&&(w.vc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ne.Z)(function*(e){const i=st(e);je("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield _y(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function T2(n,t=10240){let e=0;return{read:()=>(0,ne.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,ne.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class sI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):Di("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class yH{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new Qi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var t=this;return(0,ne.Z)(function*(){return t.metadata.promise})()}bc(){var t=this;return(0,ne.Z)(function*(){return yield t.getMetadata(),t.Nc()})()}Nc(){var t=this;return(0,ne.Z)(function*(){const e=yield t.kc();if(null===e)return null;const i=t.xc.decode(e),r=Number(i);isNaN(r)&&t.Mc(`length string (${i}) is not valid number`);const s=yield t.$c(r);return new Kj(JSON.parse(s),e.length+r)})()}Oc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}kc(){var t=this;return(0,ne.Z)(function*(){for(;t.Oc()<0&&!(yield t.Fc()););if(0===t.buffer.length)return null;const e=t.Oc();e<0&&t.Mc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}$c(t){var e=this;return(0,ne.Z)(function*(){for(;e.buffer.length<t;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const i=e.xc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}Fc(){var t=this;return(0,ne.Z)(function*(){const e=yield t.Cc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class bH{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Fe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ne.Z)(function*(s,c){const h=st(s),p=t1(h.serializer)+"/documents",v={documents:c.map(O=>e1(h.serializer,O))},w=yield h.vo("BatchGetDocuments",p,v,c.length),S=new Map;w.forEach(O=>{const G=function j6(n,t){return"found"in t?function(e,i){Tt(!!i.found);const r=wu(e,i.found.name),s=hr(i.found.updateTime),c=i.found.createTime?hr(i.found.createTime):Et.min(),h=new xr({mapValue:{fields:i.found.fields}});return Jn.newFoundDocument(r,s,c,h)}(n,t):"missing"in t?function(e,i){Tt(!!i.missing),Tt(!!i.readTime);const r=wu(e,i.missing),s=hr(i.readTime);return Jn.newNoDocument(r,s)}(n,t):pt()}(h.serializer,O);S.set(G.key.toString(),G)});const N=[];return c.forEach(O=>{const G=S.get(O.toString());Tt(!!G),N.push(G)}),N}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Mo(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=Qe.fromPath(r);t.mutations.push(new Cm(s,t.precondition(s)))}),yield(i=(0,ne.Z)(function*(r,s){const c=st(r),h=t1(c.serializer)+"/documents",p={writes:s.map(v=>n1(c.serializer,v))};yield c.Io("Commit",h,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw pt();e=Et.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Fe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Et.min())?R.exists(!1):R.updateTime(e):R.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Et.min()))throw new Fe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return R.updateTime(e)}return R.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class wH{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new qx(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var t=this;this.qo.No((0,ne.Z)(function*(){const e=new bH(t.datastore),i=t.qc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Uc(s)}))}).catch(r=>{t.Uc(r)})}))}qc(t){try{const e=this.updateFunction(t);return!cm(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!uy(e)}return!1}}class CH{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Ji.UNAUTHENTICATED,this.clientId=nE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,ne.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,ne.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=by(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function oI(n,t){return $M.apply(this,arguments)}function $M(){return $M=(0,ne.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,ne.Z)(function*(s){i.isEqual(s)||(yield qF(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),$M.apply(this,arguments)}function ZM(n,t){return qM.apply(this,arguments)}function qM(){return qM=(0,ne.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield zM(n);je("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>u2(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>u2(t.remoteStore,s)),n._onlineComponents=t}),qM.apply(this,arguments)}function D2(n){return"FirebaseError"===n.name?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function zM(n){return WM.apply(this,arguments)}function WM(){return WM=(0,ne.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield oI(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!D2(e))throw e;to("Error using user provided cache. Falling back to memory cache: "+e),yield oI(n,new p1)}}else je("FirestoreClient","Using default OfflineComponentProvider"),yield oI(n,new p1);return n._offlineComponents}),WM.apply(this,arguments)}function aI(n){return KM.apply(this,arguments)}function KM(){return KM=(0,ne.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je("FirestoreClient","Using user provided OnlineComponentProvider"),yield ZM(n,n._uninitializedComponentsProvider._online)):(je("FirestoreClient","Using default OnlineComponentProvider"),yield ZM(n,new Dy))),n._onlineComponents}),KM.apply(this,arguments)}function E2(n){return zM(n).then(t=>t.persistence)}function lI(n){return zM(n).then(t=>t.localStore)}function I2(n){return aI(n).then(t=>t.remoteStore)}function YM(n){return aI(n).then(t=>t.syncEngine)}function Ey(n){return JM.apply(this,arguments)}function JM(){return JM=(0,ne.Z)(function*(n){const t=yield aI(n),e=t.eventManager;return e.onListen=eH.bind(null,t.syncEngine),e.onUnlisten=tH.bind(null,t.syncEngine),e}),JM.apply(this,arguments)}function A2(n,t,e={}){const i=new Qi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(r,s,c,h,p){const v=new sI({next:S=>{s.enqueueAndForget(()=>pM(r,w));const N=S.docs.has(c);!N&&S.fromCache?p.reject(new Fe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?p.reject(new Fe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),w=new _M(_m(c.path),v,{includeMetadataChanges:!0,Ku:!0});return hM(r,w)}(yield Ey(n),n.asyncQueue,t,e,i)})),i.promise}function N2(n,t,e={}){const i=new Qi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(r,s,c,h,p){const v=new sI({next:S=>{s.enqueueAndForget(()=>pM(r,w)),S.fromCache&&"server"===h.source?p.reject(new Fe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),w=new _M(c,v,{includeMetadataChanges:!0,Ku:!0});return hM(r,w)}(yield Ey(n),n.asyncQueue,t,e,i)})),i.promise}function x2(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const M2=new Map;function QM(n,t,e){if(!e)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function R2(n,t,e,i){if(!0===t&&!0===i)throw new Fe(pe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function k2(n){if(!Qe.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function O2(n){if(Qe.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":pt()}function vn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Fe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=cI(n);throw new Fe(pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function P2(n,t){if(t<=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class F2{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Fe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Fe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}R2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=x2(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Fe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Fe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Fe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class g1{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F2(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new ys;switch(e.type){case"firstParty":return new RP(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Fe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=M2.get(t);e&&(je("ComponentProvider","Removing Datastore"),M2.delete(t),e.terminate())}(this),Promise.resolve()}}class Ii{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ii(this.firestore,t,this._key)}}class Cs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Cs(this.firestore,t,this._query)}}class Cu extends Cs{constructor(t,e,i){super(t,e,_m(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ii(this.firestore,null,new Qe(t))}withConverter(t){return new Cu(this.firestore,t,this._path)}}function U2(n,t,...e){if(n=(0,B.m9)(n),QM("collection","path",t),n instanceof g1){const i=hn.fromString(t,...e);return O2(i),new Cu(n,null,i)}{if(!(n instanceof Ii||n instanceof Cu))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(hn.fromString(t,...e));return O2(i),new Cu(n.firestore,null,i)}}function uI(n,t,...e){if(n=(0,B.m9)(n),1===arguments.length&&(t=nE.A()),QM("doc","path",t),n instanceof g1){const i=hn.fromString(t,...e);return k2(i),new Ii(n,null,new Qe(i))}{if(!(n instanceof Ii||n instanceof Cu))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(hn.fromString(t,...e));return k2(i),new Ii(n.firestore,n instanceof Cu?n.converter:null,new Qe(i))}}function B2(n,t){return n=(0,B.m9)(n),t=(0,B.m9)(t),(n instanceof Ii||n instanceof Cu)&&(t instanceof Ii||t instanceof Cu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function XM(n,t){return n=(0,B.m9)(n),t=(0,B.m9)(t),n instanceof Cs&&t instanceof Cs&&n.firestore===t.firestore&&np(n._query,t._query)&&n.converter===t.converter}class RH{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new qx(this,"async_queue_retry"),this.Xc=()=>{const e=nI();e&&je("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const t=nI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=nI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new Qi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}ea(){var t=this;return(0,ne.Z)(function*(){if(0!==t.Qc.length){try{yield t.Qc[0](),t.Qc.shift(),t.qo.reset()}catch(e){if(!mu(e))throw e;je("AsyncQueue","Operation failed with retryable error: "+e)}t.Qc.length>0&&t.qo.No(()=>t.ea())}})()}ta(t){const e=this.Gc.then(()=>(this.Hc=!0,t().catch(i=>{throw this.Wc=i,this.Hc=!1,Di("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=e,e}enqueueAfterDelay(t,e,i){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const r=dM.createAndSchedule(this,t,e,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&pt()}verifyOperationInProgress(){}sa(){var t=this;return(0,ne.Z)(function*(){let e;do{e=t.Gc,yield e}while(e!==t.Gc)})()}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function eR(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class kH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Si extends g1{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new RH,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||V2(this),this._firestoreClient.terminate()}}function fr(n){return n._firestoreClient||V2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function V2(n){var t,e,i;const r=n._freezeSettings(),s=(h=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new sx(n._databaseId,h,n._persistenceKey,(v=r).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,x2(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new CH(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(e=r.cache)||void 0===e?void 0:e._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function j2(n,t,e){const i=new Qi;return n.asyncQueue.enqueue((0,ne.Z)(function*(){try{yield oI(n,e),yield ZM(n,t),i.resolve()}catch(r){const s=r;if(!D2(s))throw s;to("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function H2(n){if(n._initialized||n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Tu(Mn.fromBase64String(t))}catch(e){throw new Fe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Tu(Mn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ih{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Fe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ei(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class km{constructor(t){this._methodName=t}}class dI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Fe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Fe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ut(this._lat,t._lat)||Ut(this._long,t._long)}}const $H=/^__.*__$/;class ZH{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Me(t,this.data,this.fieldMask,e,this.fieldTransforms):new It(t,this.data,e,this.fieldTransforms)}}class G2{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Me(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function $2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class hI{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new hI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.fa(t),r}da(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.ua(),r}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return gI(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if($2(this.ca)&&$H.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class qH{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||d1(t)}ya(t,e,i,r=!1){return new hI({ca:t,methodName:e,ga:i,path:Ei.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Om(n){const t=n._freezeSettings(),e=d1(n._databaseId);return new qH(n._databaseId,!!t.ignoreUndefinedProperties,e)}function fI(n,t,e,i,r,s={}){const c=n.ya(s.merge||s.mergeFields?2:0,t,e,r);rR("Data must be an object, but it was:",c,i);const h=z2(i,c);let p,v;if(s.merge)p=new Fs(c.fieldMask),v=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const S of s.mergeFields){const N=v1(t,S,e);if(!c.contains(N))throw new Fe(pe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);K2(w,N)||w.push(N)}p=new Fs(w),v=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,v=c.fieldTransforms;return new ZH(new xr(h),p,v)}class _1 extends km{_toFieldTransform(t){if(2!==t.ca)throw t._a(1===t.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _1}}function Z2(n,t,e){return new hI({ca:3,ga:t.settings.ga,methodName:n._methodName,la:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class tR extends km{_toFieldTransform(t){return new D(t.path,new wm)}isEqual(t){return t instanceof tR}}class zH extends km{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=Z2(this,t,!0),i=this.pa.map(s=>Pm(s,e)),r=new a(i);return new D(t.path,r)}isEqual(t){return this===t}}class WH extends km{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=Z2(this,t,!0),i=this.pa.map(s=>Pm(s,e)),r=new u(i);return new D(t.path,r)}isEqual(t){return this===t}}class KH extends km{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new f(t.serializer,mx(t.serializer,this.Ia));return new D(t.path,e)}isEqual(t){return this===t}}function nR(n,t,e,i){const r=n.ya(1,t,e);rR("Data must be an object, but it was:",r,i);const s=[],c=xr.empty();vu(i,(p,v)=>{const w=pI(t,p,e);v=(0,B.m9)(v);const S=r.da(w);if(v instanceof _1)s.push(w);else{const N=Pm(v,S);null!=N&&(s.push(w),c.set(w,N))}});const h=new Fs(s);return new G2(c,h,r.fieldTransforms)}function iR(n,t,e,i,r,s){const c=n.ya(1,t,e),h=[v1(t,i,e)],p=[r];if(s.length%2!=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<s.length;N+=2)h.push(v1(t,s[N])),p.push(s[N+1]);const v=[],w=xr.empty();for(let N=h.length-1;N>=0;--N)if(!K2(v,h[N])){const O=h[N];let G=p[N];G=(0,B.m9)(G);const J=c.da(O);if(G instanceof _1)v.push(O);else{const te=Pm(G,J);null!=te&&(v.push(O),w.set(O,te))}}const S=new Fs(v);return new G2(w,S,c.fieldTransforms)}function q2(n,t,e,i=!1){return Pm(e,n.ya(i?4:3,t))}function Pm(n,t){if(W2(n=(0,B.m9)(n)))return rR("Unsupported field value:",t,n),z2(n,t);if(n instanceof km)return function(e,i){if(!$2(i.ca))throw i._a(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let h=Pm(c,i.wa(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,B.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mx(i.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=fi.fromDate(e);return{timestampValue:dy(i.serializer,r)}}if(e instanceof fi){const r=new fi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:dy(i.serializer,r)}}if(e instanceof dI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Tu)return{bytesValue:rF(i.serializer,e._byteString)};if(e instanceof Ii){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:bx(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i._a(`Unsupported field value: ${cI(e)}`)}(n,t)}function z2(n,t){const e={};return yE(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vu(n,(i,r)=>{const s=Pm(r,t.ha(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function W2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fi||n instanceof dI||n instanceof Tu||n instanceof Ii||n instanceof km)}function rR(n,t,e){if(!W2(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=cI(e);throw t._a("an object"===i?n+" a custom object":n+" "+i)}var i}function v1(n,t,e){if((t=(0,B.m9)(t))instanceof ih)return t._internalPath;if("string"==typeof t)return pI(n,t);throw gI("Field path arguments must be of type string or ",n,!1,void 0,e)}const YH=new RegExp("[~\\*/\\[\\]]");function pI(n,t,e){if(t.search(YH)>=0)throw gI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ih(...t.split("."))._internalPath}catch{throw gI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function gI(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Fe(pe.INVALID_ARGUMENT,h+n+p)}function K2(n,t){return n.some(e=>e.isEqual(t))}class y1{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new JH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(mI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class JH extends y1{data(){return super.data()}}function mI(n,t){return"string"==typeof t?pI(n,t):t instanceof ih?t._internalPath:t._delegate._internalPath}function Y2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sR{}class b1 extends sR{}function cp(n,t,...e){let i=[];t instanceof sR&&i.push(t),i=i.concat(e),function(r){const s=r.filter(h=>h instanceof Iy).length,c=r.filter(h=>h instanceof w1).length;if(s>1||s>0&&c>0)throw new Fe(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class w1 extends b1{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new w1(t,e,i)}_apply(t){const e=this._parse(t);return eL(t._query,e),new Cs(t.firestore,t.converter,$w(t._query,e))}_parse(t){const e=Om(t.firestore);return function(r,s,c,h,p,v,w){let S;if(p.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){X2(w,v);const N=[];for(const O of w)N.push(Q2(h,r,O));S={arrayValue:{values:N}}}else S=Q2(h,r,w)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||X2(w,v),S=q2(c,"where",w,"in"===v||"not-in"===v);return ln.create(p,v,S)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class Iy extends sR{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Iy(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:Rn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let s=i;const c=r.getFlattenedFilters();for(const h of c)eL(s,h),s=$w(s,h)}(t._query,e),new Cs(t.firestore,t.converter,$w(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class oR extends b1{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new oR(t,e)}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new bc(r,s);return function(h,p){if(null===ME(h)){const v=Gw(h);null!==v&&tL(0,v,p.field)}}(i,c),c}(t._query,this._field,this._direction);return new Cs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ma(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class _I extends b1{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new _I(t,e,i)}_apply(t){return new Cs(t.firestore,t.converter,ly(t._query,this._limit,this._limitType))}}class vI extends b1{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new vI(t,e,i)}_apply(t){const e=J2(t,this.type,this._docOrFields,this._inclusive);return new Cs(t.firestore,t.converter,(r=e,new ma((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class yI extends b1{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new yI(t,e,i)}_apply(t){const e=J2(t,this.type,this._docOrFields,this._inclusive);return new Cs(t.firestore,t.converter,(r=e,new ma((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function J2(n,t,e,i){if(e[0]=(0,B.m9)(e[0]),e[0]instanceof y1)return function(r,s,c,h,p){if(!h)throw new Fe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const w of eh(r))if(w.field.isKeyField())v.push(Jf(s,h.key));else{const S=h.data.field(w.field);if(Kf(S))throw new Fe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=w.field.canonicalString();throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new yc(v,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Om(n.firestore);return function(s,c,h,p,v,w){const S=s.explicitOrderBy;if(v.length>S.length)throw new Fe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let O=0;O<v.length;O++){const G=v[O];if(S[O].field.isKeyField()){if("string"!=typeof G)throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof G}`);if(!ay(s)&&-1!==G.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${G}' contains a slash.`);const J=s.path.child(hn.fromString(G));if(!Qe.isDocumentKey(J))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const te=new Qe(J);N.push(Jf(c,te))}else{const J=q2(h,p,G);N.push(J)}}return new yc(N,w)}(n._query,n.firestore._databaseId,r,t,e,i)}}function Q2(n,t,e){if("string"==typeof(e=(0,B.m9)(e))){if(""===e)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ay(t)&&-1!==e.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(hn.fromString(e));if(!Qe.isDocumentKey(i))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Jf(n,new Qe(i))}if(e instanceof Ii)return Jf(n,e._key);throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cI(e)}.`)}function X2(n,t){if(!Array.isArray(n)||0===n.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function eL(n,t){if(t.isInequality()){const i=Gw(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=ME(n);null!==s&&tL(0,r,s)}const e=function(i,r){for(const s of i)for(const c of s.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Fe(pe.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function tL(n,t,e){if(!e.isEqual(t))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class aR{convertValue(t,e="none"){switch(vc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw pt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return vu(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new dI(Oi(t.latitude),Oi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=hm(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Yf(t));default:return null}}convertTimestamp(t){const e=rl(t);return new fi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=hn.fromString(t);Tt(pF(i));const r=new mc(i.get(1),i.get(3)),s=new Qe(i.popFirst(5));return r.isEqual(e)||Di(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function bI(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class o4 extends aR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ii(this.firestore,null,e)}}class Fm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class rh extends y1{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new C1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(mI("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class C1 extends rh{data(t={}){return super.data(t)}}class up{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Fm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new C1(this._firestore,this._userDataWriter,i.key,i,new Fm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new C1(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Fm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const h=new C1(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Fm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,v=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),v=s.indexOf(c.doc.key)),{type:l4(c.type),doc:h,oldIndex:p,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function l4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function iL(n,t){return n instanceof rh&&t instanceof rh?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof up&&t instanceof up&&n._firestore===t._firestore&&XM(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class dp extends aR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ii(this.firestore,null,e)}}function rL(n,t,e){n=vn(n,Ii);const i=vn(n.firestore,Si),r=bI(n.converter,t,e);return Sy(i,[fI(Om(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,R.none())])}function sL(n,t,e,...i){n=vn(n,Ii);const r=vn(n.firestore,Si),s=Om(r);let c;return c="string"==typeof(t=(0,B.m9)(t))||t instanceof ih?iR(s,"updateDoc",n._key,t,e,i):nR(s,"updateDoc",n._key,t),Sy(r,[c.toMutation(n._key,R.exists(!0))])}function oL(n,...t){var e,i,r;n=(0,B.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||eR(t[c])||(s=t[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(eR(t[c])){const S=t[c];t[c]=null===(e=S.next)||void 0===e?void 0:e.bind(S),t[c+1]=null===(i=S.error)||void 0===i?void 0:i.bind(S),t[c+2]=null===(r=S.complete)||void 0===r?void 0:r.bind(S)}let p,v,w;if(n instanceof Ii)v=vn(n.firestore,Si),w=_m(n._key.path),p={next:S=>{t[c]&&t[c](lR(v,n,S))},error:t[c+1],complete:t[c+2]};else{const S=vn(n,Cs);v=vn(S.firestore,Si),w=S._query;const N=new dp(v);p={next:O=>{t[c]&&t[c](new up(v,N,S,O))},error:t[c+1],complete:t[c+2]},Y2(n._query)}return function(S,N,O,G){const J=new sI(G),te=new _M(N,J,O);return S.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return hM(yield Ey(S),te)})),()=>{J.Dc(),S.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return pM(yield Ey(S),te)}))}}(fr(v),w,h,p)}function Sy(n,t){return function(e,i){const r=new Qi;return e.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function nH(n,t,e){return CM.apply(this,arguments)}(yield YM(e),i,r)})),r.promise}(fr(n),t)}function lR(n,t,e){const i=e.docs.get(t._key),r=new dp(n);return new rh(n,r,t._key,i,new Fm(e.hasPendingWrites,e.fromCache),t.converter)}const I4={maxAttempts:5};class aL{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Om(t)}set(t,e,i){this._verifyNotCommitted();const r=hp(t,this._firestore),s=bI(r.converter,e,i),c=fI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,R.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=hp(t,this._firestore);let c;return c="string"==typeof(e=(0,B.m9)(e))||e instanceof ih?iR(this._dataReader,"WriteBatch.update",s._key,e,i,r):nR(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,R.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=hp(t,this._firestore);return this._mutations=this._mutations.concat(new Mo(e._key,R.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hp(n,t){if((n=(0,B.m9)(n)).firestore!==t)throw new Fe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class S4 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Om(t)}get(t){const e=hp(t,this._firestore),i=new o4(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return pt();const s=r[0];if(s.isFoundDocument())return new y1(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new y1(this._firestore,i,e._key,null,e.converter);throw pt()})}set(t,e,i){const r=hp(t,this._firestore),s=bI(r.converter,e,i),c=fI(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=hp(t,this._firestore);let c;return c="string"==typeof(e=(0,B.m9)(e))||e instanceof ih?iR(this._dataReader,"Transaction.update",s._key,e,i,r):nR(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=hp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=hp(t,this._firestore),i=new dp(this._firestore);return super.get(t).then(r=>new rh(this._firestore,i,e._key,r._document,new Fm(!1,!1),e.converter))}}function cR(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function cL(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function uL(){if(!function ix(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Gf=ns.SDK_VERSION,(0,ns._registerComponent)(new ca.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new Si(new GN(e.getProvider("auth-internal")),new tE(e.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Fe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(h.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(Zv,"3.12.0",n),(0,ns.registerVersion)(Zv,"3.12.0","esm2017")}();class T1{constructor(t){this._delegate=t}static fromBase64String(t){return uL(),new T1(Tu.fromBase64String(t))}static fromUint8Array(t){return cL(),new T1(Tu.fromUint8Array(t))}toBase64(){return uL(),this._delegate.toBase64()}toUint8Array(){return cL(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uR(n){return function F4(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class L4{enableIndexedDbPersistence(t,e){return function PH(n,t){H2(n=vn(n,Si));const e=fr(n);if(e._uninitializedComponentsProvider)throw new Fe(pe.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Dy;return j2(e,r,new GM(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function FH(n){H2(n=vn(n,Si));const t=fr(n);if(t._uninitializedComponentsProvider)throw new Fe(pe.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new Dy;return j2(t,i,new C2(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function LH(n){if(n._initialized&&!n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Qi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{yield(e=(0,ne.Z)(function*(i){if(!pa.D())return Promise.resolve();const r=i+"main";yield pa.delete(r)}),function(i){return e.apply(this,arguments)})(Px(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class dL{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof mc||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&to("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function L2(n,t,e,i={}){var r;const s=(n=vn(n,g1))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&to("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,h;if("string"==typeof i.mockUserToken)c=i.mockUserToken,h=Ji.MOCK_USER;else{c=(0,B.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Fe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ji(p)}n._authCredentials=new $f(new xw(c,h))}}(this._delegate,t,e,i)}enableNetwork(){return function BH(n){return function TH(n){return n.asyncQueue.enqueue((0,ne.Z)(function*(){const t=yield E2(n),e=yield I2(n);return t.setNetworkEnabled(!0),function(i){const r=st(i);return r.vu.delete(0),h1(r)}(e)}))}(fr(n=vn(n,Si)))}(this._delegate)}disableNetwork(){return function VH(n){return function DH(n){return n.asyncQueue.enqueue((0,ne.Z)(function*(){const t=yield E2(n),e=yield I2(n);return t.setNetworkEnabled(!1),(i=(0,ne.Z)(function*(r){const s=st(r);s.vu.add(0),yield _y(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(fr(n=vn(n,Si)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,R2("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function UH(n){return function(t){const e=new Qi;return t.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function oH(n,t){return SM.apply(this,arguments)}(yield YM(t),e)})),e.promise}(fr(n=vn(n,Si)))}(this._delegate)}onSnapshotsInSync(t){return function _4(n,t){return function SH(n,t){const e=new sI(t);return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return i=yield Ey(n),r=e,st(i).ku.add(r),void r.next();var i,r})),()=>{e.Dc(),n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return i=yield Ey(n),r=e,void st(i).ku.delete(r);var i,r}))}}(fr(n=vn(n,Si)),eR(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Ay(this,U2(this._delegate,t))}catch(e){throw io(e,"collection()","Firestore.collection()")}}doc(t){try{return new ol(this,uI(this._delegate,t))}catch(e){throw io(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ro(this,function MH(n,t){if(n=vn(n,g1),QM("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cs(n,null,(e=t,new ma(hn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw io(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function A4(n,t,e){n=vn(n,Si);const i=Object.assign(Object.assign({},I4),e);return function(r){if(r.maxAttempts<1)throw new Fe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const h=new Qi;return r.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){const p=yield function S2(n){return aI(n).then(t=>t.datastore)}(r);new wH(r.asyncQueue,p,c,s,h).run()})),h.promise}(fr(n),r=>t(new S4(n,r)),i)}(this._delegate,e=>t(new hL(this,e)))}batch(){return fr(this._delegate),new fL(new aL(this._delegate,t=>Sy(this._delegate,t)))}loadBundle(t){return function jH(n,t){const e=fr(n=vn(n,Si)),i=new kH;return function AH(n,t,e,i){const r=function(s,c){let h;return h="string"==typeof s?YP().encode(s):s,p=function(p,v){if(p instanceof Uint8Array)return T2(p,v);if(p instanceof ArrayBuffer)return T2(new Uint8Array(p),v);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new yH(p,c);var p}(e,d1(t));n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){!function _H(n,t,e){const i=st(n);var r;(r=(0,ne.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(N,O){const G=st(N),J=hr(O.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",te=>G.qs.getBundleMetadata(te,O.id)).then(te=>!!te&&te.createTime.compareTo(J)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=p).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(f2(p));const v=new Yj(p,s.localStore,c.serializer);let w=yield c.bc();for(;w;){const N=yield v.zu(w);N&&h._updateProgress(N),w=yield c.bc()}const S=yield v.complete();return yield nh(s,S.Ju,void 0),yield function(N,O){const G=st(N);return G.persistence.runTransaction("Save bundle","readwrite",J=>G.qs.saveBundleMetadata(J,O))}(s.localStore,p),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(p){return to("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var N}),function(s,c,h){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield YM(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function HH(n,t){return function NH(n,t){return n.asyncQueue.enqueue((0,ne.Z)(function*(){return function(e,i){const r=st(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield lI(n),t)}))}(fr(n=vn(n,Si)),t).then(e=>e?new Cs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ro(this,e):null)}}class wI extends aR{constructor(t){super(),this.firestore=t}convertBytes(t){return new T1(new Tu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return ol.forKey(e,this.firestore,null)}}class hL{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new wI(t)}get(t){const e=Um(t);return this._delegate.get(e).then(i=>new D1(this._firestore,new rh(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Um(t);return i?(cR("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Um(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Um(t);return this._delegate.delete(e),this}}class fL{constructor(t){this._delegate=t}set(t,e,i){const r=Um(t);return i?(cR("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Um(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Um(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Lm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new C1(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new E1(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Lm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Lm(t,new wI(t),e),r.set(e,s)),s}}Lm.INSTANCES=new WeakMap;class ol{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wI(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ol(e,new Ii(e._delegate,i,new Qe(t)))}static forKey(t,e,i){return new ol(e,new Ii(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Ay(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Ay(this.firestore,U2(this._delegate,t))}catch(e){throw io(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,B.m9)(t))instanceof Ii&&B2(this._delegate,t)}set(t,e){e=cR("DocumentReference.set",e);try{return e?rL(this._delegate,t,e):rL(this._delegate,t)}catch(i){throw io(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?sL(this._delegate,t):sL(this._delegate,t,e,...i)}catch(r){throw io(r,"updateDoc()","DocumentReference.update()")}}delete(){return function g4(n){return Sy(vn(n.firestore,Si),[new Mo(n._key,R.none())])}(this._delegate)}onSnapshot(...t){const e=pL(t),i=gL(t,r=>new D1(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return oL(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function u4(n){n=vn(n,Ii);const t=vn(n.firestore,Si),e=fr(t),i=new dp(t);return function EH(n,t){const e=new Qi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(i=(0,ne.Z)(function*(r,s,c){try{const h=yield function(p,v){const w=st(p);return w.persistence.runTransaction("read document","readonly",S=>w.localDocuments.getDocument(S,v))}(r,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Fe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=by(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield lI(n),t,e);var i})),e.promise}(e,n._key).then(r=>new rh(t,i,n._key,r,new Fm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function d4(n){n=vn(n,Ii);const t=vn(n.firestore,Si);return A2(fr(t),n._key,{source:"server"}).then(e=>lR(t,n,e))}(this._delegate):function c4(n){n=vn(n,Ii);const t=vn(n.firestore,Si);return A2(fr(t),n._key).then(e=>lR(t,n,e))}(this._delegate),e.then(i=>new D1(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new ol(this.firestore,this._delegate.withConverter(t?Lm.getInstance(this.firestore,t):null))}}function io(n,t,e){return n.message=n.message.replace(t,e),n}function pL(n){for(const t of n)if("object"==typeof t&&!uR(t))return t;return{}}function gL(n,t){var e,i;let r;return r=uR(n[0])?n[0]:uR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class D1{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new ol(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return iL(this._delegate,t._delegate)}}class E1 extends D1{data(t){const e=this._delegate.data(t);return function HN(n,t){n||pt()}(void 0!==e),e}}class ro{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wI(t)}where(t,e,i){try{return new ro(this.firestore,cp(this._delegate,function QH(n,t,e){const i=t,r=mI("where",n);return w1._create(r,i,e)}(t,e,i)))}catch(r){throw io(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ro(this.firestore,cp(this._delegate,function XH(n,t="asc"){const e=t,i=mI("orderBy",n);return oR._create(i,e)}(t,e)))}catch(i){throw io(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ro(this.firestore,cp(this._delegate,function e4(n){return P2("limit",n),_I._create("limit",n,"F")}(t)))}catch(e){throw io(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ro(this.firestore,cp(this._delegate,function t4(n){return P2("limitToLast",n),_I._create("limitToLast",n,"L")}(t)))}catch(e){throw io(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ro(this.firestore,cp(this._delegate,function n4(...n){return vI._create("startAt",n,!0)}(...t)))}catch(e){throw io(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ro(this.firestore,cp(this._delegate,function i4(...n){return vI._create("startAfter",n,!1)}(...t)))}catch(e){throw io(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ro(this.firestore,cp(this._delegate,function r4(...n){return yI._create("endBefore",n,!1)}(...t)))}catch(e){throw io(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ro(this.firestore,cp(this._delegate,function s4(...n){return yI._create("endAt",n,!0)}(...t)))}catch(e){throw io(e,"endAt()","Query.endAt()")}}isEqual(t){return XM(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function f4(n){n=vn(n,Cs);const t=vn(n.firestore,Si),e=fr(t),i=new dp(t);return function IH(n,t){const e=new Qi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(i=(0,ne.Z)(function*(r,s,c){try{const h=yield QE(r,s,!0),p=new m2(s,h.ir),v=p.sc(h.documents),w=p.applyChanges(v,!1);c.resolve(w.snapshot)}catch(h){const p=by(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield lI(n),t,e);var i})),e.promise}(e,n._query).then(r=>new up(t,i,n,r))}(this._delegate):"server"===t?.source?function p4(n){n=vn(n,Cs);const t=vn(n.firestore,Si),e=fr(t),i=new dp(t);return N2(e,n._query,{source:"server"}).then(r=>new up(t,i,n,r))}(this._delegate):function h4(n){n=vn(n,Cs);const t=vn(n.firestore,Si),e=fr(t),i=new dp(t);return Y2(n._query),N2(e,n._query).then(r=>new up(t,i,n,r))}(this._delegate),e.then(i=>new dR(this.firestore,new up(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=pL(t),i=gL(t,r=>new dR(this.firestore,new up(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return oL(this._delegate,e,i)}withConverter(t){return new ro(this.firestore,this._delegate.withConverter(t?Lm.getInstance(this.firestore,t):null))}}class B4{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new E1(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dR{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new E1(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new B4(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new E1(this._firestore,i))})}isEqual(t){return iL(this._delegate,t._delegate)}}class Ay extends ro{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ol(this.firestore,t):null}doc(t){try{return new ol(this.firestore,void 0===t?uI(this._delegate):uI(this._delegate,t))}catch(e){throw io(e,"doc()","CollectionReference.doc()")}}add(t){return function m4(n,t){const e=vn(n.firestore,Si),i=uI(n),r=bI(n.converter,t);return Sy(e,[fI(Om(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,R.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new ol(this.firestore,e))}isEqual(t){return B2(this._delegate,t._delegate)}withConverter(t){return new Ay(this.firestore,this._delegate.withConverter(t?Lm.getInstance(this.firestore,t):null))}}function Um(n){return vn(n,Ii)}class hR{constructor(...t){this._delegate=new ih(...t)}static documentId(){return new hR(Ei.keyField().canonicalString())}isEqual(t){return(t=(0,B.m9)(t))instanceof ih&&this._delegate._internalPath.isEqual(t._internalPath)}}class Bm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function x4(){return new tR("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Bm(t)}static delete(){const t=function N4(){return new _1("deleteField")}();return t._methodName="FieldValue.delete",new Bm(t)}static arrayUnion(...t){const e=function M4(...n){return new zH("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Bm(e)}static arrayRemove(...t){const e=function R4(...n){return new WH("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Bm(e)}static increment(t){const e=function k4(n){return new KH("increment",n)}(t);return e._methodName="FieldValue.increment",new Bm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const V4={Firestore:dL,GeoPoint:dI,Timestamp:fi,Blob:T1,Transaction:hL,WriteBatch:fL,DocumentReference:ol,DocumentSnapshot:D1,Query:ro,QueryDocumentSnapshot:E1,QuerySnapshot:dR,CollectionReference:Ay,FieldPath:hR,FieldValue:Bm,setLogLevel:function U4(n){!function jN(n){fu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function H4(n){(function j4(n,t){n.INTERNAL.registerComponent(new ca.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},V4)))})(n,(t,e)=>new dL(t,e,new L4)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(lu.Z);var CI=V(6451),TI=V(5363),G4=V(6063);class $4 extends di.x{constructor(t=1/0,e=1/0,i=G4.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let h=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)h=p;h&&i.splice(0,h+1)}}}var fR=V(3099);function mL(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,fR.B)({connector:()=>new $4(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function _L(n,t){return(0,ra.m)(t)?Ti(()=>n,t):Ti(()=>n)}var pR=V(9468);V(259);const mR=new Map,yL={activated:!1,tokenObservers:[]},K4={initialized:!1,enabled:!1};function Xi(n){return mR.get(n)||Object.assign({},yL)}function EI(){return K4}class tG{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ne.Z)(function*(){e.stop();try{e.pending=new B.BH,yield function nG(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new B.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Ts=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vR(n){if(!Xi(n).activated)throw Ts.create("use-before-activation",{appName:n.name})}function AI(n,t){return bR.apply(this,arguments)}function bR(){return bR=(0,ne.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const S=yield r.getHeartbeatsHeader();S&&(i["X-Firebase-Client"]=S)}const s={method:"POST",body:JSON.stringify(t),headers:i};let c,h;try{c=yield fetch(n,s)}catch(S){throw Ts.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw Ts.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw Ts.create("fetch-parse-error",{originalErrorMessage:S?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(p[1]),w=Date.now();return{token:h.token,expireTimeMillis:w+v,issuedAtTimeMillis:w}}),bR.apply(this,arguments)}function wL(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const I1="firebase-app-check-store";let NI=null;function TL(){return NI||(NI=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Ts.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(I1,{keyPath:"compositeKey"})}}catch(e){t(Ts.create("storage-open",{originalErrorMessage:e?.message}))}}),NI)}function wR(){return wR=(0,ne.Z)(function*(n,t){const i=(yield TL()).transaction(I1,"readwrite"),s=i.objectStore(I1).put({compositeKey:n,value:t});return new Promise((c,h)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var v;h(Ts.create("storage-set",{originalErrorMessage:null===(v=p.target.error)||void 0===v?void 0:v.message}))}})}),wR.apply(this,arguments)}const S1=new Ja.Yd("@firebase/app-check");function DR(n,t){return(0,B.hl)()?function cG(n,t){return function DL(n,t){return wR.apply(this,arguments)}(function IL(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{S1.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function IR(){return EI().enabled}function SR(){return AR.apply(this,arguments)}function AR(){return AR=(0,ne.Z)(function*(){const n=EI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),AR.apply(this,arguments)}const gG={error:"UNKNOWN_ERROR"};function mG(n){return B.US.encodeString(JSON.stringify(n),!1)}function xI(n){return NR.apply(this,arguments)}function NR(){return NR=(0,ne.Z)(function*(n,t=!1){const e=n.app;vR(e);const i=Xi(e);let s,r=i.token;if(r&&!Ny(r)&&(i.token=void 0,r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(Ny(p)?r=p:yield DR(e,void 0))}if(!t&&r&&Ny(r))return{token:r.token};let h,c=!1;if(IR()){i.exchangeTokenPromise||(i.exchangeTokenPromise=AI(wL(e,yield SR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const p=yield i.exchangeTokenPromise;return yield DR(e,p),i.token=p,{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield Xi(e).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?S1.warn(p.message):S1.error(p),s=p}return r?s?h=Ny(r)?{token:r.token,internalError:s}:NL(s):(h={token:r.token},i.token=r,yield DR(e,r)):h=NL(s),c&&AL(e,h),h}),NR.apply(this,arguments)}function RR(n,t){const e=Xi(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function SL(n){const{app:t}=n,e=Xi(t);let i=e.tokenRefresher;i||(i=function vG(n){const{app:t}=n;return new tG((0,ne.Z)(function*(){let i;if(i=Xi(t).token?yield xI(n,!0):yield xI(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=Xi(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function AL(n,t){const e=Xi(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function Ny(n){return n.expireTimeMillis-Date.now()>0}function NL(n){return{token:mG(gG),error:n}}class yG{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Xi(this.app);for(const e of t)RR(this.app,e.next);return Promise.resolve()}}const LL="app-check-internal";!function kG(){(0,ns._registerComponent)(new ca.wA("app-check",n=>function bG(n,t){return new yG(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(LL).initialize()})),(0,ns._registerComponent)(new ca.wA(LL,n=>function wG(n){return{getToken:t=>xI(n,t),addTokenListener:t=>function MR(n,t,e,i){const{app:r}=n,s=Xi(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&Ny(s.token)){const h=s.token;Promise.resolve().then(()=>{e({token:h.token}),SL(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SL(n))}(n,"INTERNAL",t),removeTokenListener:t=>RR(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ns.registerVersion)("@firebase/app-check","0.7.0")}();class A1{constructor(){return(0,Tn.vb)("app-check")}}typeof window<"u"&&window;var RI=V(9260);const LR=new o.OlP("angularfire2.auth.use-emulator"),UR=new o.OlP("angularfire2.auth.settings"),BR=new o.OlP("angularfire2.auth.tenant-id"),VR=new o.OlP("angularfire2.auth.langugage-code"),jR=new o.OlP("angularfire2.auth.use-device-language"),HR=new o.OlP("angularfire.auth.persistence"),GR=(n,t,e,i,r,s,c,h)=>(0,Ki.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[v,w]of Object.entries(c))p.settings[v]=w;return h&&p.setPersistence(h),p},[e,i,r,s,c,h]);let Vm=(()=>{class n{constructor(e,i,r,s,c,h,p,v,w,S,N,O){const G=new di.x,J=mt(void 0).pipe((0,TI.Q)(c.outsideAngular),Ti(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,ht.U)(()=>(0,Ki.on)(e,s,i)),(0,ht.U)(te=>GR(te,s,h,v,w,S,p,N)),mL({bufferSize:1,refCount:!1}));if(uo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{J.pipe(sc()).subscribe();const De=J.pipe(Ti(He=>He.getRedirectResult().then(nt=>nt,()=>null)),Tn.iC,mL({bufferSize:1,refCount:!1})),Oe=J.pipe(Ti(He=>new Bn.y(nt=>({unsubscribe:s.runOutsideAngular(()=>He.onAuthStateChanged(at=>nt.next(at),at=>nt.error(at),()=>nt.complete()))})))),Be=J.pipe(Ti(He=>new Bn.y(nt=>({unsubscribe:s.runOutsideAngular(()=>He.onIdTokenChanged(at=>nt.next(at),at=>nt.error(at),()=>nt.complete()))}))));this.authState=De.pipe(_L(Oe),(0,pR.R)(c.outsideAngular),(0,TI.Q)(c.insideAngular)),this.user=De.pipe(_L(Be),(0,pR.R)(c.outsideAngular),(0,TI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ti(He=>He?(0,_n.D)(He.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Ti(He=>He?(0,_n.D)(He.getIdTokenResult()):mt(null))),this.credential=(0,CI.T)(De,G,this.authState.pipe(zn(He=>!He))).pipe((0,ht.U)(He=>He?.user?He:null),(0,pR.R)(c.outsideAngular),(0,TI.Q)(c.insideAngular))}return(0,Ki.pX)(this,J,s,{spy:{apply:(te,De,Oe)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&Oe.then(Be=>G.next(Be))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ki.Dh),o.LFG(Ki.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(LR,8),o.LFG(UR,8),o.LFG(BR,8),o.LFG(VR,8),o.LFG(jR,8),o.LFG(HR,8),o.LFG(A1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BG=(()=>{class n{constructor(){RI.Z.registerVersion("angularfire",Tn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Vm]}),n})();function BL(n,t){return function VG(n,t=If.z){return new Bn.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function $R(n,t){return BL(n,t).pipe((0,ht.U)(e=>({payload:e,type:"query"})))}function kI(n,t){return $R(n,t).pipe(su(void 0),Db(),(0,ht.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,h)=>{const p=r.find(w=>w.doc.ref.isEqual(c.ref)),v=e?.payload.docs.find(w=>w.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function VL(n,t,e){return kI(n,e).pipe(ou((i,r)=>function HG(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function GG(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return ZR(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return ZR(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return ZR(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Sf(),(0,ht.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function ZR(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function jL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HL{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=kI(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ht.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(su(void 0),Db(),zn(([i,r])=>r.length>0||!i),(0,ht.U)(([i,r])=>r),Tn.iC)}auditTrail(t){return this.stateChanges(t).pipe(ou((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=jL(t);return VL(this.query,e,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return $R(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Tn.iC)}get(t){return(0,_n.D)(this.query.get(t)).pipe(Tn.iC)}add(t){return this.ref.add(t)}doc(t){return new GL(this.ref.doc(t),this.afs)}}class GL{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=qL(i,e);return new HL(r,s,this.afs)}snapshotChanges(){return function jG(n,t){return BL(n,t).pipe(su(void 0),Db(),(0,ht.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,_n.D)(this.ref.get(t)).pipe(Tn.iC)}}class $G{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?kI(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),zn(e=>e.length>0),Tn.iC):kI(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(t){return this.stateChanges(t).pipe(ou((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=jL(t);return VL(this.query,e,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return $R(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Tn.iC)}get(t){return(0,_n.D)(this.query.get(t)).pipe(Tn.iC)}}const $L=new o.OlP("angularfire2.enableFirestorePersistence"),ZL=new o.OlP("angularfire2.firestore.persistenceSettings"),ZG=new o.OlP("angularfire2.firestore.settings"),qG=new o.OlP("angularfire2.firestore.use-emulator");function qL(n,t=(e=>e)){return{query:t(n),ref:n}}let zL=(()=>{class n{constructor(e,i,r,s,c,h,p,v,w,S,N,O,G,J,te,De,Oe){this.schedulers=p;const Be=(0,Ki.on)(e,h,i),He=w;S&&GR(Be,h,N,G,J,te,O,De),[this.firestore,this.persistenceEnabled$]=(0,Ki.cc)(`${Be.name}.firestore`,"AngularFirestore",Be.name,()=>{const nt=h.runOutsideAngular(()=>Be.firestore());if(s&&nt.settings(s),He&&nt.useEmulator(...He),r&&!uo(c)){const at=()=>{try{return(0,_n.D)(nt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Gt){return typeof console<"u"&&console.warn(Gt),mt(!1)}};return[nt,h.runOutsideAngular(at)]}return[nt,mt(!1)]},[s,He,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=qL(r,i),h=this.schedulers.ngZone.run(()=>s);return new HL(h,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new $G(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new GL(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ki.Dh),o.LFG(Ki.xv,8),o.LFG($L,8),o.LFG(ZG,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(ZL,8),o.LFG(qG,8),o.LFG(Vm,8),o.LFG(LR,8),o.LFG(UR,8),o.LFG(BR,8),o.LFG(VR,8),o.LFG(jR,8),o.LFG(HR,8),o.LFG(A1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zG=(()=>{class n{constructor(){RI.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:$L,useValue:!0},{provide:ZL,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[zL]}),n})();var OI=V(5032);function PI(...n){const t=(0,zs.jO)(n);return(0,Wi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),h=!1;for(let p=0;p<r;p++)(0,yr.Xf)(n[p]).subscribe((0,xn.x)(i,v=>{s[p]=v,!h&&!c[p]&&(c[p]=!0,(h=c.every(ru.y))&&(c=null))},OI.Z));e.subscribe((0,xn.x)(i,p=>{if(h){const v=[p,...s];i.next(t?t(...v):v)}}))})}const WL="@firebase/database";let qR="";function YL(n){qR=n}class KG{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,B.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,B.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class YG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,B.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const JL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new KG(t)}}catch{}return new YG},jm=JL("localStorage"),zR=JL("sessionStorage"),xy=new Ja.Yd("@firebase/database"),QL=function(){let n=1;return function(){return n++}}(),XL=function(n){const t=(0,B.dS)(n),e=new B.gQ;e.update(t);const i=e.digest();return B.US.encodeByteArray(i)},N1=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=N1.apply(null,i):t+="object"==typeof i?(0,B.Wl)(i):i,t+=" "}return t};let Hm=null,eU=!0;const tU=function(n,t){(0,B.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(xy.logLevel=Ja.in.VERBOSE,Hm=xy.log.bind(xy),t&&zR.set("logging_enabled",!0)):"function"==typeof n?Hm=n:(Hm=null,zR.remove("logging_enabled"))},os=function(...n){if(!0===eU&&(eU=!1,null===Hm&&!0===zR.get("logging_enabled")&&tU(!0)),Hm){const t=N1.apply(null,n);Hm(t)}},x1=function(n){return function(...t){os(n,...t)}},WR=function(...n){const t="FIREBASE INTERNAL ERROR: "+N1(...n);xy.error(t)},Du=function(...n){const t=`FIREBASE FATAL ERROR: ${N1(...n)}`;throw xy.error(t),new Error(t)},Bs=function(...n){const t="FIREBASE WARNING: "+N1(...n);xy.warn(t)},FI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fp="[MIN_NAME]",sh="[MAX_NAME]",Gm=function(n,t){if(n===t)return 0;if(n===fp||t===sh)return-1;if(t===fp||n===sh)return 1;{const e=rU(n),i=rU(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},XG=function(n,t){return n===t?0:n<t?-1:1},M1=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Wl)(t))},KR=function(n){if("object"!=typeof n||null===n)return(0,B.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,B.Wl)(t[i]),e+=":",e+=KR(n[t[i]]);return e+="}",e},nU=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function as(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const iU=function(n){(0,B.hu)(!FI(n),"Invalid JSON number");const i=1023;let r,s,c,h,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(p=52;p;p-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)v.push(s%2?1:0),s=Math.floor(s/2);v.push(r?1:0),v.reverse();const w=v.join("");let S="";for(p=0;p<64;p+=8){let N=parseInt(w.substr(p,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},i$=new RegExp("^-?(0*)\\d{1,10}$"),rU=function(n){if(i$.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},My=function(n){try{n()}catch(t){setTimeout(()=>{throw Bs("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},R1=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class a${constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class l${constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(os("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bs(t)}}let k1=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const cU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hU="websocket",fU="long_polling";class JR{constructor(t,e,i,r,s=!1,c="",h=!1,p=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jm.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&jm.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function pU(n,t,e){let i;if((0,B.hu)("string"==typeof t,"typeof type must == string"),(0,B.hu)("object"==typeof e,"typeof params must == object"),t===hU)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==fU)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function c$(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return as(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class u${constructor(){this.counters_={}}incrementCounter(t,e=1){(0,B.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,B.p$)(this.counters_)}}const QR={},XR={};function ek(n){const t=n.toString();return QR[t]||(QR[t]=new u$),QR[t]}class h${constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&My(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pp{constructor(t,e,i,r,s,c,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x1(t),this.stats_=ek(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),pU(e,fU,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new h$(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tk((...s)=>{const[c,h,p,v,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&cU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pp.forceAllow_=!0}static forceDisallow(){pp.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!pp.forceAllow_&&(pp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,B.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,B.h$)(e),r=nU(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,B.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class tk{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=QL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=tk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){os("frame writing exception"),h.stack&&os(h.stack),os(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||os("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,B.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{os("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let UI=null;typeof MozWebSocket<"u"?UI=MozWebSocket:typeof WebSocket<"u"&&(UI=WebSocket);let Ry=(()=>{class n{constructor(e,i,r,s,c,h,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x1(this.connId),this.stats_=ek(i),this.connURL=n.connectionURL_(i,h,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const h={v:"5"};return!(0,B.Yr)()&&typeof location<"u"&&location.hostname&&cU.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),c&&(h.p=c),pU(e,hU,h)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jm.set("previous_websocket_failure",!0);try{let r;if((0,B.Yr)()){r={headers:{"User-Agent":`Firebase/5/${qR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new UI(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==UI&&!n.forceDisallow_}static previouslyFailed(){return jm.isInMemoryStorage||!0===jm.get("previous_websocket_failure")}markConnectionHealthy(){jm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,B.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,B.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=nU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),wU=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[pp,Ry]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Ry&&Ry.isAvailable();let r=i&&!Ry.previouslyFailed();if(e.webSocketOnly&&(i||Bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ry];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class AU{constructor(t,e,i,r,s,c,h,p,v,w){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=v,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x1("c:"+this.id+":"),this.transportManager_=new wU(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=R1(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=M1("t",t),i=M1("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=M1("t",t),i=M1("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=M1("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?WR("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WR("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),R1(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):R1(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class NU{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class xU{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,B.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,B.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class BI extends xU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new BI}getInitialEvent(t){return(0,B.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function kn(){return new Vn("")}function cn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gp(n){return n.pieces_.length-n.pieceNum_}function ri(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Vn(n.pieces_,t)}function ik(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function O1(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function kU(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Vn(t,0)}function Fi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Vn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Vn(e,0)}function un(n){return n.pieceNum_>=n.pieces_.length}function so(n,t){const e=cn(n),i=cn(t);if(null===e)return t;if(e===i)return so(ri(n),ri(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function O$(n,t){const e=O1(n,0),i=O1(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Gm(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function rk(n,t){if(gp(n)!==gp(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function al(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(gp(n)>gp(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class P${constructor(t,e){this.errorPrefix_=e,this.parts_=O1(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,B.ug)(this.parts_[i]);OU(this)}}function OU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$m(n))}function $m(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class sk extends xU{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new sk}getInitialEvent(t){return(0,B.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const P1=1e3;let jI,Zm=(()=>{class n extends NU{constructor(e,i,r,s,c,h,p,v){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=x1("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=P1,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sk.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&BI.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,B.Wl)(c)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new B.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:h=>{const p=h.d;"ok"===h.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const v=p.d,w=p.s;n.warnOnListenWarnings_(v,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(r,s),e.onComplete&&e.onComplete(w,v))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,B.r3)(e,"w")){const r=(0,B.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,B.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,B.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,h=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const h={p:i,d:r};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,B.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):WR("Unrecognized action received from server: "+(0,B.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=P1,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=P1,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=P1),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,ne.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let p=!1,v=null;const w=function(){v?v.close():(p=!0,s())};e.realtime_={close:w,sendRequest:function(O){(0,B.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(O)}};const N=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[O,G]=yield Promise.all([e.authTokenProvider_.getToken(N),e.appCheckTokenProvider_.getToken(N)]);p?os("getToken() completed but was canceled"):(os("getToken() completed. Creating connection."),e.authToken_=O&&O.accessToken,e.appCheckToken_=G&&G.token,v=new AU(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,J=>{Bs(J+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(O){e.log_("Failed to get token: "+O),p||(e.repoInfo_.nodeAdmin&&Bs(O),w())}}})()}interrupt(e){os("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){os("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=P1,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>KR(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Vn(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){os("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){os("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,B.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+qR.replace(/\./g,"-")]=1,(0,B.uI)()?e["framework.cordova"]=1:(0,B.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=BI.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class pn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new pn(t,e)}}class VI{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new pn(fp,t),r=new pn(fp,e);return 0!==this.compare(i,r)}minPost(){return pn.MIN}}class LU extends VI{static get __EMPTY_NODE(){return jI}static set __EMPTY_NODE(t){jI=t}compare(t,e){return Gm(t.name,e.name)}isDefinedOn(t){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return pn.MIN}maxPost(){return new pn(sh,jI)}makePost(t,e){return(0,B.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new pn(t,jI)}toString(){return".key"}}const Eu=new LU;class HI{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let ak,Cc=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Ro.EMPTY_NODE,this.right=c??Ro.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ro.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Ro.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ro{constructor(t,e=Ro.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ro(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Cc.BLACK,null,null))}remove(t){return new Ro(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Cc.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new HI(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new HI(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new HI(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new HI(this.root_,null,this.comparator_,!0,t)}}function G$(n,t){return Gm(n.name,t.name)}function ok(n,t){return Gm(n,t)}Ro.EMPTY_NODE=new class H${copy(t,e,i,r,s){return this}insert(t,e,i){return new Cc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const UU=function(n){return"number"==typeof n?"number:"+iU(n):"string:"+n},BU=function(n){if(n.isLeafNode()){const t=n.val();(0,B.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,B.r3)(t,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===ak||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===ak||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let VU,jU,HU,ky=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),BU(this.priorityNode_)}static set __childrenNodeConstructor(e){VU=e}static get __childrenNodeConstructor(){return VU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return un(e)?this:".priority"===cn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=cn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,B.hu)(".priority"!==r||1===gp(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ri(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+UU(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?iU(this.value_):this.value_,this.lazyHash_=XL(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,B.hu)(s>=0,"Unknown leaf type: "+i),(0,B.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const pi=new class z$ extends VI{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Gm(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return pn.MIN}maxPost(){return new pn(sh,new ky("[PRIORITY-POST]",HU))}makePost(t,e){const i=jU(t);return new pn(e,new ky("[PRIORITY-POST]",i))}toString(){return".priority"}},W$=Math.log(2);class K${constructor(t){this.count=parseInt(Math.log(t+1)/W$,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const GI=function(n,t,e,i){n.sort(t);const r=function(p,v){const w=v-p;let S,N;if(0===w)return null;if(1===w)return S=n[p],N=e?e(S):S,new Cc(N,S.node,Cc.BLACK,null,null);{const O=parseInt(w/2,10)+p,G=r(p,O),J=r(O+1,v);return S=n[O],N=e?e(S):S,new Cc(N,S.node,Cc.BLACK,G,J)}},h=function(p){let v=null,w=null,S=n.length;const N=function(G,J){const te=S-G,De=S;S-=G;const Oe=r(te+1,De),Be=n[te],He=e?e(Be):Be;O(new Cc(He,Be.node,J,null,Oe))},O=function(G){v?(v.left=G,v=G):(w=G,v=G)};for(let G=0;G<p.count;++G){const J=p.nextBitIsOne(),te=Math.pow(2,p.count-(G+1));J?N(te,Cc.BLACK):(N(te,Cc.BLACK),N(te,Cc.RED))}return w}(new K$(n.length));return new Ro(i||t,h)};let lk;const Oy={};class oh{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,B.hu)(Oy&&pi,"ChildrenNode.ts has not been loaded"),lk=lk||new oh({".priority":Oy},{".priority":pi}),lk}get(t){const e=(0,B.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ro?e:null}hasIndex(t){return(0,B.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,B.hu)(t!==Eu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(pn.Wrap);let h,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();h=r?GI(i,t.getCompare()):Oy;const p=t.toString(),v=Object.assign({},this.indexSet_);v[p]=t;const w=Object.assign({},this.indexes_);return w[p]=h,new oh(w,v)}addToIndexes(t,e){const i=(0,B.UI)(this.indexes_,(r,s)=>{const c=(0,B.DV)(this.indexSet_,s);if((0,B.hu)(c,"Missing index implementation for "+s),r===Oy){if(c.isDefinedOn(t.node)){const h=[],p=e.getIterator(pn.Wrap);let v=p.getNext();for(;v;)v.name!==t.name&&h.push(v),v=p.getNext();return h.push(t),GI(h,c.getCompare())}return Oy}{const h=e.get(t.name);let p=r;return h&&(p=p.remove(new pn(t.name,h))),p.insert(t,t.node)}});return new oh(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,B.UI)(this.indexes_,r=>{if(r===Oy)return r;{const s=e.get(t.name);return s?r.remove(new pn(t.name,s)):r}});return new oh(i,this.indexSet_)}}let F1,Kt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&BU(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return F1||(F1=new n(new Ro(ok),null,oh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||F1}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?F1:i}}getChild(e){const i=cn(e);return null===i?this:this.getImmediateChild(i).getChild(ri(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,B.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new pn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?F1:this.priorityNode_;return new n(s,h,c)}}updateChild(e,i){const r=cn(e);if(null===r)return i;{(0,B.hu)(".priority"!==cn(e)||1===gp(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ri(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(pi,(h,p)=>{i[h]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!e&&c&&s<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+UU(this.getPriority().val())+":"),this.forEachChild(pi,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":XL(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new pn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new pn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new pn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,pn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,pn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===L1?-1:0}withIndex(e){if(e===Eu||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Eu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(pi),s=i.getIterator(pi);let c=r.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=r.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(e){return e===Eu?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const L1=new class Y$ extends Kt{constructor(){super(new Ro(ok),Kt.EMPTY_NODE,oh.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Kt.EMPTY_NODE}isEmpty(){return!1}};function $i(n,t=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,B.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ky(n,$i(t));if(n instanceof Array){let e=Kt.EMPTY_NODE;return as(n,(i,r)=>{if((0,B.r3)(n,i)&&"."!==i.substring(0,1)){const s=$i(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority($i(t))}{const e=[];let i=!1;if(as(n,(c,h)=>{if("."!==c.substring(0,1)){const p=$i(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new pn(c,p)))}}),0===e.length)return Kt.EMPTY_NODE;const s=GI(e,G$,c=>c.name,ok);if(i){const c=GI(e,pi.getCompare());return new Kt(s,$i(t),new oh({".priority":c},{".priority":pi}))}return new Kt(s,$i(t),oh.Default)}}Object.defineProperties(pn,{MIN:{value:new pn(fp,Kt.EMPTY_NODE)},MAX:{value:new pn(sh,L1)}}),LU.__EMPTY_NODE=Kt.EMPTY_NODE,ky.__childrenNodeConstructor=Kt,function $$(n){ak=n}(L1),function q$(n){HU=n}(L1),function Z$(n){jU=n}($i);class ck extends VI{constructor(t){super(),this.indexPath_=t,(0,B.hu)(!un(t)&&".priority"!==cn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Gm(t.name,e.name):s}makePost(t,e){const i=$i(t),r=Kt.EMPTY_NODE.updateChild(this.indexPath_,i);return new pn(e,r)}maxPost(){const t=Kt.EMPTY_NODE.updateChild(this.indexPath_,L1);return new pn(sh,t)}toString(){return O1(this.indexPath_,0).join("/")}}const uk=new class Q$ extends VI{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Gm(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return pn.MIN}maxPost(){return pn.MAX}makePost(t,e){const i=$i(t);return new pn(e,i)}toString(){return".value"}};function GU(n){return{type:"value",snapshotNode:n}}function Py(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function U1(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function B1(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class dk{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,B.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(U1(e,h)):(0,B.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Py(e,i)):c.trackChildChange(B1(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(pi,(r,s)=>{e.hasChild(r)||i.trackChildChange(U1(r,s))}),e.isLeafNode()||e.forEachChild(pi,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(B1(r,s,c))}else i.trackChildChange(Py(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Kt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class V1{constructor(t){this.indexedFilter_=new dk(t.getIndex()),this.index_=t.getIndex(),this.startPost_=V1.getStartPost_(t),this.endPost_=V1.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,c){return this.matches(new pn(e,i))||(i=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Kt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Kt.EMPTY_NODE);const s=this;return e.forEachChild(pi,(c,h)=>{s.matches(new pn(c,h))||(r=r.updateImmediateChild(c,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class e5{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new V1(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new pn(e,i))||(i=Kt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Kt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;r=r.updateImmediateChild(h.name,h.node),c++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(Kt.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let c=0;for(;s.hasNext();){const h=s.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:r=r.updateImmediateChild(h.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const S=this.index_.getCompare();c=(N,O)=>S(O,N)}else c=this.index_.getCompare();const h=t;(0,B.hu)(h.numChildren()===this.limit_,"");const p=new pn(e,i),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(h.hasChild(e)){const S=h.getImmediateChild(e);let N=r.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===e||h.hasChild(N.name));)N=r.getChildAfterChild(this.index_,N,this.reverse_);const O=null==N?1:c(N,p);if(w&&!i.isEmpty()&&O>=0)return s?.trackChildChange(B1(e,i,S)),h.updateImmediateChild(e,i);{s?.trackChildChange(U1(e,S));const J=h.updateImmediateChild(e,Kt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(s?.trackChildChange(Py(N.name,N.node)),J.updateImmediateChild(N.name,N.node)):J}}return i.isEmpty()?t:w&&c(v,p)>=0?(null!=s&&(s.trackChildChange(U1(v.name,v.node)),s.trackChildChange(Py(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(v.name,Kt.EMPTY_NODE)):t}}class $I{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pi}copy(){const t=new $I;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function hk(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function fk(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function ZI(n,t){const e=n.copy();return e.index_=t,e}function $U(n){const t={};if(n.isDefault())return t;let e;if(n.index_===pi?e="$priority":n.index_===uk?e="$value":n.index_===Eu?e="$key":((0,B.hu)(n.index_ instanceof ck,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,B.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,B.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,B.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,B.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,B.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function ZU(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==pi&&(t.i=n.index_.toString()),t}class qI extends NU{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=x1("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,B.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=qI.getListenId_(t,i),h={};this.listens_[c]=h;const p=$U(t._queryParams);this.restRequest_(s+".json",p,(v,w)=>{let S=w;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(s,S,!1,i),(0,B.DV)(this.listens_,c)===h){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",r(N,null)}})}unlisten(t,e){const i=qI.getListenId_(t,e);delete this.listens_[i]}get(t){const e=$U(t._queryParams),i=t._path.toString(),r=new B.BH;return this.restRequest_(i+".json",e,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,B.xO)(e);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,B.cI)(h.responseText)}catch{Bs("Failed to parse JSON response for "+c+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&Bs("Got unsuccessful REST response for "+c+" Status: "+h.status),i(h.status);i=null}},h.open("GET",c,!0),h.send()})}}class o5{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function zI(){return{value:null,children:new Map}}function Fy(n,t,e){if(un(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=cn(t);n.children.has(i)||n.children.set(i,zI()),Fy(n.children.get(i),t=ri(t),e)}}function pk(n,t){if(un(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(pi,(i,r)=>{Fy(n,new Vn(i),r)}),pk(n,t)}}if(n.children.size>0){const e=cn(t);return t=ri(t),n.children.has(e)&&pk(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function gk(n,t,e){null!==n.value?e(t,n.value):function a5(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{gk(r,new Vn(t.toString()+"/"+i),e)})}class l5{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&as(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class d5{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new l5(t);const i=1e4+2e4*Math.random();R1(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;as(t,(r,s)=>{s>0&&(0,B.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),R1(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ll=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ll||(ll={})),ll))();function vk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class WI{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=ll.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(un(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Vn(t));return new WI(kn(),e,this.revert)}}return(0,B.hu)(cn(this.path)===t,"operationForChild called for unrelated child."),new WI(ri(this.path),this.affectedTree,this.revert)}}class j1{constructor(t,e){this.source=t,this.path=e,this.type=ll.LISTEN_COMPLETE}operationForChild(t){return un(this.path)?new j1(this.source,kn()):new j1(this.source,ri(this.path))}}class qm{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=ll.OVERWRITE}operationForChild(t){return un(this.path)?new qm(this.source,kn(),this.snap.getImmediateChild(t)):new qm(this.source,ri(this.path),this.snap)}}class Ly{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=ll.MERGE}operationForChild(t){if(un(this.path)){const e=this.children.subtree(new Vn(t));return e.isEmpty()?null:e.value?new qm(this.source,kn(),e.value):new Ly(this.source,kn(),e)}return(0,B.hu)(cn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ly(this.source,ri(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mp{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(un(t))return this.isFullyInitialized()&&!this.filtered_;const e=cn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class h5{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function H1(n,t,e,i,r,s){const c=i.filter(h=>h.type===e);c.sort((h,p)=>function g5(n,t,e){if(null==t.childName||null==e.childName)throw(0,B.g5)("Should only compare child_ events.");const i=new pn(t.childName,t.snapshotNode),r=new pn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),c.forEach(h=>{const p=function p5(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,s);r.forEach(v=>{v.respondsTo(h.type)&&t.push(v.createEvent(p,n.query_))})})}function KI(n,t){return{eventCache:n,serverCache:t}}function G1(n,t,e,i){return KI(new mp(t,e,i),n.serverCache)}function zU(n,t,e,i){return KI(n.eventCache,new mp(t,e,i))}function YI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yk;class gi{constructor(t,e=(()=>(yk||(yk=new Ro(XG)),yk))()){this.value=t,this.children=e}static fromObject(t){let e=new gi(null);return as(t,(i,r)=>{e=e.set(new Vn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:kn(),value:this.value};if(un(t))return null;{const i=cn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(ri(t),e);return null!=s?{path:Fi(new Vn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(un(t))return this;{const e=cn(t),i=this.children.get(e);return null!==i?i.subtree(ri(t)):new gi(null)}}set(t,e){if(un(t))return new gi(e,this.children);{const i=cn(t),s=(this.children.get(i)||new gi(null)).set(ri(t),e),c=this.children.insert(i,s);return new gi(this.value,c)}}remove(t){if(un(t))return this.children.isEmpty()?new gi(null):new gi(null,this.children);{const e=cn(t),i=this.children.get(e);if(i){const r=i.remove(ri(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new gi(null):new gi(this.value,s)}return this}}get(t){if(un(t))return this.value;{const e=cn(t),i=this.children.get(e);return i?i.get(ri(t)):null}}setTree(t,e){if(un(t))return e;{const i=cn(t),s=(this.children.get(i)||new gi(null)).setTree(ri(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new gi(this.value,c)}}fold(t){return this.fold_(kn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Fi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,kn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(un(t))return null;{const s=cn(t),c=this.children.get(s);return c?c.findOnPath_(ri(t),Fi(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,kn(),e)}foreachOnPath_(t,e,i){if(un(t))return this;{this.value&&i(e,this.value);const r=cn(t),s=this.children.get(r);return s?s.foreachOnPath_(ri(t),Fi(e,r),i):new gi(null)}}foreach(t){this.foreach_(kn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Fi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Tc{constructor(t){this.writeTree_=t}static empty(){return new Tc(new gi(null))}}function $1(n,t,e){if(un(t))return new Tc(new gi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=so(r,t);return s=s.updateChild(c,e),new Tc(n.writeTree_.set(r,s))}{const r=new gi(e),s=n.writeTree_.setTree(t,r);return new Tc(s)}}}function bk(n,t,e){let i=n;return as(e,(r,s)=>{i=$1(i,Fi(t,r),s)}),i}function WU(n,t){if(un(t))return Tc.empty();{const e=n.writeTree_.setTree(t,new gi(null));return new Tc(e)}}function wk(n,t){return null!=Wm(n,t)}function Wm(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(so(e.path,t)):null}function KU(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(pi,(i,r)=>{t.push(new pn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new pn(i,r.value))}),t}function _p(n,t){if(un(t))return n;{const e=Wm(n,t);return new Tc(null!=e?new gi(e):n.writeTree_.subtree(t))}}function Ck(n){return n.writeTree_.isEmpty()}function Uy(n,t){return YU(kn(),n.writeTree_,t)}function YU(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,B.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=YU(Fi(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Fi(n,".priority"),i)),e}}function JI(n,t){return tB(t,n)}function w5(n,t){if(n.snap)return al(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&al(Fi(n.path,e),t))return!0;return!1}function T5(n){return n.visible}function JU(n,t,e){let i=Tc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let h;if(s.snap)al(e,c)?(h=so(e,c),i=$1(i,h,s.snap)):al(c,e)&&(h=so(c,e),i=$1(i,kn(),s.snap.getChild(h)));else{if(!s.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(al(e,c))h=so(e,c),i=bk(i,h,s.children);else if(al(c,e))if(h=so(c,e),un(h))i=bk(i,kn(),s.children);else{const p=(0,B.DV)(s.children,cn(h));if(p){const v=p.getChild(ri(h));i=$1(i,kn(),v)}}}}}return i}function QU(n,t,e,i,r){if(i||r){const s=_p(n.visibleWrites,t);return!r&&Ck(s)?e:r||null!=e||wk(s,kn())?Uy(JU(n.allWrites,function(v){return(v.visible||r)&&(!i||!~i.indexOf(v.writeId))&&(al(v.path,t)||al(t,v.path))},t),e||Kt.EMPTY_NODE):null}{const s=Wm(n.visibleWrites,t);if(null!=s)return s;{const c=_p(n.visibleWrites,t);return Ck(c)?e:null!=e||wk(c,kn())?Uy(c,e||Kt.EMPTY_NODE):null}}}function QI(n,t,e,i){return QU(n.writeTree,n.treePath,t,e,i)}function Tk(n,t){return function D5(n,t,e){let i=Kt.EMPTY_NODE;const r=Wm(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(pi,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=_p(n.visibleWrites,t);return e.forEachChild(pi,(c,h)=>{const p=Uy(_p(s,new Vn(c)),h);i=i.updateImmediateChild(c,p)}),KU(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return KU(_p(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function XU(n,t,e,i){return function E5(n,t,e,i,r){(0,B.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Fi(t,e);if(wk(n.visibleWrites,s))return null;{const c=_p(n.visibleWrites,s);return Ck(c)?r.getChild(e):Uy(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function XI(n,t){return function S5(n,t){return Wm(n.visibleWrites,t)}(n.writeTree,Fi(n.treePath,t))}function Dk(n,t,e){return function I5(n,t,e,i){const r=Fi(t,e),s=Wm(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Uy(_p(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function eB(n,t){return tB(Fi(n.treePath,t),n.writeTree)}function tB(n,t){return{treePath:n,writeTree:t}}class M5{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,B.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,B1(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,U1(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Py(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,B.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,B1(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const nB=new class R5{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class Ek{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new mp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Dk(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zm(this.viewCache_),s=function x5(n,t,e,i,r,s){return function A5(n,t,e,i,r,s,c){let h;const p=_p(n.visibleWrites,t),v=Wm(p,kn());if(null!=v)h=v;else{if(null==e)return[];h=Uy(p,e)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const w=[],S=c.getCompare(),N=s?h.getReverseIteratorFrom(i,c):h.getIteratorFrom(i,c);let O=N.getNext();for(;O&&w.length<r;)0!==S(O,i)&&w.push(O),O=N.getNext();return w}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function iB(n,t,e,i,r,s){const c=t.eventCache;if(null!=XI(i,e))return t;{let h,p;if(un(e))if((0,B.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const v=zm(t),S=Tk(i,v instanceof Kt?v:Kt.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),S,s)}else{const v=QI(i,zm(t));h=n.filter.updateFullNode(t.eventCache.getNode(),v,s)}else{const v=cn(e);if(".priority"===v){(0,B.hu)(1===gp(e),"Can't have a priority with additional path components");const w=c.getNode();p=t.serverCache.getNode();const S=XU(i,e,w,p);h=null!=S?n.filter.updatePriority(w,S):c.getNode()}else{const w=ri(e);let S;if(c.isCompleteForChild(v)){p=t.serverCache.getNode();const N=XU(i,e,c.getNode(),p);S=null!=N?c.getNode().getImmediateChild(v).updateChild(w,N):c.getNode().getImmediateChild(v)}else S=Dk(i,v,t.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),v,S,w,r,s):c.getNode()}}return G1(t,h,c.isFullyInitialized()||un(e),n.filter.filtersNodes())}}function eS(n,t,e,i,r,s,c,h){const p=t.serverCache;let v;const w=c?n.filter:n.filter.getIndexedFilter();if(un(e))v=w.updateFullNode(p.getNode(),i,null);else if(w.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(e,i);v=w.updateFullNode(p.getNode(),O,null)}else{const O=cn(e);if(!p.isCompleteForPath(e)&&gp(e)>1)return t;const G=ri(e),te=p.getNode().getImmediateChild(O).updateChild(G,i);v=".priority"===O?w.updatePriority(p.getNode(),te):w.updateChild(p.getNode(),O,te,G,nB,null)}const S=zU(t,v,p.isFullyInitialized()||un(e),w.filtersNodes());return iB(n,S,e,r,new Ek(r,S,s),h)}function Ik(n,t,e,i,r,s,c){const h=t.eventCache;let p,v;const w=new Ek(r,t,s);if(un(e))v=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=G1(t,v,!0,n.filter.filtersNodes());else{const S=cn(e);if(".priority"===S)v=n.filter.updatePriority(t.eventCache.getNode(),i),p=G1(t,v,h.isFullyInitialized(),h.isFiltered());else{const N=ri(e),O=h.getNode().getImmediateChild(S);let G;if(un(N))G=i;else{const J=w.getCompleteChild(S);G=null!=J?".priority"===ik(N)&&J.getChild(kU(N)).isEmpty()?J:J.updateChild(N,i):Kt.EMPTY_NODE}p=O.equals(G)?t:G1(t,n.filter.updateChild(h.getNode(),S,G,N,w,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function rB(n,t){return n.eventCache.isCompleteForChild(t)}function sB(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function Sk(n,t,e,i,r,s,c,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let v,p=t;v=un(e)?i:new gi(null).setTree(e,i);const w=t.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(w.hasChild(S)){const G=sB(0,t.serverCache.getNode().getImmediateChild(S),N);p=eS(n,p,new Vn(S),G,r,s,c,h)}}),v.children.inorderTraversal((S,N)=>{const O=!t.serverCache.isCompleteForChild(S)&&null===N.value;if(!w.hasChild(S)&&!O){const J=sB(0,t.serverCache.getNode().getImmediateChild(S),N);p=eS(n,p,new Vn(S),J,r,s,c,h)}}),p}class j5{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new dk(i.getIndex()),s=function t5(n){return n.loadsAllData()?new dk(n.getIndex()):n.hasLimit()?new e5(n):new V1(n)}(i);this.processor_=function k5(n){return{filter:n}}(s);const c=e.serverCache,h=e.eventCache,p=r.updateFullNode(Kt.EMPTY_NODE,c.getNode(),null),v=s.updateFullNode(Kt.EMPTY_NODE,h.getNode(),null),w=new mp(p,c.isFullyInitialized(),r.filtersNodes()),S=new mp(v,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=KI(S,w),this.eventGenerator_=new h5(this.query_)}get query(){return this.query_}}function $5(n,t){const e=zm(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!un(t)&&!e.getImmediateChild(cn(t)).isEmpty())?e.getChild(t):null}function oB(n){return 0===n.eventRegistrations_.length}function aB(n,t,e){const i=[];if(e){(0,B.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function lB(n,t,e,i){t.type===ll.MERGE&&null!==t.source.queryId&&((0,B.hu)(zm(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(YI(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function P5(n,t,e,i,r){const s=new M5;let c,h;if(e.type===ll.OVERWRITE){const v=e;v.source.fromUser?c=Ik(n,t,v.path,v.snap,i,r,s):((0,B.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||t.serverCache.isFiltered()&&!un(v.path),c=eS(n,t,v.path,v.snap,i,r,h,s))}else if(e.type===ll.MERGE){const v=e;v.source.fromUser?c=function L5(n,t,e,i,r,s,c){let h=t;return i.foreach((p,v)=>{const w=Fi(e,p);rB(t,cn(w))&&(h=Ik(n,h,w,v,r,s,c))}),i.foreach((p,v)=>{const w=Fi(e,p);rB(t,cn(w))||(h=Ik(n,h,w,v,r,s,c))}),h}(n,t,v.path,v.children,i,r,s):((0,B.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||t.serverCache.isFiltered(),c=Sk(n,t,v.path,v.children,i,r,h,s))}else if(e.type===ll.ACK_USER_WRITE){const v=e;c=v.revert?function V5(n,t,e,i,r,s){let c;if(null!=XI(i,e))return t;{const h=new Ek(i,t,r),p=t.eventCache.getNode();let v;if(un(e)||".priority"===cn(e)){let w;if(t.serverCache.isFullyInitialized())w=QI(i,zm(t));else{const S=t.serverCache.getNode();(0,B.hu)(S instanceof Kt,"serverChildren would be complete if leaf node"),w=Tk(i,S)}v=n.filter.updateFullNode(p,w,s)}else{const w=cn(e);let S=Dk(i,w,t.serverCache);null==S&&t.serverCache.isCompleteForChild(w)&&(S=p.getImmediateChild(w)),v=null!=S?n.filter.updateChild(p,w,S,ri(e),h,s):t.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,Kt.EMPTY_NODE,ri(e),h,s):p,v.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=QI(i,zm(t)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=XI(i,kn()),G1(t,v,c,n.filter.filtersNodes())}}(n,t,v.path,i,r,s):function U5(n,t,e,i,r,s,c){if(null!=XI(r,e))return t;const h=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(un(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return eS(n,t,e,p.getNode().getChild(e),r,s,h,c);if(un(e)){let v=new gi(null);return p.getNode().forEachChild(Eu,(w,S)=>{v=v.set(new Vn(w),S)}),Sk(n,t,e,v,r,s,h,c)}return t}{let v=new gi(null);return i.foreach((w,S)=>{const N=Fi(e,w);p.isCompleteForPath(N)&&(v=v.set(w,p.getNode().getChild(N)))}),Sk(n,t,e,v,r,s,h,c)}}(n,t,v.path,v.affectedTree,i,r,s)}else{if(e.type!==ll.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+e.type);c=function B5(n,t,e,i,r){const s=t.serverCache;return iB(n,zU(t,s.getNode(),s.isFullyInitialized()||un(e),s.isFiltered()),e,i,nB,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function F5(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=YI(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(GU(YI(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function O5(n,t){(0,B.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,B.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,cB(n,s.changes,s.viewCache.eventCache.getNode(),null)}function cB(n,t,e,i){return function f5(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function X$(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),H1(n,r,"child_removed",t,i,e),H1(n,r,"child_added",t,i,e),H1(n,r,"child_moved",s,i,e),H1(n,r,"child_changed",t,i,e),H1(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let tS,iS;class uB{constructor(){this.views=new Map}}function Ak(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,B.hu)(null!=s,"SyncTree gave us an op for an invalid query."),lB(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(lB(c,t,e,i));return s}}function dB(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let h=QI(e,r?i:null),p=!1;h?p=!0:i instanceof Kt?(h=Tk(e,i),p=!1):(h=Kt.EMPTY_NODE,p=!1);const v=KI(new mp(h,p,!1),new mp(i,r,!1));return new j5(t,v)}return c}function hB(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function vp(n,t){let e=null;for(const i of n.views.values())e=e||$5(i,t);return e}function fB(n,t){return t._queryParams.loadsAllData()?nS(n):n.views.get(t._queryIdentifier)}function pB(n,t){return null!=fB(n,t)}function yp(n){return null!=nS(n)}function nS(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let e8=1;class gB{constructor(t){this.listenProvider_=t,this.syncPointTree_=new gi(null),this.pendingWriteTree_=function N5(){return{visibleWrites:Tc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Nk(n,t,e,i,r){return function _5(n,t,e,i,r){(0,B.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=$1(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?By(n,new qm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function bp(n,t,e=!1){const i=function y5(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function b5(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,B.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=e&&w5(h,i.path)?r=!1:al(i.path,h.path)&&(s=!0)),c--}return!!r&&(s?(function C5(n){n.visibleWrites=JU(n.allWrites,T5,kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=WU(n.visibleWrites,i.path):as(i.children,p=>{n.visibleWrites=WU(n.visibleWrites,Fi(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new gi(null);return null!=i.snap?s=s.set(kn(),!0):as(i.children,c=>{s=s.set(new Vn(c),!0)}),By(n,new WI(i.path,s,e))}return[]}function Z1(n,t,e){return By(n,new qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function rS(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let h=[];if(c&&("default"===t._queryIdentifier||pB(c,t))){const p=function J5(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const h=yp(n);if("default"===r)for(const[p,v]of n.views.entries())c=c.concat(aB(v,e,i)),oB(v)&&(n.views.delete(p),v.query._queryParams.loadsAllData()||s.push(v.query));else{const p=n.views.get(r);p&&(c=c.concat(aB(p,e,i)),oB(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!yp(n)&&s.push(new(function W5(){return(0,B.hu)(tS,"Reference.ts has not been loaded"),tS}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function K5(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const v=p.removed;if(h=p.events,!r){const w=-1!==v.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(s,(N,O)=>yp(O));if(w&&!S){const N=n.syncPointTree_.subtree(s);if(!N.isEmpty()){const O=function a8(n){return n.fold((t,e,i)=>{if(e&&yp(e))return[nS(e)];{let r=[];return e&&(r=hB(e)),as(i,(s,c)=>{r=r.concat(c)}),r}})}(N);for(let G=0;G<O.length;++G){const J=O[G],te=J.query,De=yB(n,J);n.listenProvider_.startListening(z1(te),q1(n,te),De.hashFn,De.onComplete)}}}!S&&v.length>0&&!i&&(w?n.listenProvider_.stopListening(z1(t),null):v.forEach(N=>{const O=n.queryToTagMap.get(oS(N));n.listenProvider_.stopListening(z1(N),O)}))}!function l8(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=oS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,v)}return h}function mB(n,t,e,i){const r=Mk(n,i);if(null!=r){const s=Rk(r),c=s.path,h=s.queryId,p=so(c,t);return kk(n,c,new qm(vk(h),p,e))}return[]}function xk(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(N,O)=>{const G=so(N,r);s=s||vp(O,G),c=c||yp(O)});let p,h=n.syncPointTree_.get(r);h?(c=c||yp(h),s=s||vp(h,kn())):(h=new uB,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=s?p=!0:(p=!1,s=Kt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,G)=>{const J=vp(G,kn());J&&(s=s.updateImmediateChild(O,J))}));const v=pB(h,t);if(!v&&!t._queryParams.loadsAllData()){const N=oS(t);(0,B.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const O=function c8(){return e8++}();n.queryToTagMap.set(N,O),n.tagToQueryMap.set(O,N)}let S=function Y5(n,t,e,i,r,s){const c=dB(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function Z5(n,t){n.eventRegistrations_.push(t)}(c,e),function q5(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(pi,(s,c)=>{i.push(Py(s,c))}),e.isFullyInitialized()&&i.push(GU(e.getNode())),cB(n,i,e.getNode(),t)}(c,e)}(h,t,e,JI(n.pendingWriteTree_,r),s,p);if(!v&&!c&&!i){const N=fB(h,t);S=S.concat(function u8(n,t,e){const i=t._path,r=q1(n,t),s=yB(n,e),c=n.listenProvider_.startListening(z1(t),r,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,B.hu)(!yp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((v,w,S)=>{if(!un(v)&&w&&yp(w))return[nS(w).query];{let N=[];return w&&(N=N.concat(hB(w).map(O=>O.query))),as(S,(O,G)=>{N=N.concat(G)}),N}});for(let v=0;v<p.length;++v){const w=p[v];n.listenProvider_.stopListening(z1(w),q1(n,w))}}return c}(n,t,N))}return S}function sS(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,h)=>{const v=vp(h,so(c,t));if(v)return v});return QU(r,t,s,e,!0)}function By(n,t){return _B(t,n.syncPointTree_,null,JI(n.pendingWriteTree_,kn()))}function _B(n,t,e,i){if(un(n.path))return vB(n,t,e,i);{const r=t.get(kn());null==e&&null!=r&&(e=vp(r,kn()));let s=[];const c=cn(n.path),h=n.operationForChild(c),p=t.children.get(c);if(p&&h){const v=e?e.getImmediateChild(c):null,w=eB(i,c);s=s.concat(_B(h,p,v,w))}return r&&(s=s.concat(Ak(r,n,i,e))),s}}function vB(n,t,e,i){const r=t.get(kn());null==e&&null!=r&&(e=vp(r,kn()));let s=[];return t.children.inorderTraversal((c,h)=>{const p=e?e.getImmediateChild(c):null,v=eB(i,c),w=n.operationForChild(c);w&&(s=s.concat(vB(w,h,p,v)))}),r&&(s=s.concat(Ak(r,n,i,e))),s}function yB(n,t){const e=t.query,i=q1(n,e);return{hashFn:()=>(function H5(n){return n.viewCache_.serverCache.getNode()}(t)||Kt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function r8(n,t,e){const i=Mk(n,e);if(i){const r=Rk(i),s=r.path,c=r.queryId,h=so(s,t);return kk(n,s,new j1(vk(c),h))}return[]}(n,e._path,i):function i8(n,t){return By(n,new j1({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function n$(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return rS(n,e,null,s)}}}}function q1(n,t){const e=oS(t);return n.queryToTagMap.get(e)}function oS(n){return n._path.toString()+"$"+n._queryIdentifier}function Mk(n,t){return n.tagToQueryMap.get(t)}function Rk(n){const t=n.indexOf("$");return(0,B.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Vn(n.substr(0,t))}}function kk(n,t,e){const i=n.syncPointTree_.get(t);return(0,B.hu)(i,"Missing sync point for query tag that we're tracking"),Ak(i,e,JI(n.pendingWriteTree_,t),null)}function z1(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function X5(){return(0,B.hu)(iS,"Reference.ts has not been loaded"),iS}())(n._repo,n._path):n}class Ok{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Ok(e)}node(){return this.node_}}class Pk{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Fi(this.path_,t);return new Pk(this.syncTree_,e)}node(){return sS(this.syncTree_,this.path_)}}const bB=function(n,t,e){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?h8(n[".sv"],t,e):"object"==typeof n[".sv"]?f8(n[".sv"],t):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},h8=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,B.hu)(!1,"Unexpected server value: "+n)},f8=function(n,t,e){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,B.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,B.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},wB=function(n,t,e,i){return Lk(t,new Pk(e,n),i)},Fk=function(n,t,e){return Lk(n,new Ok(t),e)};function Lk(n,t,e){const i=n.getPriority().val(),r=bB(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,h=bB(c.getValue(),t,e);return h!==c.getValue()||r!==c.getPriority().val()?new ky(h,$i(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new ky(r))),c.forEachChild(pi,(h,p)=>{const v=Lk(p,t.getImmediateChild(h),e);v!==p&&(s=s.updateImmediateChild(h,v))}),s}}class Uk{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function aS(n,t){let e=t instanceof Vn?t:new Vn(t),i=n,r=cn(e);for(;null!==r;){const s=(0,B.DV)(i.node.children,r)||{children:{},childCount:0};i=new Uk(r,i,s),e=ri(e),r=cn(e)}return i}function Km(n){return n.node.value}function Bk(n,t){n.node.value=t,Vk(n)}function CB(n){return n.node.childCount>0}function lS(n,t){as(n.node.children,(e,i)=>{t(new Uk(e,n,i))})}function TB(n,t,e,i){e&&!i&&t(n),lS(n,r=>{TB(r,t,!0,i)}),e&&i&&t(n)}function W1(n){return new Vn(null===n.parent?n.name:W1(n.parent)+"/"+n.name)}function Vk(n){null!==n.parent&&function m8(n,t,e){const i=function p8(n){return void 0===Km(n)&&!CB(n)}(e),r=(0,B.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,Vk(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,Vk(n))}(n.parent,n.name,n)}const _8=/[\[\].#$\/\u0000-\u001F\u007F]/,v8=/[\[\].#$\u0000-\u001F\u007F]/,jk=10485760,cS=function(n){return"string"==typeof n&&0!==n.length&&!_8.test(n)},DB=function(n){return"string"==typeof n&&0!==n.length&&!v8.test(n)},K1=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!FI(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},Iu=function(n,t,e,i){i&&void 0===t||Y1((0,B.gK)(n,"value"),t,e)},Y1=function(n,t,e){const i=e instanceof Vn?new P$(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+$m(i));if("function"==typeof t)throw new Error(n+"contains a function "+$m(i)+" with contents = "+t.toString());if(FI(t))throw new Error(n+"contains "+t.toString()+" "+$m(i));if("string"==typeof t&&t.length>jk/3&&(0,B.ug)(t)>jk)throw new Error(n+"contains a string greater than "+jk+" utf8 bytes "+$m(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(as(t,(c,h)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!cS(c)))throw new Error(n+" contains an invalid key ("+c+") "+$m(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function F$(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,B.ug)(t),OU(n)})(i,c),Y1(n,h,i),function L$(n){const t=n.parts_.pop();n.byteLength_-=(0,B.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+$m(i)+" in addition to actual children.")}},EB=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,B.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];as(t,(c,h)=>{const p=new Vn(c);if(Y1(r,h,Fi(e,p)),".priority"===ik(p)&&!K1(h))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=O1(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!cS(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(O$);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&al(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},Hk=function(n,t,e){if(!e||void 0!==t){if(FI(t))throw new Error((0,B.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!K1(t))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},J1=function(n,t,e,i){if(!(i&&void 0===e||cS(e)))throw new Error((0,B.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Q1=function(n,t,e,i){if(!(i&&void 0===e||DB(e)))throw new Error((0,B.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cl=function(n,t){if(".info"===cn(t))throw new Error(n+" failed = Can't modify data under /.info/")},IB=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!cS(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DB(n)}(e))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class C8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uS(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!rk(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function SB(n,t,e){uS(n,e),AB(n,i=>rk(i,t))}function _a(n,t,e){uS(n,e),AB(n,i=>al(i,t)||al(t,i))}function AB(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(T8(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function T8(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Hm&&os("event: "+e.toString()),My(i)}}}const NB="repo_interrupt";class E8{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new C8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zI(),this.transactionQueueTree_=new Uk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xB(n){const e=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function X1(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:xB(n)})}function MB(n,t,e,i,r){n.dataUpdateCount++;const s=new Vn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,B.UI)(e,v=>$i(v));c=function s8(n,t,e,i){const r=Mk(n,i);if(r){const s=Rk(r),c=s.path,h=s.queryId,p=so(c,t),v=gi.fromObject(e);return kk(n,c,new Ly(vk(h),p,v))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=$i(e);c=mB(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,B.UI)(e,v=>$i(v));c=function n8(n,t,e){const i=gi.fromObject(e);return By(n,new Ly({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=$i(e);c=Z1(n.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=jy(n,s)),_a(n.eventQueue_,h,c)}function RB(n,t){Gk(n,"connected",t),!1===t&&function x8(n){Vy(n,"onDisconnectEvents");const t=X1(n),e=zI();gk(n.onDisconnect_,kn(),(r,s)=>{const c=wB(r,s,n.serverSyncTree_,t);Fy(e,r,c)});let i=[];gk(e,kn(),(r,s)=>{i=i.concat(Z1(n.serverSyncTree_,r,s));const c=zk(n,r);jy(n,c)}),n.onDisconnect_=zI(),_a(n.eventQueue_,kn(),i)}(n)}function Gk(n,t,e){const i=new Vn("/.info/"+t),r=$i(e);n.infoData_.updateSnapshot(i,r);const s=Z1(n.infoSyncTree_,i,r);_a(n.eventQueue_,i,s)}function dS(n){return n.nextWriteId_++}function $k(n,t,e,i,r){Vy(n,"set",{path:t.toString(),value:e,priority:i});const s=X1(n),c=$i(e,i),h=sS(n.serverSyncTree_,t),p=Fk(c,h,s),v=dS(n),w=Nk(n.serverSyncTree_,t,p,v,!0);uS(n.eventQueue_,w),n.server_.put(t.toString(),c.val(!0),(N,O)=>{const G="ok"===N;G||Bs("set at "+t+" failed: "+N);const J=bp(n.serverSyncTree_,v,!G);_a(n.eventQueue_,t,J),wp(0,r,N,O)});const S=zk(n,t);jy(n,S),_a(n.eventQueue_,S,[])}function M8(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&pk(n.onDisconnect_,t),wp(0,e,i,r)})}function kB(n,t,e,i){const r=$i(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&Fy(n.onDisconnect_,t,r),wp(0,i,s,c)})}function Zk(n,t,e){let i;i=".info"===cn(t._path)?rS(n.infoSyncTree_,t,e):rS(n.serverSyncTree_,t,e),SB(n.eventQueue_,t._path,i)}function OB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(NB)}function Vy(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),os(e,...t)}function wp(n,t,e,i){t&&My(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function qk(n,t,e){return sS(n.serverSyncTree_,t,e)||Kt.EMPTY_NODE}function hS(n,t=n.transactionQueueTree_){if(t||fS(n,t),Km(t)){const e=FB(n,t);(0,B.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function L8(n,t,e){const i=e.map(v=>v.currentWriteId),r=qk(n,t,i);let s=r;const c=r.hash();for(let v=0;v<e.length;v++){const w=e[v];(0,B.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const S=so(t,w.path);s=s.updateChild(S,w.currentOutputSnapshotRaw)}const h=s.val(!0),p=t;n.server_.put(p.toString(),h,v=>{Vy(n,"transaction put response",{path:p.toString(),status:v});let w=[];if("ok"===v){const S=[];for(let N=0;N<e.length;N++)e[N].status=2,w=w.concat(bp(n.serverSyncTree_,e[N].currentWriteId)),e[N].onComplete&&S.push(()=>e[N].onComplete(null,!0,e[N].currentOutputSnapshotResolved)),e[N].unwatcher();fS(n,aS(n.transactionQueueTree_,t)),hS(n,n.transactionQueueTree_),_a(n.eventQueue_,t,w);for(let N=0;N<S.length;N++)My(S[N])}else{if("datastale"===v)for(let S=0;S<e.length;S++)e[S].status=3===e[S].status?4:0;else{Bs("transaction at "+p.toString()+" failed: "+v);for(let S=0;S<e.length;S++)e[S].status=4,e[S].abortReason=v}jy(n,t)}},c)}(n,W1(t),e)}else CB(t)&&lS(t,e=>{hS(n,e)})}function jy(n,t){const e=PB(n,t),i=W1(e);return function U8(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const p=t[h],v=so(e,p.path);let S,w=!1;if((0,B.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,S=p.abortReason,r=r.concat(bp(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)w=!0,S="maxretry",r=r.concat(bp(n.serverSyncTree_,p.currentWriteId,!0));else{const N=qk(n,p.path,c);p.currentInputSnapshot=N;const O=t[h].update(N.val());if(void 0!==O){Y1("transaction failed: Data returned ",O,p.path);let G=$i(O);"object"==typeof O&&null!=O&&(0,B.r3)(O,".priority")||(G=G.updatePriority(N.getPriority()));const te=p.currentWriteId,De=X1(n),Oe=Fk(G,N,De);p.currentOutputSnapshotRaw=G,p.currentOutputSnapshotResolved=Oe,p.currentWriteId=dS(n),c.splice(c.indexOf(te),1),r=r.concat(Nk(n.serverSyncTree_,p.path,Oe,p.currentWriteId,p.applyLocally)),r=r.concat(bp(n.serverSyncTree_,te,!0))}else w=!0,S="nodata",r=r.concat(bp(n.serverSyncTree_,p.currentWriteId,!0))}_a(n.eventQueue_,e,r),r=[],w&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&i.push("nodata"===S?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(S),!1,null)))}fS(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)My(i[h]);hS(n,n.transactionQueueTree_)}(n,FB(n,e),i),i}function PB(n,t){let e,i=n.transactionQueueTree_;for(e=cn(t);null!==e&&void 0===Km(i);)i=aS(i,e),e=cn(t=ri(t));return i}function FB(n,t){const e=[];return LB(n,t,e),e.sort((i,r)=>i.order-r.order),e}function LB(n,t,e){const i=Km(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);lS(t,r=>{LB(n,r,e)})}function fS(n,t){const e=Km(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,Bk(t,e.length>0?e:void 0)}lS(t,i=>{fS(n,i)})}function zk(n,t){const e=W1(PB(n,t)),i=aS(n.transactionQueueTree_,t);return function g8(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{Wk(n,r)}),Wk(n,i),TB(i,r=>{Wk(n,r)}),e}function Wk(n,t){const e=Km(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,B.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,B.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(bp(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Bk(t,void 0):e.length=s+1,_a(n.eventQueue_,W1(t),r);for(let c=0;c<i.length;c++)My(i[c])}}const Kk=function(n,t){const e=j8(n),i=e.namespace;return"firebase.com"===e.domain&&Du(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Du("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new JR(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Vn(e.pathString)}},j8=function(n){let t="",e="",i="",r="",s="",c=!0,h="https",p=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let w=n.indexOf("/");-1===w&&(w=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),t=n.substring(0,Math.min(w,S)),w<S&&(r=function B8(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(w,S)));const N=function V8(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Bs(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,S)));v=t.indexOf(":"),v>=0?(c="https"===h||"wss"===h,p=parseInt(t.substring(v+1),10)):v=t.length;const O=t.slice(0,v);if("localhost"===O.toLowerCase())e="localhost";else if(O.split(".").length<=2)e=O;else{const G=t.indexOf(".");i=t.substring(0,G).toLowerCase(),e=t.substring(G+1),s=i}"ns"in N&&(s=N.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:h,pathString:r,namespace:s}},UB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",H8=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=UB.charAt(e%64),e=Math.floor(e/64);(0,B.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=UB.charAt(t[r]);return(0,B.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class BB{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Wl)(this.snapshot.exportVal())}}class VB{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Yk{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class jB{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new B.BH;return M8(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){cl("OnDisconnect.remove",this._path);const t=new B.BH;return kB(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){cl("OnDisconnect.set",this._path),Iu("OnDisconnect.set",t,this._path,!1);const e=new B.BH;return kB(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){cl("OnDisconnect.setWithPriority",this._path),Iu("OnDisconnect.setWithPriority",t,this._path,!1),Hk("OnDisconnect.setWithPriority",e,!1);const i=new B.BH;return function R8(n,t,e,i,r){const s=$i(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,h)=>{"ok"===c&&Fy(n.onDisconnect_,t,s),wp(0,r,c,h)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){cl("OnDisconnect.update",this._path),EB("OnDisconnect.update",t,this._path,!1);const e=new B.BH;return function k8(n,t,e,i){if((0,B.xb)(e))return os("onDisconnect().update() called with empty data.  Don't do anything."),void wp(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&as(e,(c,h)=>{const p=$i(h);Fy(n.onDisconnect_,Fi(t,c),p)}),wp(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class ko{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return un(this._path)?null:ik(this._path)}get ref(){return new ul(this._repo,this._path)}get _queryIdentifier(){const t=ZU(this._queryParams),e=KR(t);return"{}"===e?"default":e}get _queryObject(){return ZU(this._queryParams)}isEqual(t){if(!((t=(0,B.m9)(t))instanceof ko))return!1;const e=this._repo===t._repo,i=rk(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function k$(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function pS(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Cp(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Eu){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==fp)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==sh)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===pi){if(null!=t&&!K1(t)||null!=e&&!K1(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof ck||n.getIndex()===uk,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function gS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ul extends ko{constructor(t,e){super(t,e,new $I,!1)}get parent(){const t=kU(this._path);return null===t?null:new ul(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Ym{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Vn(t),i=Jm(this.ref,t);return new Ym(this._node.getChild(e),i,pi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Ym(r,Jm(this.ref,i),pi)))}hasChild(t){const e=new Vn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function HB(n,t){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==t?Jm(n._root,t):n._root}function GB(n,t){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const e=Kk(t,n._repo.repoInfo_.nodeAdmin);IB("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Du("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),HB(n,e.path.toString())}function Jm(n,t){return null===cn((n=(0,B.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Q1("child","path",e,!1)):Q1("child","path",t,!1),new ul(n._repo,Fi(n._path,t));var e}function Jk(n,t){n=(0,B.m9)(n),cl("set",n._path),Iu("set",t,n._path,!1);const e=new B.BH;return $k(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function z8(n,t){EB("update",t,n._path,!1);const e=new B.BH;return function N8(n,t,e,i){Vy(n,"update",{path:t.toString(),value:e});let r=!0;const s=X1(n),c={};if(as(e,(h,p)=>{r=!1,c[h]=wB(Fi(t,h),$i(p),n.serverSyncTree_,s)}),r)os("update() called with empty data.  Don't do anything."),wp(0,i,"ok",void 0);else{const h=dS(n),p=function t8(n,t,e,i){!function v5(n,t,e,i){(0,B.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=bk(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=gi.fromObject(e);return By(n,new Ly({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,h);uS(n.eventQueue_,p),n.server_.merge(t.toString(),e,(v,w)=>{const S="ok"===v;S||Bs("update at "+t+" failed: "+v);const N=bp(n.serverSyncTree_,h,!S),O=N.length>0?jy(n,t):t;_a(n.eventQueue_,O,N),wp(0,i,v,w)}),as(e,v=>{const w=zk(n,Fi(t,v));jy(n,w)}),_a(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function W8(n){n=(0,B.m9)(n);const t=new Yk(()=>{}),e=new eC(t);return function A8(n,t,e){const i=function o8(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(v,w)=>{const S=so(v,e);i=i||vp(w,S)});let r=n.syncPointTree_.get(e);r?i=i||vp(r,kn()):(r=new uB,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new mp(i,!0,!1):null;return function G5(n){return YI(n.viewCache_)}(dB(r,t,JI(n.pendingWriteTree_,t._path),s?c.getNode():Kt.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=$i(r).withIndex(t._queryParams.getIndex());let c;if(xk(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=Z1(n.serverSyncTree_,t._path,s);else{const h=q1(n.serverSyncTree_,t);c=mB(n.serverSyncTree_,t._path,s,h)}return _a(n.eventQueue_,t._path,c),rS(n.serverSyncTree_,t,e,null,!0),s},r=>(Vy(n,"get for query "+(0,B.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Ym(i,new ul(n._repo,n._path),n._queryParams.getIndex()))}class eC{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new BB("value",this,new Ym(t.snapshotNode,new ul(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new VB(this,t,e):null}matches(t){return t instanceof eC&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mS{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new VB(this,t,e):null}createEvent(t,e){(0,B.hu)(null!=t.childName,"Child events should have a childName.");const i=Jm(new ul(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new BB(t.type,this,new Ym(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof mS&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function tC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,v=(w,S)=>{Zk(n._repo,n,h),p(w,S)};v.userCallback=e.userCallback,v.context=e.context,e=v}const c=new Yk(e,s||void 0),h="value"===t?new eC(c):new mS(t,c);return function O8(n,t,e){let i;i=".info"===cn(t._path)?xk(n.infoSyncTree_,t,e):xk(n.serverSyncTree_,t,e),SB(n.eventQueue_,t._path,i)}(n._repo,n,h),()=>Zk(n._repo,n,h)}function Qk(n,t,e,i){return tC(n,"value",t,e,i)}function $B(n,t,e,i){return tC(n,"child_added",t,e,i)}function ZB(n,t,e,i){return tC(n,"child_changed",t,e,i)}function qB(n,t,e,i){return tC(n,"child_moved",t,e,i)}function zB(n,t,e,i){return tC(n,"child_removed",t,e,i)}function WB(n,t,e){let i=null;const r=e?new Yk(e):null;"value"===t?i=new eC(r):t&&(i=new mS(t,r)),Zk(n._repo,n,i)}class Dc{}class KB extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("endAt",this._value,t._path,!0);const e=fk(t._queryParams,this._value,this._key);if(gS(e),Cp(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ko(t._repo,t._path,e,t._orderByCalled)}}class Y8 extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("endBefore",this._value,t._path,!1);const e=function s5(n,t,e){let i;return i=fk(n,t,n.index_===Eu||e?e:fp),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(gS(e),Cp(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ko(t._repo,t._path,e,t._orderByCalled)}}class YB extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("startAt",this._value,t._path,!0);const e=hk(t._queryParams,this._value,this._key);if(gS(e),Cp(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ko(t._repo,t._path,e,t._orderByCalled)}}class X8 extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("startAfter",this._value,t._path,!1);const e=function r5(n,t,e){let i;return i=hk(n,t,n.index_===Eu||e?e:sh),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(gS(e),Cp(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ko(t._repo,t._path,e,t._orderByCalled)}}class tZ extends Dc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ko(t._repo,t._path,function n5(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class iZ extends Dc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ko(t._repo,t._path,function i5(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class sZ extends Dc{constructor(t){super(),this._path=t}_apply(t){pS(t,"orderByChild");const e=new Vn(this._path);if(un(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new ck(e),r=ZI(t._queryParams,i);return Cp(r),new ko(t._repo,t._path,r,!0)}}class aZ extends Dc{_apply(t){pS(t,"orderByKey");const e=ZI(t._queryParams,Eu);return Cp(e),new ko(t._repo,t._path,e,!0)}}class cZ extends Dc{_apply(t){pS(t,"orderByPriority");const e=ZI(t._queryParams,pi);return Cp(e),new ko(t._repo,t._path,e,!0)}}class dZ extends Dc{_apply(t){pS(t,"orderByValue");const e=ZI(t._queryParams,uk);return Cp(e),new ko(t._repo,t._path,e,!0)}}class fZ extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Iu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new KB(this._value,this._key)._apply(new YB(this._value,this._key)._apply(t))}}function Ec(n,...t){let e=(0,B.m9)(n);for(const i of t)e=i._apply(e);return e}(function z5(n){(0,B.hu)(!tS,"__referenceConstructor has already been defined"),tS=n})(ul),function Q5(n){(0,B.hu)(!iS,"__referenceConstructor has already been defined"),iS=n}(ul);const Xk={};function QB(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Du("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),os("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,v,c=Kk(s,r),h=c.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(p=!0,s=`http://${v}?ns=${h.namespace}`,c=Kk(s,r),h=c.repoInfo):p=!c.repoInfo.secure;const w=r&&p?new k1(k1.OWNER):new l$(n.name,n.options,t);IB("Invalid Firebase Database URL",c),un(c.path)||Du("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function vZ(n,t,e,i){let r=Xk[t.name];r||(r={},Xk[t.name]=r);let s=r[n.toURLString()];return s&&Du("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new E8(n,false,e,i),r[n.toURLString()]=s,s}(h,n,w,new a$(n.name,e));return new bZ(S,n)}class bZ{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function I8(n,t,e){if(n.stats_=ek(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new qI(n.repoInfo_,(i,r,s,c)=>{MB(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>RB(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Zm(n.repoInfo_,t,(i,r,s,c)=>{MB(n,i,r,s,c)},i=>{RB(n,i)},i=>{!function S8(n,t){as(t,(e,i)=>{Gk(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function d$(n,t){const e=n.toString();return XR[e]||(XR[e]=t()),XR[e]}(n.repoInfo_,()=>new d5(n.stats_,n.server_)),n.infoData_=new o5,n.infoSyncTree_=new gB({startListening:(i,r,s,c)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=Z1(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Gk(n,"connected",!1),n.serverSyncTree_=new gB({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(h,p)=>{const v=c(h,p);_a(n.eventQueue_,i._path,v)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ul(this._repo,kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _Z(n,t){const e=Xk[t];(!e||e[n.key]!==n)&&Du(`Database ${t}(${n.repoInfo_}) has already been deleted.`),OB(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Du("Cannot call "+t+" on a deleted database.")}}function XB(){wU.IS_TRANSPORT_INITIALIZED&&Bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wZ(){XB(),pp.forceDisallow()}function CZ(){XB(),Ry.forceDisallow(),pp.forceAllow()}function EZ(n,t){tU(n,t)}const SZ={".sv":"timestamp"};class xZ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zm.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Zm.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function IZ(n){YL(ns.SDK_VERSION),(0,ns._registerComponent)(new ca.wA("database",(t,{instanceIdentifier:e})=>QB(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(WL,"0.14.4",n),(0,ns.registerVersion)(WL,"0.14.4","esm2017")}();const OZ=new Ja.Yd("@firebase/database-compat"),tV=function(n){OZ.warn("FIREBASE WARNING: "+n)};class LZ{constructor(t){this._delegate=t}cancel(t){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,tV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class UZ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tp{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Q1("DataSnapshot.child","path",t,!1),new Tp(this._database,this._delegate.child(t))}hasChild(t){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Q1("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Tp(this._database,e)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new va(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ds{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",e,!1);const c=Ds.getCancelAndContextArgs_("Query.on",i,r),h=(v,w)=>{e.call(c.context,new Tp(this.database,v),w)};h.userCallback=e,h.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return Qk(this._delegate,h,p),e;case"child_added":return $B(this._delegate,h,p),e;case"child_removed":return zB(this._delegate,h,p),e;case"child_changed":return ZB(this._delegate,h,p),e;case"child_moved":return qB(this._delegate,h,p),e;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,B.Wj)("Query.off","callback",e,!0),(0,B.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,WB(this._delegate,t,r)}else WB(this._delegate,t)}get(){return W8(this._delegate).then(t=>new Tp(this.database,t))}once(t,e,i,r){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",e,!0);const s=Ds.getCancelAndContextArgs_("Query.once",i,r),c=new B.BH,h=(v,w)=>{const S=new Tp(this.database,v);e&&e.call(s.context,S,w),c.resolve(S)};h.userCallback=e,h.context=s.context;const p=v=>{s.cancel&&s.cancel.call(s.context,v),c.reject(v)};switch(t){case"value":Qk(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":$B(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":zB(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":ZB(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":qB(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new Ds(this.database,Ec(this._delegate,function nZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tZ(n)}(t)))}limitToLast(t){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new Ds(this.database,Ec(this._delegate,function rZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new iZ(n)}(t)))}orderByChild(t){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new Ds(this.database,Ec(this._delegate,function oZ(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Q1("orderByChild","path",n,!1),new sZ(n)}(t)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new Ds(this.database,Ec(this._delegate,function lZ(){return new aZ}()))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new Ds(this.database,Ec(this._delegate,function uZ(){return new cZ}()))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new Ds(this.database,Ec(this._delegate,function hZ(){return new dZ}()))}startAt(t=null,e){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new Ds(this.database,Ec(this._delegate,function Q8(n=null,t){return J1("startAt","key",t,!0),new YB(n,t)}(t,e)))}startAfter(t=null,e){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new Ds(this.database,Ec(this._delegate,function eZ(n,t){return J1("startAfter","key",t,!0),new X8(n,t)}(t,e)))}endAt(t=null,e){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new Ds(this.database,Ec(this._delegate,function K8(n,t){return J1("endAt","key",t,!0),new KB(n,t)}(t,e)))}endBefore(t=null,e){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new Ds(this.database,Ec(this._delegate,function J8(n,t){return J1("endBefore","key",t,!0),new Y8(n,t)}(t,e)))}equalTo(t,e){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new Ds(this.database,Ec(this._delegate,function pZ(n,t){return J1("equalTo","key",t,!0),new fZ(n,t)}(t,e)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Ds))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,B.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,B.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,B.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new va(this.database,new ul(this._delegate._repo,this._delegate._path))}}class va extends Ds{constructor(t,e){super(t,new ko(e._repo,e._path,new $I,!1)),this.database=t,this._delegate=e}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new va(this.database,Jm(this._delegate,t))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new va(this.database,t):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new va(this.database,this._delegate.root)}set(t,e){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",e,!0);const i=Jk(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,tV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cl("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",e,!0);const i=z8(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function q8(n,t,e){if(cl("setWithPriority",n._path),Iu("setWithPriority",t,n._path,!1),Hk("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new B.BH;return $k(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",t,!0);const e=function $8(n){return cl("remove",n._path),Jk(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,B.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function MZ(n,t,e){var i;if(n=(0,B.m9)(n),cl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new B.BH,h=Qk(n,()=>{});return function F8(n,t,e,i,r,s){Vy(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:QL(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=qk(n,t,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Y1("transaction failed: Data returned ",p,c.path),c.status=0;const v=aS(n.transactionQueueTree_,t),w=Km(v)||[];let S;w.push(c),Bk(v,w),"object"==typeof p&&null!==p&&(0,B.r3)(p,".priority")?(S=(0,B.DV)(p,".priority"),(0,B.hu)(K1(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(sS(n.serverSyncTree_,t)||Kt.EMPTY_NODE).getPriority().val();const N=X1(n),O=$i(p,S),G=Fk(O,h,N);c.currentOutputSnapshotRaw=O,c.currentOutputSnapshotResolved=G,c.currentWriteId=dS(n);const J=Nk(n.serverSyncTree_,t,G,c.currentWriteId,c.applyLocally);_a(n.eventQueue_,t,J),hS(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,v,w)=>{let S=null;p?s.reject(p):(S=new Ym(w,new ul(n._repo,n._path),pi),s.resolve(new xZ(v,S)))},h,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new UZ(s.committed,new Tp(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",e,!0);const i=function Z8(n,t){n=(0,B.m9)(n),cl("setPriority",n._path),Hk("setPriority",t,!1);const e=new B.BH;return $k(n._repo,Fi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",e,!0);const i=function G8(n,t){n=(0,B.m9)(n),cl("push",n._path),Iu("push",t,n._path,!0);const e=xB(n._repo),i=H8(e),r=Jm(n,i),s=Jm(n,i);let c;return c=null!=t?Jk(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new va(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new va(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return cl("Reference.onDisconnect",this._delegate._path),new LZ(new jB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class nC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wZ,forceLongPolling:CZ}}useEmulator(t,e,i={}){!function eV(n,t,e,i={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Du("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Du('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new k1(k1.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,B.Sg)(i.mockUserToken,n.app.options.projectId);s=new k1(c)}!function mZ(n,t,e,i){n.repoInfo_=new JR(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,B.Dv)("database.ref",0,1,arguments.length),t instanceof va){const e=GB(this._delegate,t.toString());return new va(this,e)}{const e=HB(this._delegate,t);return new va(this,e)}}refFromURL(t){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const i=GB(this._delegate,t);return new va(this,i)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function TZ(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),OB(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function DZ(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function P8(n){n.persistentConnection_&&n.persistentConnection_.resume(NB)}(n._repo)}(this._delegate)}}nC.ServerValue={TIMESTAMP:function AZ(){return SZ}(),increment:n=>function NZ(n){return{".sv":{increment:n}}}(n)};var VZ=Object.freeze({__proto__:null,initStandalone:function BZ({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){YL(e);const c=new ca.zt("auth-internal",new ca.H0("database-standalone"));return c.setComponent(new ca.wA("auth-internal",()=>i,"PRIVATE")),{instance:new nC(QB(n,c,void 0,t,s),n),namespace:r}}});const jZ=nC.ServerValue;function nV(n){return null==n}function iV(n){return"function"==typeof n.set}function rV(n,t){return iV(t)?t:n.ref(t)}function sV(n,t){if(function GZ(n){return"string"==typeof n}(n))return t.stringCase();if(iV(n))return t.firebaseCase();if(function $Z(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function iC(n,t,e="on",i=If.z){return new Bn.y(r=>{let s=null;return s=n[e](t,(c,h)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:h})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,ht.U)(r=>{const{snapshot:s,prevKey:c}=r;let h=null;return s.exists()&&(h=s.key),{type:t,payload:s,prevKey:c,key:h}}),(0,fR.B)())}function oV(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function zZ(n,t){const{payload:e,prevKey:i,key:r}=t,s=oV(n,r),c=function qZ(n,t){if(nV(t))return 0;{const e=oV(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(p=>{const v={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,v],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===r?t:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function aV(n){return(nV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function lV(n,t,e){return function ZZ(n,t,e){return iC(n,"value","once",e).pipe(Ti(i=>{const r=[mt(i)];return t.forEach(s=>r.push(iC(n,s,"on",e))),(0,CI.T)(...r).pipe(ou(zZ,[]))}),Sf())}(n,t=aV(t),e)}function cV(n,t,e){const i=(t=aV(t)).map(r=>iC(n,r,"on",e));return(0,CI.T)(...i)}function uV(n,t){return function(i,r){return sV(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function JZ(n){return function(e){return e?sV(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function dV(n,t){return function(){return iC(n,"value","on",t)}}!function HZ(n){n.INTERNAL.registerComponent(new ca.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new nC(r,i)},"PUBLIC").setServiceProps({Reference:va,Query:Ds,Database:nC,DataSnapshot:Tp,enableLogging:EZ,INTERNAL:VZ,ServerValue:jZ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(lu.Z);const eq=new o.OlP("angularfire2.realtimeDatabaseURL"),tq=new o.OlP("angularfire2.database.use-emulator");let Qm=(()=>{class n{constructor(e,i,r,s,c,h,p,v,w,S,N,O,G,J,te){this.schedulers=h;const De=p,Oe=(0,Ki.on)(e,c,i);v&&GR(Oe,c,w,N,O,G,S,J),this.database=(0,Ki.cc)(`${Oe.name}.database.${r}`,"AngularFireDatabase",Oe.name,()=>{const Be=c.runOutsideAngular(()=>Oe.database(r||void 0));return De&&Be.useEmulator(...De),Be},[De])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>rV(this.database,e));let s=r;return i&&(s=i(r)),function QZ(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:uV(i,"update"),set:uV(i,"set"),push:r=>i.push(r),remove:JZ(i),snapshotChanges:r=>lV(n,r,e).pipe(Tn.iC),stateChanges:r=>cV(n,r,e).pipe(Tn.iC),auditTrail:r=>function WZ(n,t,e){return function YZ(n,t,e){return function KZ(n,t){return iC(n,"value","on",t).pipe((0,ht.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(PI(t),(0,ht.U)(([r,s])=>{const c=r.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function WG(n){return(0,Wi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,xn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ht.U)(r=>r.actions))}(n,cV(n,t).pipe(ou((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Tn.iC),valueChanges:(r,s)=>lV(n,r,e).pipe((0,ht.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Tn.iC)}}(s,this)}object(e){return function XZ(n,t){return{query:n,snapshotChanges:()=>dV(n,t.schedulers.outsideAngular)().pipe(Tn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>dV(n,t.schedulers.outsideAngular)().pipe(Tn.iC,(0,ht.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>rV(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ki.Dh),o.LFG(Ki.xv,8),o.LFG(eq,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(tq,8),o.LFG(Vm,8),o.LFG(LR,8),o.LFG(UR,8),o.LFG(BR,8),o.LFG(VR,8),o.LFG(jR,8),o.LFG(HR,8),o.LFG(A1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nq=(()=>{class n{constructor(){RI.Z.registerVersion("angularfire",Tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Qm]}),n})(),Oo=(()=>{class n{constructor(e,i,r,s,c){this.afs=e,this.afAuth=i,this.router=r,this.ngZone=s,this.db=c,this.afAuth.authState.subscribe(h=>{if(h){this.userData=h,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"));let p={uid:h.uid,email:h.email,displayName:h.displayName,photoURL:h.photoURL,emailVerified:h.emailVerified};this.user=p,this.GetUser(p),console.log(this.user)}else localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user"))})}GoogleAuth(){return console.log(this.constructor.name+".GoogleAuth()"),this.afAuth.signInWithPopup(new iD.V).then(e=>{this.afAuth.authState.subscribe(i=>{i&&this.router.navigate(["dashboard"])})})}SignIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.afAuth.authState.subscribe(s=>{})}).catch(r=>{window.alert(r.message)})}SignUp(e,i){return this.afAuth.createUserWithEmailAndPassword(e,i).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}SetUserData(e){return console.log("AuthService.SetUserData()"),this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}GetUser(e){console.log("AuthService.GetUser()"),this.db.list("users",r=>r.orderByChild("uid").equalTo(e.uid)).valueChanges().subscribe(r=>{let s=!1;r.forEach(function(){var c=(0,ne.Z)(function*(h){if(h.email==e.email)return console.log("found user"),e.prefs=h.prefs,e.settings=h.settings,e.loaded=!0,s=!0,e});return function(h){return c.apply(this,arguments)}}()),s||this.createUserDB(),this.router.navigate(["dashboard"])})}createUserDB(){var e=this;return(0,ne.Z)(function*(){console.log("AuthService.createUserDB()");let i=e.user.uid,r=e.user;r.prefs=new Tb,r.prefs.showAs="poster",r.settings=new rD,r.stats=new uN,console.log(r),e.db.list("users").set(i,r)})()}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zL),o.LFG(Vm),o.LFG(Fn),o.LFG(o.R0b),o.LFG(Qm))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ic=(()=>{class n{constructor(e,i,r,s,c){this.authService=e,this.db=i,this.tmdb=r,this.http=s,this.afAuth=c,this.listsLoading=!0,this.moviesLoading=!0,this.$lists=new Bn.y,this.trendingMovies=[],this.topRatedMovies=[],this.popularMovies=[],this.trendingMoviesLoading=!0,this.topRatedMoviesLoading=!0,this.popularMoviesLoading=!0,this.aLists=[],this.aMovies=[],this.cLists=[],this.cMovies=[],this.debug=!1,this.timer={start:Date.now(),stop:null,time:null},console.log("MovieService()"),console.log(e.user);let h=nD;for(let w=0;w<h.length;w++);(()=>{for(let w=0;w<20;w++){let N=new la({});this.popularMovies.push(N)}for(let w=0;w<20;w++){let N=new la({});this.trendingMovies.push(N)}for(let w=0;w<20;w++){let N=new la({});this.topRatedMovies.push(N)}})();let v=JSON.parse(localStorage.getItem("user"));this.user=v,this.afAuth.authState.subscribe(w=>{this.user=w}),this.timer.stop=Date.now(),this.timer.time=(this.timer.stop-this.timer.start)/1e3,console.log(this.timer)}copyData(e,i,r){var s=this;return(0,ne.Z)(function*(){let c=yield new Promise(h=>{try{s.db.list(e).valueChanges().subscribe(p=>h(p))}catch(p){console.log(p)}});console.log(c);for(const h of c)s.db.list(e+"_"+r).update(h.title.toString(),h)})()}loadHomeMovies(){var e=this;this.loadMoviesTmdb("popular").then(function(){var i=(0,ne.Z)(function*(r){e.popularMovies=r,e.popularMoviesLoading=!1;let s=0;for(const c of r)s+=c.ticker.time});return function(r){return i.apply(this,arguments)}}()),this.loadMoviesTmdb("trending").then(function(){var i=(0,ne.Z)(function*(r){e.trendingMovies=r,e.trendingMoviesLoading=!1});return function(r){return i.apply(this,arguments)}}()),this.loadMoviesTmdb("toprated").then(function(){var i=(0,ne.Z)(function*(r){e.topRatedMovies=r,e.topRatedMoviesLoading=!1});return function(r){return i.apply(this,arguments)}}())}loadMoviesTmdb(e){var i=this;return(0,ne.Z)(function*(){let s,r=1,c=[],h=function(){var p=(0,ne.Z)(function*(){let v,w=[];s="popular"==e?yield i.tmdb.getPopularTmdb(r):"trending"==e?yield i.tmdb.getTrendingMovies(r):"toprated"==e?yield i.tmdb.getTopRatedTmdb(r):null,v=s.results;for(const N of v){let O=new la(N),G=16;i.authService.user&&(G=i.authService.user.settings.ageRating),(yield O.checkRating(G))&&(yield O.init(),yield O.preload(),w.push(O))}return w});return function(){return p.apply(this,arguments)}}();for(c=yield h();c.length<20&&r<s.total_pages;){r++;let p=yield h();for(let v of p)c.push(v)}return console.log("Found movies: "+c.length),c})()}loadUserMovies(){var e=this;return this.lists=this.db.list("lists_"+this.user.uid,i=>i.orderByChild("title")),this.lists.valueChanges().subscribe(i=>{i.forEach(function(){var r=(0,ne.Z)(function*(s){s.movies=[],"Saved"==s.title&&(s.show=!0,e.cLists.push(s)),e.aLists.push(s)});return function(s){return r.apply(this,arguments)}}())}),this.movies=this.db.list("movies_"+this.user.uid,i=>i.orderByChild("title")),this.movies.valueChanges().subscribe(function(){var i=(0,ne.Z)(function*(r){e.aMovies=[],e.debug&&console.log(r.length);for(const s of r){let c=new la(s);e.aMovies.push(c);for(const h of e.aLists)s.lists.includes(h.title)&&h.movies.push(c)}e.cMovies=e.aMovies,e.moviesLoading=!1;for(const s of e.aMovies)s.preload();for(const s of e.aMovies){let c=16;e.authService.user&&(c=e.authService.user.settings.ageRating),s.checkRating(c)&&s.init()}e.debug&&console.log("<ALL LISTS>"),e.debug&&console.log(e.aLists),e.debug&&console.log("<ALL MOVIES>"),e.debug&&console.log(e.aMovies)});return function(r){return i.apply(this,arguments)}}()),!0}loadMovies(){let e=new Promise(i=>{this.db.list("movies_"+this.user.uid,r=>r.orderByChild("title")).valueChanges().subscribe(r=>i(r))});return console.log("obj"),console.log(e),e}loadLists(){let e=new Promise(i=>{this.db.list("lists_"+this.user.uid,r=>r.orderByChild("title")).valueChanges().subscribe(r=>i(r))});return console.log("obj"),console.log(e),e}findItemByName(e){return console.log("name: "+e),new Promise(r=>{this.db.list("movies_"+this.user.uid,s=>s.orderByChild("name").equalTo(e)).valueChanges().subscribe(s=>r(s))})}getItemById(e){return console.log(this.user),this.db.list("movies_"+this.user.uid,i=>i.orderByChild("id").equalTo(e))}findItem(e){return new Promise(r=>{this.db.list("movies_"+this.user.uid,s=>s.orderByChild("name").equalTo(e)).valueChanges().subscribe(s=>r(s))})}setItem(e){var i=this;return(0,ne.Z)(function*(){let r;console.log("setItem"),console.log(e.id),r={id:e.id,saved:!0},null==e.favorite&&(e.favorite=!1),console.log(typeof e.vote),yield i.db.list("movies_"+i.user.uid).update(e.id.toString(),e)})()}addItem(e){var i=this;return(0,ne.Z)(function*(){let r,s=yield i.findItem(e.id);return console.log("returnedItem"),console.log(s),s.length>0?(console.log("FOUND ITEM!!!"),r=400):(console.log("ITEM NOT FOUND!!!"),r=200,i.db.list("movies_"+i.user.uid).update(e.id,e),console.log("Item added")),r})()}deleteItem(e){var i=this;return(0,ne.Z)(function*(){i.db.list("movies_"+i.user.uid).remove(e.id.toString())})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Oo),o.LFG(Qm),o.LFG(ts),o.LFG(O_),o.LFG(Vm))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var iq=V(1144);const rq=["addListener","removeListener"],sq=["addEventListener","removeEventListener"],oq=["on","off"];function oo(n,t,e,i){if((0,ra.m)(e)&&(i=e,e=void 0),i)return oo(n,t,e).pipe(La(i));const[r,s]=function cq(n){return(0,ra.m)(n.addEventListener)&&(0,ra.m)(n.removeEventListener)}(n)?sq.map(c=>h=>n[c](t,h,e)):function aq(n){return(0,ra.m)(n.addListener)&&(0,ra.m)(n.removeListener)}(n)?rq.map(hV(n,t)):function lq(n){return(0,ra.m)(n.on)&&(0,ra.m)(n.off)}(n)?oq.map(hV(n,t)):[];if(!r&&(0,iq.z)(n))return(0,ar.z)(c=>oo(c,t,e))((0,yr.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Bn.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return r(h),()=>s(h)})}function hV(n,t){return e=>i=>n[e](t,i)}var uq=V(3532);function eO(n=0,t,e=If.P){let i=-1;return null!=t&&((0,uq.K)(t)?e=t:i=t),new Bn.y(r=>{let s=function dq(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:hq}=Array;function fV(n){return 1===n.length&&hq(n[0])?n[0]:n}function pV(...n){return 1===(n=fV(n)).length?(0,yr.Xf)(n[0]):new Bn.y(function fq(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push((0,yr.Xf)(n[i]).subscribe((0,xn.x)(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}(n))}const gV=new Bn.y(OI.Z);function _S(...n){const t=(0,zs.jO)(n),e=fV(n);return e.length?new Bn.y(i=>{let r=e.map(()=>[]),s=e.map(()=>!1);i.add(()=>{r=s=null});for(let c=0;!i.closed&&c<e.length;c++)(0,yr.Xf)(e[c]).subscribe((0,xn.x)(i,h=>{if(r[c].push(h),r.every(p=>p.length)){const p=r.map(v=>v.shift());i.next(t?t(...p):p),r.some((v,w)=>!v.length&&s[w])&&i.complete()}},()=>{s[c]=!0,!r[c].length&&i.complete()}));return()=>{r=s=null}}):oa.E}function Vr(n){return(0,Wi.e)((t,e)=>{(0,yr.Xf)(n).subscribe((0,xn.x)(e,()=>e.complete(),OI.Z)),!e.closed&&t.subscribe(e)})}function mV(n,t){return t?e=>cg(t.pipe(cr(1),function gq(){return(0,Wi.e)((n,t)=>{n.subscribe((0,xn.x)(t,OI.Z))})}()),e.pipe(mV(n))):(0,ar.z)((e,i)=>n(e,i).pipe(cr(1),E0(e)))}function _V(n,t=If.z){const e=eO(n,t);return mV(()=>e)}var _q={left:"right",right:"left",bottom:"top",top:"bottom"};function vS(n){return n.replace(/left|right|bottom|top/g,function(t){return _q[t]})}function Su(n){return n.split("-")[0]}var vq={start:"end",end:"start"};function vV(n){return n.replace(/start|end/g,function(t){return vq[t]})}var ya="top",Sc="bottom",Ac="right",ba="left",tO="auto",rC=[ya,Sc,Ac,ba],Hy="start",sC="end",yV="viewport",oC="popper",bV=rC.reduce(function(n,t){return n.concat([t+"-"+Hy,t+"-"+sC])},[]),wV=[].concat(rC,[tO]).reduce(function(n,t){return n.concat([t,t+"-"+Hy,t+"-"+sC])},[]),xq=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function dl(n){if(null==n)return window;if("[object Window]"!==n.toString()){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Xm(n){return n instanceof dl(n).Element||n instanceof Element}function hl(n){return n instanceof dl(n).HTMLElement||n instanceof HTMLElement}function nO(n){return!(typeof ShadowRoot>"u")&&(n instanceof dl(n).ShadowRoot||n instanceof ShadowRoot)}function Dp(n){return((Xm(n)?n.ownerDocument:n.document)||window.document).documentElement}var e_=Math.max,yS=Math.min,Gy=Math.round;function iO(){var n=navigator.userAgentData;return null!=n&&n.brands?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function CV(){return!/^((?!chrome|android).)*safari/i.test(iO())}function $y(n,t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=n.getBoundingClientRect(),r=1,s=1;t&&hl(n)&&(r=n.offsetWidth>0&&Gy(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Gy(i.height)/n.offsetHeight||1);var h=(Xm(n)?dl(n):window).visualViewport,p=!CV()&&e,v=(i.left+(p&&h?h.offsetLeft:0))/r,w=(i.top+(p&&h?h.offsetTop:0))/s,S=i.width/r,N=i.height/s;return{width:S,height:N,top:w,right:v+S,bottom:w+N,left:v,x:v,y:w}}function rO(n){var t=dl(n);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function sO(n){return $y(Dp(n)).left+rO(n).scrollLeft}function ah(n){return dl(n).getComputedStyle(n)}function Au(n){return n?(n.nodeName||"").toLowerCase():null}function bS(n){return"html"===Au(n)?n:n.assignedSlot||n.parentNode||(nO(n)?n.host:null)||Dp(n)}function oO(n){var t=ah(n);return/auto|scroll|overlay|hidden/.test(t.overflow+t.overflowY+t.overflowX)}function TV(n){return["html","body","#document"].indexOf(Au(n))>=0?n.ownerDocument.body:hl(n)&&oO(n)?n:TV(bS(n))}function aC(n,t){var e;void 0===t&&(t=[]);var i=TV(n),r=i===(null==(e=n.ownerDocument)?void 0:e.body),s=dl(i),c=r?[s].concat(s.visualViewport||[],oO(i)?i:[]):i,h=t.concat(c);return r?h:h.concat(aC(bS(c)))}function kq(n){return["table","td","th"].indexOf(Au(n))>=0}function DV(n){return hl(n)&&"fixed"!==ah(n).position?n.offsetParent:null}function lC(n){for(var t=dl(n),e=DV(n);e&&kq(e)&&"static"===ah(e).position;)e=DV(e);return e&&("html"===Au(e)||"body"===Au(e)&&"static"===ah(e).position)?t:e||function Oq(n){var t=/firefox/i.test(iO());if(/Trident/i.test(iO())&&hl(n)&&"fixed"===ah(n).position)return null;var r=bS(n);for(nO(r)&&(r=r.host);hl(r)&&["html","body"].indexOf(Au(r))<0;){var s=ah(r);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return r;r=r.parentNode}return null}(n)||t}function EV(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&nO(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function aO(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function IV(n,t,e){return t===yV?aO(function Mq(n,t){var e=dl(n),i=Dp(n),r=e.visualViewport,s=i.clientWidth,c=i.clientHeight,h=0,p=0;if(r){s=r.width,c=r.height;var v=CV();(v||!v&&"fixed"===t)&&(h=r.offsetLeft,p=r.offsetTop)}return{width:s,height:c,x:h+sO(n),y:p}}(n,e)):Xm(t)?function Pq(n,t){var e=$y(n,!1,"fixed"===t);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}(t,e):aO(function Rq(n){var t,e=Dp(n),i=rO(n),r=null==(t=n.ownerDocument)?void 0:t.body,s=e_(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=e_(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),h=-i.scrollLeft+sO(n),p=-i.scrollTop;return"rtl"===ah(r||e).direction&&(h+=e_(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:c,x:h,y:p}}(Dp(n)))}function Zy(n){return n.split("-")[1]}function lO(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function SV(n){var p,t=n.reference,e=n.element,i=n.placement,r=i?Su(i):null,s=i?Zy(i):null,c=t.x+t.width/2-e.width/2,h=t.y+t.height/2-e.height/2;switch(r){case ya:p={x:c,y:t.y-e.height};break;case Sc:p={x:c,y:t.y+t.height};break;case Ac:p={x:t.x+t.width,y:h};break;case ba:p={x:t.x-e.width,y:h};break;default:p={x:t.x,y:t.y}}var v=r?lO(r):null;if(null!=v){var w="y"===v?"height":"width";switch(s){case Hy:p[v]=p[v]-(t[w]/2-e[w]/2);break;case sC:p[v]=p[v]+(t[w]/2-e[w]/2)}}return p}function NV(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function xV(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}function cO(n,t){void 0===t&&(t={});var i=t.placement,r=void 0===i?n.placement:i,s=t.strategy,c=void 0===s?n.strategy:s,h=t.boundary,p=void 0===h?"clippingParents":h,v=t.rootBoundary,w=void 0===v?yV:v,S=t.elementContext,N=void 0===S?oC:S,O=t.altBoundary,G=void 0!==O&&O,J=t.padding,te=void 0===J?0:J,De=NV("number"!=typeof te?te:xV(te,rC)),Be=n.rects.popper,He=n.elements[G?N===oC?"reference":oC:N],nt=function Lq(n,t,e,i){var r="clippingParents"===t?function Fq(n){var t=aC(bS(n)),i=["absolute","fixed"].indexOf(ah(n).position)>=0&&hl(n)?lC(n):n;return Xm(i)?t.filter(function(r){return Xm(r)&&EV(r,i)&&"body"!==Au(r)}):[]}(n):[].concat(t),s=[].concat(r,[e]),h=s.reduce(function(p,v){var w=IV(n,v,i);return p.top=e_(w.top,p.top),p.right=yS(w.right,p.right),p.bottom=yS(w.bottom,p.bottom),p.left=e_(w.left,p.left),p},IV(n,s[0],i));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}(Xm(He)?He:He.contextElement||Dp(n.elements.popper),p,w,c),at=$y(n.elements.reference),Gt=SV({reference:at,element:Be,strategy:"absolute",placement:r}),Xt=aO(Object.assign({},Be,Gt)),_i=N===oC?Xt:at,jr={top:nt.top-_i.top+De.top,bottom:_i.bottom-nt.bottom+De.bottom,left:nt.left-_i.left+De.left,right:_i.right-nt.right+De.right},pr=n.modifiersData.offset;if(N===oC&&pr){var Mc=pr[r];Object.keys(jr).forEach(function(co){var l_=[Ac,Sc].indexOf(co)>=0?1:-1,c_=[ya,Sc].indexOf(co)>=0?"y":"x";jr[co]+=Mc[c_]*l_})}return jr}const jq={name:"flip",enabled:!0,phase:"main",fn:function Vq(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var r=e.mainAxis,s=void 0===r||r,c=e.altAxis,h=void 0===c||c,p=e.fallbackPlacements,v=e.padding,w=e.boundary,S=e.rootBoundary,N=e.altBoundary,O=e.flipVariations,G=void 0===O||O,J=e.allowedAutoPlacements,te=t.options.placement,De=Su(te),Be=p||(De!==te&&G?function Bq(n){if(Su(n)===tO)return[];var t=vS(n);return[vV(n),t,vV(t)]}(te):[vS(te)]),He=[te].concat(Be).reduce(function(Qy,Sp){return Qy.concat(Su(Sp)===tO?function Uq(n,t){void 0===t&&(t={});var r=t.boundary,s=t.rootBoundary,c=t.padding,h=t.flipVariations,p=t.allowedAutoPlacements,v=void 0===p?wV:p,w=Zy(t.placement),S=w?h?bV:bV.filter(function(G){return Zy(G)===w}):rC,N=S.filter(function(G){return v.indexOf(G)>=0});0===N.length&&(N=S);var O=N.reduce(function(G,J){return G[J]=cO(n,{placement:J,boundary:r,rootBoundary:s,padding:c})[Su(J)],G},{});return Object.keys(O).sort(function(G,J){return O[G]-O[J]})}(t,{placement:Sp,boundary:w,rootBoundary:S,padding:v,flipVariations:G,allowedAutoPlacements:J}):Sp)},[]),nt=t.rects.reference,at=t.rects.popper,Gt=new Map,Xt=!0,_i=He[0],jr=0;jr<He.length;jr++){var pr=He[jr],Mc=Su(pr),co=Zy(pr)===Hy,l_=[ya,Sc].indexOf(Mc)>=0,c_=l_?"width":"height",Ca=cO(t,{placement:pr,boundary:w,rootBoundary:S,altBoundary:N,padding:v}),Rc=l_?co?Ac:ba:co?Sc:ya;nt[c_]>at[c_]&&(Rc=vS(Rc));var US=vS(Rc),u_=[];if(s&&u_.push(Ca[Mc]<=0),h&&u_.push(Ca[Rc]<=0,Ca[US]<=0),u_.every(function(Qy){return Qy})){_i=pr,Xt=!1;break}Gt.set(pr,u_)}if(Xt)for(var GO=function(Sp){var wC=He.find(function(jS){var d_=Gt.get(jS);if(d_)return d_.slice(0,Sp).every(function($O){return $O})});if(wC)return _i=wC,"break"},bC=G?3:1;bC>0&&"break"!==GO(bC);bC--);t.placement!==_i&&(t.modifiersData[i]._skip=!0,t.placement=_i,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function cC(n,t,e){return e_(n,yS(t,e))}function uO(n){var t=$y(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}const Zq={name:"preventOverflow",enabled:!0,phase:"main",fn:function $q(n){var t=n.state,e=n.options,i=n.name,r=e.mainAxis,s=void 0===r||r,c=e.altAxis,h=void 0!==c&&c,N=e.tether,O=void 0===N||N,G=e.tetherOffset,J=void 0===G?0:G,te=cO(t,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),De=Su(t.placement),Oe=Zy(t.placement),Be=!Oe,He=lO(De),nt=function Hq(n){return"x"===n?"y":"x"}(He),at=t.modifiersData.popperOffsets,Gt=t.rects.reference,Xt=t.rects.popper,_i="function"==typeof J?J(Object.assign({},t.rects,{placement:t.placement})):J,jr="number"==typeof _i?{mainAxis:_i,altAxis:_i}:Object.assign({mainAxis:0,altAxis:0},_i),pr=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Mc={x:0,y:0};if(at){if(s){var co,l_="y"===He?ya:ba,c_="y"===He?Sc:Ac,Ca="y"===He?"height":"width",Rc=at[He],US=Rc+te[l_],u_=Rc-te[c_],BS=O?-Xt[Ca]/2:0,GO=Oe===Hy?Gt[Ca]:Xt[Ca],bC=Oe===Hy?-Xt[Ca]:-Gt[Ca],VS=t.elements.arrow,Qy=O&&VS?uO(VS):{width:0,height:0},Sp=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},wC=Sp[l_],jS=Sp[c_],d_=cC(0,Gt[Ca],Qy[Ca]),$O=Be?Gt[Ca]/2-BS-d_-wC-jr.mainAxis:GO-d_-wC-jr.mainAxis,bX=Be?-Gt[Ca]/2+BS+d_+jS+jr.mainAxis:bC+d_+jS+jr.mainAxis,ZO=t.elements.arrow&&lC(t.elements.arrow),T6=null!=(co=pr?.[He])?co:0,TX=Rc+bX-T6,D6=cC(O?yS(US,Rc+$O-T6-(ZO?"y"===He?ZO.clientTop||0:ZO.clientLeft||0:0)):US,Rc,O?e_(u_,TX):u_);at[He]=D6,Mc[He]=D6-Rc}if(h){var E6,h_=at[nt],HS="y"===nt?"height":"width",I6=h_+te["x"===He?ya:ba],S6=h_-te["x"===He?Sc:Ac],qO=-1!==[ya,ba].indexOf(De),A6=null!=(E6=pr?.[nt])?E6:0,N6=qO?I6:h_-Gt[HS]-Xt[HS]-A6+jr.altAxis,x6=qO?h_+Gt[HS]+Xt[HS]-A6-jr.altAxis:S6,M6=O&&qO?function Gq(n,t,e){var i=cC(n,t,e);return i>e?e:i}(N6,h_,x6):cC(O?N6:I6,h_,O?x6:S6);at[nt]=M6,Mc[nt]=M6-h_}t.modifiersData[i]=Mc}},requiresIfExists:["offset"]},Kq={name:"arrow",enabled:!0,phase:"main",fn:function zq(n){var t,e=n.state,i=n.name,r=n.options,s=e.elements.arrow,c=e.modifiersData.popperOffsets,h=Su(e.placement),p=lO(h),w=[ba,Ac].indexOf(h)>=0?"height":"width";if(s&&c){var S=function(t,e){return NV("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:xV(t,rC))}(r.padding,e),N=uO(s),O="y"===p?ya:ba,G="y"===p?Sc:Ac,J=e.rects.reference[w]+e.rects.reference[p]-c[p]-e.rects.popper[w],te=c[p]-e.rects.reference[p],De=lC(s),Oe=De?"y"===p?De.clientHeight||0:De.clientWidth||0:0,at=Oe/2-N[w]/2+(J/2-te/2),Gt=cC(S[O],at,Oe-N[w]-S[G]);e.modifiersData[i]=((t={})[p]=Gt,t.centerOffset=Gt-at,t)}},effect:function Wq(n){var t=n.state,i=n.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=t.elements.popper.querySelector(r))||!EV(t.elements.popper,r)||(t.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xq(n,t,e){void 0===e&&(e=!1);var i=hl(t),r=hl(t)&&function Qq(n){var t=n.getBoundingClientRect(),e=Gy(t.width)/n.offsetWidth||1,i=Gy(t.height)/n.offsetHeight||1;return 1!==e||1!==i}(t),s=Dp(t),c=$y(n,r,e),h={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(i||!i&&!e)&&(("body"!==Au(t)||oO(s))&&(h=function Jq(n){return n!==dl(n)&&hl(n)?function Yq(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):rO(n)}(t)),hl(t)?((p=$y(t,!0)).x+=t.clientLeft,p.y+=t.clientTop):s&&(p.x=sO(s))),{x:c.left+h.scrollLeft-p.x,y:c.top+h.scrollTop-p.y,width:c.width,height:c.height}}function ez(n){var t=new Map,e=new Set,i=[];function r(s){e.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(h){if(!e.has(h)){var p=t.get(h);p&&r(p)}}),i.push(s)}return n.forEach(function(s){t.set(s.name,s)}),n.forEach(function(s){e.has(s.name)||r(s)}),i}function nz(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}var MV={placement:"bottom",modifiers:[],strategy:"absolute"};function RV(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function rz(n){void 0===n&&(n={});var e=n.defaultModifiers,i=void 0===e?[]:e,r=n.defaultOptions,s=void 0===r?MV:r;return function(h,p,v){void 0===v&&(v=s);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},MV,s),modifiersData:{},elements:{reference:h,popper:p},attributes:{},styles:{}},S=[],N=!1,O={state:w,setOptions:function(De){var Oe="function"==typeof De?De(w.options):De;J(),w.options=Object.assign({},s,w.options,Oe),w.scrollParents={reference:Xm(h)?aC(h):h.contextElement?aC(h.contextElement):[],popper:aC(p)};var Be=function tz(n){var t=ez(n);return xq.reduce(function(e,i){return e.concat(t.filter(function(r){return r.phase===i}))},[])}(function iz(n){var t=n.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(i,w.options.modifiers)));return w.orderedModifiers=Be.filter(function(pr){return pr.enabled}),function G(){w.orderedModifiers.forEach(function(te){var Oe=te.options,He=te.effect;if("function"==typeof He){var nt=He({state:w,name:te.name,instance:O,options:void 0===Oe?{}:Oe});S.push(nt||function(){})}})}(),O.update()},forceUpdate:function(){if(!N){var De=w.elements,Oe=De.reference,Be=De.popper;if(RV(Oe,Be)){w.rects={reference:Xq(Oe,lC(Be),"fixed"===w.options.strategy),popper:uO(Be)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(pr){return w.modifiersData[pr.name]=Object.assign({},pr.data)});for(var nt=0;nt<w.orderedModifiers.length;nt++)if(!0!==w.reset){var at=w.orderedModifiers[nt],Gt=at.fn,Xt=at.options;"function"==typeof Gt&&(w=Gt({state:w,options:void 0===Xt?{}:Xt,name:at.name,instance:O})||w)}else w.reset=!1,nt=-1}}},update:nz(function(){return new Promise(function(te){O.forceUpdate(),te(w)})}),destroy:function(){J(),N=!0}};if(!RV(h,p))return O;function J(){S.forEach(function(te){return te()}),S=[]}return O.setOptions(v).then(function(te){!N&&v.onFirstUpdate&&v.onFirstUpdate(te)}),O}}var wS={passive:!0};const oz={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function sz(n){var t=n.state,e=n.instance,i=n.options,r=i.scroll,s=void 0===r||r,c=i.resize,h=void 0===c||c,p=dl(t.elements.popper),v=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&v.forEach(function(w){w.addEventListener("scroll",e.update,wS)}),h&&p.addEventListener("resize",e.update,wS),function(){s&&v.forEach(function(w){w.removeEventListener("scroll",e.update,wS)}),h&&p.removeEventListener("resize",e.update,wS)}},data:{}},lz={name:"popperOffsets",enabled:!0,phase:"read",fn:function az(n){var t=n.state;t.modifiersData[n.name]=SV({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var cz={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kV(n){var t,e=n.popper,i=n.popperRect,r=n.placement,s=n.variation,c=n.offsets,h=n.position,p=n.gpuAcceleration,v=n.adaptive,w=n.roundOffsets,S=n.isFixed,N=c.x,O=void 0===N?0:N,G=c.y,J=void 0===G?0:G,te="function"==typeof w?w({x:O,y:J}):{x:O,y:J};O=te.x,J=te.y;var De=c.hasOwnProperty("x"),Oe=c.hasOwnProperty("y"),Be=ba,He=ya,nt=window;if(v){var at=lC(e),Gt="clientHeight",Xt="clientWidth";at===dl(e)&&"static"!==ah(at=Dp(e)).position&&"absolute"===h&&(Gt="scrollHeight",Xt="scrollWidth"),(r===ya||(r===ba||r===Ac)&&s===sC)&&(He=Sc,J-=(S&&at===nt&&nt.visualViewport?nt.visualViewport.height:at[Gt])-i.height,J*=p?1:-1),r!==ba&&(r!==ya&&r!==Sc||s!==sC)||(Be=Ac,O-=(S&&at===nt&&nt.visualViewport?nt.visualViewport.width:at[Xt])-i.width,O*=p?1:-1)}var co,pr=Object.assign({position:h},v&&cz),Mc=!0===w?function uz(n){var e=n.y,r=window.devicePixelRatio||1;return{x:Gy(n.x*r)/r||0,y:Gy(e*r)/r||0}}({x:O,y:J}):{x:O,y:J};return O=Mc.x,J=Mc.y,Object.assign({},pr,p?((co={})[He]=Oe?"0":"",co[Be]=De?"0":"",co.transform=(nt.devicePixelRatio||1)<=1?"translate("+O+"px, "+J+"px)":"translate3d("+O+"px, "+J+"px, 0)",co):((t={})[He]=Oe?J+"px":"",t[Be]=De?O+"px":"",t.transform="",t))}const hz={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function dz(n){var t=n.state,e=n.options,i=e.gpuAcceleration,r=void 0===i||i,s=e.adaptive,c=void 0===s||s,h=e.roundOffsets,p=void 0===h||h,w={placement:Su(t.placement),variation:Zy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,kV(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:p})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,kV(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var gz=[oz,lz,hz,{name:"applyStyles",enabled:!0,phase:"write",fn:function fz(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!hl(s)||!Au(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(c){var h=r[c];!1===h?s.removeAttribute(c):s.setAttribute(c,!0===h?"":h)}))})},effect:function pz(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},h=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]).reduce(function(p,v){return p[v]="",p},{});!hl(r)||!Au(r)||(Object.assign(r.style,h),Object.keys(s).forEach(function(p){r.removeAttribute(p)}))})}},requires:["computeStyles"]}],mz=rz({defaultModifiers:gz});const yz={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function vz(n){var t=n.state,i=n.name,r=n.options.offset,s=void 0===r?[0,0]:r,c=wV.reduce(function(w,S){return w[S]=function _z(n,t,e){var i=Su(n),r=[ba,ya].indexOf(i)>=0?-1:1,s="function"==typeof e?e(Object.assign({},t,{placement:n})):e,c=s[0],h=s[1];return c=c||0,h=(h||0)*r,[ba,Ac].indexOf(i)>=0?{x:h,y:c}:{x:c,y:h}}(S,t.rects,s),w},{}),h=c[t.placement],v=h.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=h.x,t.modifiersData.popperOffsets.y+=v),t.modifiersData[i]=c}},OV=["*"];function Sz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return c.focus(),o.KtG(c.select(s.id,c.NgbSlideEventSource.INDICATOR))}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw();o.ekj("active",e.id===i.activeId),o.uIk("aria-labelledby","slide-"+e.id)("aria-controls","slide-"+e.id)("aria-selected",e.id===i.activeId)}}function Az(n,t){}function Nz(n,t){if(1&n&&(o.TgZ(0,"div",7)(1,"span",8),o.SDv(2,9),o.qZA(),o.YNc(3,Az,0,0,"ng-template",10),o.qZA()),2&n){const e=t.$implicit,i=t.index,r=t.count;o.Q6J("id","slide-"+e.id),o.xp6(2),o.pQV(i+1)(r),o.QtT(2),o.xp6(1),o.Q6J("ngTemplateOutlet",e.tplRef)}}function xz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.arrowLeft())}),o._UZ(1,"span",12),o.TgZ(2,"span",8),o.SDv(3,13),o.qZA()()}}function Mz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.arrowRight())}),o._UZ(1,"span",15),o.TgZ(2,"span",8),o.SDv(3,16),o.qZA()()}}const $z=["dialog"];function C9(n,t){if(1&n&&o._uU(0),2&n){const e=o.oxw(2);o.Oqu(e.title)}}function T9(n,t){}function D9(n,t){if(1&n&&(o.TgZ(0,"h3",3),o.YNc(1,C9,1,1,"ng-template",null,4,o.W1O),o.YNc(3,T9,0,0,"ng-template",5),o.qZA()),2&n){const e=o.MAs(2),i=o.oxw();o.xp6(3),o.Q6J("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function E9(n,t){1&n&&o._uU(0),2&n&&o.Oqu(100===t.fill?"\u2605":"\u2606")}function I9(n,t){}function S9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",2),o._uU(1),o.qZA(),o.TgZ(2,"span",3),o.NdJ("mouseenter",function(){const s=o.CHM(e).index,c=o.oxw();return o.KtG(c.enter(s+1))})("click",function(){const s=o.CHM(e).index,c=o.oxw();return o.KtG(c.handleClick(s+1))}),o.YNc(3,I9,0,0,"ng-template",4),o.qZA()}if(2&n){const e=t.index,i=o.oxw(),r=o.MAs(1);o.xp6(1),o.hij("(",e<i.nextRate?"*":" ",")"),o.xp6(1),o.Udp("cursor",i.isInteractive()?"pointer":"default"),o.xp6(1),o.Q6J("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||r)("ngTemplateOutletContext",i.contexts[e])}}function hO(n,t,e=0){return Math.max(Math.min(n,t),e)}function fO(n){return"string"==typeof n}function t_(n){return null!=n}function qy(n){return(n||document.body).getBoundingClientRect()}const FV={animation:!0,transitionTimerDelayMs:5},V9=()=>{},{transitionTimerDelayMs:j9}=FV,uC=new Map,Vs=(n,t,e,i)=>{let r=i.context||{};const s=uC.get(t);if(s)switch(i.runningTransition){case"continue":return oa.E;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),uC.delete(t)}const c=e(t,i.animation,r)||V9;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>c()),mt(void 0).pipe(function U9(n){return t=>new Bn.y(e=>t.subscribe({next:c=>n.run(()=>e.next(c)),error:c=>n.run(()=>e.error(c)),complete:()=>n.run(()=>e.complete())}))}(n));const h=new di.x,p=new di.x,v=h.pipe(function pq(...n){return t=>cg(t,mt(...n))}(!0));uC.set(t,{transition$:h,complete:()=>{p.next(),p.complete()},context:r});const w=function B9(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const S=oo(t,"transitionend").pipe(Vr(v),zn(({target:O})=>O===t));pV(eO(w+j9).pipe(Vr(v)),S,p).pipe(Vr(v)).subscribe(()=>{uC.delete(t),n.run(()=>{c(),h.next(),h.complete()})})}),h.asObservable()},gO=(n,t,e)=>{let{direction:i,maxHeight:r}=e;const{classList:s}=n;function c(){s.add("collapse"),"show"===i?s.add("show"):s.remove("show")}if(t)return r||(r=function G9(n){if(typeof navigator>"u")return"0px";const{classList:t}=n,e=t.contains("show");e||t.add("show"),n.style.height="";const i=n.getBoundingClientRect().height+"px";return e||t.remove("show"),i}(n),e.maxHeight=r,n.style.height="show"!==i?r:"0px",s.remove("collapse"),s.remove("collapsing"),s.remove("show"),qy(n),s.add("collapsing")),n.style.height="show"===i?r:"0px",()=>{c(),s.remove("collapsing"),n.style.height=""};c()};let zy=(()=>{class n{constructor(){this.animation=FV.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),HV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})();var Ep=(()=>(function(n){n.START="start",n.END="end"}(Ep||(Ep={})),Ep))();const GV=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),dC=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},TS=n=>{dC(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},z9=(n,t,{direction:e})=>{const{classList:i}=n;return t?(GV(n)?dC(i):(i.add("carousel-item-"+(e===Ep.START?"next":"prev")),qy(n),i.add("carousel-item-"+e)),()=>{TS(i),i.add("active")}):(dC(i),TS(i),void i.add("active"))},W9=(n,t,{direction:e})=>{const{classList:i}=n;return t?(GV(n)?dC(i):i.add("carousel-item-"+e),()=>{TS(i),i.remove("active")}):(dC(i),TS(i),void i.remove("active"))};let K9=(()=>{class n{constructor(e){this._ngbConfig=e,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y9=0,vO=(()=>{class n{constructor(e){this.tplRef=e,this.id="ngb-slide-"+Y9++,this.slid=new o.vpe}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"}}),n})(),$V=(()=>{class n{constructor(e,i,r,s,c){this._platformId=i,this._ngZone=r,this._cd=s,this._container=c,this.NgbSlideEventSource=n_,this._destroy$=new di.x,this._interval$=new lr(0),this._mouseHover$=new lr(!1),this._focused$=new lr(!1),this._pauseOnHover$=new lr(!1),this._pauseOnFocus$=new lr(!1),this._pause$=new lr(!1),this._wrap$=new lr(!1),this.slide=new o.vpe,this.slid=new o.vpe,this._transitionIds=null,this.animation=e.animation,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.pauseOnFocus=e.pauseOnFocus,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(e){this._pauseOnFocus$.next(e)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(e){this._mouseHover$.next(e)}get mouseHover(){return this._mouseHover$.value}set focused(e){this._focused$.next(e)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(n_.ARROW_LEFT)}arrowRight(){this.focus(),this.next(n_.ARROW_RIGHT)}ngAfterContentInit(){(function Rp(n){return n===Lc})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=F_([this.slide.pipe((0,ht.U)(i=>i.current),su(this.activeId)),this._wrap$,this.slides.changes.pipe(su(null))]).pipe((0,ht.U)(([i,r])=>{const s=this.slides.toArray(),c=this._getSlideIdxById(i);return r?s.length>1:c<s.length-1}),Sf());F_([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,e]).pipe((0,ht.U)(([i,r,s,c,h,p,v])=>i||r&&s||c&&h||!v?0:p),Sf(),Ti(i=>i>0?eO(i,i):gV),Vr(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(n_.TIMER)))}),this.slides.changes.pipe(Vr(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(e=>(n=>{uC.get(n)?.complete()})(this._getSlideElement(e))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(cr(1)).subscribe(()=>{for(const{id:e}of this.slides){const i=this._getSlideElement(e);e===this.activeId?i.classList.add("active"):i.classList.remove("active")}})})}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const e=this._getSlideElement(this.activeId);e&&e.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(e,i){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),i)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),Ep.END,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),Ep.START,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(e,i,r){const s=this._transitionIds;if(s&&(s[0]!==e||s[1]!==this.activeId))return;let c=this._getSlideById(e);if(c&&c.id!==this.activeId){this._transitionIds=[this.activeId,e],this.slide.emit({prev:this.activeId,current:c.id,direction:i,paused:this._pause$.value,source:r});const h={animation:this.animation,runningTransition:"stop",context:{direction:i}},p=[],v=this._getSlideById(this.activeId);if(v){const O=Vs(this._ngZone,this._getSlideElement(v.id),W9,h);O.subscribe(()=>{v.slid.emit({isShown:!1,direction:i,source:r})}),p.push(O)}const w=this.activeId;this.activeId=c.id;const S=this._getSlideById(this.activeId),N=Vs(this._ngZone,this._getSlideElement(c.id),z9,h);N.subscribe(()=>{S?.slid.emit({isShown:!0,direction:i,source:r})}),p.push(N),_S(...p).pipe(cr(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:w,current:c.id,direction:i,paused:this._pause$.value,source:r})})}this._cd.markForCheck()}_getSlideEventDirection(e,i){return this._getSlideIdxById(e)>this._getSlideIdxById(i)?Ep.END:Ep.START}_getSlideById(e){return this.slides.find(i=>i.id===e)||null}_getSlideIdxById(e){const i=this._getSlideById(e);return null!=i?this.slides.toArray().indexOf(i):-1}_getNextSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return r===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[r+1].id}_getPrevSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return 0===r?this.wrap?i[i.length-1].id:i[0].id:i[r-1].id}_getSlideElement(e){return this._container.nativeElement.querySelector(`#slide-${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(K9),o.Y36(o.Lbi),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,vO,4),2&e){let s;o.iGM(s=o.CRH())&&(i.slides=s)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(e,i){1&e&&o.NdJ("keydown.arrowLeft",function(){return i.keyboard&&i.arrowLeft()})("keydown.arrowRight",function(){return i.keyboard&&i.arrowRight()})("mouseenter",function(){return i.mouseHover=!0})("mouseleave",function(){return i.mouseHover=!1})("focusin",function(){return i.focused=!0})("focusout",function(){return i.focused=!1}),2&e&&(o.uIk("aria-activedescendant","slide-"+i.activeId),o.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],decls:6,vars:6,consts:function(){let t,e,i;return t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous:Previous`,i=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],t,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],i]},template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,Sz,1,5,"button",1),o.qZA(),o.TgZ(2,"div",2),o.YNc(3,Nz,4,4,"div",3),o.qZA(),o.YNc(4,xz,4,0,"button",4),o.YNc(5,Mz,4,0,"button",5)),2&e&&(o.ekj("visually-hidden",!i.showNavigationIndicators),o.xp6(1),o.Q6J("ngForOf",i.slides),o.xp6(2),o.Q6J("ngForOf",i.slides),o.xp6(1),o.Q6J("ngIf",i.showNavigationArrows),o.xp6(1),o.Q6J("ngIf",i.showNavigationArrows))},dependencies:[bi,an,Is],encapsulation:2,changeDetection:0}),n})();var n_=(()=>(function(n){n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator"}(n_||(n_={})),n_))();let ZV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),J9=(()=>{class n{constructor(e){this._ngbConfig=e}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qV=(()=>{class n{constructor(e,i,r){this._element=e,this._zone=r,this.collapsed=!1,this.ngbCollapseChange=new o.vpe,this.shown=new o.vpe,this.hidden=new o.vpe,this.animation=i.animation}ngOnInit(){this._runTransition(this.collapsed,!1)}ngOnChanges({collapsed:e}){e.firstChange||this._runTransitionWithEvents(this.collapsed,this.animation)}toggle(e=this.collapsed){this.collapsed=!e,this.ngbCollapseChange.next(this.collapsed),this._runTransitionWithEvents(this.collapsed,this.animation)}_runTransition(e,i){return Vs(this._zone,this._element.nativeElement,gO,{animation:i,runningTransition:"stop",context:{direction:e?"hide":"show"}})}_runTransitionWithEvents(e,i){this._runTransition(e,i).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(J9),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbCollapse",""]],inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"]},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],features:[o.TTD]}),n})(),zV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var Ai=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Ai||(Ai={})),Ai))();const DS=(n,t)=>!!t&&t.some(e=>e.contains(n)),WV=(n,t)=>!t||null!=function L9(n,t){return!t||typeof n.closest>"u"?null:n.closest(t)}(n,t),rW=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function KV(n,t,e,i,r,s,c,h){e&&n.runOutsideAngular((n=>rW?()=>setTimeout(()=>n(),100):n)(()=>{const v=oo(t,"keydown").pipe(Vr(r),zn(N=>N.which===Ai.Escape),(0,Er.b)(N=>N.preventDefault())),w=oo(t,"mousedown").pipe((0,ht.U)(N=>{const O=N.target;return 2!==N.button&&!DS(O,c)&&("inside"===e?DS(O,s)&&WV(O,h):"outside"===e?!DS(O,s):WV(O,h)||!DS(O,s))}),Vr(r)),S=oo(t,"mouseup").pipe(PI(w),zn(([N,O])=>O),_V(0),Vr(r));pV([v.pipe((0,ht.U)(N=>0)),S.pipe((0,ht.U)(N=>1))]).subscribe(N=>n.run(()=>i(N)))}))}const YV=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function JV(n){const t=Array.from(n.querySelectorAll(YV)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}const aW=/\s+/,lW=/  +/gi,cW=/^start/,uW=/^end/,dW=/-(top|left)$/,hW=/-(bottom|right)$/,pW=/^left/,gW=/^right/,mW=/^start/,_W=/^end/;function QV({placement:n,baseClass:t}){let e=Array.isArray(n)?n:n.split(aW),r=e.findIndex(p=>"auto"===p);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(p){null==e.find(v=>-1!==v.search("^"+p))&&e.splice(r++,1,p)});const s=e.map(p=>function fW(n){return n.replace(cW,"left").replace(uW,"right").replace(dW,"-start").replace(hW,"-end")}(p));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:p}){const v=new RegExp(t+"(-[a-z]+)*","gi"),w=p.elements.popper,S=p.placement;let N=w.className;N=N.replace(v,""),N+=` ${function vW(n,t){let[e,i]=t.split("-");const r=e.replace(pW,"start").replace(gW,"end");let s=[r];if(i){let c=i;("left"===e||"right"===e)&&(c=c.replace(mW,"top").replace(_W,"bottom")),s.push(`${r}-${c}`)}return n&&(s=s.map(c=>`${n}-${c}`)),s.join(" ")}(t,S)}`,N=N.trim().replace(lW," "),w.className=N}},jq,Zq,Kq,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function XV(n){return n}function e3(){let n=null;return{createPopper(t){if(!n){let i=(t.updatePopperOptions||XV)(QV(t));n=mz(t.hostElement,t.targetElement,i)}},update(){n&&n.update()},setOptions(t){if(n){let i=(t.updatePopperOptions||XV)(QV(t));n.setOptions(i)}},destroy(){n&&(n.destroy(),n=null)}}}function t3(n){return t=>(t.modifiers.push(yz,{name:"offset",options:{offset:()=>n}}),t)}new Date(1882,10,12),new Date(2174,10,25);let l3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or,QS]}),n})(),SW=(()=>{class n{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),TO=(()=>{class n{constructor(e,i){this.elementRef=e,this._renderer=i,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(e,i){2&e&&(o.Ikx("tabIndex",i.disabled?-1:0),o.ekj("disabled",i.disabled))},inputs:{disabled:"disabled"}}),n})(),DO=(()=>{class n{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(o.Y36((0,o.Gpc)(()=>pC)),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,TO,4),2&e){let s;o.iGM(s=o.CRH())&&(i.menuItems=s)}},hostVars:4,hostBindings:function(e,i){1&e&&o.NdJ("keydown.ArrowUp",function(s){return i.dropdown.onKeyDown(s)})("keydown.ArrowDown",function(s){return i.dropdown.onKeyDown(s)})("keydown.Home",function(s){return i.dropdown.onKeyDown(s)})("keydown.End",function(s){return i.dropdown.onKeyDown(s)})("keydown.Enter",function(s){return i.dropdown.onKeyDown(s)})("keydown.Space",function(s){return i.dropdown.onKeyDown(s)})("keydown.Tab",function(s){return i.dropdown.onKeyDown(s)})("keydown.Shift.Tab",function(s){return i.dropdown.onKeyDown(s)}),2&e&&o.ekj("dropdown-menu",!0)("show",i.dropdown.isOpen())}}),n})(),AS=(()=>{class n{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(o.Y36((0,o.Gpc)(()=>pC)),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("aria-expanded",i.dropdown.isOpen())}}),n})(),c3=(()=>{class n extends AS{constructor(e,i){super(e,i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36((0,o.Gpc)(()=>pC)),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(s){return i.dropdown.onKeyDown(s)})("keydown.ArrowDown",function(s){return i.dropdown.onKeyDown(s)})("keydown.Home",function(s){return i.dropdown.onKeyDown(s)})("keydown.End",function(s){return i.dropdown.onKeyDown(s)})("keydown.Tab",function(s){return i.dropdown.onKeyDown(s)})("keydown.Shift.Tab",function(s){return i.dropdown.onKeyDown(s)}),2&e&&o.uIk("aria-expanded",i.dropdown.isOpen())},features:[o._Bn([{provide:AS,useExisting:(0,o.Gpc)(()=>n)}]),o.qOj]}),n})(),pC=(()=>{class n{constructor(e,i,r,s,c,h,p){this._changeDetector=e,this._document=r,this._ngZone=s,this._elementRef=c,this._renderer=h,this._destroyCloseHandlers$=new di.x,this._bodyContainer=null,this._positioning=e3(),this._open=!1,this.openChange=new o.vpe,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=p?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe(cr(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}e.autoClose&&this._open&&(this.autoClose=e.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:t3([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),KV(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let s=-1,c=null;const h=this._isEventFromToggle(e);if(!h&&r.length&&r.forEach((p,v)=>{p.contains(e.target)&&(c=p),p===this._document.activeElement&&(s=v)}),i!==Ai.Space&&i!==Ai.Enter){if(i!==Ai.Tab){if(h||c){if(this.open(),r.length){switch(i){case Ai.ArrowDown:s=Math.min(s+1,r.length-1);break;case Ai.ArrowUp:if(this._isDropup()&&-1===s){s=r.length-1;break}s=Math.max(s-1,0);break;case Ai.Home:s=0;break;case Ai.End:s=r.length-1}r[s].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const p=this._menu.nativeElement.querySelectorAll(YV);e.shiftKey&&e.target===p[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===p[p.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else oo(e.target,"focusout").pipe(cr(1)).subscribe(({relatedTarget:p})=>{this._elementRef.nativeElement.contains(p)||this.close()})}}else c&&(!0===this.autoClose||"inside"===this.autoClose)&&oo(c,"click").pipe(cr(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,s=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(s,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(s,"z-index","1055"),i.appendChild(s,r),i.appendChild(this._document.body,s)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,s=this._elementRef.nativeElement;r.removeClass(s,"dropup"),r.removeClass(s,"dropdown");const{nativeElement:c}=i;"static"===this.display?(i.placement=null,r.setAttribute(c,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(c,"data-bs-popper"));const h=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(s,h);const p=this._bodyContainer;p&&(r.removeClass(p,"dropup"),r.removeClass(p,"dropdown"),r.addClass(p,h))}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36(SW),o.Y36(me),o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(CO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,DO,5),o.Suo(r,AS,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._menu=s.first),o.iGM(s=o.CRH())&&(i._anchor=s.first)}},hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[o.TTD]}),n})(),u3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class s_{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}class AW{constructor(t,e,i,r,s,c){this._componentType=t,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=s,this._applicationRef=c,this._windowRef=null,this._contentRef=null}open(t,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,s=this._ngZone.onStable.pipe(cr(1),(0,ar.z)(()=>Vs(this._ngZone,r,({classList:c})=>c.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(t=!1){return this._windowRef?Vs(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:t,runningTransition:"stop"}).pipe((0,Er.b)(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):mt(void 0)}_getContentRef(t,e){if(t){if(t instanceof o.Rgc){const i=t.createEmbeddedView(e);return this._applicationRef.attachView(i),new s_([i.rootNodes],i)}return new s_([[this._renderer.createText(`${t}`)]])}return new s_([])}}let NW=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(cr(1)).subscribe(()=>{Vs(this._zone,this._el.nativeElement,(e,i)=>{i&&qy(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Vs(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(o.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),o.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class d3{close(t){}dismiss(t){}}class xW{constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new di.x,this._dismissed=new di.x,this._hidden=new di.x,t.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Vr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Vr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function PV(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():mt(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),_S(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var gC=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(gC||(gC={})),gC))();let MW=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new di.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new o.vpe,this.shown=new di.x,this.hidden=new di.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":fO(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(cr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},c=_S(Vs(this._zone,e,()=>e.classList.remove("show"),i),Vs(this._zone,this._dialogEl.nativeElement,()=>{},i));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const e={animation:this.animation,runningTransition:"continue"};_S(Vs(this._zone,this._elRef.nativeElement,(s,c)=>{c&&qy(s),s.classList.add("show")},e),Vs(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{oo(e,"keydown").pipe(Vr(this._closed$),zn(r=>r.which===Ai.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(gC.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;oo(this._dialogEl.nativeElement,"mousedown").pipe(Vr(this._closed$),(0,Er.b)(()=>i=!1),Ti(()=>oo(e,"mouseup").pipe(Vr(this._closed$),cr(1))),zn(({target:r})=>e===r)).subscribe(()=>{i=!0}),oo(e,"click").pipe(Vr(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(gC.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=JV(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Vs(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(me),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&o.Gf($z,7),2&e){let r;o.iGM(r=o.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),o.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),o.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:OV,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0,1)(2,"div",2),o.Hsn(3),o.qZA()()),2&e&&o.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),RW=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:c}=r;if(e>0){const h=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${h+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=c),r.overflow=s}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kW=(()=>{class n{constructor(e,i,r,s,c,h){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=s,this._rendererFactory=c,this._ngZone=h,this._activeWindowCmptHasChanged=new di.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new o.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const p=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=oo(t,"focusin").pipe(Vr(e),(0,ht.U)(s=>s.target));oo(t,"keydown").pipe(Vr(e),zn(s=>s.which===Ai.Tab),PI(r)).subscribe(([s,c])=>{const[h,p]=JV(t);(c===h||c===t)&&s.shiftKey&&(p.focus(),s.preventDefault()),c===p&&!s.shiftKey&&(h.focus(),s.preventDefault())}),i&&oo(t,"click").pipe(Vr(e),PI(r),(0,ht.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,p.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(p.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const s=r.container instanceof HTMLElement?r.container:t_(r.container)?this._document.querySelector(r.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const h=new d3,p=this._getContentRef(r.injector||e,i,h,r);let v=!1!==r.backdrop?this._attachBackdrop(s):void 0,w=this._attachWindowComponent(s,p.nodes),S=new xW(w,p,v,r.beforeDismiss);return this._registerModalRef(S),this._registerWindowCmpt(w),S.hidden.pipe(cr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),h.close=N=>{S.close(N)},h.dismiss=N=>{S.dismiss(N)},this._applyWindowOptions(w.instance,r),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),v&&v.instance&&(this._applyBackdropOptions(v.instance,r),v.changeDetectorRef.detectChanges()),w.changeDetectorRef.detectChanges(),S}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=(0,o.LMc)(NW,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=(0,o.LMc)(MW,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{t_(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{t_(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,s){return i?i instanceof o.Rgc?this._createFromTemplateRef(i,r):fO(i)?this._createFromString(i):this._createFromComponent(e,i,r,s):new s_([])}_createFromTemplateRef(e,i){const s=e.createEmbeddedView({$implicit:i,close(c){i.close(c)},dismiss(c){i.dismiss(c)}});return this._applicationRef.attachView(s),new s_([s.rootNodes],s)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new s_([[i]])}_createFromComponent(e,i,r,s){const c=o.zs3.create({providers:[{provide:d3,useValue:r}],parent:e}),h=(0,o.LMc)(i,{environmentInjector:this._applicationRef.injector,elementInjector:c}),p=h.location.nativeElement;return s.scrollable&&p.classList.add("component-host-scrollable"),this._applicationRef.attachView(h.hostView),new s_([[p]],h.hostView,h)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.z2F),o.LFG(o.zs3),o.LFG(me),o.LFG(RW),o.LFG(o.FYo),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OW=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PW=(()=>{class n{constructor(e,i,r){this._injector=e,this._modalStack=i,this._config=r}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(kW),o.LFG(OW))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),h3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[PW]}),n})(),m3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),D3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})();class jW{constructor(t,e){this.open=t,this.close=e,e||(this.close=t)}isManual(){return"manual"===this.open||"manual"===this.close}}const HW={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},E3=n=>n>0?_V(n):t=>t;let zW=(()=>{class n{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WW=0,KW=(()=>{class n{isTitleTemplate(){return this.title instanceof o.Rgc}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(o.Ikx("id",i.id),o.Tol("popover"+(i.popoverClass?" "+i.popoverClass:"")),o.ekj("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:OV,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.F$t(),o._UZ(0,"div",0),o.YNc(1,D9,4,2,"h3",1),o.TgZ(2,"div",2),o.Hsn(3),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.title))},dependencies:[an,Is],encapsulation:2,changeDetection:0}),n})(),I3=(()=>{class n{constructor(e,i,r,s,c,h,p,v,w){this._elementRef=e,this._renderer=i,this._ngZone=h,this._document=p,this._changeDetector=v,this.shown=new o.vpe,this.hidden=new o.vpe,this._ngbPopoverWindowId="ngb-popover-"+WW++,this._windowRef=null,this._positioning=e3(),this.animation=c.animation,this.autoClose=c.autoClose,this.placement=c.placement,this.triggers=c.triggers,this.container=c.container,this.disablePopover=c.disablePopover,this.popoverClass=c.popoverClass,this.openDelay=c.openDelay,this.closeDelay=c.closeDelay,this._popupService=new AW(KW,r,s,i,this._ngZone,w)}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",e),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:t3([0,8])}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),KV(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(e=this.animation){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(e).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function qW(n,t,e,i,r,s,c=0,h=0){const p=function GW(n,t=HW){const e=(n||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(s=>s.split(":")).map(s=>{let c=t[s[0]]||s;return new jW(c[0],c[1])}),r=i.filter(s=>s.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===p.length&&p[0].isManual())return()=>{};const v=function $W(n,t,e,i){return new Bn.y(r=>{const s=[],c=()=>r.next(!0),h=()=>r.next(!1),p=()=>r.next(!i());return e.forEach(v=>{v.open===v.close?s.push(n.listen(t,v.open,p)):s.push(n.listen(t,v.open,c),n.listen(t,v.close,h))}),()=>{s.forEach(v=>v())}})}(n,t,p,i).pipe(function ZW(n,t,e){return i=>{let r=null;const s=i.pipe((0,ht.U)(p=>({open:p})),zn(p=>{const v=e();return v===p.open||r&&r.open!==v?(r&&r.open!==p.open&&(r=null),!1):(r=p,!0)}),(0,fR.B)()),c=s.pipe(zn(p=>p.open),E3(n)),h=s.pipe(zn(p=>!p.open),E3(t));return(0,CI.T)(c,h).pipe(zn(p=>p===r&&(r=null,p.open!==e())),(0,ht.U)(p=>p.open))}}(c,h,i)).subscribe(w=>w?r():s());return()=>v.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:s}){s&&this.isOpen()&&(this._windowRef.instance.popoverClass=s.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.zs3),o.Y36(o.s_b),o.Y36(zW),o.Y36(o.R0b),o.Y36(me),o.Y36(o.sBO),o.Y36(o.z2F))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[o.TTD]}),n})(),S3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),A3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),YW=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JW=(()=>{class n{constructor(e,i){this._changeDetectorRef=i,this.contexts=[],this.disabled=!1,this.hover=new o.vpe,this.leave=new o.vpe,this.rateChange=new o.vpe(!0),this.onChange=r=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case Ai.ArrowDown:case Ai.ArrowLeft:this.update(this.rate-1);break;case Ai.ArrowUp:case Ai.ArrowRight:this.update(this.rate+1);break;case Ai.Home:this.update(0);break;case Ai.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate),e.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,i=!0){const r=hO(e,this.max,0);this.isInteractive()&&this.rate!==r&&(this.rate=r,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((i,r)=>i.fill=Math.round(100*hO(e-r,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(e,i)=>({fill:0,index:i}))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(YW),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,o.Rgc,5),2&e){let s;o.iGM(s=o.CRH())&&(i.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,i){1&e&&o.NdJ("blur",function(){return i.handleBlur()})("keydown",function(s){return i.handleKeyDown(s)})("mouseleave",function(){return i.reset()}),2&e&&(o.Ikx("tabindex",i.disabled?-1:0),o.uIk("aria-valuemax",i.max)("aria-valuenow",i.nextRate)("aria-valuetext",i.ariaValueText())("aria-disabled",!!i.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[o._Bn([{provide:wr,useExisting:(0,o.Gpc)(()=>n),multi:!0}]),o.TTD],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.YNc(0,E9,1,1,"ng-template",null,0,o.W1O),o.YNc(2,S9,4,5,"ng-template",1)),2&e&&(o.xp6(2),o.Q6J("ngForOf",i.contexts))},dependencies:[bi,Is],encapsulation:2,changeDetection:0}),n})(),N3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),x3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),M3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),R3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();new o.OlP("live announcer delay",{providedIn:"root",factory:function e7(){return 100}});let k3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Or]}),n})(),O3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const t7=[jV,HV,ZV,zV,l3,u3,h3,m3,O3,D3,S3,A3,N3,x3,M3,R3,k3];let n7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[t7,jV,HV,ZV,zV,l3,u3,h3,m3,O3,D3,S3,A3,N3,x3,M3,R3,k3]}),n})();function i7(n,t){if(1&n&&(o.TgZ(0,"div",2),o._UZ(1,"div",3),o.TgZ(2,"h6",4),o._uU(3),o.qZA()()),2&n){const e=o.oxw();o.xp6(3),o.hij(" LOADING MOVIES (",e.ms.popularMovies.length,")")}}function r7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",16),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw(2).$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function s7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",17),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw(2).$implicit;o.MGl("routerLink","/movie/",e.id,""),o.Q6J("src",e.base_url+"original"+e.backdrop_path,o.LSH)}}function o7(n,t){if(1&n&&(o.TgZ(0,"div",18)(1,"h3"),o._uU(2),o.qZA(),o.TgZ(3,"p",19),o._uU(4),o.qZA()()),2&n){const e=o.oxw(2).$implicit;o.xp6(2),o.Oqu(e.title),o.xp6(2),o.Oqu(e.overview)}}function a7(n,t){if(1&n&&(o.TgZ(0,"div",12),o.YNc(1,r7,1,1,"img",13),o.YNc(2,s7,1,2,"img",14),o.qZA(),o.YNc(3,o7,5,2,"div",15)),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",e.backdrop_loading),o.xp6(1),o.Q6J("ngIf",!e.backdrop_loading),o.xp6(1),o.Q6J("ngIf",!e.backdrop_loading)}}function l7(n,t){1&n&&o.YNc(0,a7,4,3,"ng-template",11)}function c7(n,t){1&n&&o._UZ(0,"img",23)}function u7(n,t){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,c7,1,0,"img",22),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",e.poster_loading)}}function d7(n,t){1&n&&o._UZ(0,"img",23)}function h7(n,t){if(1&n&&o._UZ(0,"img",25),2&n){const e=o.oxw(2).$implicit;o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function f7(n,t){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,d7,1,0,"img",22),o.YNc(2,h7,1,1,"img",24),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function p7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",20),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.ms.cMovie=s)}),o.YNc(1,u7,2,1,"div",21),o.YNc(2,f7,3,2,"div",21),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(1),o.Q6J("ngIf",!e.loading)}}function g7(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"h4",5),o._uU(2,"Popular movies"),o.qZA(),o._UZ(3,"div",6),o.TgZ(4,"div",7)(5,"ngb-carousel"),o.YNc(6,l7,1,0,null,8),o.ALo(7,"slice"),o.qZA()(),o._UZ(8,"div",6),o.TgZ(9,"div",9),o.YNc(10,p7,3,3,"div",10),o.ALo(11,"slice"),o.qZA()()),2&n){const e=o.oxw();o.xp6(6),o.Q6J("ngForOf",o.Dn7(7,2,e.ms.popularMovies,0,5)),o.xp6(4),o.Q6J("ngForOf",o.Dn7(11,6,e.ms.popularMovies,5,17))}}function m7(n,t){if(1&n&&(o.TgZ(0,"div",2),o._UZ(1,"div",3),o.TgZ(2,"h6",4),o._uU(3),o.qZA()()),2&n){const e=o.oxw();o.xp6(3),o.hij(" LOADING MOVIES (",e.ms.trendingMovies.length,")")}}function _7(n,t){1&n&&o._UZ(0,"img",23)}function v7(n,t){if(1&n&&o._UZ(0,"img",25),2&n){const e=o.oxw().$implicit;o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function y7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",27),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.ms.cMovie=s)}),o.YNc(1,_7,1,0,"img",22),o.YNc(2,v7,1,1,"img",24),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function b7(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"h4",5),o._uU(2,"Trending movies"),o.qZA(),o.YNc(3,y7,3,3,"div",26),o.ALo(4,"slice"),o.qZA()),2&n){const e=o.oxw();o.xp6(3),o.Q6J("ngForOf",o.Dn7(4,1,e.ms.trendingMovies,0,4))}}function w7(n,t){if(1&n&&(o.TgZ(0,"div",2),o._UZ(1,"div",3),o.TgZ(2,"h6",4),o._uU(3),o.qZA()()),2&n){const e=o.oxw();o.xp6(3),o.hij(" LOADING MOVIES (",e.ms.topRatedMovies.length,")")}}function C7(n,t){1&n&&o._UZ(0,"img",23)}function T7(n,t){if(1&n&&o._UZ(0,"img",25),2&n){const e=o.oxw().$implicit;o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function D7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",29),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.ms.cMovie=s)}),o.YNc(1,C7,1,0,"img",22),o.YNc(2,T7,1,1,"img",24),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function E7(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"h4",5),o._uU(2,"Top rated movies"),o.qZA(),o.YNc(3,D7,3,3,"div",28),o.ALo(4,"slice"),o.qZA()),2&n){const e=o.oxw();o.xp6(3),o.Q6J("ngForOf",o.Dn7(4,1,e.ms.topRatedMovies,0,20))}}let P3=(()=>{class n{constructor(e,i,r){this.hs=e,this.ms=i,this.tmdb=r,this.title="Home",this.debug=!0}ngOnInit(){this.ms.loadHomeMovies()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(XT),o.Y36(Ic),o.Y36(ts))},n.\u0275cmp=o.Xpm({type:n,selectors:[["home-component"]],decls:7,vars:6,consts:[[1,"container-fluid"],["class","row mb-4",4,"ngIf"],[1,"row","mb-4"],[1,"col-w100","p-4","m-4"],[1,"col-auto","mx-auto","align-middle"],[1,"col-12"],[1,"d-none","d-sm-none","d-md-none","d-lg-none","d-xl-none"],[1,"col-12","col-sm-12","col-md-8","col-lg-8","m-auto"],[4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-4","col-lg-4","m-auto"],["class","col-4 col-sm-3 col-md-3 col-lg-3 btn p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],["ngbSlide",""],[1,"picsum-img-wrapper"],["class","btn img-fluid rounded p-0 m-0","src","https://via.placeholder.com/1280x720?text=LOADING",3,"routerLink","click",4,"ngIf"],["class","btn img-fluid rounded p-0 m-0",3,"src","routerLink","click",4,"ngIf"],["class","carousel-caption",4,"ngIf"],["src","https://via.placeholder.com/1280x720?text=LOADING",1,"btn","img-fluid","rounded","p-0","m-0",3,"routerLink","click"],[1,"btn","img-fluid","rounded","p-0","m-0",3,"src","routerLink","click"],[1,"carousel-caption"],[1,"d-none","d-sm-none","d-md-none","d-lg-none","d-xl-block"],[1,"col-4","col-sm-3","col-md-3","col-lg-3","btn","p-0","m-0",3,"routerLink","click"],[4,"ngIf"],["class","img-fluid rounded p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING",4,"ngIf"],["src","https://via.placeholder.com/200x300?text=LOADING",1,"img-fluid","rounded","p-0","m-0"],["class","img-fluid rounded p-0 m-0",3,"src",4,"ngIf"],[1,"img-fluid","rounded","p-0","m-0",3,"src"],["class","col-6 col-sm-3 btn p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"col-6","col-sm-3","btn","p-0","m-0",3,"routerLink","click"],["class","col-4 col-sm-3 col-md-2 col-lg-2 btn p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"col-4","col-sm-3","col-md-2","col-lg-2","btn","p-0","m-0",3,"routerLink","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,i7,4,1,"div",1),o.YNc(2,g7,12,10,"div",1),o.YNc(3,m7,4,1,"div",1),o.YNc(4,b7,5,5,"div",1),o.YNc(5,w7,4,1,"div",1),o.YNc(6,E7,5,5,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",!i.ms.popularMovies),o.xp6(1),o.Q6J("ngIf",i.ms.popularMovies),o.xp6(1),o.Q6J("ngIf",!i.ms.trendingMovies),o.xp6(1),o.Q6J("ngIf",i.ms.trendingMovies),o.xp6(1),o.Q6J("ngIf",!i.ms.topRatedMovies),o.xp6(1),o.Q6J("ngIf",i.ms.topRatedMovies))},dependencies:[ms,$V,vO,bi,an,bl],encapsulation:2}),n})(),NS=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class I7{constructor(t){this.options=[],this.show=!1,this.disabled=!1,this.active=!1,this.genres=[],this.keywords=[],this.votes=[],this.runtimes=[],this.providers=[],this.min=0,this.max=10,this.debug=!1,this.show=!0,this.id=t.id,this.type=t.type,this.ms=t.ms,this.filterIsAdd=t.filterIsAdd,this.add(),this.debug&&console.log(this)}reset(){this.min=0,this.max=10;for(const t of this.options)t.active=!1;this.genres=[],this.keywords=[],this.votes=[],this.runtimes=[],this.providers=[],this.options=[],this.show=!1,this.active=!1,this.add()}update(){}add(){let t,e,i;("genre"==this.type||"keyword"==this.type)&&(t=this.type+"s",e=this.type+"s",i="name"),"provider"==this.type&&(t=this.type+"s",e="flatrate",i="provider_name"),this[t]=[],this.options=[];for(const c of this.ms.aMovies)if(this.isIterable(c[e]))for(const h of c[e])this[t].push(h);const r=i,s=[...new Map(this[t].map(c=>[c[r],c])).values()];this[t]=s,this.sortArrayBy(this[t],i,!1);for(const c of this[t])this.options.push(c)}sortArrayBy(t,e,i){t.sort((r,s)=>{if(r[e]<s[e]){let c=-1;return i&&(c=1),c}if(r[e]>s[e]){let c=1;return i&&(c=-1),c}return 0})}isIterable(t){return null!=t&&"function"==typeof t[Symbol.iterator]}}function S7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",19),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.isCollapsed=!r.isCollapsed)}),o._uU(1,"Filters "),o.TgZ(2,"small"),o._uU(3,"\u25b3"),o.qZA()()}}function A7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",19),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.isCollapsed=!r.isCollapsed)}),o._uU(1,"Hide [x]"),o.qZA()}}function N7(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function x7(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.title)}}function M7(n,t){if(1&n&&(o.TgZ(0,"button",27),o.YNc(1,N7,2,0,"div",28),o.YNc(2,x7,2,1,"div",28),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title),o.xp6(1),o.Q6J("ngIf","Saved"!=e.title)}}function R7(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,M7,3,2,"button",26),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.show)}}function k7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",29),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.clearAll())}),o._uU(1," Clear all "),o.qZA()}}function O7(n,t){1&n&&(o.TgZ(0,"button",30),o._uU(1," Clear all "),o.qZA())}function P7(n,t){if(1&n&&(o.TgZ(0,"div",20),o.YNc(1,R7,2,1,"div",21),o.TgZ(2,"div",22),o.YNc(3,k7,2,0,"button",23),o.YNc(4,O7,2,0,"button",24),o.qZA()()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.ms.aLists),o.xp6(2),o.Q6J("ngIf",e.ms.cLists.length>0&&e.ms.cMovies.length>0&&"Saved"!=e.ms.cLists[0].title||e.ms.cLists.length>0&&e.ms.cMovies.length>0&&e.cFilters.length>0),o.xp6(1),o.Q6J("ngIf",e.ms.cLists.length<1&&e.ms.cMovies.length<1&&e.cFilters.length<1)}}function F7(n,t){if(1&n&&(o.TgZ(0,"div",25),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("",e.type,"s")}}function L7(n,t){if(1&n&&(o.TgZ(0,"button",27),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij(" ",e.name," ")}}function U7(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,L7,2,1,"button",26),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.active)}}function B7(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,F7,2,1,"div",31),o.YNc(2,U7,2,1,"div",21),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.filterIsAdd),o.xp6(1),o.Q6J("ngForOf",e.options)}}function V7(n,t){if(1&n&&(o.TgZ(0,"div",20),o.YNc(1,B7,3,2,"div",21),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.cFilters)}}function j7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.clearAll())}),o._uU(1," Clear all "),o.qZA()}}function H7(n,t){1&n&&(o.TgZ(0,"button",34),o._uU(1," Clear all "),o.qZA())}function G7(n,t){if(1&n&&(o.TgZ(0,"div",32)(1,"div",2)(2,"h4"),o._uU(3," Filters "),o.qZA()(),o.TgZ(4,"div",2),o.YNc(5,j7,2,0,"button",12),o.YNc(6,H7,2,0,"button",13),o.qZA()()),2&n){const e=o.oxw();o.xp6(5),o.Q6J("ngIf",e.ms.cLists.length>0&&e.ms.cMovies.length>0&&"Saved"!=e.ms.cLists[0].title||e.ms.cLists.length>0&&e.ms.cMovies.length>0&&e.cFilters.length>0),o.xp6(1),o.Q6J("ngIf",1==e.ms.cLists.length&&"Saved"==e.ms.cLists[0].title&&e.cFilters.length<1)}}function $7(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function Z7(n,t){if(1&n&&(o.TgZ(0,"button",38),o.YNc(1,$7,2,0,"div",28),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title)}}function q7(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function z7(n,t){if(1&n&&(o.TgZ(0,"button",39),o.YNc(1,q7,2,0,"div",28),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title)}}function W7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",35),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.addList(s))}),o.YNc(1,Z7,2,1,"button",36),o.YNc(2,z7,2,1,"button",37),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.show&&"Saved"==e.title),o.xp6(1),o.Q6J("ngIf",!e.show&&"Saved"==e.title)}}function K7(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function Y7(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.title)}}function J7(n,t){if(1&n&&(o.TgZ(0,"button",41),o.YNc(1,K7,2,0,"div",28),o.YNc(2,Y7,2,1,"div",28),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title),o.xp6(1),o.Q6J("ngIf","Saved"!=e.title)}}function Q7(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function X7(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.title)}}function eK(n,t){if(1&n&&(o.TgZ(0,"button",39),o.YNc(1,Q7,2,0,"div",28),o.YNc(2,X7,2,1,"div",28),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title),o.xp6(1),o.Q6J("ngIf","Saved"!=e.title)}}function tK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",35),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.addList(s))}),o.YNc(1,J7,3,2,"button",40),o.YNc(2,eK,3,2,"button",37),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.show&&"Saved"!=e.title),o.xp6(1),o.Q6J("ngIf",!e.show&&"Saved"!=e.title)}}function nK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clearLists())}),o._uU(1," Clear movies "),o.qZA()}}function iK(n,t){1&n&&(o.TgZ(0,"button",34),o._uU(1," Clear movies "),o.qZA())}function rK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.removeFilter(r))}),o._uU(2," Remove filter "),o.qZA()()}}function sK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",48),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw().$implicit,c=o.oxw();return o.KtG(c.chooseFilter(s,r))}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij(" ",e.type," ")}}function oK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",49),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw().$implicit,c=o.oxw();return o.KtG(c.chooseFilter(s,r))}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij(" ",e.type," ")}}function aK(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,sK,2,1,"button",46),o.YNc(2,oK,2,1,"button",47),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.active),o.xp6(1),o.Q6J("ngIf",!e.active)}}function lK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.clearFilter(r))}),o._uU(1," Clear filter "),o.qZA()}}function cK(n,t){1&n&&(o.TgZ(0,"button",34),o._uU(1," Clear filter "),o.qZA())}function uK(n,t){1&n&&(o.TgZ(0,"div",25)(1,"button",53)(2,"div"),o._uU(3,"All"),o.qZA()()())}function dK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",11)(1,"button",54),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(3).$implicit,s=o.oxw();return o.KtG(s.navOptions(r,"-"))}),o._uU(2," Prev "),o.qZA()()}}function hK(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",e.name," ")}}function fK(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",e.provider_name," ")}}function pK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",48),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(3).$implicit,c=o.oxw();return o.KtG(c.addFilterOption(s.activeFilter,r))}),o.YNc(1,hK,2,1,"div",28),o.YNc(2,fK,2,1,"div",28),o.qZA()}if(2&n){const e=o.oxw(4).$implicit;o.xp6(1),o.Q6J("ngIf","provider"!=e.activeFilter.type),o.xp6(1),o.Q6J("ngIf","provider"==e.activeFilter.type)}}function gK(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",e.name," ")}}function mK(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",e.provider_name," ")}}function _K(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",49),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(3).$implicit,c=o.oxw();return o.KtG(c.addFilterOption(s.activeFilter,r))}),o.YNc(1,gK,2,1,"div",28),o.YNc(2,mK,2,1,"div",28),o.qZA()}if(2&n){const e=o.oxw(4).$implicit;o.xp6(1),o.Q6J("ngIf","provider"!=e.activeFilter.type),o.xp6(1),o.Q6J("ngIf","provider"==e.activeFilter.type)}}function vK(n,t){if(1&n&&(o.TgZ(0,"div",55),o.YNc(1,pK,3,2,"button",46),o.YNc(2,_K,3,2,"button",47),o.qZA()),2&n){const e=t.$implicit,i=t.index,r=o.oxw(3).$implicit;o.xp6(1),o.Q6J("ngIf",e.active&&i<r.activeFilter.max&&i>r.activeFilter.min),o.xp6(1),o.Q6J("ngIf",!e.active&&i<r.activeFilter.max&&i>r.activeFilter.min)}}function yK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",11)(1,"button",54),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(3).$implicit,s=o.oxw();return o.KtG(s.navOptions(r,"+"))}),o._uU(2," Next "),o.qZA()()}}function bK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(3).$implicit,s=o.oxw();return o.KtG(s.clearOptions(r))}),o._uU(1," Clear options "),o.qZA()}}function wK(n,t){1&n&&(o.TgZ(0,"button",34),o._uU(1," Clear options "),o.qZA())}function CK(n,t){if(1&n&&(o.TgZ(0,"div",43)(1,"h6",50),o._uU(2," Choose options "),o.TgZ(3,"small"),o._uU(4),o.qZA()(),o._UZ(5,"div",9),o.YNc(6,uK,4,0,"div",31),o.YNc(7,dK,3,0,"div",51),o.YNc(8,vK,3,2,"div",52),o.YNc(9,yK,3,0,"div",51),o.TgZ(10,"div",11),o.YNc(11,bK,2,0,"button",12),o.YNc(12,wK,2,0,"button",13),o.qZA()()),2&n){const e=o.oxw(2).$implicit,i=o.oxw();o.xp6(4),o.hij("(",e.activeFilter.options.length,")"),o.xp6(2),o.Q6J("ngIf",i.filters[0]),o.xp6(1),o.Q6J("ngIf",e.activeFilter.options.length>=e.activeFilter.max&&e.activeFilter.min>0),o.xp6(1),o.Q6J("ngForOf",e.activeFilter.options),o.xp6(1),o.Q6J("ngIf",e.activeFilter.max<e.activeFilter.options.length),o.xp6(2),o.Q6J("ngIf",e.activeFilter.active),o.xp6(1),o.Q6J("ngIf",!e.activeFilter.active)}}function TK(n,t){if(1&n&&(o.TgZ(0,"div",43),o.YNc(1,CK,13,7,"div",45),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",e.activeFilter.options)}}function DK(n,t){if(1&n&&(o.TgZ(0,"div",7)(1,"h6",42),o._uU(2," Choose filter"),o.qZA(),o.YNc(3,rK,3,0,"div",18),o._UZ(4,"div",9),o.TgZ(5,"div",2)(6,"div",43),o.YNc(7,aK,3,2,"div",21),o.TgZ(8,"div",44),o.YNc(9,lK,2,0,"button",12),o.YNc(10,cK,2,0,"button",13),o.qZA()(),o.YNc(11,TK,2,1,"div",45),o.qZA()()),2&n){const e=t.$implicit,i=t.index,r=o.oxw();o.Q6J("ngbCollapse",r.isCollapsed),o.xp6(3),o.Q6J("ngIf",i>0),o.xp6(4),o.Q6J("ngForOf",e.filters),o.xp6(2),o.Q6J("ngIf",e.active),o.xp6(1),o.Q6J("ngIf",!e.active),o.xp6(1),o.Q6J("ngIf",e.activeFilter)}}function EK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",58),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.addFilter())}),o._uU(1," New filter "),o.qZA()}}function IK(n,t){1&n&&(o.TgZ(0,"button",59),o._uU(1," New filter "),o.qZA())}function SK(n,t){if(1&n&&(o.TgZ(0,"div",2),o.YNc(1,EK,2,0,"button",56),o.YNc(2,IK,2,0,"button",57),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.filters.length>0),o.xp6(1),o.Q6J("ngIf",e.filters.length<1)}}let AK=(()=>{class n{constructor(e,i){this.tmdb=e,this.ms=i,this.title="Filter",this.debug=!1,this.filters=[],this.cFiltersList=[],this.cFilters=[],this.sortBy="title",this.sortReverse=!1,this.isCollapsed=!0,this.show=!0,this.showGenreFilter=!1,this.filterIsAdd=!0,this.debug&&console.log("FilterComponent()"),this.filters=this.createBaseFilters()}ngOnInit(){this.ms.cMovies?this.setLocalStorage():localStorage.getItem("cMovies")}setLocalStorage(){localStorage.removeItem("cMovies"),localStorage.removeItem("cLists"),localStorage.removeItem("cFilters");let e="";for(let i=0;i<this.ms.cMovies.length;i++)e+=this.ms.cMovies[i].id,i<this.ms.cMovies.length-1&&(e+=",");localStorage.setItem("cMovies",e)}createBaseFilters(){let e=[],i=["genre","keyword","provider","runtime","vote"];for(const s of i){let c={id:"",type:s,options:[],show:!0,active:!1,filterIsAdd:!0,genres:[],keywords:[],votes:[],runtimes:[],providers:[],min:0,max:20,ms:this.ms};c.id=this.createUniqeId(this.filters);let h=new I7(c);e.push(h)}let r={id:"",filters:e,show:!0,active:!1};return r.id=this.createUniqeId(this.cFiltersList),this.cFiltersList.push(r),e}removeFilter(e){this.debug&&console.log("removeFilter"),this.clearFilter(e);let i=this.findIndex(this.cFiltersList,e);this.cFiltersList.splice(i,1)}addFilter(){let e=this.createBaseFilters();for(const i of e);}chooseFilter(e,i){console.log("chooseFilter");let r=this.findIndex(this.cFiltersList,e);if(-1!=r){this.debug&&console.log(r);let c=this.cFiltersList[r];c.active=!0,c.activeFilter=i;for(const h of c.filters)h.active=!1;i.active=!i.active,i.update(),this.cFilter=i}-1==this.findIndex(this.cFilters,i)&&this.cFilters.push(i),this.debug&&console.log(this.cFilter)}addFilterOption(e,i){this.debug&&console.log("add option"),i.active=!i.active,console.log(e),console.log(i),this.correctFilters(),this.correctMovies()}navOptions(e,i){this.debug&&console.log(i);let r=10;"+"==i&&e.activeFilter.max<=e.activeFilter.options.length&&(e.activeFilter.min+=r,e.activeFilter.max+=r),"-"==i&&e.activeFilter.min>=0&&(e.activeFilter.min-=r,e.activeFilter.max+=r),e.activeFilter.min<0&&(e.activeFilter.min=0,e.activeFilter.max=r),e.activeFilter.max>e.activeFilter.options.length&&(e.activeFilter.max=e.activeFilter.options.length,e.activeFilter.min=e.activeFilter.options.length-r)}addList(e){if(e.show=!e.show,e.show&&"Saved"==e.title){for(const i of this.ms.aLists)i.show=!1;e.show=!0}if(e.show&&"Saved"!=e.title)for(const i of this.ms.aLists)"Saved"==i.title&&(i.show=!1);this.debug&&console.log(e),this.debug&&console.log(this.ms.cLists),this.correctLists(),this.correctMovies(),this.correctFilters()}correctFilters(){for(const e of this.cFiltersList)for(const i of e.filters)i.update()}updateFilters(){for(const e of this.cFiltersList)for(const i of e.filters)i.update()}correctLists(){this.ms.cLists=[];for(const i of this.ms.aLists)i.show&&this.ms.cLists.push(i);this.ms.cLists.length<1&&this.clearLists();let e=[...new Set(this.ms.cLists)];this.ms.cLists=e,this.sortArrayBy(this.ms.cLists,this.sortBy,this.sortReverse),this.setLocalStorage(),this.debug&&console.log("cLists"),this.debug&&console.log(this.ms.cLists)}correctMovies(){this.ms.cMovies=[];for(const v of this.ms.aMovies);for(const v of this.ms.cLists)if(v.show)for(const w of v.movies)this.ms.cMovies.push(w);this.debug&&console.log("cMovies BEFORE FILTERS"),this.debug&&console.log(this.ms.cMovies);let e=[],i=[],r=[],s=[],c=[];this.cFilters=[];for(const v of this.cFiltersList){let w=S=>{for(const N of S.activeFilter.options)N.active&&("genre"==v.activeFilter.type&&e.push(N),"keyword"==v.activeFilter.type&&i.push(N),"vote"==v.activeFilter.type&&r.push(N),"runtime"==v.activeFilter.type&&s.push(N),"provider"==v.activeFilter.type&&c.push(N))};v.activeFilter&&(this.cFilters.push(v.activeFilter),w(v))}this.debug&&console.log("ACTIVE FILTERS"),this.debug&&console.log(e),this.debug&&console.log(i),this.debug&&console.log(r),this.debug&&console.log(s),this.debug&&console.log(c);let h=[];for(const v of this.ms.cMovies)for(const w of this.cFilters){let S=[],N=[],O="";"genre"==w.type&&(S=e,N=v.genres,O="id"),"keyword"==w.type&&(S=i,N=v.keywords,O="id"),"provider"==w.type&&(S=c,N=v.flatrate,O="provider_id"),this.isIterable(N)||(N=[]);for(let G of N)for(let J of S)J[O]==G[O]&&h.push(v)}this.debug&&console.log("tMovies"),this.debug&&console.log(h),(e.length>0||i.length>0||r.length>0||s.length>0||c.length>0)&&h.length>0&&(this.ms.cMovies=h);let p=[...new Set(this.ms.cMovies)];this.ms.cMovies=p,this.sortArrayBy(this.ms.cMovies,this.sortBy,this.sortReverse),this.setLocalStorage(),this.debug&&console.log("cLists"),this.debug&&console.log(this.ms.cLists),this.debug&&console.log("cMovies"),this.debug&&console.log(this.ms.cMovies)}clearLists(){localStorage.removeItem("cMovies"),localStorage.removeItem("cLists"),this.ms.aLists.forEach(e=>{e.show=!1}),this.ms.aMovies.forEach(e=>{e.show=!1}),this.ms.cMovies=[],this.ms.cLists=[];for(const e of this.ms.aLists)"Saved"==e.title&&(e.show=!0,this.ms.cLists.push(e));this.correctLists(),this.correctMovies(),this.updateFilters()}clearFilters(){for(const e of this.cFiltersList){e.active=!1,e.show=!1;for(const i of e.filters){i.active=!1,i.show=!1;for(const r of i.options)r.active=!1,r.show=!1}}for(const e of this.cFilters){e.active=!1,e.show=!1;for(const i of e.options)i.active=!1,i.show=!1}for(const e of this.filters){e.active=!1,e.show=!1;for(const i of e.options)i.active=!1,i.show=!1}this.ms.cMovies=[],this.cFiltersList=[],this.cFilters=[],this.cFilter=void 0,this.createBaseFilters(),this.correctLists(),this.correctMovies(),this.updateFilters()}clearFilter(e){e.active=!1,e.activeFilter=void 0;for(const i of e.filters){i.active=!1;for(const r of i.options)r.active=!1}this.ms.cMovies=[],this.cFilter=void 0,this.correctLists(),this.correctMovies(),this.updateFilters()}clearOptions(e){localStorage.removeItem("cMovies"),localStorage.removeItem("cFilters"),localStorage.removeItem("cOptions");for(const i of e.activeFilter.options)i.active=!1;this.correctLists(),this.correctMovies(),this.updateFilters()}clearAll(){this.clearFilters(),this.clearLists(),localStorage.removeItem("cMovies"),localStorage.removeItem("cLists"),localStorage.removeItem("cFilters"),this.ms.aLists.forEach(e=>{e.show=!1}),this.ms.aMovies.forEach(e=>{e.show=!1}),this.ms.cMovies=[],this.ms.cLists=[];for(const e of this.ms.aLists)"Saved"==e.title&&(e.show=!0,this.ms.cLists.push(e));this.correctLists(),this.correctMovies(),this.updateFilters()}sortArrayBy(e,i,r){e.sort((s,c)=>{if(s[i]<c[i]){let h=-1;return r&&(h=1),h}if(s[i]>c[i]){let h=1;return r&&(h=-1),h}return 0})}isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}createUniqeId(e){let i=[];for(const c of e)i.push(c.id);let r=c=>{let h="",p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",v=p.length;for(var w=0;w<c;w++)h+=p.charAt(Math.floor(Math.random()*v));return h},s=r(10);for(this.debug&&console.log(s);i.includes(s);)s=r(10),console.log(s);return s}findIndex(e,i){let r=e.map(s=>s).indexOf(i);return console.log("index: "+r),r}msg(e){this.debug&&console.log(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ts),o.Y36(Ic))},n.\u0275cmp=o.Xpm({type:n,selectors:[["filter-component"]],decls:28,vars:13,consts:[[1,"container-fluid","ms-sm-4"],[1,"row"],[1,"col-auto"],["class","btn btn-dark rounded-0 rounded-top",3,"click",4,"ngIf"],[1,"container-fluid","px-4","bg-light","border","rounded"],["class","row ps-2 py-2 pt-3",4,"ngIf"],["class","d-grid d-flex justify-content-between mt-4 pb-4 mb-4 border-bottom",4,"ngIf"],[1,"row","mb-4","px-3",3,"ngbCollapse"],[1,"col-auto","mb-4","px-0"],[1,"col-w100"],["class","col-auto px-0",3,"click",4,"ngFor","ngForOf"],[1,"col-auto","border-start","ms-2"],["type","button","class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-secondary btn-sm","disabled","",4,"ngIf"],[1,"btn-group","btn-group-toggle"],[1,"btn","btn-primary"],["data-toggle","collapse","href","#collapseExample",1,"col-auto","btn","btn-outline-primary"],["class","row mb-4 px-3",3,"ngbCollapse",4,"ngFor","ngForOf"],["class","col-auto",4,"ngIf"],[1,"btn","btn-dark","rounded-0","rounded-top",3,"click"],[1,"row","ps-2","py-2","pt-3"],["class","col-auto p-0 m-0",4,"ngFor","ngForOf"],[1,"col-auto","p-0","me-2"],["type","button","class","p-0 px-2 py-1 btn btn-danger btn-sm mb-2",3,"click",4,"ngIf"],["type","button","class","p-0 px-2 py-1 btn btn-outline-secondary btn-sm mb-2","disabled","",4,"ngIf"],[1,"col-auto","p-0","m-0"],["type","button","disabled","","class","p-0 px-2 py-1 btn btn-outline-secondary btn-sm mb-2 me-2",4,"ngIf"],["type","button","disabled","",1,"p-0","px-2","py-1","btn","btn-outline-secondary","btn-sm","mb-2","me-2"],[4,"ngIf"],["type","button",1,"p-0","px-2","py-1","btn","btn-danger","btn-sm","mb-2",3,"click"],["type","button","disabled","",1,"p-0","px-2","py-1","btn","btn-outline-secondary","btn-sm","mb-2"],["class","col-auto p-0 m-0",4,"ngIf"],[1,"d-grid","d-flex","justify-content-between","mt-4","pb-4","mb-4","border-bottom"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["type","button","disabled","",1,"btn","btn-outline-secondary","btn-sm"],[1,"col-auto","px-0",3,"click"],["type","button","class","btn btn-primary btn-sm me-2 mb-2","disabled","",4,"ngIf"],["type","button","class","btn btn-outline-primary btn-sm me-2 mb-2",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary","btn-sm","me-2","mb-2"],["type","button",1,"btn","btn-outline-primary","btn-sm","me-2","mb-2"],["type","button","class","btn btn-primary btn-sm me-2 mb-2",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","me-2","mb-2"],[1,"col-auto","mb-4","border-end"],[1,"row","p-0","m-0"],[1,"col-auto","border-start","m-0","ms-2","ps-3"],["class","row p-0 m-0",4,"ngIf"],["type","button","class","btn btn-success btn-sm me-2 mb-2",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success btn-sm me-2 mb-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm","me-2","mb-2",3,"click"],["type","button",1,"btn","btn-outline-success","btn-sm","me-2","mb-2",3,"click"],[1,"col-auto","mb-4"],["class","col-auto border-start ms-2",4,"ngIf"],["class","col-auto p-0 m-0","style","overflow: visible;",4,"ngFor","ngForOf"],["type","button","disabled","",1,"btn","btn-success","btn-sm","me-2","mb-2"],["type","button",1,"btn","btn-dark","btn-sm",3,"click"],[1,"col-auto","p-0","m-0",2,"overflow","visible"],["type","button","class","btn btn-success btn-sm me-2",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success btn-sm me-2","disabled","",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm","me-2",3,"click"],["type","button","disabled","",1,"btn","btn-outline-success","btn-sm","me-2"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o.YNc(3,S7,4,0,"button",3),o.YNc(4,A7,2,0,"button",3),o.qZA()()(),o.TgZ(5,"div",4),o.YNc(6,P7,5,3,"div",5),o.YNc(7,V7,2,1,"div",5),o.YNc(8,G7,7,2,"div",6),o.TgZ(9,"div",7)(10,"h6",8),o._uU(11," Choose movies "),o.TgZ(12,"small"),o._uU(13),o.qZA()(),o._UZ(14,"div",9),o.YNc(15,W7,3,2,"div",10),o.YNc(16,tK,3,2,"div",10),o.TgZ(17,"div",11),o.YNc(18,nK,2,0,"button",12),o.YNc(19,iK,2,0,"button",13),o.qZA(),o.TgZ(20,"div",2)(21,"div",14)(22,"button",15),o._uU(23,"Edit lists"),o.qZA(),o.TgZ(24,"button",16),o._uU(25," +"),o.qZA()()()(),o.YNc(26,DK,12,6,"div",17),o.YNc(27,SK,3,2,"div",18),o.qZA()),2&e&&(o.xp6(3),o.Q6J("ngIf",i.isCollapsed),o.xp6(1),o.Q6J("ngIf",!i.isCollapsed),o.xp6(2),o.Q6J("ngIf",i.isCollapsed),o.xp6(1),o.Q6J("ngIf",i.isCollapsed&&i.cFilters.length>0),o.xp6(1),o.Q6J("ngIf",!i.isCollapsed),o.xp6(1),o.Q6J("ngbCollapse",i.isCollapsed),o.xp6(4),o.hij("(",i.ms.aMovies.length,")"),o.xp6(2),o.Q6J("ngForOf",i.ms.aLists),o.xp6(1),o.Q6J("ngForOf",i.ms.aLists),o.xp6(2),o.Q6J("ngIf",i.ms.cLists.length>0&&"Saved"!=i.ms.cLists[0].title),o.xp6(1),o.Q6J("ngIf",1==i.ms.cLists.length&&"Saved"==i.ms.cLists[0].title),o.xp6(7),o.Q6J("ngForOf",i.cFiltersList),o.xp6(1),o.Q6J("ngIf",i.cFilters.length>0))},dependencies:[qV,bi,an],styles:["#filter[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;position:fixed;top:2rem;right:0rem;opacity:.9}"]}),n})();function NK(n,t){if(1&n&&(o.TgZ(0,"div",5)(1,"div",6),o._UZ(2,"div",7),o.TgZ(3,"h6",8),o._uU(4),o.qZA(),o._UZ(5,"div",9),o.TgZ(6,"div",10)(7,"div",11)(8,"span",12),o._uU(9,"Loading..."),o.qZA()()()()()),2&n){const e=o.oxw();o.xp6(4),o.hij(" Loading movies (",e.ms.aMovies.length,")")}}function xK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",18),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function MK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",19),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH),o.MGl("routerLink","/movie/",e.id,"")}}function RK(n,t){if(1&n&&(o.TgZ(0,"div",22),o._UZ(1,"img",23),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2).$implicit;o.xp6(1),o.s9C("src",i.base_url+"w200"+e.logo_path,o.LSH),o.s9C("ngbPopover",e.provider_name)}}function kK(n,t){if(1&n&&(o.TgZ(0,"div",20),o.YNc(1,RK,2,2,"div",21),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",e.flatrate)}}function OK(n,t){if(1&n&&(o.TgZ(0,"div",13)(1,"small",14),o._uU(2),o.qZA(),o._UZ(3,"br"),o.YNc(4,xK,1,1,"img",15),o.YNc(5,MK,1,2,"img",16),o.YNc(6,kK,2,1,"div",17),o.qZA()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.title),o.xp6(2),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading),o.xp6(1),o.Q6J("ngIf",e.flatrate)}}function PK(n,t){1&n&&o._UZ(0,"filter-component",24)}let FK=(()=>{class n{constructor(e,i,r){this.tmdb=e,this.ms=i,this.msg=r,this.title="Movies",this.debug=!1,this.showDetails=!1,this.debug&&console.log("MovieComponent()")}ngOnInit(){this.ms.cMovies.length<1&&this.ms.loadUserMovies()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ts),o.Y36(Ic),o.Y36(NS))},n.\u0275cmp=o.Xpm({type:n,selectors:[["movie-component"]],decls:5,vars:3,consts:[["class","container-fluid pb-4 mb-4",4,"ngIf"],[1,"container-fluid"],[1,"row","mb-4"],["class","col-6 col-sm-2 p-0 m-0 mb-4 text-truncate",4,"ngFor","ngForOf"],["class","position-fixed start-0 bottom-0 mx-sm-4 mb-sm-4","style","z-index: 400;",4,"ngIf"],[1,"container-fluid","pb-4","mb-4"],[1,"row","pb-4","mb-4"],[1,"col-w100","pb-4","mb-4"],[1,"col-auto","mx-auto","align-middle"],[1,"col-w100","pb-2","mb-2"],[1,"col-auto","mx-auto"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-6","col-sm-2","p-0","m-0","mb-4","text-truncate"],[1,"col","p-0","m-0"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING",3,"routerLink","click",4,"ngIf"],["class","img-fluid rounded btn p-0 m-0",3,"src","routerLink","click",4,"ngIf"],["class","row p-0 m-0",4,"ngIf"],["src","https://via.placeholder.com/200x300?text=LOADING",1,"img-fluid","rounded","btn","p-0","m-0",3,"routerLink","click"],[1,"img-fluid","rounded","btn","p-0","m-0",3,"src","routerLink","click"],[1,"row","p-0","m-0"],["class","col-2 col-sm-2 p-0 m-0",4,"ngFor","ngForOf"],[1,"col-2","col-sm-2","p-0","m-0"],[1,"img-fluid","rounded","p-0","m-0",3,"src","ngbPopover"],[1,"position-fixed","start-0","bottom-0","mx-sm-4","mb-sm-4",2,"z-index","400"]],template:function(e,i){1&e&&(o.YNc(0,NK,10,1,"div",0),o.TgZ(1,"div",1)(2,"div",2),o.YNc(3,OK,7,4,"div",3),o.qZA()(),o.YNc(4,PK,1,0,"filter-component",4)),2&e&&(o.Q6J("ngIf",i.ms.moviesLoading),o.xp6(3),o.Q6J("ngForOf",i.ms.cMovies),o.xp6(1),o.Q6J("ngIf",!i.ms.moviesLoading))},dependencies:[ms,I3,bi,an,AK],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;color:#c8c8c8}.filled[_ngcontent-%COMP%]{color:#646464}.bad[_ngcontent-%COMP%]{color:#c8c8c8}.filled.bad[_ngcontent-%COMP%]{color:#fa6464}"]}),n})();class AO{constructor(){this.page=1,this.results=new Array,this.pages=1,this.current_page=1,this.min=0,this.max=20,this.moviesToLoad=20,this.moviesLoaded=0}navigate(t){t<1?(this.min-=20,this.max-=20):this.max+=20}}let NO=(()=>{class n{constructor(e,i,r){this.db=e,this.tmdb=i,this.authService=r,this.cLists=[],this.result=new AO,this.recommendedMovies=[],this.cMovies=[],this.cTags=[],this.cKeywords=[],this.cGenres=[],this.loadingMovies=!1,this.sortBy="popularity.desc",this.tmdbGenres=Cb,console.log("DiscoverService()")}loadMovies(){var e=this;return(0,ne.Z)(function*(){console.log(e.constructor.name+".setMovies()"),e.loadingMovies=!0;let i={sort_by:e.sortBy,with_genres:[]};for(const s of e.cGenres){for(const c of e.tmdbGenres)c.id==s.id&&(c.active=!0,i.with_genres.push(s.id));console.log("genre: "+s.name)}e.loadingMovies=!0,e.result.moviesLoaded<1&&(e.result=yield e.preSearch(i));let r=0;for(;e.result.moviesLoaded<e.result.moviesToLoad&&e.result.total_pages>e.result.page&&r<10;)r++,yield e.loadMoviesTmdb(i).then(function(){var s=(0,ne.Z)(function*(c){console.log(c);for(const h of c)e.cMovies.push(h),e.result.moviesLoaded++});return function(c){return s.apply(this,arguments)}}()),e.result.page++;e.result.movies=e.cMovies.length,e.result.pages=Math.ceil(e.cMovies.length/20),e.result.moviesToLoad=e.result.moviesLoaded+20,e.loadingMovies=!1})()}preSearch(e){var i=this;return(0,ne.Z)(function*(){e.page=i.result.page;let r,s=new AO;return r=yield i.tmdb.movieDiscoverTmdb(e),console.log("|||||DATA|||||"),console.log(r),s.results=r.results,s.total_pages=r.total_pages,s.total_results=r.total_results,s})()}loadMoviesTmdb(e){var i=this;return(0,ne.Z)(function*(){return e.page=i.result.page,yield function(){var c=(0,ne.Z)(function*(){let h,p=[];h=yield i.tmdb.movieDiscoverTmdb(e);let v=h.results;i.result.total_pages=h.total_pages,i.result.total_results=h.total_results;for(const w of v){let S=new la(w),N=16;i.authService.user&&(N=i.authService.user.settings.ageRating),(yield S.checkRating(N))&&(yield S.init(),yield S.preload(),p.push(S))}return p});return function(){return c.apply(this,arguments)}}()()})()}reset(){console.log(this.constructor.name+".reset()"),this.result=new AO;for(const e of this.tmdbGenres)e.active=!1;this.sortBy="popularity.desc",this.cList=void 0,this.cLists=[],this.cMovie=void 0,this.cMovies=[],this.cTag=void 0,this.cKeyword=void 0,this.cGenre=void 0,this.cTags=[],this.cKeywords=[],this.cGenres=[]}sortArrayBy(e,i,r){e.sort((s,c)=>{if(s[i]<c[i]){let h=-1;return r&&(h=1),h}if(s[i]>c[i]){let h=1;return r&&(h=-1),h}return 0})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Qm),o.LFG(ts),o.LFG(Oo))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LK(n,t){1&n&&o._UZ(0,"img",23)}function UK(n,t){if(1&n&&o._UZ(0,"img",24),2&n){const e=o.oxw().ngIf;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function BK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.saveMovie(r))}),o._uU(1," Save movie "),o.qZA()}}function VK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",29)(1,"button",30),o._uU(2," Remove "),o.qZA(),o.TgZ(3,"div",31)(4,"button",32),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.removeMovie(r))}),o._uU(5,"Remove from all"),o.qZA(),o.TgZ(6,"button",33),o._uU(7,"Cancel"),o.qZA()()()}}function jK(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,BK,2,0,"div",26),o.YNc(2,VK,8,0,"div",27),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",1!=e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved)}}function HK(n,t){1&n&&(o.TgZ(0,"div",25)(1,"a",34),o._uU(2," Sign in to save movie "),o.qZA()())}function GK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return r.seen=!r.seen,o.KtG(s.saveSeen(r))}),o._uU(1,"Seen"),o.qZA()}}function $K(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",36),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return r.seen=!r.seen,o.KtG(s.saveSeen(r))}),o._uU(1,"Not seen"),o.qZA()}}function ZK(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,GK,2,0,"button",26),o.YNc(2,$K,2,0,"button",35),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.seen),o.xp6(1),o.Q6J("ngIf",!e.seen)}}function qK(n,t){1&n&&(o.TgZ(0,"button",39),o._uU(1,"Favorite"),o.qZA())}function zK(n,t){1&n&&(o.TgZ(0,"button",40),o._uU(1,"Favorite"),o.qZA())}function WK(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,qK,2,0,"button",37),o.YNc(2,zK,2,0,"button",38),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.favorite),o.xp6(1),o.Q6J("ngIf",!e.favorite)}}function KK(n,t){1&n&&(o.TgZ(0,"button",39),o._uU(1,"On watchlist"),o.qZA())}function YK(n,t){1&n&&(o.TgZ(0,"button",40),o._uU(1,"Not on watchlist"),o.qZA())}function JK(n,t){if(1&n&&(o.TgZ(0,"div",41),o.YNc(1,KK,2,0,"button",37),o.YNc(2,YK,2,0,"button",38),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.favorite),o.xp6(1),o.Q6J("ngIf",!e.favorite)}}function QK(n,t){if(1&n&&(o.TgZ(0,"button",46),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("",e," ")}}function XK(n,t){if(1&n&&(o.TgZ(0,"div",42),o.YNc(1,QK,2,1,"button",45),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf","Saved"!=e)}}function eY(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Oqu(e.title)}}function tY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2).ngIf,h=o.oxw();return o.KtG(h.addToMovieToList(c,s.title))}),o.YNc(1,eY,2,1,"div",47),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(3);o.xp6(1),o.Q6J("ngIf",!i.checkIfInList(e))}}function nY(n,t){if(1&n&&(o.TgZ(0,"div",15)(1,"div",16),o._uU(2,"In lists:"),o.qZA(),o.YNc(3,XK,2,1,"div",18),o.TgZ(4,"div",42)(5,"div",29)(6,"button",43),o._uU(7," Add to list "),o.qZA(),o.TgZ(8,"div",31),o.YNc(9,tY,2,1,"button",44),o.TgZ(10,"button",33)(11,"div"),o._uU(12,"New list...(W.I.P)"),o.qZA()()()()()()),2&n){const e=o.oxw().ngIf,i=o.oxw();o.xp6(3),o.Q6J("ngForOf",e.lists),o.xp6(6),o.Q6J("ngForOf",i.lists)}}function iY(n,t){if(1&n&&(o.TgZ(0,"span",51),o._uU(1,"\u2605"),o.qZA()),2&n){const i=t.index;o.ekj("filled",100===t.fill)("bad",i<1)}}function rY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",48)(1,"ngb-rating",49,50),o.NdJ("rateChange",function(r){o.CHM(e);const s=o.oxw().ngIf;return o.KtG(s.vote=r)})("click",function(){o.CHM(e);const r=o.MAs(2),s=o.oxw().ngIf,c=o.oxw();return o.KtG(c.rateMovie(s,r))}),o.YNc(3,iY,2,4,"ng-template"),o.qZA()()}if(2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("rate",e.vote)("max",5)}}function sY(n,t){if(1&n&&(o.TgZ(0,"div",54),o._UZ(1,"img",55),o.TgZ(2,"div",56),o._uU(3),o.qZA()()),2&n){const e=t.$implicit,i=o.oxw(2).ngIf;o.xp6(1),o.s9C("src",i.base_url+"w200"+e.logo_path,o.LSH),o.s9C("ngbPopover",e.provider_name),o.xp6(2),o.Oqu(e.provider_name)}}function oY(n,t){if(1&n&&(o.TgZ(0,"div",52),o.YNc(1,sY,4,3,"div",53),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngForOf",e.flatrate)}}function aY(n,t){1&n&&(o.TgZ(0,"div",52)(1,"div",21),o._uU(2," No Swedish providers found "),o.qZA()())}function lY(n,t){if(1&n&&(o.TgZ(0,"div",15)(1,"div",16),o._uU(2),o.qZA()()),2&n){const e=o.oxw().ngIf;o.xp6(2),o.hij("Average rating: ",e.certifications.avg_rating," years")}}function cY(n,t){1&n&&(o.TgZ(0,"div",15)(1,"div",16),o._uU(2,"Average rating: No rating!"),o.qZA()())}function uY(n,t){if(1&n&&(o.TgZ(0,"div",3)(1,"div",16),o._uU(2),o.TgZ(3,"small"),o._uU(4),o.qZA()()()),2&n){const e=o.oxw().ngIf;o.xp6(2),o.hij("Average vote: ",e.vote_average," / 5 "),o.xp6(2),o.hij("(",e.vote_count," votes)")}}function dY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",42)(1,"button",57),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return c.ds.reset(),o.KtG(c.ds.cGenres[0]=s)}),o._uU(2),o.qZA()()}if(2&n){const e=t.$implicit;o.xp6(2),o.hij("",e.name," ")}}function hY(n,t){if(1&n&&(o.TgZ(0,"div",42)(1,"button",58),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij("",e.name," ")}}function fY(n,t){if(1&n&&(o.TgZ(0,"div",3)(1,"div",16),o._uU(2,"Keywords:"),o.qZA(),o.YNc(3,hY,3,1,"div",18),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(3),o.Q6J("ngForOf",e.keywords)}}function pY(n,t){1&n&&o._UZ(0,"img",62)}function gY(n,t){if(1&n&&o._UZ(0,"img",63),2&n){const e=o.oxw().$implicit,i=o.oxw().ngIf;o.s9C("src",i.base_url+"w200"+e.file_path,o.LSH)}}function mY(n,t){if(1&n&&(o.TgZ(0,"div",59),o.YNc(1,pY,1,0,"img",60),o.YNc(2,gY,1,1,"img",61),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.backdrops_loading),o.xp6(1),o.Q6J("ngIf",!e.backdrops_loading)}}function _Y(n,t){if(1&n&&o._UZ(0,"img",68),2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function vY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",64)(1,"div",65),o._uU(2),o.qZA(),o.YNc(3,_Y,1,1,"img",66),o.TgZ(4,"img",67),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.similar(s))}),o.qZA()()}if(2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.title),o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.s9C("src",e.base_url+"w200"+e.poster_path,o.LSH)}}function yY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1),o._UZ(1,"div",2),o.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.close())}),o._uU(6,"X"),o.qZA()(),o.YNc(7,LK,1,0,"img",7),o.YNc(8,UK,1,1,"img",8),o.qZA(),o.TgZ(9,"div",9)(10,"div",3),o.YNc(11,jK,3,2,"div",10),o.YNc(12,HK,3,0,"div",10),o.YNc(13,ZK,3,2,"div",10),o.YNc(14,WK,3,2,"div",10),o.YNc(15,JK,3,2,"div",11),o.qZA(),o.YNc(16,nY,13,2,"div",12),o.YNc(17,rY,4,2,"div",13),o.TgZ(18,"div",3)(19,"h4"),o._uU(20),o.qZA()(),o.YNc(21,oY,2,1,"div",14),o.YNc(22,aY,3,0,"div",14),o.YNc(23,lY,3,1,"div",12),o.YNc(24,cY,3,0,"div",12),o.TgZ(25,"div",15)(26,"div",16),o._uU(27),o.qZA()(),o.YNc(28,uY,5,2,"div",17),o.TgZ(29,"div",15)(30,"div",16),o._uU(31,"Genres:"),o.qZA(),o.YNc(32,dY,3,1,"div",18),o.qZA(),o.TgZ(33,"div",3)(34,"div",16),o._uU(35),o.qZA()(),o.YNc(36,fY,4,1,"div",17),o.qZA()(),o.TgZ(37,"div",19),o.YNc(38,mY,3,2,"div",20),o.ALo(39,"slice"),o.qZA(),o.TgZ(40,"div",19)(41,"h4",21),o._uU(42,"Similar movies"),o.qZA(),o.YNc(43,vY,5,3,"div",22),o.ALo(44,"slice"),o.qZA()()}if(2&n){const e=t.ngIf,i=o.oxw();o.xp6(7),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",e.poster_path&&!e.poster_loading),o.xp6(3),o.Q6J("ngIf",i.isLoggedIn),o.xp6(1),o.Q6J("ngIf",!i.isLoggedIn),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(3),o.hij(" ",e.title," "),o.xp6(1),o.Q6J("ngIf",e.flatrate),o.xp6(1),o.Q6J("ngIf",null==e.flatrate),o.xp6(1),o.Q6J("ngIf",e.certifications),o.xp6(1),o.Q6J("ngIf",!e.certifications),o.xp6(3),o.hij("Runtime: ",e.length,""),o.xp6(1),o.Q6J("ngIf",e.vote_average),o.xp6(4),o.Q6J("ngForOf",e.genres),o.xp6(3),o.hij("Overview: ",e.overview,""),o.xp6(1),o.Q6J("ngIf",e.keywords),o.xp6(2),o.Q6J("ngForOf",o.Dn7(39,21,e.backdrops,0,6)),o.xp6(5),o.Q6J("ngForOf",o.Dn7(44,25,i.similarMovies,0,6))}}let bY=(()=>{class n{constructor(e,i,r,s,c,h,p){this.ms=e,this.location=i,this.tmdb=r,this.ds=s,this.auth=c,this.router=h,this.msg=p,this.title="movie-detail-component",this.newItemEvent=new o.vpe,this.isLoggedIn=!1}addNewItem(e){this.newItemEvent.emit(e)}ngOnInit(){var e=this;console.log("MovieDetailComponent.ngOnInit()"),this.ms.page&&localStorage.setItem("page",this.ms.page),this.isLoggedIn=this.auth.isLoggedIn,function(){var r=(0,ne.Z)(function*(){if(!e.ms.cMovie){console.log("No cMovie!!!");let s={id:null};s.id=localStorage.getItem("cMovie"),console.log(s);let c=yield new la(s);yield c.preload(),yield c.init(),e.ms.cMovie=c}e.isLoggedIn&&(e.ms.cMovies.length<1&&e.ms.loadUserMovies(),console.log("cMovie is present"),yield e.loadMovie(e.ms.cMovie.id),yield e.loadLists(),localStorage.setItem("cMovie",e.ms.cMovie.id.toString())),yield e.getSimilarMovies(e.ms.cMovie.id),window.scroll({top:0,left:0,behavior:"auto"})});return function(){return r.apply(this,arguments)}}()()}reload(){this.ngOnInit()}getSimilarMovies(e){var i=this;return(0,ne.Z)(function*(){let r=yield i.tmdb.getSimilarMoviesTmdb(e);if(console.log(r),r){i.similarMovies=[],r.forEach(s=>{i.similarMovies.push(new la(s))});for(const s of i.similarMovies)s.preload();for(let s=0;s<i.similarMovies.length;s++)i.similarMovies[s].init()}})()}loadMovie(e){var i=this;return(0,ne.Z)(function*(){i.ms.getItemById(e).valueChanges().subscribe(function(){var r=(0,ne.Z)(function*(s){console.log(s),s.length>0?i.ms.cMovie.setData(s[0]):(i.ms.cMovie.saved=!1,i.ms.cMovie.lists=[])});return function(s){return r.apply(this,arguments)}}())})()}loadLists(){var e=this;this.ms.lists.valueChanges().subscribe(function(){var i=(0,ne.Z)(function*(r){e.lists=r});return function(r){return i.apply(this,arguments)}}())}setItem(e){this.ms.setItem(e)}rateMovie(e,i){e.vote=i.nextRate,console.log(e.vote),console.log(i.nextRate),this.setItem({id:e.id,vote:e.vote})}saveMovie(e){this.ms.setItem({id:e.id,saved:!0,title:e.title,favorite:!1,seen:!1,vote:0,lists:["Saved"]})}saveSeen(e){this.ms.setItem({id:e.id,seen:e.seen})}addTag(e){console.log("Not in list"),this.ms.cMovie.tags.push(e);let i={id:this.ms.cMovie.id,saved:this.ms.cMovie.saved,title:this.ms.cMovie.title,favorite:this.ms.cMovie.favorite,seen:this.ms.cMovie.seen,vote:this.ms.cMovie.vote,lists:this.ms.cMovie.lists,tags:this.ms.cMovie};console.log(i),this.ms.setItem(i)}removeMovie(e){const r={...this.ms.cMovie,id:e.id,saved:!1,title:e.title,favorite:!1,seen:!1,vote:null,lists:null};this.ms.cMovie=r,this.ms.deleteItem(e)}checkIfInList(e){return!!this.ms.cMovie.lists.includes(e.title)}checkIfSaved(){this.ms.movies.valueChanges().subscribe(i=>{let r=!1;if(i.forEach(s=>{if(s.id==this.ms.cMovie.id){const c={...this.ms.cMovie,...s};this.ms.cMovie=c,r=!0}}),!r){const c={...this.ms.cMovie,saved:!1};this.ms.cMovie=c}})}isSaved(e){return"saved"in e}addToMovieToList(e,i){if(e.lists.includes(i))console.log("In list!");else{console.log("Not in list"),e.lists.push(i);let r={id:e.id,saved:e.saved,title:e.title,favorite:e.favorite,seen:e.seen,vote:e.vote,lists:e.lists};console.log(r),this.ms.setItem(r)}}close(){if(!this.ms.page){let e=localStorage.getItem("page");this.ms.page=e.toLocaleLowerCase()}this.router.navigate([this.ms.page.toLocaleLowerCase()])}similar(e){this.ms.cMovie=e,this.router.navigate(["movie/"+e.id]),this.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ic),o.Y36(ke),o.Y36(ts),o.Y36(NO),o.Y36(Oo),o.Y36(Fn),o.Y36(NS))},n.\u0275cmp=o.Xpm({type:n,selectors:[["movie-detail-component"]],inputs:{cMovie:"cMovie"},outputs:{newItemEvent:"newItemEvent"},decls:1,vars:1,consts:[["class","container-fluid p-4 mb-4",4,"ngIf"],[1,"container-fluid","p-4","mb-4"],[1,"row","position-absolute"],[1,"row","mb-2"],[1,"col-12","col-lg-4","mb-4"],[1,"position-absolute","col-auto","p-4","p-sm-2"],[1,"btn","btn-danger","btn-lg",3,"click"],["class","img-fluid rounded","src","https://via.placeholder.com/400x600?text=LOADING",4,"ngIf"],["class","img-fluid rounded",3,"src",4,"ngIf"],[1,"col-12","col-lg-8"],["class","col-auto border-end mb-2",4,"ngIf"],["class","col-auto mb-2",4,"ngIf"],["class","row",4,"ngIf"],["class","row border-bottom mb-2 pb-2",4,"ngIf"],["class","row my-2",4,"ngIf"],[1,"row"],[1,"col-auto"],["class","row mb-2",4,"ngIf"],["class","col-auto p-0 m-0",4,"ngFor","ngForOf"],[1,"row","mb-4","pt-4","border-top"],["class","col-4 col-sm-2 m-0 p-0 pe-2 pb-2",4,"ngFor","ngForOf"],[1,"col-12"],["class","col-4 col-sm-2 m-0 p-0 pe-2",4,"ngFor","ngForOf"],["src","https://via.placeholder.com/400x600?text=LOADING",1,"img-fluid","rounded"],[1,"img-fluid","rounded",3,"src"],[1,"col-auto","border-end","mb-2"],["class","p-0 px-2 py-1 btn btn-success btn-sm",3,"click",4,"ngIf"],["ngbDropdown","","class","d-inline-block",4,"ngIf"],[1,"p-0","px-2","py-1","btn","btn-success","btn-sm",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownRemove","ngbDropdownToggle","",1,"p-0","px-2","py-1","btn","btn-danger","btn-sm"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],["ngbDropdownItem",""],["routerLink","/sign-in",1,"p-0","px-2","py-1","btn-outline-primary","btn-sm"],["class","p-0 px-2 py-1 btn btn-outline-success btn-sm",3,"click",4,"ngIf"],[1,"p-0","px-2","py-1","btn","btn-outline-success","btn-sm",3,"click"],["class","p-0 px-2 py-1 btn btn-success btn-sm",4,"ngIf"],["class","p-0 px-2 py-1 btn btn-outline-success btn-sm",4,"ngIf"],[1,"p-0","px-2","py-1","btn","btn-success","btn-sm"],[1,"p-0","px-2","py-1","btn","btn-outline-success","btn-sm"],[1,"col-auto","mb-2"],[1,"col-auto","p-0","m-0"],["type","button","id","dropdownAdd","ngbDropdownToggle","",1,"btn","btn-success","btn-sm"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["class","p-0 px-2 py-1 btn btn-outline-success btn-sm me-2 mb-2","disabled","",4,"ngIf"],["disabled","",1,"p-0","px-2","py-1","btn","btn-outline-success","btn-sm","me-2","mb-2"],[4,"ngIf"],[1,"row","border-bottom","mb-2","pb-2"],[3,"rate","max","rateChange","click"],["rating",""],[1,"star"],[1,"row","my-2"],["class","col-2 col-md-1 col-lg-3 d-inline m-0 mb-sm-2 pe-0",4,"ngFor","ngForOf"],[1,"col-2","col-md-1","col-lg-3","d-inline","m-0","mb-sm-2","pe-0"],[1,"col-auto","col-lg-4","img-fluid","rounded","d-inline","p-0",3,"src","ngbPopover"],[1,"col-auto","d-none","d-lg-inline","my-auto","ps-2"],["routerLink","/discover",1,"p-0","px-2","py-1","btn","btn-outline-dark","btn-sm","me-2","mb-2",3,"click"],["routerLink","/discover",1,"p-0","px-2","py-1","btn","btn-outline-dark","btn-sm","me-2","mb-2"],[1,"col-4","col-sm-2","m-0","p-0","pe-2","pb-2"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/300x200?text=LOADING",4,"ngIf"],["class","img-fluid rounded btn m-0 p-0",3,"src",4,"ngIf"],["src","https://via.placeholder.com/300x200?text=LOADING",1,"img-fluid","rounded","btn","p-0","m-0"],[1,"img-fluid","rounded","btn","m-0","p-0",3,"src"],[1,"col-4","col-sm-2","m-0","p-0","pe-2"],[1,"text-truncate"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING",3,"routerLink",4,"ngIf"],[1,"img-fluid","rounded","btn","m-0","p-0",3,"src","click"],["src","https://via.placeholder.com/200x300?text=LOADING",1,"img-fluid","rounded","btn","p-0","m-0",3,"routerLink"]],template:function(e,i){1&e&&o.YNc(0,yY,45,29,"div",0),2&e&&o.Q6J("ngIf",i.ms.cMovie)},dependencies:[ms,_s,pC,c3,DO,TO,I3,JW,bi,an,bl],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;color:#c8c8c8}.filled[_ngcontent-%COMP%]{color:#646464}.bad[_ngcontent-%COMP%]{color:#c8c8c8}.filled.bad[_ngcontent-%COMP%]{color:#fa6464}"]}),n})(),wY=(()=>{class n{constructor(e,i,r){this.db=e,this.authService=i,this.afAuth=r,console.log("ListService()");let s=JSON.parse(localStorage.getItem("user"));this.user=s,this.afAuth.authState.subscribe(c=>{this.user=c})}findItemByName(e){return console.log("name: "+e),new Promise(r=>{this.db.list("lists_"+this.user.uid,s=>s.orderByChild("title").equalTo(e)).valueChanges().subscribe(s=>r(s))})}findItem(e){return new Promise(r=>{this.db.list("lists_"+this.user.uid,s=>s.orderByChild("title").equalTo(e)).valueChanges().subscribe(s=>r(s))})}setItem(e){var i=this;return(0,ne.Z)(function*(){yield i.db.list("lists_"+i.user.uid).update(e.title.toString(),e)})()}addItem(e){var i=this;return(0,ne.Z)(function*(){let r,s=yield i.findItem(e.title);return console.log("returnedItem"),console.log(s),s.length>0?(console.log("FOUND ITEM!!!"),r=400):(console.log("ITEM NOT FOUND!!!"),r=200,i.db.list("lists_"+i.user.uid).update(e.title.toString(),e),console.log("Item added")),r})()}deleteItem(e){var i=this;return(0,ne.Z)(function*(){i.db.list("lists_"+i.user.uid).remove(e.title.toString())})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Qm),o.LFG(Oo),o.LFG(Vm))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",15),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function TY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",16),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH),o.MGl("routerLink","/movie/",e.id,"")}}function DY(n,t){if(1&n&&(o.TgZ(0,"div",12),o.YNc(1,CY,1,1,"img",13),o.YNc(2,TY,1,2,"img",14),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function EY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",7)(1,"div",8)(2,"div")(3,"b"),o._uU(4),o.qZA()(),o.TgZ(5,"small"),o._uU(6),o.qZA()(),o.TgZ(7,"div",4)(8,"button",9),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.deleteList(s))}),o._uU(9," Delete list "),o.qZA()(),o._UZ(10,"div",10),o.YNc(11,DY,3,2,"div",11),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(4),o.Oqu(e.title),o.xp6(2),o.hij(" ",e.info," "),o.xp6(5),o.Q6J("ngForOf",e.movies)}}function IY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",17),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.newList=!0)}),o._uU(1," New List "),o.qZA()}}function SY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",18),o._UZ(1,"input",19,20)(3,"input",21,22)(5,"div",23),o.TgZ(6,"button",24),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.newList=!1)}),o._uU(7," Cancel "),o.qZA(),o.TgZ(8,"button",17),o.NdJ("click",function(){o.CHM(e);const r=o.MAs(4),s=o.MAs(2),c=o.oxw();return o.KtG(c.addList({info:r.value,title:s.value}))}),o._uU(9," Ok "),o.qZA()()}}let F3=(()=>{class n{constructor(e,i,r,s,c){this.tmdb=e,this.ms=i,this.ls=r,this.fb=s,this.msg=c,this.title="Lists",this.newList=!1}ngOnInit(){this.init(),this.cLists=this.lists,this.listForm=this.fb.group({list:[null]}),this.cLists?localStorage.removeItem("cLists"):(console.log("No cLists!!!"),localStorage.getItem("cLists"))}init(){var e=this;return(0,ne.Z)(function*(){yield e.ms.loadMovies().then(function(){var i=(0,ne.Z)(function*(r){e.aMovies=[];for(const s of r){let c=new la(s);e.aMovies.push(c)}for(const s of e.aMovies)s.preload();for(const s of e.aMovies)s.init()});return function(r){return i.apply(this,arguments)}}()),e.aLists=[],yield e.ms.loadLists().then(i=>{for(const r of i)console.log(r),"Saved"!=r.title&&e.aLists.push(r);for(const r of e.aLists)r.movies=[];for(const r of e.aMovies)for(const s of e.aLists)r.lists.includes(s.title)&&s.movies.push(r)}),console.log(e.aLists)})()}showMsg(e){console.log(e)}submit(){console.log("Form Submitted"),console.log(this.listForm.value)}changeList(){this.cLists=[],this.lists.forEach(e=>{this.listForm.value.list.includes(e.title)&&this.cLists.push(e)})}addList(e){console.log(e);let i={info:e.info,title:e.title};console.log(i),e.title&&(console.log("not empty"),this.ls.addItem(i)),this.newList=!1,this.init()}deleteList(e){this.ls.deleteItem(e),this.init()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ts),o.Y36(Ic),o.Y36(wY),o.Y36(QO),o.Y36(NS))},n.\u0275cmp=o.Xpm({type:n,selectors:[["list-component"]],inputs:{lists:"lists",cMovies:"cMovies"},decls:8,vars:3,consts:[[1,"container-fluid","p-0","m-0"],["class","row p-0 m-0 pb-4 mb-4 text-truncate border-bottom",4,"ngFor","ngForOf"],[1,"row"],[1,"col"],[1,"col-auto"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],["class","",4,"ngIf"],[1,"row","p-0","m-0","pb-4","mb-4","text-truncate","border-bottom"],[1,"col","p-0","m-0"],["type","button",1,"col-auto","btn","btn-sm","btn-outline-danger",3,"click"],[1,"col-w100","mb-2"],["class","col-2 col-sm-1 p-0 m-0 text-truncate",4,"ngFor","ngForOf"],[1,"col-2","col-sm-1","p-0","m-0","text-truncate"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING",3,"routerLink","click",4,"ngIf"],["class","img-fluid rounded btn p-0 m-0",3,"src","routerLink","click",4,"ngIf"],["src","https://via.placeholder.com/200x300?text=LOADING",1,"img-fluid","rounded","btn","p-0","m-0",3,"routerLink","click"],[1,"img-fluid","rounded","btn","p-0","m-0",3,"src","routerLink","click"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,""],["type","text","placeholder","List name","autocomplete","off","maxlength","50","required","",1,"form-control","mb-2"],["listname",""],["type","text","placeholder","Description","autocomplete","off","maxlength","50",1,"form-control","mb-2"],["listinfo",""],[1,"col-w100"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,EY,12,3,"div",1),o.TgZ(2,"div",2),o._UZ(3,"div",3),o.TgZ(4,"div",4),o.YNc(5,IY,2,0,"button",5),o.YNc(6,SY,10,0,"div",6),o.qZA(),o._UZ(7,"div",3),o.qZA()()),2&e&&(o.xp6(1),o.Q6J("ngForOf",i.aLists),o.xp6(4),o.Q6J("ngIf",!i.newList),o.xp6(1),o.Q6J("ngIf",i.newList))},dependencies:[ms,bi,an],encapsulation:2}),n})(),xO=(()=>{class n{constructor(e){this.db=e,this.debug=!1,this.debug&&console.log("UserService()")}setItem(e){var i=this;return(0,ne.Z)(function*(){console.log("UserService.setItem()"),console.log(e.uid),yield i.db.list("users").update(e.uid,e)})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Qm))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AY(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"div",3),o._uU(2),o.qZA(),o.TgZ(3,"div",3),o._uU(4),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.hij(" Name: ",e.us.user.name," "),o.xp6(2),o.hij(" Email: ",e.us.user.email," ")}}let NY=(()=>{class n{constructor(e){this.us=e,this.title="profile-component"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(xO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["profile-component"]],decls:2,vars:1,consts:[[1,"container-fluid","my-4","p-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,AY,5,2,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.us.user))},dependencies:[an],encapsulation:2}),n})(),xY=(()=>{class n{constructor(){this.title="settings-component"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["settings-component"]],decls:3,vars:0,consts:[[1,"container-fluid","p-4"],[1,"row"],[1,"col"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2),o.qZA()())},encapsulation:2}),n})();function MY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return s.ds.reset(),s.ds.cGenres[0]=r,o.KtG(s.ds.loadMovies())}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("",e.name," ")}}function RY(n,t){if(1&n&&(o.TgZ(0,"button",13),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("",e.name," ")}}function kY(n,t){if(1&n&&(o.TgZ(0,"div",9),o.YNc(1,MY,2,1,"button",10),o.YNc(2,RY,2,1,"button",11),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",!e.active),o.xp6(1),o.Q6J("ngIf",e.active)}}function OY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"Sort:\xa0"),o.qZA()(),o.TgZ(4,"div",1)(5,"div",9)(6,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"popularity",""))}),o._uU(7,"Default"),o.qZA()(),o.TgZ(8,"div",9)(9,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"title",""))}),o._uU(10,"Title"),o.qZA()(),o.TgZ(11,"div",9)(12,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"runtime",""))}),o._uU(13,"Runtime"),o.qZA()(),o.TgZ(14,"div",9)(15,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"budget",""))}),o._uU(16,"budget"),o.qZA()(),o.TgZ(17,"div",9)(18,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"vote_average",""))}),o._uU(19,"vote_average"),o.qZA()(),o.TgZ(20,"div",9)(21,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"vote_count",""))}),o._uU(22,"vote_count"),o.qZA()()()()}}function PY(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"Searching"),o.qZA())}function FY(n,t){if(1&n&&(o.TgZ(0,"div",14)(1,"h4"),o._uU(2),o.qZA(),o.YNc(3,PY,2,0,"p",15),o.qZA()),2&n){const e=o.oxw();o.xp6(2),o.hij("Results: ",e.ds.cMovies.length,""),o.xp6(1),o.Q6J("ngIf",e.ds.loadingMovies)}}function LY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",23),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function UY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",24),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH),o.MGl("routerLink","/movie/",e.id,"")}}function BY(n,t){if(1&n&&(o.TgZ(0,"div",18)(1,"div",19),o._uU(2),o.qZA(),o.TgZ(3,"div",20),o.YNc(4,LY,1,1,"img",21),o.YNc(5,UY,1,2,"img",22),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij(" ",e.title," "),o.xp6(2),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",e.poster_path&&!e.poster_loading)}}function VY(n,t){if(1&n&&(o.TgZ(0,"div",16)(1,"div",1),o.YNc(2,BY,6,3,"div",17),o.ALo(3,"slice"),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.Q6J("ngForOf",o.Dn7(3,1,e.ds.cMovies,e.ds.result.min,e.ds.result.max))}}function jY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return r.ds.loadMovies(),o.KtG(r.ds.result.navigate(1))}),o._uU(1," Load more movies "),o.qZA()}}function HY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",29),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return r.ds.loadMovies(),o.KtG(r.ds.result.navigate(1))}),o._uU(1," Searching for movies "),o.qZA()}}function GY(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,jY,2,0,"div",26),o.YNc(2,HY,2,0,"div",27),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",!e.ds.loadingMovies),o.xp6(1),o.Q6J("ngIf",e.ds.loadingMovies)}}function $Y(n,t){1&n&&(o.TgZ(0,"div",30)(1,"div",31),o._UZ(2,"div",32),o.TgZ(3,"h6",33),o._uU(4,"Loading..."),o.qZA(),o._UZ(5,"div",34),o.TgZ(6,"div",35)(7,"div",36)(8,"span",37),o._uU(9,"Loading..."),o.qZA()()()()())}let ZY=(()=>{class n{constructor(e,i,r,s,c){this.tmdb=e,this.ms=i,this.location=r,this.ds=s,this.auth=c,this.isLoggedIn=!1,this.genresdb=Cb}ngOnInit(){this.isLoggedIn=this.auth.isLoggedIn,this.ds.reset()}ngOnDestroy(){console.log(this.constructor.name+".ngOnDestroy()"),this.ds.reset()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ts),o.Y36(Ic),o.Y36(ke),o.Y36(NO),o.Y36(Oo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["discover-component"]],decls:11,vars:6,consts:[[1,"container-fluid","mb-4","px-4"],[1,"row"],[1,"col-auto","p-0","m-0","mb-2"],["class","col-auto p-0 m-0",4,"ngFor","ngForOf"],["class","container-fluid mb-4 px-4",4,"ngIf"],["class","container-fluid mb-4",4,"ngIf"],["class","container-fluid",4,"ngIf"],["class","d-flex mx-auto justify-content-center",4,"ngIf"],["class","container-fluid pb-4 mb-4",4,"ngIf"],[1,"col-auto","p-0","m-0"],["class","p-0 px-2 py-1 btn btn-outline-dark btn-sm me-2 mb-2",3,"click",4,"ngIf"],["class","p-0 px-2 py-1 btn btn-dark btn-sm me-2 mb-2",4,"ngIf"],[1,"p-0","px-2","py-1","btn","btn-outline-dark","btn-sm","me-2","mb-2",3,"click"],[1,"p-0","px-2","py-1","btn","btn-dark","btn-sm","me-2","mb-2"],[1,"container-fluid","mb-4"],[4,"ngIf"],[1,"container-fluid"],["class","col-4 col-md-3 col-lg-2 m-0 p-0 mb-4 px-2",4,"ngFor","ngForOf"],[1,"col-4","col-md-3","col-lg-2","m-0","p-0","mb-4","px-2"],[1,"col-12","mb-2","text-truncate"],[1,"col-12","btn","p-0","m-0"],["class","img-fluid rounded","src","https://via.placeholder.com/400x600?text=LOADING",3,"routerLink","click",4,"ngIf"],["class","img-fluid rounded",3,"src","routerLink","click",4,"ngIf"],["src","https://via.placeholder.com/400x600?text=LOADING",1,"img-fluid","rounded",3,"routerLink","click"],[1,"img-fluid","rounded",3,"src","routerLink","click"],[1,"d-flex","mx-auto","justify-content-center"],["class","col-auto btn btn-outline-dark btn-sm",3,"click",4,"ngIf"],["class","col-auto btn btn-outline-dark btn-sm disabled",3,"click",4,"ngIf"],[1,"col-auto","btn","btn-outline-dark","btn-sm",3,"click"],[1,"col-auto","btn","btn-outline-dark","btn-sm","disabled",3,"click"],[1,"container-fluid","pb-4","mb-4"],[1,"row","pb-4","mb-4"],[1,"col-w100","pb-4","mb-4"],[1,"col-auto","mx-auto","align-middle"],[1,"col-w100","pb-2","mb-2"],[1,"col-auto","mx-auto"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"By genre:\xa0"),o.qZA()(),o.TgZ(4,"div",1),o.YNc(5,kY,3,2,"div",3),o.qZA()(),o.YNc(6,OY,23,0,"div",4),o.YNc(7,FY,4,2,"div",5),o.YNc(8,VY,4,5,"div",6),o.YNc(9,GY,3,2,"div",7),o.YNc(10,$Y,10,0,"div",8)),2&e&&(o.xp6(5),o.Q6J("ngForOf",i.ds.tmdbGenres),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length>0),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length>0),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length>0),o.xp6(1),o.Q6J("ngIf",i.ds.result.moviesLoaded>0),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length<1&&i.ds.loadingMovies))},dependencies:[ms,bi,an,bl],encapsulation:2}),n})(),xS=(()=>{class n{constructor(e,i,r){this.db=e,this.tmdb=i,this.authService=r,console.log("SearchService()")}SearchForMoviesTmdb(e){this.results=this.tmdb.searchMoviesTmdb(e,1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Qm),o.LFG(ts),o.LFG(Oo))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",6),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.ms.cMovie=s)}),o.TgZ(1,"div",7)(2,"small",8),o._uU(3),o.qZA()(),o._UZ(4,"img",9),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(3),o.Oqu(e.title),o.xp6(1),o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}let zY=(()=>{class n{constructor(e,i){this.ss=e,this.ms=i,this.title="search-page-component",console.log("SearchPageComponent();")}ngOnInit(){this.loadMovies()}loadMovies(){this.ss.results?.subscribe(e=>{this.movies=e.results,this.movies.forEach(i=>{i.base_url="https://image.tmdb.org/t/p/"})})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(xS),o.Y36(Ic))},n.\u0275cmp=o.Xpm({type:n,selectors:[["search-page-component"]],decls:8,vars:1,consts:[[1,"container-fluid","p-4"],[1,"row","mb-4"],["class","col-3 mb-4 p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"col-auto","mx-auto"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-3","mb-4","p-0","m-0",3,"routerLink","click"],[1,"text-truncate"],[1,""],[1,"img-fluid","btn","p-0","m-0",3,"src"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,qY,5,3,"div",2),o.qZA()(),o.TgZ(3,"div",1)(4,"div",3)(5,"div",4)(6,"span",5),o._uU(7,"Loading..."),o.qZA()()()()),2&e&&(o.xp6(2),o.Q6J("ngForOf",i.movies))},dependencies:[ms,bi],encapsulation:2}),n})(),WY=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}ngOnInit(){}signin(e,i){var r=this;return(0,ne.Z)(function*(){yield r.authService.SignIn(e.value,i.value)})()}GoogleAuth(){var e=this;return(0,ne.Z)(function*(){yield e.authService.GoogleAuth()})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Oo),o.Y36(Fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-in"]],decls:32,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],[1,"form-group","mb-2"],["type","email","placeholder","Email Address","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],[1,"form-group"],["type","button","value","Log in",1,"col-12","btn","btn-primary",3,"click"],[1,"col-12","text-center"],["type","button",1,"col-12","btn","btn-outline-primary",3,"click"],[1,"fa-brands","fa-google"],["routerLink","/forgot-password"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/register-user"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Sign in"),o.qZA(),o.TgZ(5,"form")(6,"div",4),o._UZ(7,"input",5,6),o.qZA(),o.TgZ(9,"div",4),o._UZ(10,"input",7,8),o.qZA(),o.TgZ(12,"div",9)(13,"input",10),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(8),h=o.MAs(11);return o.KtG(i.signin(c,h))}),o.qZA()(),o.TgZ(14,"div",9)(15,"div",11),o._uU(16,"- or -"),o.qZA()(),o.TgZ(17,"div",4)(18,"button",12),o.NdJ("click",function(){return i.authService.GoogleAuth()}),o._UZ(19,"i",13),o._uU(20," Log in with Google "),o.qZA()(),o.TgZ(21,"div",11)(22,"small"),o._uU(23," Forgot password? "),o.TgZ(24,"a",14),o._uU(25,"Recover"),o.qZA()()()()(),o._UZ(26,"div",15),o.TgZ(27,"div",16)(28,"small"),o._uU(29," Don't have an account? "),o.TgZ(30,"a",17),o._uU(31,"Sign up"),o.qZA()()()()()}},dependencies:[_s,Rs,Do,Io]}),n})(),KY=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Oo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-up"]],decls:27,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],[1,"form-group","mb-2"],["type","email","placeholder","Email Address","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],[1,"form-group"],["type","button","value","Sign Up",1,"col-12","btn","btn-primary",3,"click"],[1,"col-12","text-center"],["type","button",1,"col-12","btn","btn-outline-primary",3,"click"],[1,"fa-brands","fa-google"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/sign-in"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Sign up"),o.qZA(),o.TgZ(5,"form")(6,"div",4),o._UZ(7,"input",5,6),o.qZA(),o.TgZ(9,"div",4),o._UZ(10,"input",7,8),o.qZA(),o.TgZ(12,"div",9)(13,"input",10),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(8),h=o.MAs(11);return o.KtG(i.authService.SignUp(c.value,h.value))}),o.qZA()(),o.TgZ(14,"div",9)(15,"div",11),o._uU(16,"- or -"),o.qZA()(),o.TgZ(17,"div",9)(18,"button",12),o.NdJ("click",function(){return i.authService.GoogleAuth()}),o._UZ(19,"i",13),o._uU(20," Continue with Google "),o.qZA()()()(),o._UZ(21,"div",14),o.TgZ(22,"div",15)(23,"small"),o._uU(24," Already have an account? "),o.TgZ(25,"a",16),o._uU(26,"Sign in"),o.qZA()()()()()}},dependencies:[_s,Rs,Do,Io]}),n})();function YY(n,t){if(1&n&&o._UZ(0,"img",23),2&n){const e=o.oxw().ngIf;o.s9C("src",e.photoURL,o.LSH),o.s9C("alt",e.displayName)}}function JY(n,t){1&n&&(o.TgZ(0,"div",24),o._UZ(1,"i",25),o.qZA())}function QY(n,t){if(1&n&&(o.TgZ(0,"h4"),o._uU(1),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.hij("Hello ",e.displayName,"")}}function XY(n,t){if(1&n&&(o.TgZ(0,"div",1)(1,"div",19),o.YNc(2,YY,1,2,"img",20),o.YNc(3,JY,2,0,"div",21),o.YNc(4,QY,2,1,"h4",22),o.TgZ(5,"p"),o._uU(6,"ID: "),o.TgZ(7,"strong"),o._uU(8),o.qZA()(),o.TgZ(9,"p"),o._uU(10,"Email: "),o.TgZ(11,"strong"),o._uU(12),o.qZA()(),o.TgZ(13,"p"),o._uU(14,"Email Verified: "),o.TgZ(15,"strong"),o._uU(16),o.qZA()()()()),2&n){const e=t.ngIf;o.xp6(2),o.Q6J("ngIf",e.photoURL),o.xp6(1),o.Q6J("ngIf",!e.photoURL),o.xp6(1),o.Q6J("ngIf",e.displayName),o.xp6(4),o.Oqu(e.uid),o.xp6(4),o.Oqu(e.email),o.xp6(4),o.Oqu(e.emailVerified)}}function eJ(n,t){if(1&n&&(o.TgZ(0,"main",14)(1,"div",15)(2,"div",1)(3,"div",16)(4,"h4",17),o._uU(5,"User Profile"),o.qZA()()(),o.YNc(6,XY,17,6,"div",18),o.qZA()()),2&n){const e=o.oxw();o.xp6(6),o.Q6J("ngIf",e.authService.userData)}}function tJ(n,t){if(1&n&&(o.TgZ(0,"option",33),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.s9C("value",e),o.xp6(1),o.hij("",e,"+")}}function nJ(n,t){if(1&n&&(o.TgZ(0,"div",26),o._uU(1),o.TgZ(2,"div",34)(3,"label",35),o._uU(4),o.qZA(),o._UZ(5,"input",36),o.qZA()()),2&n){const e=o.oxw(3);o.xp6(1),o.hij(" Show as: ",null==e.authService.user?null:e.authService.user.prefs.showAs," "),o.xp6(3),o.hij("Show as: ",null==e.authService.user?null:e.authService.user.prefs.showAs,"")}}function iJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1)(1,"div",26)(2,"div",27)(3,"span",28),o._uU(4,"Age rating"),o.qZA(),o.TgZ(5,"select",29),o.NdJ("change",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.setAge(r))}),o.TgZ(6,"option",30),o._uU(7),o.qZA(),o.YNc(8,tJ,2,2,"option",31),o.qZA()()(),o.YNc(9,nJ,6,2,"div",32),o.qZA()}if(2&n){const e=o.oxw(2);o.xp6(6),o.s9C("value",e.authService.user.settings.ageRating),o.xp6(1),o.hij("",e.authService.user.settings.ageRating,"+"),o.xp6(1),o.Q6J("ngForOf",e.ages),o.xp6(1),o.Q6J("ngIf",null==e.authService.user?null:e.authService.user.prefs)}}function rJ(n,t){if(1&n&&(o.TgZ(0,"main",14)(1,"div",15)(2,"div",1)(3,"div",16)(4,"h4",17),o._uU(5,"Settings"),o.qZA()()(),o.YNc(6,iJ,10,4,"div",18),o.qZA()()),2&n){const e=o.oxw();o.xp6(6),o.Q6J("ngIf",null==e.authService.user?null:e.authService.user.loaded)}}function sJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",37)(1,"div",38)(2,"div",39)(3,"h4",17),o._uU(4,"Sign out?"),o.qZA()()(),o.TgZ(5,"div",40)(6,"div",41),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.signOut("y"))}),o._uU(7," Yes "),o.qZA(),o.TgZ(8,"div",42),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.signOut("n"))}),o._uU(9," No "),o.qZA()()()}}function oJ(n,t){1&n&&o._UZ(0,"div",43)}let aJ=(()=>{class n{constructor(e,i){this.authService=e,this.us=i,this.page="settings",this.ages=[7,9,11,13,16,18],this.pages=[],this.promptVisible=!1,this.dBody=document.body,this.isInline=!1,window.addEventListener("resize",r=>{})}ngOnInit(){this.nav(this.page)}ngAfterViewChecked(){}setAge(e){console.log(e.target.value),this.authService.user.settings.ageRating=Number(e.target.value),this.us.setItem(this.authService.user)}setH(){}nav(e){this.pages=[],this.pages.push(document.getElementById("profile")),this.pages.push(document.getElementById("settings"));for(const i of this.pages)i.classList.remove("bg-primary"),i.classList.remove("text-white"),i.style.cursor="pointer",i.id==e&&(i.classList.add("bg-primary"),i.classList.add("text-white"),i.style.cursor="auto");this.page=e}isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}promptSignOut(){this.promptVisible=!0}signOut(e){this.promptVisible=!1,"y"==e&&this.authService.SignOut()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Oo),o.Y36(xO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-dashboard"]],decls:26,vars:4,consts:[[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-auto","d-flex","d-md-block","p-0","m-0","mb-4","text-center"],["id","profile",1,"col","bg-primary","text-white","py-2","px-4","border",2,"cursor","pointer","user-select","none",3,"click"],[1,"fas","fa-user"],[1,"d-none","d-sm-inline"],["id","settings",1,"col","py-2","px-4","border",2,"cursor","pointer","user-select","none",3,"click"],[1,"fas","fa-gear"],[1,"col","d-none","d-md-block","py-2","px-4","border"],[1,"col","py-2","px-4","border",2,"cursor","pointer","user-select","none",3,"click"],[1,"fa-solid","fa-right-from-bracket"],["role","main","class","col px-4 mx-auto",4,"ngIf"],["class","position-fixed col-10 col-sm-8 col-md-6 col-lg-4 translate-middle start-50 top-50 bg-white p-4 border rounded","style","z-index:1200;",4,"ngIf"],["class","position-fixed translate-middle start-50 top-50","style","z-index:1000; width: 100vw; height: 100vh; background:rgba(0,0,0,0.6);",4,"ngIf"],["role","main",1,"col","px-4","mx-auto"],[1,"inner-adjust"],[1,"col","pb-2","mb-3","border-bottom"],[1,""],["class","row",4,"ngIf"],[1,"col"],["class","img img-fluid rounded-circle mb-2",3,"src","alt",4,"ngIf"],["class","h1 mb-2",4,"ngIf"],[4,"ngIf"],[1,"img","img-fluid","rounded-circle","mb-2",3,"src","alt"],[1,"h1","mb-2"],[1,"fa-solid","fa-user"],[1,"col-12"],[1,"input-group","mb-3"],[1,"input-group-text"],["title","rating","id","set-age",1,"form-select",3,"change"],["selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[3,"value"],[1,"form-check","form-switch"],["for","flexSwitchCheckDefault",1,"form-check-label"],["type","checkbox","id","flexSwitchCheckDefault","checked","",1,"form-check-input"],[1,"position-fixed","col-10","col-sm-8","col-md-6","col-lg-4","translate-middle","start-50","top-50","bg-white","p-4","border","rounded",2,"z-index","1200"],[1,"row","px-2"],[1,"col-12","pb-4","mb-4","border-bottom"],[1,"row","px-4","justify-content-end"],[1,"col-auto","btn","btn-danger","me-2",3,"click"],[1,"col-auto","btn","btn-outline-primary",3,"click"],[1,"position-fixed","translate-middle","start-50","top-50",2,"z-index","1000","width","100vw","height","100vh","background","rgba(0,0,0,0.6)"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o.NdJ("click",function(){return i.nav("profile")}),o.TgZ(4,"i",4),o._uU(5,"\xa0"),o.qZA(),o.TgZ(6,"div",5),o._uU(7,"\xa0User Profile"),o.qZA()(),o.TgZ(8,"div",6),o.NdJ("click",function(){return i.nav("settings")}),o.TgZ(9,"i",7),o._uU(10,"\xa0"),o.qZA(),o.TgZ(11,"div",5),o._uU(12,"\xa0Settings"),o.qZA()(),o.TgZ(13,"div",8),o._uU(14," \xa0 "),o.TgZ(15,"div",5),o._uU(16,"\xa0"),o.qZA()(),o.TgZ(17,"div",9),o.NdJ("click",function(){return i.promptSignOut()}),o.TgZ(18,"i",10),o._uU(19,"\xa0"),o.qZA(),o.TgZ(20,"div",5),o._uU(21,"\xa0Sign out"),o.qZA()()(),o.YNc(22,eJ,7,1,"main",11),o.YNc(23,rJ,7,1,"main",11),o.qZA()(),o.YNc(24,sJ,10,0,"div",12),o.YNc(25,oJ,1,0,"div",13)),2&e&&(o.xp6(22),o.Q6J("ngIf","profile"==i.page),o.xp6(1),o.Q6J("ngIf","settings"==i.page),o.xp6(1),o.Q6J("ngIf",i.promptVisible),o.xp6(1),o.Q6J("ngIf",i.promptVisible))},dependencies:[bi,an,d0,M_],encapsulation:2}),n})(),lJ=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Oo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-forgot-password"]],decls:19,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],[1,"form-group","mb-2"],["type","email","placeholder","Email Address","required","",1,"form-control"],["passwordResetEmail",""],["id","emailHelp",1,"form-text","text-muted"],[1,"form-group"],["type","submit","value","Reset Password",1,"col-12","btn","btn-primary",3,"click"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/sign-in"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Reset Password"),o.qZA(),o.TgZ(5,"form")(6,"div",4),o._UZ(7,"input",5,6),o.TgZ(9,"small",7),o._uU(10,"Please enter your email address to request a password reset."),o.qZA()(),o.TgZ(11,"div",8)(12,"input",9),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(8);return o.KtG(i.authService.ForgotPassword(c.value))}),o.qZA()()()(),o._UZ(13,"div",10),o.TgZ(14,"div",11)(15,"small"),o._uU(16," Go back to? "),o.TgZ(17,"a",12),o._uU(18,"Log in"),o.qZA()()()()()}},dependencies:[_s,Rs,Do,Io]}),n})();function cJ(n,t){if(1&n&&(o.TgZ(0,"div",5)(1,"p",12),o._uU(2,"We have sent a confirmation email to "),o.TgZ(3,"strong"),o._uU(4),o.qZA(),o._uU(5,"."),o.qZA(),o.TgZ(6,"p",13),o._uU(7,"Please check your email and click on the link to verfiy your email address."),o.qZA()()),2&n){const e=t.ngIf;o.xp6(4),o.Oqu(e.email)}}let uJ=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Oo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-verify-email"]],decls:18,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"row","justify-content-middle"],["type","button",1,"col-auto","btn","btn-primary","mx-auto",3,"click"],[1,"fas","fa-redo-alt"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/sign-in"],[1,"text-center","m-0"],[1,"text-center"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Thank You for Registering"),o.qZA(),o.TgZ(5,"form"),o.YNc(6,cJ,8,1,"div",4),o.TgZ(7,"div",5)(8,"div",6)(9,"button",7),o.NdJ("click",function(){return i.authService.SendVerificationMail()}),o._UZ(10,"i",8),o._uU(11," Resend verification email "),o.qZA()()()()(),o._UZ(12,"div",9),o.TgZ(13,"div",10)(14,"small"),o._uU(15," Go back to? "),o.TgZ(16,"a",11),o._uU(17,"Sign in"),o.qZA()()()()()),2&e&&(o.xp6(6),o.Q6J("ngIf",i.authService.userData))},dependencies:[_s,an,Rs,Do,Io]}),n})(),o_=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return 1!=this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Oo),o.LFG(Fn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dJ=[{path:"",component:P3,data:{title:"Home"}},{path:"home",component:P3,data:{title:"Home"}},{path:"movies",component:FK,data:{title:"Movies"},canActivate:[o_]},{path:"movie/:id",component:bY,data:{title:"Movie details"}},{path:"lists",component:F3,data:{title:"Lists"},canActivate:[o_]},{path:"list/:name",component:F3,data:{title:"List details"},canActivate:[o_]},{path:"profile",component:NY,data:{title:"Profile"},canActivate:[o_]},{path:"settings",component:xY,data:{title:"Settings"},canActivate:[o_]},{path:"search",component:zY,pathMatch:"full",data:{title:"Search"},canActivate:[o_]},{path:"discover",component:ZY,data:{title:"Discover movies"}},{path:"dashboard",component:aJ,data:{title:"Dashboard"},canActivate:[o_]},{path:"sign-in",component:WY,data:{title:"Sign in"}},{path:"register-user",component:KY,data:{title:"Register"}},{path:"forgot-password",component:lJ,data:{title:"Reset password"}},{path:"verify-email-address",component:uJ,data:{title:"Verify email address"}}];let hJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[yb.forRoot(dJ,{onSameUrlNavigation:"reload"}),yb]}),n})(),fJ=(()=>{class n{constructor(e,i,r,s){this.router=e,this.ss=i,this.ms=r,this.tmdb=s,this.title="search-field-component"}ngOnInit(){}loadMovies(){var e=this;this.ss.results?.subscribe(function(){var i=(0,ne.Z)(function*(r){e.movies=r.results,console.log(e.movies),e.movies.forEach(s=>{s.base_url="https://image.tmdb.org/t/p/"}),e.ss.movies=e.movies});return function(r){return i.apply(this,arguments)}}())}search(){var e=this;return(0,ne.Z)(function*(){e.movies=[],e.tmdb.searchMoviesTmdb(e.value,1).subscribe(function(){var i=(0,ne.Z)(function*(r){e.ss.movies=[],r.results.forEach(s=>{let c=new la(s);s.base_url="https://image.tmdb.org/t/p/",e.ss.movies.push(s),e.movies.push(c)}),e.movies.forEach(s=>{s.init()})});return function(r){return i.apply(this,arguments)}}())})()}fullSearch(){console.log("Fullsearch"),console.log(this.value),this.ss.movieResults=this.movies,this.value="",this.movies=[],this.ss.movies=void 0,this.router.navigate(["search"])}clear(){this.ss.movieResults=[],this.value="",this.movies=[],this.ss.movies=void 0}checkEvent(e){"Enter"==e.key&&(console.log("Pressed enter"),this.router.navigate(["search"]),this.value="",this.movies=void 0,this.clear())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Fn),o.Y36(xS),o.Y36(Ic),o.Y36(ts))},n.\u0275cmp=o.Xpm({type:n,selectors:[["search-field-component"]],decls:3,vars:1,consts:[[1,"form-inline","mx-sm-4","my-2"],["id","sfmovie","type","Search","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keypress","input","close"],["searchForMovie",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"input",1,2),o.NdJ("ngModelChange",function(s){return i.value=s})("keypress",function(s){return i.checkEvent(s)})("input",function(){return i.search()})("close",function(){return i.clear()}),o.qZA()()),2&e&&(o.xp6(1),o.Q6J("ngModel",i.value))},dependencies:[Yo,Xc,ia],encapsulation:2}),n})();function pJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",15),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="movies")}),o._uU(1,"Movies"),o.qZA()}}function gJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",16),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="lists")}),o._uU(1,"Lists"),o.qZA()}}function mJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",17),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="dashboard")}),o._uU(1,"Dashboard"),o.qZA()}}function _J(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",18),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="sign-in")}),o._UZ(1,"i",19),o._uU(2," Sign in"),o.qZA()}}let vJ=(()=>{class n{constructor(e,i){this.authService=e,this.ms=i,this.title="navigation-component",this.isMenuCollapsed=!0}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Oo),o.Y36(Ic))},n.\u0275cmp=o.Xpm({type:n,selectors:[["navigation-component"]],decls:22,vars:6,consts:[[1,"fixed-top","navbar","navbar-expand-md","navbar-light","bg-light","border-bottom","p-0","m-0","px-2","px-sm-4",2,"z-index","500","width","100vw"],["routerLink","/",1,"navbar-brand",3,"click"],[1,"d-inline","d-sm-inline","d-md-none","d-lg-none"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav"],[1,"nav-item"],["class","nav-link","routerLink","/movies",3,"click",4,"ngIf"],["class","nav-link","routerLink","/lists",3,"click",4,"ngIf"],["routerLink","/discover",1,"nav-link",3,"click"],[1,"d-none","d-sm-none","d-md-block"],[1,"collapse","navbar-collapse","justify-content-end",3,"ngbCollapse"],["class","nav-link","routerLink","/dashboard",3,"click",4,"ngIf"],["class","nav-link","routerLink","/sign-in",3,"click",4,"ngIf"],["routerLink","/movies",1,"nav-link",3,"click"],["routerLink","/lists",1,"nav-link",3,"click"],["routerLink","/dashboard",1,"nav-link",3,"click"],["routerLink","/sign-in",1,"nav-link",3,"click"],[1,"fa-solid","fa-right-to-bracket"]],template:function(e,i){1&e&&(o.TgZ(0,"nav",0)(1,"a",1),o.NdJ("click",function(){return i.isMenuCollapsed=!0,i.ms.page="Home"}),o._uU(2,"Home"),o.qZA(),o._UZ(3,"search-field-component",2),o.TgZ(4,"button",3),o.NdJ("click",function(){return i.isMenuCollapsed=!i.isMenuCollapsed}),o._UZ(5,"span",4),o.qZA(),o.TgZ(6,"div",5)(7,"ul",6)(8,"li",7),o.YNc(9,pJ,2,0,"a",8),o.qZA(),o.TgZ(10,"li",7),o.YNc(11,gJ,2,0,"a",9),o.qZA(),o.TgZ(12,"li",7)(13,"a",10),o.NdJ("click",function(){return i.isMenuCollapsed=!0,i.ms.page="discover"}),o._uU(14,"Discover"),o.qZA()()()(),o._UZ(15,"search-field-component",11),o.TgZ(16,"div",12)(17,"ul",6)(18,"li",7),o.YNc(19,mJ,2,0,"a",13),o.qZA(),o.TgZ(20,"li",7),o.YNc(21,_J,3,0,"a",14),o.qZA()()()()),2&e&&(o.xp6(6),o.Q6J("ngbCollapse",i.isMenuCollapsed),o.xp6(3),o.Q6J("ngIf",i.authService.isLoggedIn),o.xp6(2),o.Q6J("ngIf",i.authService.isLoggedIn),o.xp6(5),o.Q6J("ngbCollapse",i.isMenuCollapsed),o.xp6(3),o.Q6J("ngIf",i.authService.isLoggedIn),o.xp6(2),o.Q6J("ngIf",!i.authService.isLoggedIn))},dependencies:[_s,qV,CO,an,fJ],encapsulation:2}),n})(),yJ=(()=>{class n{constructor(e,i){this.location=e,this.router=i,this.title="",this.router.events.pipe(zn(r=>r instanceof Ir)).subscribe(r=>{let c=this.router.routerState.snapshot.root.children;this.title="";for(let h=0;h<c.length;h++){this.title+=c[h].data.title}})}ngOnInit(){}ngOnChanges(){console.log("CHANGE!!!")}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ke),o.Y36(Fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["header-component"]],features:[o.TTD],decls:5,vars:1,consts:[[1,"fixed-top","container-fluid","mt-4",2,"z-index","50"],[1,"row","mt-4"],[1,"col-w100","py-1","my-1"],[1,"col-auto","rounded","border","bg-white","text-secondary","mx-auto","py-2","px-3"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2),o.TgZ(3,"h6",3),o._uU(4),o.qZA()()()),2&e&&(o.xp6(4),o.hij(" ",i.title," "))},encapsulation:2}),n})(),bJ=(()=>{class n{constructor(){this.title="footer-component",this.isFixed=!1,this.dBody=document.body,window.addEventListener("resize",e=>{this.setH()})}ngOnInit(){this.footer=document.getElementById("footer")}ngAfterViewInit(){this.setH()}setH(){this.dBody.clientHeight>window.innerHeight-this.footer.clientHeight?this.footer.style.position="relative":(this.footer.style.position="fixed",this.footer.style.bottom="0")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["footer-component"]],decls:13,vars:0,consts:[["id","footer",1,"container-fluid","p-2","mt-4","border-top","bg-white",2,"z-index","600"],[1,"row","text-center"],[1,"col-4","btn","p-0","m-0"],["routerLink","/",1,"btn","p-0","m-0"],[1,"col-4","btn","p-0","m-0","border-end","border-start"],["href","https://www.themoviedb.org/","target","_blank"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),o._uU(4," \xa0 "),o.qZA()(),o.TgZ(5,"div",4)(6,"small"),o._uU(7,"Powered by "),o.TgZ(8,"a",5),o._uU(9,"Tmdb"),o.qZA()()(),o.TgZ(10,"div",2)(11,"a",3),o._uU(12," \xa0 "),o.qZA()()()())},dependencies:[_s],encapsulation:2}),n})();function wJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.toTop())}),o.TgZ(1,"div",2),o._uU(2," To top "),o.qZA()()}}let CJ=(()=>{class n{constructor(){this.title="to-top-angular",this.show=!1,window.addEventListener("scroll",()=>{this.show=window.scrollY>10})}toTop(){window.scroll({top:0,left:0,behavior:"smooth"})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["to-top-component"]],decls:1,vars:1,consts:[["class","col-auto rounded-circle bg-primary text-white p-0 m-0","style","z-index: 3500;","id","totop",3,"click",4,"ngIf"],["id","totop",1,"col-auto","rounded-circle","bg-primary","text-white","p-0","m-0",2,"z-index","3500",3,"click"],[1,"position-absolute","top-50","start-50","translate-middle"]],template:function(e,i){1&e&&o.YNc(0,wJ,3,0,"div",0),2&e&&o.Q6J("ngIf",i.show)},dependencies:[an],styles:["#totop[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;position:fixed;bottom:2rem;right:2rem;width:6rem;height:6rem;opacity:.9}"]}),n})();function TJ(n,t){1&n&&(o.TgZ(0,"div",3)(1,"h4"),o._uU(2,"Search results"),o.qZA()())}function DJ(n,t){1&n&&o._UZ(0,"img",12)}function EJ(n,t){if(1&n&&o._UZ(0,"img",13),2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w200"+e.poster_path,o.LSH)}}function IJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",4),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return c.ms.cMovie=s,c.ss.movies=[],o.KtG(c.clear())}),o.TgZ(1,"div",5)(2,"div",6),o.YNc(3,DJ,1,0,"img",7),o.YNc(4,EJ,1,1,"img",8),o.qZA(),o.TgZ(5,"div",9)(6,"div",10)(7,"div",11)(8,"b"),o._uU(9),o.qZA()()(),o.TgZ(10,"div",5)(11,"div",11),o._uU(12),o.qZA()()()()()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(3),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading),o.xp6(5),o.Oqu(e.title),o.xp6(3),o.hij(" ",e.overview," ")}}let SJ=(()=>{class n{constructor(e,i,r,s){this.router=e,this.ss=i,this.ms=r,this.tmdb=s,this.title="search-result-component",this.visible=!1}ngOnInit(){}clear(){this.value="",this.movies=void 0,this.ss.movieResults=[],this.value="",this.movies=[],this.ss.movies=void 0,this.visible=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Fn),o.Y36(xS),o.Y36(Ic),o.Y36(ts))},n.\u0275cmp=o.Xpm({type:n,selectors:[["search-result-component"]],decls:3,vars:2,consts:[[1,"col-12","start-0","position-absolute","mx-auto","px-4",2,"z-index","2500"],["class","col-12 border-bottom border-start border-end bg-light m-0 px-3 py-2",4,"ngIf"],["class","col-12 btn border-bottom border-start border-end bg-light",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"col-12","border-bottom","border-start","border-end","bg-light","m-0","px-3","py-2"],[1,"col-12","btn","border-bottom","border-start","border-end","bg-light",3,"routerLink","click"],[1,"row"],[1,"col-4","col-sm-2"],["class","img-fluid rounded p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING",4,"ngIf"],["class","img-fluid rounded p-0 m-0",3,"src",4,"ngIf"],[1,"col-8","col-sm-10","text-start"],[1,"row","text-truncate"],[1,"col-12"],["src","https://via.placeholder.com/200x300?text=LOADING",1,"img-fluid","rounded","p-0","m-0"],[1,"img-fluid","rounded","p-0","m-0",3,"src"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,TJ,3,0,"div",1),o.YNc(2,IJ,13,5,"div",2),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.ss.movies),o.xp6(1),o.Q6J("ngForOf",i.ss.movies))},dependencies:[ms,bi,an],encapsulation:2}),n})(),AJ=(()=>{class n{constructor(){this.title="tma-angular"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:0,consts:[[1,"container-fluid","p-4","mb-4"],[1,"row","p-3","mb-3"],[1,"col"],[1,"col-12","col-md-10","col-lg-8","m-auto","mb-4"],[1,"row","mb-4"],[1,"col","mb-4"]],template:function(e,i){1&e&&(o._UZ(0,"to-top-component")(1,"navigation-component")(2,"header-component"),o.TgZ(3,"div",0)(4,"div",1),o._UZ(5,"div",2),o.qZA()(),o._UZ(6,"search-result-component"),o.TgZ(7,"div",3),o._UZ(8,"router-outlet"),o.qZA(),o.TgZ(9,"div",4),o._UZ(10,"div",5),o.qZA(),o._UZ(11,"footer-component"))},dependencies:[bg,vJ,yJ,bJ,CJ,SJ]}),n})();const L3="firebasestorage.googleapis.com",U3="storageBucket";class Zi extends B.ZR{constructor(t,e,i=0){super(MO(t),`Firebase Storage: ${e} (${MO(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return MO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var mi=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(mi||(mi={})),mi))();function MO(n){return"storage/"+n}function RO(){return new Zi(mi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function B3(){return new Zi(mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function V3(){return new Zi(mi.CANCELED,"User canceled the upload/download.")}function j3(){return new Zi(mi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ky(n){return new Zi(mi.INVALID_ARGUMENT,n)}function H3(){return new Zi(mi.APP_DELETED,"The Firebase app was deleted.")}function G3(n){return new Zi(mi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mC(n,t){return new Zi(mi.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function _C(n){throw new Zi(mi.INTERNAL_ERROR,"Internal error: "+n)}class js{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=js.makeFromUrl(t,e)}catch{return new js(t,"")}if(""===i.path)return i;throw function BJ(n){return new Zi(mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function v(He){He.path_=decodeURIComponent(He.path)}const S=e.replace(/[.]/g,"\\."),Be=[{regex:h,indices:{bucket:1,path:3},postModify:function s(He){"/"===He.path.charAt(He.path.length-1)&&(He.path_=He.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${e===L3?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let He=0;He<Be.length;He++){const nt=Be[He],at=nt.regex.exec(t);if(at){let Xt=at[nt.indices.path];Xt||(Xt=""),i=new js(at[nt.indices.bucket],Xt),nt.postModify(i);break}}if(null==i)throw function UJ(n){return new Zi(mi.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return i}}class $J{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function MS(n){return"string"==typeof n||n instanceof String}function $3(n){return kO()&&n instanceof Blob}function kO(){return typeof Blob<"u"&&!(0,B.UG)()}function OO(n,t,e,i){if(i<t)throw Ky(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Ky(`Invalid value for '${n}'. Expected ${e} or less.`)}function ch(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function Z3(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Ip=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Ip||(Ip={})),Ip))();function q3(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class YJ{constructor(t,e,i,r,s,c,h,p,v,w,S,N=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=w,this.connectionFactory_=S,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,G)=>{this.resolve_=O,this.reject_=G,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function zJ(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==h){const p=RO();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(r.canceled?this.appDelete_?H3():V3():B3())};this.canceled_?e(0,new RS(!1,null,!0)):this.backoffId_=function ZJ(n,t,e){let i=1,r=null,s=null,c=!1,h=0;function p(){return 2===h}let v=!1;function w(...te){v||(v=!0,t.apply(null,te))}function S(te){r=setTimeout(()=>{r=null,n(O,p())},te)}function N(){s&&clearTimeout(s)}function O(te,...De){if(v)return void N();if(te)return N(),void w.call(null,te,...De);if(p()||c)return N(),void w.call(null,te,...De);let Be;i<64&&(i*=2),1===h?(h=2,Be=0):Be=1e3*(i+Math.random()),S(Be)}let G=!1;function J(te){G||(G=!0,N(),!v&&(null!==r?(te||(h=2),clearTimeout(r),S(0)):te||(h=1)))}return S(0),s=setTimeout(()=>{c=!0,J(!0)},e),J}((i,r)=>{if(r)return void i(!1,new RS(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===Ip.NO_ERROR,p=s.getStatus();if(!h||q3(p,this.additionalRetryCodes_)&&this.retry){const w=s.getErrorCode()===Ip.ABORT;return void i(!1,new RS(!1,null,w))}const v=-1!==this.successCodes_.indexOf(p);i(!0,new RS(v,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function qJ(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class RS{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function iQ(...n){const t=function nQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(kO())return new Blob(n);throw new Zi(mi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const wa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class PO{constructor(t,e){this.data=t,this.contentType=e||null}}function FO(n,t){switch(n){case wa.RAW:return new PO(z3(t));case wa.BASE64:case wa.BASE64URL:return new PO(W3(n,t));case wa.DATA_URL:return new PO(function aQ(n){const t=new K3(n);return t.base64?W3(wa.BASE64,t.rest):function oQ(n){let t;try{t=decodeURIComponent(n)}catch{throw mC(wa.DATA_URL,"Malformed data URL.")}return z3(t)}(t.rest)}(t),function lQ(n){return new K3(n).contentType}(t))}throw RO()}function z3(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function W3(n,t){switch(n){case wa.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw mC(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case wa.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw mC(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function sQ(n){if(typeof atob>"u")throw function GJ(n){return new Zi(mi.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:mC(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class K3{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw mC(wa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function cQ(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class xu{constructor(t,e){let i=0,r="";$3(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if($3(this.data_)){const r=function rQ(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new xu(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new xu(i,!0)}}static getBlob(...t){if(kO()){const e=t.map(i=>i instanceof xu?i.data_:i);return new xu(iQ.apply(null,e))}{const e=t.map(c=>MS(c)?FO(wa.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let h=0;h<c.length;h++)r[s++]=c[h]}),new xu(r,!0)}}uploadData(){return this.data_}}function LO(n){let t;try{t=JSON.parse(n)}catch{return null}return function KJ(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function Y3(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function hQ(n,t){return t}class ao{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||hQ}}let kS=null;function vC(){if(kS)return kS;const n=[];n.push(new ao("bucket")),n.push(new ao("generation")),n.push(new ao("metageneration")),n.push(new ao("name","fullPath",!0));const e=new ao("name");e.xform=function t(s,c){return function fQ(n){return!MS(n)||n.length<2?n:Y3(n)}(c)},n.push(e);const r=new ao("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new ao("timeCreated")),n.push(new ao("updated")),n.push(new ao("md5Hash",null,!0)),n.push(new ao("cacheControl",null,!0)),n.push(new ao("contentDisposition",null,!0)),n.push(new ao("contentEncoding",null,!0)),n.push(new ao("contentLanguage",null,!0)),n.push(new ao("contentType",null,!0)),n.push(new ao("metadata","customMetadata",!0)),kS=n,kS}function J3(n,t,e){const i=LO(t);return null===i?null:function gQ(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function pQ(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new js(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function UO(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const Q3="prefixes";class Mu{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ru(n){if(!n)throw RO()}function OS(n,t){return function e(i,r){const s=J3(n,r,t);return Ru(null!==s),s}}function Yy(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function FJ(){return new Zi(mi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function PJ(){return new Zi(mi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function OJ(n){return new Zi(mi.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function LJ(n){return new Zi(mi.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function yC(n){const t=Yy(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function kJ(n){return new Zi(mi.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function e6(n,t,e){const r=ch(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Mu(r,"GET",OS(n,e),c);return h.errorHandler=yC(t),h}function wQ(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const h=ch(t.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,w=new Mu(h,"GET",function yQ(n,t){return function e(i,r){const s=function vQ(n,t,e){const i=LO(e);return null===i?null:function _Q(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[Q3])for(const r of e[Q3]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new js(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new js(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Ru(null!==s),s}}(n,t.bucket),v);return w.urlParams=s,w.errorHandler=Yy(t),w}function n6(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function EQ(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class PS{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function BO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ru(!1)}return Ru(!!e&&-1!==(t||["active"]).indexOf(e)),e}const NQ={STATE_CHANGED:"state_changed"},lo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VO(n){switch(n){case"running":case"pausing":case"canceling":return lo.RUNNING;case"paused":return lo.PAUSED;case"success":return lo.SUCCESS;case"canceled":return lo.CANCELED;default:return lo.ERROR}}class xQ{constructor(t,e,i){if(function WJ(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Jy(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class RQ extends class MQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ip.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ip.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ip.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw _C("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _C("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _C("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _C("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _C("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function xc(){return new RQ}class o6{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=vC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(mi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(q3(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=B3()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(mi.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function IQ(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=n6(t,i,r),h={name:c.fullPath},p=ch(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=UO(c,e),G=new Mu(p,"POST",function O(J){let te;BO(J);try{te=J.getResponseHeader("X-Goog-Upload-URL")}catch{Ru(!1)}return Ru(MS(te)),te},n.maxUploadRetryTime);return G.urlParams=h,G.headers=w,G.body=S,G.errorHandler=Yy(t),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,xc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function SQ(n,t,e,i){const p=new Mu(e,"POST",function s(v){const w=BO(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ru(!1)}S||Ru(!1);const N=Number(S);return Ru(!isNaN(N)),new PS(N,i.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Yy(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,xc,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new PS(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function AQ(n,t,e,i,r,s,c,h){const p=new PS(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function jJ(){return new Zi(mi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=p.total-p.current;let w=v;r>0&&(w=Math.min(w,r));const S=p.current;let O="";O=0===w?"finalize":v===w?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":O,"X-Goog-Upload-Offset":`${p.current}`},J=i.slice(S,S+w);if(null===J)throw j3();const Be=new Mu(e,"POST",function te(He,nt){const at=BO(He,["active","final"]),Gt=p.current+w,Xt=i.size();let _i;return _i="final"===at?OS(t,s)(He,nt):null,new PS(Gt,Xt,"final"===at,_i)},t.maxUploadRetryTime);return Be.headers=G,Be.body=J.uploadData(),Be.progressCallback=h||null,Be.errorHandler=Yy(n),Be}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,xc,r,s,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=e6(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,xc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function i6(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let Be="";for(let He=0;He<2;He++)Be+=Math.random().toString().slice(2);return Be}();c["Content-Type"]="multipart/related; boundary="+p;const v=n6(t,i,r),w=UO(v,e),O=xu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===O)throw j3();const G={name:v.fullPath},J=ch(s,n.host,n._protocol),De=n.maxUploadRetryTime,Oe=new Mu(J,"POST",OS(n,e),De);return Oe.urlParams=G,Oe.headers=c,Oe.body=O.uploadData(),Oe.errorHandler=Yy(t),Oe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,xc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=V3(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=VO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new xQ(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(VO(this._state)){case lo.SUCCESS:Jy(this._resolve.bind(null,this.snapshot))();break;case lo.CANCELED:case lo.ERROR:Jy(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(VO(this._state)){case lo.RUNNING:case lo.PAUSED:t.next&&Jy(t.next.bind(t,this.snapshot))();break;case lo.SUCCESS:t.complete&&Jy(t.complete.bind(t))();break;default:t.error&&Jy(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class a_{constructor(t,e){this._service=t,this._location=e instanceof js?e:js.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new a_(t,e)}get root(){const t=new js(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y3(this._location.path)}get storage(){return this._service}get parent(){const t=function uQ(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new js(this._location.bucket,t);return new a_(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw G3(t)}}function l6(n,t,e){return jO.apply(this,arguments)}function jO(){return jO=(0,ne.Z)(function*(n,t,e){const r=yield c6(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield l6(n,t,r.nextPageToken))}),jO.apply(this,arguments)}function c6(n,t){null!=t&&"number"==typeof t.maxResults&&OO("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=wQ(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,xc)}function $Q(n){n._throwIfRoot("getDownloadURL");const t=function CQ(n,t,e){const r=ch(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Mu(r,"GET",function bQ(n,t){return function e(i,r){const s=J3(n,r,t);return Ru(null!==s),function mQ(n,t,e,i){const r=LO(t);if(null===r||!MS(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(v=>{const S=n.fullPath;return ch("/b/"+c(n.bucket)+"/o/"+c(S),e,i)+Z3({alt:"media",token:v})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return h.errorHandler=yC(t),h}(n.storage,n._location,vC());return n.storage.makeRequestWithTokens(t,xc).then(e=>{if(null===e)throw function HJ(){return new Zi(mi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function u6(n,t){const e=function dQ(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new js(n._location.bucket,e);return new a_(n.storage,i)}function d6(n,t){if(n instanceof HO){const e=n;if(null==e._bucket)throw function VJ(){return new Zi(mi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U3+"' property when initializing the app?")}();const i=new a_(e,e._bucket);return null!=t?d6(i,t):i}return void 0!==t?u6(n,t):n}function WQ(n,t){if(t&&function qQ(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof HO)return function zQ(n,t){return new a_(n,t)}(n,t);throw Ky("To use ref(service, url), the first argument must be a Storage instance.")}return d6(n,t)}function h6(n,t){const e=t?.[U3];return null==e?null:js.makeFromBucketSpec(e,n)}class HO{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=L3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?js.makeFromBucketSpec(r,this._host):h6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?js.makeFromBucketSpec(this._url,t):h6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){OO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){OO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,ne.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,ne.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new a_(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new $J(H3());{const c=function tQ(n,t,e,i,r,s,c=!0){const h=Z3(n.urlParams),p=n.url+h,v=Object.assign({},n.headers);return function XJ(n,t){t&&(n["X-Firebase-GMPID"]=t)}(v,t),function JJ(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(v,e),function QJ(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(v,s),function eQ(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(v,i),new YJ(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(t,e){var i=this;return(0,ne.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const f6="@firebase/storage";function m6(n,t){return WQ(n=(0,B.m9)(n),t)}function rX(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new HO(e,i,r,t,ns.SDK_VERSION)}!function sX(){(0,ns._registerComponent)(new ca.wA("storage",rX,"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(f6,"0.11.2",""),(0,ns.registerVersion)(f6,"0.11.2","esm2017")}();class FS{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class v6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new FS(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new FS(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new FS(c,this,this._ref)):{next:e.next?c=>e.next(new FS(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class y6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new uh(t,this._service))}get items(){return this._delegate.items.map(t=>new uh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class uh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function iX(n,t){return u6(n,t)}(this._delegate,t);return new uh(e,this.storage)}get root(){return new uh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new uh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new v6(function YQ(n,t,e){return function BQ(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new o6(n,new xu(t),e)}(n=(0,B.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=wa.RAW,i){this._throwIfRoot("putString");const r=FO(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new v6(new o6(this._delegate,new xu(r.data,!0),s),this)}listAll(){return function eX(n){return function jQ(n){const t={prefixes:[],items:[]};return l6(n,t).then(()=>t)}(n=(0,B.m9)(n))}(this._delegate).then(t=>new y6(t,this.storage))}list(t){return function XQ(n,t){return c6(n=(0,B.m9)(n),t)}(this._delegate,t||void 0).then(e=>new y6(e,this.storage))}getMetadata(){return function JQ(n){return function HQ(n){n._throwIfRoot("getMetadata");const t=e6(n.storage,n._location,vC());return n.storage.makeRequestWithTokens(t,xc)}(n=(0,B.m9)(n))}(this._delegate)}updateMetadata(t){return function QQ(n,t){return function GQ(n,t){n._throwIfRoot("updateMetadata");const e=function TQ(n,t,e,i){const s=ch(t.fullServerUrl(),n.host,n._protocol),h=UO(e,i),v=n.maxOperationRetryTime,w=new Mu(s,"PATCH",OS(n,i),v);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=yC(t),w}(n.storage,n._location,t,vC());return n.storage.makeRequestWithTokens(e,xc)}(n=(0,B.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function tX(n){return $Q(n=(0,B.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function nX(n){return function ZQ(n){n._throwIfRoot("deleteObject");const t=function DQ(n,t){const i=ch(t.fullServerUrl(),n.host,n._protocol),h=new Mu(i,"DELETE",function c(p,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=yC(t),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,xc)}(n=(0,B.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw G3(t)}}class b6{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(w6(t))throw Ky("ref() expected a child path but got a URL, use refFromURL instead.");return new uh(m6(this._delegate,t),this)}refFromURL(t){if(!w6(t))throw Ky("refFromURL() expected a full URL but got a child path, use ref() instead.");try{js.makeFromUrl(t,this._delegate.host)}catch{throw Ky("refFromUrl() expected a valid full URL but got an invalid one.")}return new uh(m6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function _6(n,t,e,i={}){!function KQ(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,B.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function w6(n){return/^[A-Za-z]+:\/\//.test(n)}function cX(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new b6(e,i)}function C6(n){const t=function dX(n){return new Bn.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(function NJ(n,t=If.z){return(0,Wi.e)((e,i)=>{let r=null,s=null,c=null;const h=()=>{if(r){r.unsubscribe(),r=null;const v=s;s=null,i.next(v)}};function p(){const v=c+n,w=t.now();if(w<v)return r=this.schedule(void 0,v-w),void i.add(r);h()}e.subscribe((0,xn.x)(i,v=>{s=v,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ht.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function LS(n){return{getDownloadURL:()=>mt(void 0).pipe(Tn.fc,Ti(()=>n.getDownloadURL()),Tn.iC),getMetadata:()=>mt(void 0).pipe(Tn.fc,Ti(()=>n.getMetadata()),Tn.iC),delete:()=>(0,_n.D)(n.delete()),child:t=>LS(n.child(t)),updateMetadata:t=>(0,_n.D)(n.updateMetadata(t)),put:(t,e)=>C6(n.put(t,e)),putString:(t,e,i)=>C6(n.putString(t,e,i)),list:t=>(0,_n.D)(n.list(t)),listAll:()=>(0,_n.D)(n.listAll())}}!function uX(n){const t={TaskState:lo,TaskEvent:NQ,StringFormat:wa,Storage:b6,Reference:uh};n.INTERNAL.registerComponent(new ca.wA("storage-compat",cX,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(lu.Z);const hX=new o.OlP("angularfire2.storageBucket"),fX=new o.OlP("angularfire2.storage.maxUploadRetryTime"),pX=new o.OlP("angularfire2.storage.maxOperationRetryTime"),gX=new o.OlP("angularfire2.storage.use-emulator");let mX=(()=>{class n{constructor(e,i,r,s,c,h,p,v,w,S){const N=(0,Ki.on)(e,c,i);this.storage=(0,Ki.cc)(`${N.name}.storage.${r}`,"AngularFireStorage",N.name,()=>{const O=c.runOutsideAngular(()=>N.storage(r||void 0)),G=w;return G&&O.useEmulator(...G),p&&O.setMaxUploadRetryTime(p),v&&O.setMaxOperationRetryTime(v),O},[p,v])}ref(e){return LS(this.storage.ref(e))}refFromURL(e){return LS(this.storage.refFromURL(e))}upload(e,i,r){return LS(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ki.Dh),o.LFG(Ki.xv,8),o.LFG(hX,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(fX,8),o.LFG(pX,8),o.LFG(gX,8),o.LFG(A1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),vX=(()=>{class n{constructor(){RI.Z.registerVersion("angularfire",Tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[mX],imports:[_X]}),n})(),yX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[AJ]}),n.\u0275inj=o.cJS({providers:[Oo,xO,ts,Ic,xS,NO,NS],imports:[Ki.hO.initializeApp(xg_firebase),BG,zG,vX,nq,hJ,n7,Mh,hA,QS,k_]}),n})();(0,o.G48)(),Ol().bootstrapModule(yX).catch(n=>console.error(n))},9751:(bt,Re,V)=>{V.d(Re,{y:()=>ye});var o=V(930),$=V(727),P=V(8822),oe=V(9635),he=V(2416),ve=V(576),me=V(2806);let ye=(()=>{class ee{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const Ne=new ee;return Ne.source=this,Ne.operator=Le,Ne}subscribe(Le,Ne,ct){const Ce=function z(ee){return ee&&ee instanceof o.Lv||function W(ee){return ee&&(0,ve.m)(ee.next)&&(0,ve.m)(ee.error)&&(0,ve.m)(ee.complete)}(ee)&&(0,$.Nn)(ee)}(Le)?Le:new o.Hp(Le,Ne,ct);return(0,me.x)(()=>{const{operator:be,source:Ct}=this;Ce.add(be?be.call(Ce,Ct):Ct?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Le){try{return this._subscribe(Le)}catch(Ne){Le.error(Ne)}}forEach(Le,Ne){return new(Ne=Te(Ne))((ct,Ce)=>{const be=new o.Hp({next:Ct=>{try{Le(Ct)}catch(yt){Ce(yt),be.unsubscribe()}},error:Ce,complete:ct});this.subscribe(be)})}_subscribe(Le){var Ne;return null===(Ne=this.source)||void 0===Ne?void 0:Ne.subscribe(Le)}[P.L](){return this}pipe(...Le){return(0,oe.U)(Le)(this)}toPromise(Le){return new(Le=Te(Le))((Ne,ct)=>{let Ce;this.subscribe(be=>Ce=be,be=>ct(be),()=>Ne(Ce))})}}return ee.create=Ze=>new ee(Ze),ee})();function Te(ee){var Ze;return null!==(Ze=ee??he.v.Promise)&&void 0!==Ze?Ze:Promise}},7579:(bt,Re,V)=>{V.d(Re,{x:()=>me});var o=V(9751),$=V(727);const oe=(0,V(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=V(8737),ve=V(2806);let me=(()=>{class Te extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ee=new ye(this,this);return ee.operator=z,ee}_throwIfClosed(){if(this.closed)throw new oe}next(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(z)}})}error(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ee}=this;for(;ee.length;)ee.shift().error(z)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ee,isStopped:Ze,observers:Le}=this;return ee||Ze?$.Lc:(this.currentObservers=null,Le.push(z),new $.w0(()=>{this.currentObservers=null,(0,he.P)(Le,z)}))}_checkFinalizedStatuses(z){const{hasError:ee,thrownError:Ze,isStopped:Le}=this;ee?z.error(Ze):Le&&z.complete()}asObservable(){const z=new o.y;return z.source=this,z}}return Te.create=(W,z)=>new ye(W,z),Te})();class ye extends me{constructor(W,z){super(),this.destination=W,this.source=z}next(W){var z,ee;null===(ee=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ee||ee.call(z,W)}error(W){var z,ee;null===(ee=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ee||ee.call(z,W)}complete(){var W,z;null===(z=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===z||z.call(W)}_subscribe(W){var z,ee;return null!==(ee=null===(z=this.source)||void 0===z?void 0:z.subscribe(W))&&void 0!==ee?ee:$.Lc}}},930:(bt,Re,V)=>{V.d(Re,{Hp:()=>ct,Lv:()=>ee});var o=V(576),$=V(727),P=V(2416),oe=V(7849),he=V(5032);const ve=Te("C",void 0,void 0);function Te(ke,Ae,xe){return{kind:ke,value:Ae,error:xe}}var W=V(3410),z=V(2806);class ee extends $.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,$.Nn)(Ae)&&Ae.add(this)):this.destination=yt}static create(Ae,xe,ze){return new ct(Ae,xe,ze)}next(Ae){this.isStopped?Ct(function ye(ke){return Te("N",ke,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?Ct(function me(ke){return Te("E",void 0,ke)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?Ct(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function Le(ke,Ae){return Ze.call(ke,Ae)}class Ne{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Ae)}catch(ze){Ce(ze)}}error(Ae){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Ae)}catch(ze){Ce(ze)}else Ce(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(xe){Ce(xe)}}}class ct extends ee{constructor(Ae,xe,ze){let We;if(super(),(0,o.m)(Ae)||!Ae)We={next:Ae??void 0,error:xe??void 0,complete:ze??void 0};else{let de;this&&P.v.useDeprecatedNextContext?(de=Object.create(Ae),de.unsubscribe=()=>this.unsubscribe(),We={next:Ae.next&&Le(Ae.next,de),error:Ae.error&&Le(Ae.error,de),complete:Ae.complete&&Le(Ae.complete,de)}):We=Ae}this.destination=new Ne(We)}}function Ce(ke){P.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(ke):(0,oe.h)(ke)}function Ct(ke,Ae){const{onStoppedNotification:xe}=P.v;xe&&W.z.setTimeout(()=>xe(ke,Ae))}const yt={closed:!0,next:he.Z,error:function be(ke){throw ke},complete:he.Z}},727:(bt,Re,V)=>{V.d(Re,{Lc:()=>ve,w0:()=>he,Nn:()=>me});var o=V(576);const P=(0,V(3888).d)(Te=>function(z){Te(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ee,Ze)=>`${Ze+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var oe=V(8737);class he{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Le of z)Le.remove(this);else z.remove(this);const{initialTeardown:ee}=this;if((0,o.m)(ee))try{ee()}catch(Le){W=Le instanceof P?Le.errors:[Le]}const{_finalizers:Ze}=this;if(Ze){this._finalizers=null;for(const Le of Ze)try{ye(Le)}catch(Ne){W=W??[],Ne instanceof P?W=[...W,...Ne.errors]:W.push(Ne)}}if(W)throw new P(W)}}add(W){var z;if(W&&W!==this)if(this.closed)ye(W);else{if(W instanceof he){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(W)}}_hasParent(W){const{_parentage:z}=this;return z===W||Array.isArray(z)&&z.includes(W)}_addParent(W){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(W),z):z?[z,W]:W}_removeParent(W){const{_parentage:z}=this;z===W?this._parentage=null:Array.isArray(z)&&(0,oe.P)(z,W)}remove(W){const{_finalizers:z}=this;z&&(0,oe.P)(z,W),W instanceof he&&W._removeParent(this)}}he.EMPTY=(()=>{const Te=new he;return Te.closed=!0,Te})();const ve=he.EMPTY;function me(Te){return Te instanceof he||Te&&"closed"in Te&&(0,o.m)(Te.remove)&&(0,o.m)(Te.add)&&(0,o.m)(Te.unsubscribe)}function ye(Te){(0,o.m)(Te)?Te():Te.unsubscribe()}},2416:(bt,Re,V)=>{V.d(Re,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Re,V)=>{V.d(Re,{E:()=>$});const $=new(V(9751).y)(he=>he.complete())},8996:(bt,Re,V)=>{V.d(Re,{D:()=>Ae});var o=V(8421),$=V(5363),P=V(9468),ve=V(9751),ye=V(2202),Te=V(576),W=V(9672);function ee(xe,ze){if(!xe)throw new Error("Iterable cannot be null");return new ve.y(We=>{(0,W.f)(We,ze,()=>{const de=xe[Symbol.asyncIterator]();(0,W.f)(We,ze,()=>{de.next().then(Je=>{Je.done?We.complete():We.next(Je.value)})},0,!0)})})}var Ze=V(3670),Le=V(8239),Ne=V(1144),ct=V(6495),Ce=V(2206),be=V(4532),Ct=V(3260);function Ae(xe,ze){return ze?function ke(xe,ze){if(null!=xe){if((0,Ze.c)(xe))return function oe(xe,ze){return(0,o.Xf)(xe).pipe((0,P.R)(ze),(0,$.Q)(ze))}(xe,ze);if((0,Ne.z)(xe))return function me(xe,ze){return new ve.y(We=>{let de=0;return ze.schedule(function(){de===xe.length?We.complete():(We.next(xe[de++]),We.closed||this.schedule())})})}(xe,ze);if((0,Le.t)(xe))return function he(xe,ze){return(0,o.Xf)(xe).pipe((0,P.R)(ze),(0,$.Q)(ze))}(xe,ze);if((0,Ce.D)(xe))return ee(xe,ze);if((0,ct.T)(xe))return function z(xe,ze){return new ve.y(We=>{let de;return(0,W.f)(We,ze,()=>{de=xe[ye.h](),(0,W.f)(We,ze,()=>{let Je,ae;try{({value:Je,done:ae}=de.next())}catch(le){return void We.error(le)}ae?We.complete():We.next(Je)},0,!0)}),()=>(0,Te.m)(de?.return)&&de.return()})}(xe,ze);if((0,Ct.L)(xe))return function yt(xe,ze){return ee((0,Ct.Q)(xe),ze)}(xe,ze)}throw(0,be.z)(xe)}(xe,ze):(0,o.Xf)(xe)}},8421:(bt,Re,V)=>{V.d(Re,{Xf:()=>Ze});var o=V(655),$=V(1144),P=V(8239),oe=V(9751),he=V(3670),ve=V(2206),me=V(4532),ye=V(6495),Te=V(3260),W=V(576),z=V(7849),ee=V(8822);function Ze(ke){if(ke instanceof oe.y)return ke;if(null!=ke){if((0,he.c)(ke))return function Le(ke){return new oe.y(Ae=>{const xe=ke[ee.L]();if((0,W.m)(xe.subscribe))return xe.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,$.z)(ke))return function Ne(ke){return new oe.y(Ae=>{for(let xe=0;xe<ke.length&&!Ae.closed;xe++)Ae.next(ke[xe]);Ae.complete()})}(ke);if((0,P.t)(ke))return function ct(ke){return new oe.y(Ae=>{ke.then(xe=>{Ae.closed||(Ae.next(xe),Ae.complete())},xe=>Ae.error(xe)).then(null,z.h)})}(ke);if((0,ve.D)(ke))return be(ke);if((0,ye.T)(ke))return function Ce(ke){return new oe.y(Ae=>{for(const xe of ke)if(Ae.next(xe),Ae.closed)return;Ae.complete()})}(ke);if((0,Te.L)(ke))return function Ct(ke){return be((0,Te.Q)(ke))}(ke)}throw(0,me.z)(ke)}function be(ke){return new oe.y(Ae=>{(function yt(ke,Ae){var xe,ze,We,de;return(0,o.mG)(this,void 0,void 0,function*(){try{for(xe=(0,o.KL)(ke);!(ze=yield xe.next()).done;)if(Ae.next(ze.value),Ae.closed)return}catch(Je){We={error:Je}}finally{try{ze&&!ze.done&&(de=xe.return)&&(yield de.call(xe))}finally{if(We)throw We.error}}Ae.complete()})})(ke,Ae).catch(xe=>Ae.error(xe))})}},6451:(bt,Re,V)=>{V.d(Re,{T:()=>ve});var o=V(8189),$=V(8421),P=V(515),oe=V(3269),he=V(8996);function ve(...me){const ye=(0,oe.yG)(me),Te=(0,oe._6)(me,1/0),W=me;return W.length?1===W.length?(0,$.Xf)(W[0]):(0,o.J)(Te)((0,he.D)(W,ye)):P.E}},5403:(bt,Re,V)=>{V.d(Re,{x:()=>$});var o=V(930);function $(oe,he,ve,me,ye){return new P(oe,he,ve,me,ye)}class P extends o.Lv{constructor(he,ve,me,ye,Te,W){super(he),this.onFinalize=Te,this.shouldUnsubscribe=W,this._next=ve?function(z){try{ve(z)}catch(ee){he.error(ee)}}:super._next,this._error=ye?function(z){try{ye(z)}catch(ee){he.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(z){he.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(bt,Re,V)=>{V.d(Re,{U:()=>P});var o=V(4482),$=V(5403);function P(oe,he){return(0,o.e)((ve,me)=>{let ye=0;ve.subscribe((0,$.x)(me,Te=>{me.next(oe.call(he,Te,ye++))}))})}},8189:(bt,Re,V)=>{V.d(Re,{J:()=>P});var o=V(5577),$=V(4671);function P(oe=1/0){return(0,o.z)($.y,oe)}},5577:(bt,Re,V)=>{V.d(Re,{z:()=>ye});var o=V(4004),$=V(8421),P=V(4482),oe=V(9672),he=V(5403),me=V(576);function ye(Te,W,z=1/0){return(0,me.m)(W)?ye((ee,Ze)=>(0,o.U)((Le,Ne)=>W(ee,Le,Ze,Ne))((0,$.Xf)(Te(ee,Ze))),z):("number"==typeof W&&(z=W),(0,P.e)((ee,Ze)=>function ve(Te,W,z,ee,Ze,Le,Ne,ct){const Ce=[];let be=0,Ct=0,yt=!1;const ke=()=>{yt&&!Ce.length&&!be&&W.complete()},Ae=ze=>be<ee?xe(ze):Ce.push(ze),xe=ze=>{Le&&W.next(ze),be++;let We=!1;(0,$.Xf)(z(ze,Ct++)).subscribe((0,he.x)(W,de=>{Ze?.(de),Le?Ae(de):W.next(de)},()=>{We=!0},void 0,()=>{if(We)try{for(be--;Ce.length&&be<ee;){const de=Ce.shift();Ne?(0,oe.f)(W,Ne,()=>xe(de)):xe(de)}ke()}catch(de){W.error(de)}}))};return Te.subscribe((0,he.x)(W,Ae,()=>{yt=!0,ke()})),()=>{ct?.()}}(ee,Ze,Te,z)))}},5363:(bt,Re,V)=>{V.d(Re,{Q:()=>oe});var o=V(9672),$=V(4482),P=V(5403);function oe(he,ve=0){return(0,$.e)((me,ye)=>{me.subscribe((0,P.x)(ye,Te=>(0,o.f)(ye,he,()=>ye.next(Te),ve),()=>(0,o.f)(ye,he,()=>ye.complete(),ve),Te=>(0,o.f)(ye,he,()=>ye.error(Te),ve)))})}},3099:(bt,Re,V)=>{V.d(Re,{B:()=>he});var o=V(8421),$=V(7579),P=V(930),oe=V(4482);function he(me={}){const{connector:ye=(()=>new $.x),resetOnError:Te=!0,resetOnComplete:W=!0,resetOnRefCountZero:z=!0}=me;return ee=>{let Ze,Le,Ne,ct=0,Ce=!1,be=!1;const Ct=()=>{Le?.unsubscribe(),Le=void 0},yt=()=>{Ct(),Ze=Ne=void 0,Ce=be=!1},ke=()=>{const Ae=Ze;yt(),Ae?.unsubscribe()};return(0,oe.e)((Ae,xe)=>{ct++,!be&&!Ce&&Ct();const ze=Ne=Ne??ye();xe.add(()=>{ct--,0===ct&&!be&&!Ce&&(Le=ve(ke,z))}),ze.subscribe(xe),!Ze&&ct>0&&(Ze=new P.Hp({next:We=>ze.next(We),error:We=>{be=!0,Ct(),Le=ve(yt,Te,We),ze.error(We)},complete:()=>{Ce=!0,Ct(),Le=ve(yt,W),ze.complete()}}),(0,o.Xf)(Ae).subscribe(Ze))})(ee)}}function ve(me,ye,...Te){if(!0===ye)return void me();if(!1===ye)return;const W=new P.Hp({next:()=>{W.unsubscribe(),me()}});return ye(...Te).subscribe(W)}},9468:(bt,Re,V)=>{V.d(Re,{R:()=>$});var o=V(4482);function $(P,oe=0){return(0,o.e)((he,ve)=>{ve.add(P.schedule(()=>he.subscribe(ve),oe))})}},8505:(bt,Re,V)=>{V.d(Re,{b:()=>he});var o=V(576),$=V(4482),P=V(5403),oe=V(4671);function he(ve,me,ye){const Te=(0,o.m)(ve)||me||ye?{next:ve,error:me,complete:ye}:ve;return Te?(0,$.e)((W,z)=>{var ee;null===(ee=Te.subscribe)||void 0===ee||ee.call(Te);let Ze=!0;W.subscribe((0,P.x)(z,Le=>{var Ne;null===(Ne=Te.next)||void 0===Ne||Ne.call(Te,Le),z.next(Le)},()=>{var Le;Ze=!1,null===(Le=Te.complete)||void 0===Le||Le.call(Te),z.complete()},Le=>{var Ne;Ze=!1,null===(Ne=Te.error)||void 0===Ne||Ne.call(Te,Le),z.error(Le)},()=>{var Le,Ne;Ze&&(null===(Le=Te.unsubscribe)||void 0===Le||Le.call(Te)),null===(Ne=Te.finalize)||void 0===Ne||Ne.call(Te)}))}):oe.y}},4408:(bt,Re,V)=>{V.d(Re,{o:()=>he});var o=V(727);class $ extends o.w0{constructor(me,ye){super()}schedule(me,ye=0){return this}}const P={setInterval(ve,me,...ye){const{delegate:Te}=P;return Te?.setInterval?Te.setInterval(ve,me,...ye):setInterval(ve,me,...ye)},clearInterval(ve){const{delegate:me}=P;return(me?.clearInterval||clearInterval)(ve)},delegate:void 0};var oe=V(8737);class he extends ${constructor(me,ye){super(me,ye),this.scheduler=me,this.work=ye,this.pending=!1}schedule(me,ye=0){var Te;if(this.closed)return this;this.state=me;const W=this.id,z=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(z,W,ye)),this.pending=!0,this.delay=ye,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(z,this.id,ye),this}requestAsyncId(me,ye,Te=0){return P.setInterval(me.flush.bind(me,this),Te)}recycleAsyncId(me,ye,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return ye;null!=ye&&P.clearInterval(ye)}execute(me,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(me,ye);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,ye){let W,Te=!1;try{this.work(me)}catch(z){Te=!0,W=z||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:me,scheduler:ye}=this,{actions:Te}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(Te,this),null!=me&&(this.id=this.recycleAsyncId(ye,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Re,V)=>{V.d(Re,{v:()=>P});var o=V(6063);class ${constructor(he,ve=$.now){this.schedulerActionCtor=he,this.now=ve}schedule(he,ve=0,me){return new this.schedulerActionCtor(this,he).schedule(me,ve)}}$.now=o.l.now;class P extends ${constructor(he,ve=$.now){super(he,ve),this.actions=[],this._active=!1}flush(he){const{actions:ve}=this;if(this._active)return void ve.push(he);let me;this._active=!0;do{if(me=he.execute(he.state,he.delay))break}while(he=ve.shift());if(this._active=!1,me){for(;he=ve.shift();)he.unsubscribe();throw me}}}},4986:(bt,Re,V)=>{V.d(Re,{P:()=>oe,z:()=>P});var o=V(4408);const P=new(V(7565).v)(o.o),oe=P},6063:(bt,Re,V)=>{V.d(Re,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(bt,Re,V)=>{V.d(Re,{z:()=>o});const o={setTimeout($,P,...oe){const{delegate:he}=o;return he?.setTimeout?he.setTimeout($,P,...oe):setTimeout($,P,...oe)},clearTimeout($){const{delegate:P}=o;return(P?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(bt,Re,V)=>{V.d(Re,{h:()=>$});const $=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Re,V)=>{V.d(Re,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(bt,Re,V)=>{V.d(Re,{_6:()=>ve,jO:()=>oe,yG:()=>he});var o=V(576),$=V(3532);function P(me){return me[me.length-1]}function oe(me){return(0,o.m)(P(me))?me.pop():void 0}function he(me){return(0,$.K)(P(me))?me.pop():void 0}function ve(me,ye){return"number"==typeof P(me)?me.pop():ye}},8737:(bt,Re,V)=>{function o($,P){if($){const oe=$.indexOf(P);0<=oe&&$.splice(oe,1)}}V.d(Re,{P:()=>o})},3888:(bt,Re,V)=>{function o($){const oe=$(he=>{Error.call(he),he.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}V.d(Re,{d:()=>o})},2806:(bt,Re,V)=>{V.d(Re,{O:()=>oe,x:()=>P});var o=V(2416);let $=null;function P(he){if(o.v.useDeprecatedSynchronousErrorHandling){const ve=!$;if(ve&&($={errorThrown:!1,error:null}),he(),ve){const{errorThrown:me,error:ye}=$;if($=null,me)throw ye}}else he()}function oe(he){o.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=he)}},9672:(bt,Re,V)=>{function o($,P,oe,he=0,ve=!1){const me=P.schedule(function(){oe(),ve?$.add(this.schedule(null,he)):this.unsubscribe()},he);if($.add(me),!ve)return me}V.d(Re,{f:()=>o})},4671:(bt,Re,V)=>{function o($){return $}V.d(Re,{y:()=>o})},1144:(bt,Re,V)=>{V.d(Re,{z:()=>o});const o=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(bt,Re,V)=>{V.d(Re,{D:()=>$});var o=V(576);function $(P){return Symbol.asyncIterator&&(0,o.m)(P?.[Symbol.asyncIterator])}},576:(bt,Re,V)=>{function o($){return"function"==typeof $}V.d(Re,{m:()=>o})},3670:(bt,Re,V)=>{V.d(Re,{c:()=>P});var o=V(8822),$=V(576);function P(oe){return(0,$.m)(oe[o.L])}},6495:(bt,Re,V)=>{V.d(Re,{T:()=>P});var o=V(2202),$=V(576);function P(oe){return(0,$.m)(oe?.[o.h])}},8239:(bt,Re,V)=>{V.d(Re,{t:()=>$});var o=V(576);function $(P){return(0,o.m)(P?.then)}},3260:(bt,Re,V)=>{V.d(Re,{L:()=>oe,Q:()=>P});var o=V(655),$=V(576);function P(he){return(0,o.FC)(this,arguments,function*(){const me=he.getReader();try{for(;;){const{value:ye,done:Te}=yield(0,o.qq)(me.read());if(Te)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(ye)}}finally{me.releaseLock()}})}function oe(he){return(0,$.m)(he?.getReader)}},3532:(bt,Re,V)=>{V.d(Re,{K:()=>$});var o=V(576);function $(P){return P&&(0,o.m)(P.schedule)}},4482:(bt,Re,V)=>{V.d(Re,{A:()=>$,e:()=>P});var o=V(576);function $(oe){return(0,o.m)(oe?.lift)}function P(oe){return he=>{if($(he))return he.lift(function(ve){try{return oe(ve,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(bt,Re,V)=>{function o(){}V.d(Re,{Z:()=>o})},9635:(bt,Re,V)=>{V.d(Re,{U:()=>P,z:()=>$});var o=V(4671);function $(...oe){return P(oe)}function P(oe){return 0===oe.length?o.y:1===oe.length?oe[0]:function(ve){return oe.reduce((me,ye)=>ye(me),ve)}}},7849:(bt,Re,V)=>{V.d(Re,{h:()=>P});var o=V(2416),$=V(3410);function P(oe){$.z.setTimeout(()=>{const{onUnhandledError:he}=o.v;if(!he)throw oe;he(oe)})}},4532:(bt,Re,V)=>{function o($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Re,{z:()=>o})},655:(bt,Re,V)=>{function oe(ae,le){var we={};for(var fe in ae)Object.prototype.hasOwnProperty.call(ae,fe)&&le.indexOf(fe)<0&&(we[fe]=ae[fe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Xe=0;for(fe=Object.getOwnPropertySymbols(ae);Xe<fe.length;Xe++)le.indexOf(fe[Xe])<0&&Object.prototype.propertyIsEnumerable.call(ae,fe[Xe])&&(we[fe[Xe]]=ae[fe[Xe]])}return we}function ye(ae,le,we,fe){return new(we||(we=Promise))(function(Ge,xt){function dn(vi){try{it(fe.next(vi))}catch(rn){xt(rn)}}function gn(vi){try{it(fe.throw(vi))}catch(rn){xt(rn)}}function it(vi){vi.done?Ge(vi.value):function Xe(Ge){return Ge instanceof we?Ge:new we(function(xt){xt(Ge)})}(vi.value).then(dn,gn)}it((fe=fe.apply(ae,le||[])).next())})}function Ce(ae){return this instanceof Ce?(this.v=ae,this):new Ce(ae)}function be(ae,le,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,fe=we.apply(ae,le||[]),Ge=[];return Xe={},xt("next"),xt("throw"),xt("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe;function xt(Nt){fe[Nt]&&(Xe[Nt]=function(en){return new Promise(function(Sn,An){Ge.push([Nt,en,Sn,An])>1||dn(Nt,en)})})}function dn(Nt,en){try{!function gn(Nt){Nt.value instanceof Ce?Promise.resolve(Nt.value.v).then(it,vi):rn(Ge[0][2],Nt)}(fe[Nt](en))}catch(Sn){rn(Ge[0][3],Sn)}}function it(Nt){dn("next",Nt)}function vi(Nt){dn("throw",Nt)}function rn(Nt,en){Nt(en),Ge.shift(),Ge.length&&dn(Ge[0][0],Ge[0][1])}}function yt(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,le=ae[Symbol.asyncIterator];return le?le.call(ae):(ae=function ee(ae){var le="function"==typeof Symbol&&Symbol.iterator,we=le&&ae[le],fe=0;if(we)return we.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&fe>=ae.length&&(ae=void 0),{value:ae&&ae[fe++],done:!ae}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),we={},fe("next"),fe("throw"),fe("return"),we[Symbol.asyncIterator]=function(){return this},we);function fe(Ge){we[Ge]=ae[Ge]&&function(xt){return new Promise(function(dn,gn){!function Xe(Ge,xt,dn,gn){Promise.resolve(gn).then(function(it){Ge({value:it,done:dn})},xt)}(dn,gn,(xt=ae[Ge](xt)).done,xt.value)})}}}V.d(Re,{FC:()=>be,KL:()=>yt,_T:()=>oe,mG:()=>ye,qq:()=>Ce})},4650:(bt,Re,V)=>{V.d(Re,{$8M:()=>Kc,$Z:()=>L0,AFp:()=>dE,ALo:()=>KD,AaK:()=>ye,CHM:()=>wh,CRH:()=>Tt,CZH:()=>Yv,CqO:()=>yb,D6c:()=>px,Dn7:()=>jv,EJc:()=>mE,EpF:()=>_b,F$t:()=>XT,F4k:()=>WT,FYo:()=>p0,FiY:()=>Ms,G48:()=>Hw,Gf:()=>qv,GfV:()=>g0,Gpc:()=>z,Hsn:()=>ne,Ikx:()=>Hb,JOm:()=>sa,KtG:()=>jc,LFG:()=>ui,LMc:()=>UE,LSH:()=>F,Lbi:()=>ex,Lck:()=>ON,MAs:()=>mb,MGl:()=>ts,MMx:()=>pw,NdJ:()=>bb,OlP:()=>wn,Oqu:()=>uu,PXZ:()=>fm,Q6J:()=>cv,QGY:()=>vb,QP$:()=>Ee,Qsj:()=>KS,QtT:()=>Ov,R0b:()=>Mn,RDi:()=>Wp,Rgc:()=>Gi,SBq:()=>Ad,SDv:()=>aw,Sil:()=>vu,Suo:()=>pt,TTD:()=>Lu,TgZ:()=>uv,Tol:()=>sD,Udp:()=>Af,VKq:()=>Vv,W1O:()=>xw,WLB:()=>Cw,X6Q:()=>Qf,XFs:()=>ut,Xpm:()=>Un,Xts:()=>Hh,Y36:()=>Od,YKP:()=>Bf,YNc:()=>lv,Yjl:()=>U,Yz7:()=>en,Z0I:()=>Hs,ZZ4:()=>zw,_Bn:()=>dw,_UZ:()=>hv,_Vd:()=>qh,_c5:()=>PE,_uU:()=>lD,aQg:()=>rs,c2e:()=>gE,cJS:()=>An,cg1:()=>Ug,dDg:()=>Xv,dqk:()=>Yt,eFA:()=>Bw,ekj:()=>Hd,eoX:()=>vc,f3M:()=>$l,g9A:()=>fE,h0i:()=>tl,hGG:()=>bm,hij:()=>Og,iGM:()=>to,ifc:()=>Dt,ip1:()=>uE,jDz:()=>gw,kEZ:()=>Xg,kL8:()=>gD,lG2:()=>Z,lqb:()=>tu,lri:()=>mc,n5z:()=>Yr,oAB:()=>xi,oxw:()=>QT,pQV:()=>Wg,q4F:()=>MC,qLn:()=>Wh,qOj:()=>lb,qZA:()=>dv,rWj:()=>_c,s9C:()=>xg,sBO:()=>IE,sIi:()=>Ig,s_b:()=>im,soG:()=>dm,tb:()=>pE,tp0:()=>Xo,uIk:()=>fb,vHH:()=>Ne,vpe:()=>fa,wAp:()=>Ot,xp6:()=>B_,z2F:()=>gm,zSh:()=>ig,zs3:()=>kd});var o=V(7579),$=V(727),P=V(9751),oe=V(6451),he=V(3099);function ve(a){for(let l in a)if(a[l]===ve)return l;throw Error("Could not find renamed property on target object.")}function me(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ye(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ye).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Te(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const W=ve({__forward_ref__:ve});function z(a){return a.__forward_ref__=z,a.toString=function(){return ye(this())},a}function ee(a){return Ze(a)?a():a}function Ze(a){return"function"==typeof a&&a.hasOwnProperty(W)&&a.__forward_ref__===z}class Ne extends Error{constructor(l,u){super(function ct(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function Ce(a){return"string"==typeof a?a:null==a?"":String(a)}function Ae(a,l){throw new Ne(-201,!1)}function it(a,l,u,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${u} ${d} ${l} <=Actual]`))}function en(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function An(a){return{providers:a.providers||[],imports:a.imports||[]}}function On(a){return Mr(a,Ui)||Mr(a,cs)}function Hs(a){return null!==On(a)}function Mr(a,l){return a.hasOwnProperty(l)?a[l]:null}function Es(a){return a&&(a.hasOwnProperty(Rr)||a.hasOwnProperty(Ta))?a[Rr]:null}const Ui=ve({\u0275prov:ve}),Rr=ve({\u0275inj:ve}),cs=ve({ngInjectableDef:ve}),Ta=ve({ngInjectorDef:ve});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Ni;function Qn(a){const l=Ni;return Ni=a,l}function us(a,l,u){const d=On(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&ut.Optional?null:void 0!==l?l:void Ae(ye(a))}function jn(a){return{toString:a}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),Dt=(()=>{return(a=Dt||(Dt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Dt;var a})();const Yt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),oi={},St=[],Gn=ve({\u0275cmp:ve}),Bt=ve({\u0275dir:ve}),ds=ve({\u0275pipe:ve}),Jt=ve({\u0275mod:ve}),$n=ve({\u0275fac:ve}),bn=ve({__NG_ELEMENT_ID__:ve});let ai=0;function Un(a){return jn(()=>{const u=!0===a.standalone,d={},f={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||St,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Dt.Emulated,id:"c"+ai++,styles:a.styles||St,_:null,setInput:null,schemas:a.schemas||null,tView:null},m=a.dependencies,y=a.features;return f.inputs=q(a.inputs,d),f.outputs=q(a.outputs),y&&y.forEach(D=>D(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(li).filter(Hr):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(Q).filter(Hr):null,f})}function li(a){return L(a)||k(a)}function Hr(a){return null!==a}function xi(a){return jn(()=>({type:a.type,bootstrap:a.bootstrap||St,declarations:a.declarations||St,imports:a.imports||St,exports:a.exports||St,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function q(a,l){if(null==a)return oi;const u={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=d,l&&(l[f]=m)}return u}const Z=Un;function U(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function L(a){return a[Gn]||null}function k(a){return a[Bt]||null}function Q(a){return a[ds]||null}function Ee(a){const l=L(a)||k(a)||Q(a);return null!==l&&l.standalone}function Ye(a,l){const u=a[Jt]||null;if(!u&&!0===l)throw new Error(`Type ${ye(a)} does not have '\u0275mod' property.`);return u}function Bi(a){return Array.isArray(a)&&"object"==typeof a[1]}function ir(a){return Array.isArray(a)&&!0===a[1]}function gl(a){return 0!=(8&a.flags)}function Gs(a){return 2==(2&a.flags)}function ml(a){return 1==(1&a.flags)}function Gr(a){return null!==a.template}function _l(a){return 0!=(256&a[2])}function Bo(a,l){return a.hasOwnProperty($n)?a[$n]:null}class Ss{constructor(l,u,d){this.previousValue=l,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Lu(){return Fc}function Fc(a){return a.type.prototype.ngOnChanges&&(a.setInput=yl),Uu}function Uu(){const a=Bu(this),l=a?.current;if(l){const u=a.previous;if(u===oi)a.previous=l;else for(let d in l)u[d]=l[d];a.current=null,this.ngOnChanges(l)}}function yl(a,l,u,d){const f=Bu(a)||function Or(a,l){return a[bl]=l}(a,{previous:oi,current:null}),m=f.current||(f.current={}),y=f.previous,D=this.declaredInputs[u],I=y[D];m[D]=new Ss(I&&I.currentValue,l,y===oi),a[d]=l}Lu.ngInherit=!0;const bl="__ngSimpleChanges__";function Bu(a){return a[bl]||null}function En(a){for(;Array.isArray(a);)a=a[0];return a}function Vo(a,l){return En(l[a])}function $r(a,l){return En(l[a.index])}function Uc(a,l){return a.data[l]}function fs(a,l){return a[l]}function yn(a,l){const u=l[a];return Bi(u)?u:u[0]}function Sa(a){return 64==(64&a[2])}function Zr(a,l){return null==l?null:a[l]}function vr(a){a[18]=0}function Aa(a,l){a[5]+=l;let u=a,d=a[3];for(;null!==d&&(1===l&&1===u[5]||-1===l&&0===u[5]);)d[5]+=l,u=d,d=d[3]}const Ft={lFrame:Il(null),bindingsEnabled:!0};function jo(){return Ft.bindingsEnabled}function Pe(){return Ft.lFrame.lView}function qt(){return Ft.lFrame.tView}function wh(a){return Ft.lFrame.contextLView=a,a[8]}function jc(a){return Ft.lFrame.contextLView=null,a}function ei(){let a=Cl();for(;null!==a&&64===a.type;)a=a.parent;return a}function Cl(){return Ft.lFrame.currentTNode}function Ho(){const a=Ft.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}function qr(a,l){const u=Ft.lFrame;u.currentTNode=a,u.isParent=l}function Hc(){return Ft.lFrame.isParent}function Gc(){Ft.lFrame.isParent=!1}function Mi(){const a=Ft.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Go(){return Ft.lFrame.bindingIndex++}function zr(a){const l=Ft.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Ch(a){Ft.lFrame.inI18n=a}function Th(a,l){const u=Ft.lFrame;u.bindingIndex=u.bindingRootIndex=a,$c(l)}function $c(a){Ft.lFrame.currentDirectiveIndex=a}function zu(){return Ft.lFrame.currentQueryIndex}function As(a){Ft.lFrame.currentQueryIndex=a}function Dl(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Wu(a,l,u){if(u&ut.SkipSelf){let f=l,m=a;for(;!(f=f.parent,null!==f||u&ut.Host||(f=Dl(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;l=f,a=m}const d=Ft.lFrame=Ku();return d.currentTNode=l,d.lView=a,!0}function El(a){const l=Ku(),u=a[1];Ft.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Ku(){const a=Ft.lFrame,l=null===a?null:a.child;return null===l?Il(a):l}function Il(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Yu(){const a=Ft.lFrame;return Ft.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Eh=Yu;function Zs(){const a=Yu();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Qt(){return Ft.lFrame.selectedIndex}function ho(a){Ft.lFrame.selectedIndex=a}function In(){const a=Ft.lFrame;return Uc(a.tView,a.selectedIndex)}function Zo(a,l){for(let u=l.directiveStart,d=l.directiveEnd;u<d;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:D,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:R}=m;y&&(a.contentHooks||(a.contentHooks=[])).push(-u,y),D&&((a.contentHooks||(a.contentHooks=[])).push(u,D),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,D)),I&&(a.viewHooks||(a.viewHooks=[])).push(-u,I),A&&((a.viewHooks||(a.viewHooks=[])).push(u,A),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,A)),null!=R&&(a.destroyHooks||(a.destroyHooks=[])).push(u,R)}}function po(a,l,u){Ra(a,l,3,u)}function go(a,l,u,d){(3&a[2])===u&&Ra(a,l,u,d)}function Ma(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function Ra(a,l,u,d){const m=d??-1,y=l.length-1;let D=0;for(let I=void 0!==d?65535&a[18]:0;I<y;I++)if("number"==typeof l[I+1]){if(D=l[I],null!=d&&D>=d)break}else l[I]<0&&(a[18]+=65536),(D<m||-1==m)&&(Zc(a,u,l,I),a[18]=(4294901760&a[18])+I+2),I++}function Zc(a,l,u,d){const f=u[d]<0,m=u[d+1],D=a[f?-u[d]:u[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(D)}finally{}}}else try{m.call(D)}finally{}}class mo{constructor(l,u,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Nl(a,l,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const m=u[d++],y=u[d++],D=u[d++];a.setAttribute(l,y,D,m)}else{const m=f,y=u[++d];Xu(m)?a.setProperty(l,m,y):a.setAttribute(l,m,y),d++}}return d}function Lp(a){return 3===a||4===a||6===a}function Xu(a){return 64===a.charCodeAt(0)}function Oa(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?u=f:0===u||Up(a,u,f,null,-1===u||2===u?l[++d]:null)}}return a}function Up(a,l,u,d,f){let m=0,y=a.length;if(-1===l)y=-1;else for(;m<a.length;){const D=a[m++];if("number"==typeof D){if(D===l){y=-1;break}if(D>l){y=m-1;break}}}for(;m<a.length;){const D=a[m];if("number"==typeof D)break;if(D===u){if(null===d)return void(null!==f&&(a[m+1]=f));if(d===a[m+1])return void(a[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==y&&(a.splice(y,0,l),m=y+1),a.splice(m++,0,u),null!==d&&a.splice(m++,0,d),null!==f&&a.splice(m++,0,f)}function ed(a){return-1!==a}function xl(a){return 32767&a}function zo(a,l){let u=function Nh(a){return a>>16}(a),d=l;for(;u>0;)d=d[15],u--;return d}let Ml=!0;function Kr(a){const l=Ml;return Ml=a,l}let zc=0;const vo={};function Rl(a,l){const u=yo(a,l);if(-1!==u)return u;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,kl(d.data,a),kl(l,null),kl(d.blueprint,null));const f=Ol(a,l),m=a.injectorIndex;if(ed(f)){const y=xl(f),D=zo(f,l),I=D[1].data;for(let A=0;A<8;A++)l[m+A]=D[y+A]|I[y+A]}return l[m+8]=f,m}function kl(a,l){a.push(0,0,0,0,0,0,0,0,l)}function yo(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function Ol(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,d=null,f=l;for(;null!==f;){if(d=Pa(f),null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function qs(a,l,u){!function nd(a,l,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(bn)&&(d=u[bn]),null==d&&(d=u[bn]=zc++);const f=255&d;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function rd(a,l,u){if(u&ut.Optional||void 0!==a)return a;Ae()}function Mh(a,l,u,d){if(u&ut.Optional&&void 0===d&&(d=null),0==(u&(ut.Self|ut.Host))){const f=a[9],m=Qn(void 0);try{return f?f.get(l,d,u&ut.Optional):us(l,d,u&ut.Optional)}finally{Qn(m)}}return rd(d,0,u)}function Rh(a,l,u,d=ut.Default,f){if(null!==a){if(1024&l[2]){const y=function jp(a,l,u,d,f){let m=a,y=l;for(;null!==m&&null!==y&&1024&y[2]&&!(256&y[2]);){const D=sd(m,y,u,d|ut.Self,vo);if(D!==vo)return D;let I=m.parent;if(!I){const A=y[21];if(A){const R=A.get(u,vo,d);if(R!==vo)return R}I=Pa(y),y=y[15]}m=I}return f}(a,l,u,d,vo);if(y!==vo)return y}const m=sd(a,l,u,d,vo);if(m!==vo)return m}return Mh(l,u,d,f)}function sd(a,l,u,d,f){const m=function __(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(bn)?a[bn]:void 0;return"number"==typeof l?l>=0?255&l:ci:l}(u);if("function"==typeof m){if(!Wu(l,a,d))return d&ut.Host?rd(f,0,d):Mh(l,u,d,f);try{const y=m(d);if(null!=y||d&ut.Optional)return y;Ae()}finally{Eh()}}else if("number"==typeof m){let y=null,D=yo(a,l),I=-1,A=d&ut.Host?l[16][6]:null;for((-1===D||d&ut.SkipSelf)&&(I=-1===D?Ol(a,l):l[D+8],-1!==I&&Wo(d,!1)?(y=l[1],D=xl(I),l=zo(I,l)):D=-1);-1!==D;){const R=l[1];if(Vp(m,D,R.data)){const H=Bp(D,l,u,y,d,A);if(H!==vo)return H}I=l[D+8],-1!==I&&Wo(d,l[1].data[D+8]===A)&&Vp(m,D,l)?(y=R,D=xl(I),l=zo(I,l)):D=-1}}return f}function Bp(a,l,u,d,f,m){const y=l[1],D=y.data[a+8],R=Pl(D,y,u,null==d?Gs(D)&&Ml:d!=y&&0!=(3&D.type),f&ut.Host&&m===D);return null!==R?bo(l,y,R,D):vo}function Pl(a,l,u,d,f){const m=a.providerIndexes,y=l.data,D=1048575&m,I=a.directiveStart,R=m>>20,K=f?D+R:a.directiveEnd;for(let re=d?D:D+R;re<K;re++){const Se=y[re];if(re<I&&u===Se||re>=I&&Se.type===u)return re}if(f){const re=y[I];if(re&&Gr(re)&&re.type===u)return I}return null}function bo(a,l,u,d){let f=a[u];const m=l.data;if(function Ju(a){return a instanceof mo}(f)){const y=f;y.resolving&&function Ct(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${a}${u}`)}(function be(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ce(a)}(m[u]));const D=Kr(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Qn(y.injectImpl):null;Wu(a,d,ut.Default);try{f=a[u]=y.factory(void 0,m,a,d),l.firstCreatePass&&u>=d.directiveStart&&function fo(a,l,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(d){const y=Fc(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,y)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==I&&Qn(I),Kr(D),y.resolving=!1,Eh()}}return f}function Vp(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Wo(a,l){return!(a&ut.Self||a&ut.Host&&l)}class Wc{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,d){return Rh(this._tNode,this._lView,l,d,u)}}function ci(){return new Wc(ei(),Pe())}function Yr(a){return jn(()=>{const l=a.prototype.constructor,u=l[$n]||Fl(l),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const m=f[$n]||Fl(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Fl(a){return Ze(a)?()=>{const l=Fl(ee(a));return l&&l()}:Bo(a)}function Pa(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function Kc(a){return function id(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const m=u[f];if(Lp(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(m===l)return u[f+1];f+=2}}}return null}(ei(),a)}const Hn="__parameters__";function Ns(a,l,u){return jn(()=>{const d=function od(a){return function(...u){if(a){const d=a(...u);for(const f in d)this[f]=d[f]}}}(l);function f(...m){if(this instanceof f)return d.apply(this,m),this;const y=new f(...m);return D.annotation=y,D;function D(I,A,R){const H=I.hasOwnProperty(Hn)?I[Hn]:Object.defineProperty(I,Hn,{value:[]})[Hn];for(;H.length<=R;)H.push(null);return(H[R]=H[R]||[]).push(y),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class wn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=en({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function sr(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let d=a[u];Array.isArray(d)?(l===a&&(l=a.slice(0,u)),sr(d,l)):l!==a&&l.push(d)}return l}function xs(a,l){a.forEach(u=>Array.isArray(u)?xs(u,l):l(u))}function Ul(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Fa(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function yr(a,l){const u=[];for(let d=0;d<a;d++)u.push(l);return u}function br(a,l,u){let d=Ws(a,l);return d>=0?a[1|d]=u:(d=~d,function ht(a,l,u,d){let f=a.length;if(f==l)a.push(u,d);else if(1===f)a.push(d,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=d}}(a,d,l,u)),d}function Bl(a,l){const u=Ws(a,l);if(u>=0)return a[1|u]}function Ws(a,l){return function wr(a,l,u){let d=0,f=a.length>>u;for(;f!==d;){const m=d+(f-d>>1),y=a[m<<u];if(l===y)return m<<u;y>l?f=m:d=m+1}return~(f<<u)}(a,l,1)}const Cn={},Jr="__NG_DI_FLAG__",Pr="ngTempTokenPath",fd=/\n/gm,Hl="__source";let Qo;function qi(a){const l=Qo;return Qo=a,l}function Ua(a,l=ut.Default){if(void 0===Qo)throw new Ne(-203,!1);return null===Qo?us(a,void 0,l):Qo.get(a,l&ut.Optional?null:void 0,l)}function ui(a,l=ut.Default){return(function si(){return Ni}()||Ua)(ee(a),l)}function $l(a,l=ut.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),ui(a,l)}function Zl(a){const l=[];for(let u=0;u<a.length;u++){const d=ee(a[u]);if(Array.isArray(d)){if(0===d.length)throw new Ne(900,!1);let f,m=ut.Default;for(let y=0;y<d.length;y++){const D=d[y],I=Fh(D);"number"==typeof I?-1===I?f=D.token:m|=I:f=D}l.push(ui(f,m))}else l.push(ui(d))}return l}function Co(a,l){return a[Jr]=l,a.prototype[Jr]=l,a}function Fh(a){return a[Jr]}const Ms=Co(Ns("Optional"),8),Xo=Co(Ns("SkipSelf"),4);let Xl,Bh;function Wp(a){Xl=a}function Ks(a){return function _d(){if(void 0===Bh&&(Bh=null,Yt.trustedTypes))try{Bh=Yt.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Bh}()?.createHTML(a)||a}class vd{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function E(a){return a instanceof vd?a.changingThisBreaksApplicationSecurity:a}class Mt{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Ks(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class kt{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Ks(l),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Ks(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const y=u.item(f).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&l.removeAttribute(y)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const ti=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Ys(a){return(a=String(a)).match(ti)?a:"unsafe:"+a}function Lr(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function Js(...a){const l={};for(const u of a)for(const d in u)u.hasOwnProperty(d)&&(l[d]=!0);return l}const Tr=Lr("area,br,col,hr,img,wbr"),Qs=Lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$a=Lr("rp,rt"),Cd=Js(Tr,Js(Qs,Lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Js($a,Lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Js($a,Qs)),Td=Lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jp=Js(Td,Lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var _=(()=>((_=_||{})[_.NONE=0]="NONE",_[_.HTML=1]="HTML",_[_.STYLE=2]="STYLE",_[_.SCRIPT=3]="SCRIPT",_[_.URL=4]="URL",_[_.RESOURCE_URL=5]="RESOURCE_URL",_))();function F(a){const l=function Rs(){const a=Pe();return a&&a[12]}();return l?l.sanitize(_.URL,a)||"":function x(a,l){const u=function j(a){return a instanceof vd&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}(a,"URL")?E(a):Ys(Ce(a))}const Hh=new wn("ENVIRONMENT_INITIALIZER"),Dd=new wn("INJECTOR",-1),Xp=new wn("INJECTOR_DEF_TYPES");class E_{get(l,u=Cn){if(u===Cn){const d=new Error(`NullInjectorError: No provider for ${ye(l)}!`);throw d.name="NullInjectorError",d}return u}}function Gh(...a){return{\u0275providers:eg(0,a)}}function eg(a,...l){const u=[],d=new Set;let f;return xs(l,m=>{const y=m;Ed(y,u,[],d)&&(f||(f=[]),f.push(y))}),void 0!==f&&$h(f,u),u}function $h(a,l){for(let u=0;u<a.length;u++){const{providers:f}=a[u];xs(f,m=>{l.push(m)})}}function Ed(a,l,u,d){if(!(a=ee(a)))return!1;let f=null,m=Es(a);const y=!m&&L(a);if(m||y){if(y&&!y.standalone)return!1;f=a}else{const I=a.ngModule;if(m=Es(I),!m)return!1;f=I}const D=d.has(f);if(y){if(D)return!1;if(d.add(f),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of I)Ed(A,l,u,d)}}else{if(!m)return!1;{if(null!=m.imports&&!D){let A;d.add(f);try{xs(m.imports,R=>{Ed(R,l,u,d)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&$h(A,l)}if(!D){const A=Bo(f)||(()=>new f);l.push({provide:f,useFactory:A,deps:St},{provide:Xp,useValue:f,multi:!0},{provide:Hh,useValue:()=>ui(f),multi:!0})}const I=m.providers;null==I||D||xs(I,R=>{l.push(R)})}}return f!==a&&void 0!==a.providers}const tg=ve({provide:String,useValue:ve});function Id(a){return null!==a&&"object"==typeof a&&tg in a}function nc(a){return"function"==typeof a}const ig=new wn("Set Injector scope."),S_={},c0={};let A_;function N_(){return void 0===A_&&(A_=new E_),A_}class tu{}class EC extends tu{constructor(l,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,M_(l,y=>this.processProvider(y)),this.records.set(Dd,Zh(void 0,this)),f.has("environment")&&this.records.set(tu,Zh(void 0,this));const m=this.records.get(ig);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Xp.multi,St,ut.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=qi(this),d=Qn(void 0);try{return l()}finally{qi(u),Qn(d)}}get(l,u=Cn,d=ut.Default){this.assertNotDestroyed();const f=qi(this),m=Qn(void 0);try{if(!(d&ut.SkipSelf)){let D=this.records.get(l);if(void 0===D){const I=function WO(a){return"function"==typeof a||"object"==typeof a&&a instanceof wn}(l)&&On(l);D=I&&this.injectableDefInScope(I)?Zh(x_(l),S_):null,this.records.set(l,D)}if(null!=D)return this.hydrate(l,D)}return(d&ut.Self?N_():this.parent).get(l,u=d&ut.Optional&&u===Cn?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Pr]=y[Pr]||[]).unshift(ye(l)),f)throw y;return function To(a,l,u,d){const f=a[Pr];throw l[Hl]&&f.unshift(l[Hl]),a.message=function C_(a,l,u,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let f=ye(l);if(Array.isArray(l))f=l.map(ye).join(" -> ");else if("object"==typeof l){let m=[];for(let y in l)if(l.hasOwnProperty(y)){let D=l[y];m.push(y+":"+("string"==typeof D?JSON.stringify(D):ye(D)))}f=`{${m.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${a.replace(fd,"\n  ")}`}("\n"+a.message,f,u,d),a.ngTokenPath=f,a[Pr]=null,a}(y,l,"R3InjectorError",this.source)}throw y}finally{Qn(m),qi(f)}}resolveInjectorInitializers(){const l=qi(this),u=Qn(void 0);try{const d=this.get(Hh.multi,St,ut.Self);for(const f of d)f()}finally{qi(l),Qn(u)}}toString(){const l=[],u=this.records;for(const d of u.keys())l.push(ye(d));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(l){let u=nc(l=ee(l))?l:ee(l&&l.provide);const d=function u0(a){return Id(a)?Zh(void 0,a.useValue):Zh(d0(a),S_)}(l);if(nc(l)||!0!==l.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Zh(void 0,S_,!0),f.factory=()=>Zl(f.multi),this.records.set(u,f)),u=l,f.multi.push(l)}this.records.set(u,d)}hydrate(l,u){return u.value===S_&&(u.value=c0,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ZS(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ee(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function x_(a){const l=On(a),u=null!==l?l.factory:Bo(a);if(null!==u)return u;if(a instanceof wn)throw new Ne(204,!1);if(a instanceof Function)return function $S(a){const l=a.length;if(l>0)throw yr(l,"?"),new Ne(204,!1);const u=function Po(a){const l=a&&(a[Ui]||a[cs]);if(l){const u=function ls(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Ne(204,!1)}function d0(a,l,u){let d;if(nc(a)){const f=ee(a);return Bo(f)||x_(f)}if(Id(a))d=()=>ee(a.useValue);else if(function DC(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...Zl(a.deps||[]));else if(function ng(a){return!(!a||!a.useExisting)}(a))d=()=>ui(ee(a.useExisting));else{const f=ee(a&&(a.useClass||a.provide));if(!function IC(a){return!!a.deps}(a))return Bo(f)||x_(f);d=()=>new f(...Zl(a.deps))}return d}function Zh(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function h0(a){return!!a.\u0275providers}function M_(a,l){for(const u of a)Array.isArray(u)?M_(u,l):h0(u)?M_(u.\u0275providers,l):l(u)}class f0{}class zS{resolveComponentFactory(l){throw function Sd(a){const l=Error(`No component factory found for ${ye(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let qh=(()=>{class a{}return a.NULL=new zS,a})();function WS(){return zh(ei(),Pe())}function zh(a,l){return new Ad($r(a,l))}let Ad=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=WS,a})();function NC(a){return a instanceof Ad?a.nativeElement:a}class p0{}let KS=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function xC(){const a=Pe(),u=yn(ei().index,a);return(Bi(u)?u:a)[11]}(),a})(),YS=(()=>{class a{}return a.\u0275prov=en({token:a,providedIn:"root",factory:()=>null}),a})();class g0{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const MC=new g0("14.2.5"),R_={};function zn(a){return a.ngOriginalError}class Wh{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&zn(l);for(;u&&zn(u);)u=zn(u);return u||null}}const OC=/^>|^->|<!--|-->|--!>|<!-$/g,ic=/(<|>)/;const Kh=new Map;let nu=0;const Ri="__ngContext__";function Dr(a,l){Bi(l)?(a[Ri]=l[20],function sA(a){Kh.set(a[20],a)}(l)):a[Ri]=l}function iu(a){return a instanceof Function?a():a}var sa=(()=>((sa=sa||{})[sa.Important=1]="Important",sa[sa.DashCase=2]="DashCase",sa))();let y0;function og(a,l){return y0(a,l)}function ag(a){const l=a[3];return ir(l)?l[3]:l}function GC(a){return lr(a[13])}function di(a){return lr(a[4])}function lr(a){for(;null!==a&&!ir(a);)a=a[4];return a}function rc(a,l,u,d,f){if(null!=d){let m,y=!1;ir(d)?m=d:Bi(d)&&(y=!0,d=d[0]);const D=En(d);0===a&&null!==u?null==f?C0(l,u,D):qa(l,u,D,f||null,!0):1===a&&null!==u?qa(l,u,D,f||null,!0):2===a?xd(l,D,y):3===a&&l.destroyNode(D),null!=m&&function KC(a,l,u,d,f){const m=u[7];m!==En(u)&&rc(l,a,d,m,f);for(let D=10;D<u.length;D++){const I=u[D];dg(I[1],I,a,l,d,m)}}(l,a,m,u,f)}}function ru(a,l){return a.createText(l)}function $C(a,l,u){a.setValue(l,u)}function F_(a,l){return a.createComment(function PC(a){return a.replace(OC,l=>l.replace(ic,"\u200b$1\u200b"))}(l))}function b0(a,l,u){return a.createElement(l,u)}function Jh(a,l){const u=a[9],d=u.indexOf(l),f=l[3];512&l[2]&&(l[2]&=-513,Aa(f,-1)),u.splice(d,1)}function oa(a,l){if(a.length<=10)return;const u=10+l,d=a[u];if(d){const f=d[17];null!==f&&f!==a&&Jh(f,d),l>0&&(a[u-1][4]=d[4]);const m=Fa(a,10+l);!function ZC(a,l){dg(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const y=m[19];null!==y&&y.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function w0(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&dg(a,l,u,3,null,null),function cg(a){let l=a[13];if(!l)return ug(a[1],a);for(;l;){let u=null;if(Bi(l))u=l[13];else{const d=l[10];d&&(u=d)}if(!u){for(;l&&!l[4]&&l!==a;)Bi(l)&&ug(l[1],l),l=l[3];null===l&&(l=a),Bi(l)&&ug(l[1],l),u=l&&l[4]}l=u}}(l)}}function ug(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function Ti(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let d=0;d<u.length;d+=2){const f=l[u[d]];if(!(f instanceof mo)){const m=u[d+1];if(Array.isArray(m))for(let y=0;y<m.length;y+=2){const D=f[m[y]],I=m[y+1];try{I.call(D)}finally{}}else try{m.call(f)}finally{}}}}(a,l),function zC(a,l){const u=a.cleanup,d=l[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const y=u[m+1],D="function"==typeof y?y(l):En(l[y]),I=d[f=u[m+2]],A=u[m+3];"boolean"==typeof A?D.removeEventListener(u[m],I,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),m+=2}else{const y=d[f=u[m+1]];u[m].call(y)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&ir(l[3])){u!==l[3]&&Jh(u,l);const d=l[19];null!==d&&d.detachView(a)}!function UC(a){Kh.delete(a[20])}(l)}}function cr(a,l,u){return su(a,l.parent,u)}function su(a,l,u){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return u[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===Dt.None||f===Dt.Emulated)return null}return $r(d,u)}function qa(a,l,u,d,f){a.insertBefore(l,u,d,f)}function C0(a,l,u){a.appendChild(l,u)}function WC(a,l,u,d,f){null!==d?qa(a,l,u,d,f):C0(a,l,u)}function aa(a,l){return a.parentNode(l)}function ou(a,l,u){return T0(a,l,u)}function L_(a,l,u){return 40&a.type?$r(a,u):null}let D0,T0=L_;function E0(a,l){T0=a,D0=l}function Qh(a,l,u,d){const f=cr(a,d,l),m=l[11],D=ou(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)WC(m,f,u[I],D,!1);else WC(m,f,u,D,!1);void 0!==D0&&D0(m,d,l,u,f)}function zt(a,l){if(null!==l){const u=l.type;if(3&u)return $r(l,a);if(4&u)return I0(-1,a[l.index]);if(8&u){const d=l.child;if(null!==d)return zt(a,d);{const f=a[l.index];return ir(f)?I0(-1,f):En(f)}}if(32&u)return og(l,a)()||En(a[l.index]);{const d=Xh(a,l);return null!==d?Array.isArray(d)?d[0]:zt(ag(a[16]),d):zt(a,l.next)}}return null}function Xh(a,l){return null!==l?a[16][6].projection[l.projection]:null}function I0(a,l){const u=10+a+1;if(u<l.length){const d=l[u],f=d[1].firstChild;if(null!==f)return zt(d,f)}return l[7]}function xd(a,l,u){const d=aa(a,l);d&&function sc(a,l,u,d){a.removeChild(l,u,d)}(a,d,l,u)}function S0(a,l,u,d,f,m,y){for(;null!=u;){const D=d[u.index],I=u.type;if(y&&0===l&&(D&&Dr(En(D),d),u.flags|=4),64!=(64&u.flags))if(8&I)S0(a,l,u.child,d,f,m,!1),rc(l,a,f,D,m);else if(32&I){const A=og(u,d);let R;for(;R=A();)rc(l,a,f,R,m);rc(l,a,f,D,m)}else 16&I?A0(a,l,d,u,f,m):rc(l,a,f,D,m);u=y?u.projectionNext:u.next}}function dg(a,l,u,d,f,m){S0(u,d,a.firstChild,l,f,m,!1)}function A0(a,l,u,d,f,m){const y=u[16],I=y[6].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)rc(l,a,f,I[A],m);else S0(a,l,I,y[3],f,m,!0)}function mA(a,l,u){a.setAttribute(l,"style",u)}function ur(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function oc(a,l,u){let d=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=l.length;if(f+m===d||a.charCodeAt(f+m)<=32)return f}u=f+1}}const QC="ng-template";function _A(a,l,u){let d=0;for(;d<a.length;){let f=a[d++];if(u&&"class"===f){if(f=a[d],-1!==oc(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function N0(a){return 4===a.type&&a.value!==QC}function XC(a,l,u){return l===(4!==a.type||u?a.value:QC)}function vA(a,l,u){let d=4;const f=a.attrs||[],m=function U_(a){for(let l=0;l<a.length;l++)if(Lp(a[l]))return l;return a.length}(f);let y=!1;for(let D=0;D<l.length;D++){const I=l[D];if("number"!=typeof I){if(!y)if(4&d){if(d=2|1&d,""!==I&&!XC(a,I,u)||""===I&&1===l.length){if(So(d))return!1;y=!0}}else{const A=8&d?I:l[++D];if(8&d&&null!==a.attrs){if(!_A(a.attrs,A,u)){if(So(d))return!1;y=!0}continue}const H=yA(8&d?"class":I,f,N0(a),u);if(-1===H){if(So(d))return!1;y=!0;continue}if(""!==A){let K;K=H>m?"":f[H+1].toLowerCase();const re=8&d?K:null;if(re&&-1!==oc(re,A,0)||2&d&&A!==K){if(So(d))return!1;y=!0}}}}else{if(!y&&!So(d)&&!So(I))return!1;if(y&&So(I))continue;y=!1,d=I|1&d}}return So(d)||y}function So(a){return 0==(1&a)}function yA(a,l,u,d){if(null===l)return-1;let f=0;if(d||!u){let m=!1;for(;f<l.length;){const y=l[f];if(y===a)return f;if(3===y||6===y)m=!0;else{if(1===y||2===y){let D=l[++f];for(;"string"==typeof D;)D=l[++f];continue}if(4===y)break;if(0===y){f+=4;continue}}f+=m?1:2}return-1}return function Md(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const d=a[u];if("number"==typeof d)return-1;if(d===l)return u;u++}return-1}(l,a)}function x0(a,l,u=!1){for(let d=0;d<l.length;d++)if(vA(a,l[d],u))return!0;return!1}function sn(a,l){e:for(let u=0;u<l.length;u++){const d=l[u];if(a.length===d.length){for(let f=0;f<a.length;f++)if(a[f]!==d[f])continue e;return!0}}return!1}function ef(a,l){return a?":not("+l.trim()+")":l}function bA(a){let l=a[0],u=1,d=2,f="",m=!1;for(;u<a.length;){let y=a[u];if("string"==typeof y)if(2&d){const D=a[++u];f+="["+y+(D.length>0?'="'+D+'"':"")+"]"}else 8&d?f+="."+y:4&d&&(f+=" "+y);else""!==f&&!So(y)&&(l+=ef(m,f),f=""),d=y,m=m||!So(d);u++}return""!==f&&(l+=ef(m,f)),l}const Ht={};function B_(a){tT(qt(),Pe(),Qt()+a,!1)}function tT(a,l,u,d){if(!d)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&po(l,m,u)}else{const m=a.preOrderHooks;null!==m&&go(l,m,0,u)}ho(u)}function rT(a,l=null,u=null,d){const f=sT(a,l,u,d);return f.resolveInjectorInitializers(),f}function sT(a,l=null,u=null,d,f=new Set){const m=[u||St,Gh(a)];return d=d||("object"==typeof a?void 0:ye(a)),new EC(m,l||N_(),d||null,f)}let kd=(()=>{class a{static create(u,d){if(Array.isArray(u))return rT({name:""},d,u,"");{const f=u.name??"";return rT({name:f},u.parent,u.providers,f)}}}return a.THROW_IF_NOT_FOUND=Cn,a.NULL=new E_,a.\u0275prov=en({token:a,providedIn:"any",factory:()=>ui(Dd)}),a.__NG_ELEMENT_ID__=-1,a})();function Od(a,l=ut.Default){const u=Pe();return null===u?ui(a,l):Rh(ei(),u,ee(a),l)}function L0(){throw new Error("invalid")}function af(a,l){return a<<17|l<<2}function Ir(a){return a>>17&32767}function U0(a){return 2|a}function ac(a){return(131068&a)>>2}function B0(a,l){return-131069&a|l<<2}function V0(a){return 1|a}function kA(a,l){const u=a.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],m=u[d+1];if(-1!==m){const y=a.data[m];As(f),y.contentQueries(2,l[m],m)}}}function uf(a,l,u,d,f,m,y,D,I,A,R){const H=l.blueprint.slice();return H[0]=f,H[2]=76|d,(null!==R||a&&1024&a[2])&&(H[2]|=1024),vr(H),H[3]=H[15]=a,H[8]=u,H[10]=y||a&&a[10],H[11]=D||a&&a[11],H[12]=I||a&&a[12]||null,H[9]=A||a&&a[9]||null,H[6]=m,H[20]=function tP(){return nu++}(),H[21]=R,H[16]=2==l.type?a[16]:H,H}function df(a,l,u,d,f){let m=a.data[l];if(null===m)m=z0(a,l,u,d,f),function Tl(){return Ft.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=d,m.attrs=f;const y=Ho();m.injectorIndex=null===y?-1:y.injectorIndex}return qr(m,!0),m}function z0(a,l,u,d,f){const m=Cl(),y=Hc(),I=a.data[l]=function PA(a,l,u,d,f,m){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?m:m&&m.parent,u,l,d,f);return null===a.firstChild&&(a.firstChild=I),null!==m&&(y?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}function hf(a,l,u,d){if(0===u)return-1;const f=l.length;for(let m=0;m<u;m++)l.push(d),a.blueprint.push(d),a.data.push(null);return f}function wg(a,l,u){El(l);try{const d=a.viewQuery;null!==d&&vf(1,d,u);const f=a.template;null!==f&&W0(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&kA(a,l),a.staticViewQueries&&vf(2,a.viewQuery,u);const m=a.components;null!==m&&function CP(a,l){for(let u=0;u<l.length;u++)qA(a,l[u])}(l,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,Zs()}}function gs(a,l,u,d){const f=l[2];if(128!=(128&f)){El(l);try{vr(l),function rr(a){return Ft.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&W0(a,l,u,2,d);const y=3==(3&f);if(y){const A=a.preOrderCheckHooks;null!==A&&po(l,A,null)}else{const A=a.preOrderHooks;null!==A&&go(l,A,0,null),Ma(l,0)}if(function tv(a){for(let l=GC(a);null!==l;l=di(l)){if(!l[2])continue;const u=l[9];for(let d=0;d<u.length;d++){const f=u[d],m=f[3];0==(512&f[2])&&Aa(m,1),f[2]|=512}}}(l),function nb(a){for(let l=GC(a);null!==l;l=di(l))for(let u=10;u<l.length;u++){const d=l[u],f=d[1];Sa(d)&&gs(f,d,f.template,d[8])}}(l),null!==a.contentQueries&&kA(a,l),y){const A=a.contentCheckHooks;null!==A&&po(l,A)}else{const A=a.contentHooks;null!==A&&go(l,A,1),Ma(l,1)}!function bP(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)ho(~f);else{const m=f,y=u[++d],D=u[++d];Th(y,m),D(2,l[m])}}}finally{ho(-1)}}(a,l);const D=a.components;null!==D&&function wP(a,l){for(let u=0;u<l.length;u++)ZA(a,l[u])}(l,D);const I=a.viewQuery;if(null!==I&&vf(2,I,d),y){const A=a.viewCheckHooks;null!==A&&po(l,A)}else{const A=a.viewHooks;null!==A&&go(l,A,2),Ma(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,Aa(l[3],-1))}finally{Zs()}}}function W0(a,l,u,d,f){const m=Qt(),y=2&d;try{ho(-1),y&&l.length>22&&tT(a,l,22,!1),u(d,f)}finally{ho(m)}}function K0(a,l,u){!jo()||(function X0(a,l,u,d){const f=u.directiveStart,m=u.directiveEnd;a.firstCreatePass||Rl(u,l),Dr(d,l);const y=u.initialInputs;for(let D=f;D<m;D++){const I=a.data[D],A=Gr(I);A&&GA(l,u,I);const R=bo(l,a,D,u);Dr(R,l),null!==y&&xT(0,D-f,R,I,0,y),A&&(yn(u.index,l)[8]=R)}}(a,l,u,$r(u,l)),128==(128&u.flags)&&function ev(a,l,u){const d=u.directiveStart,f=u.directiveEnd,m=u.index,y=function Dh(){return Ft.lFrame.currentDirectiveIndex}();try{ho(m);for(let D=d;D<f;D++){const I=a.data[D],A=l[D];$c(D),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Fd(I,A)}}finally{ho(-1),$c(y)}}(a,l,u))}function Y0(a,l,u=$r){const d=l.localNames;if(null!==d){let f=l.index+1;for(let m=0;m<d.length;m+=2){const y=d[m+1],D=-1===y?u(l,a):a[y];a[f++]=D}}}function J0(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=pf(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function pf(a,l,u,d,f,m,y,D,I,A){const R=22+d,H=R+f,K=function OA(a,l){const u=[];for(let d=0;d<l;d++)u.push(d<a?null:Ht);return u}(R,H),re="function"==typeof A?A():A;return K[1]={type:a,blueprint:K,template:u,queries:null,viewQuery:D,declTNode:l,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:re,incompleteFirstPass:!1}}function mf(a,l,u,d){const f=yf(l);null===u?f.push(d):(f.push(u),a.firstCreatePass&&sb(a).push(d,f.length-1))}function ET(a,l,u){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(l,f):u[d]=[l,f]}return u}function _f(a,l){const d=l.directiveEnd,f=a.data,m=l.attrs,y=[];let D=null,I=null;for(let A=l.directiveStart;A<d;A++){const R=f[A],H=R.inputs,K=null===m||N0(l)?null:$A(H,m);y.push(K),D=ET(H,A,D),I=ET(R.outputs,A,I)}null!==D&&(D.hasOwnProperty("class")&&(l.flags|=16),D.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=y,l.inputs=D,l.outputs=I}function Xs(a,l,u,d,f,m,y,D){const I=$r(l,u);let R,A=l.inputs;!D&&null!=A&&(R=A[d])?(ob(a,u,R,d,f),Gs(l)&&IT(u,l.index)):3&l.type&&(d=function Cg(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=y?y(f,l.value||"",d):f,m.setProperty(I,d,f))}function IT(a,l){const u=yn(l,a);16&u[2]||(u[2]|=32)}function Q0(a,l,u,d){let f=!1;if(jo()){const m=function VA(a,l,u){const d=a.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const y=d[m];x0(u,y.selectors,!1)&&(f||(f=[]),qs(Rl(u,l),a,y.type),Gr(y)?(ST(a,u),f.unshift(y)):f.push(y))}return f}(a,l,u),y=null===d?null:{"":-1};if(null!==m){f=!0,AT(u,a.data.length,m.length);for(let R=0;R<m.length;R++){const H=m[R];H.providersResolver&&H.providersResolver(H)}let D=!1,I=!1,A=hf(a,l,m.length,null);for(let R=0;R<m.length;R++){const H=m[R];u.mergedAttrs=Oa(u.mergedAttrs,H.hostAttrs),NT(a,u,l,A,H),HA(A,H,y),null!==H.contentQueries&&(u.flags|=8),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(u.flags|=128);const K=H.type.prototype;!D&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),D=!0),!I&&(K.ngOnChanges||K.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),I=!0),A++}_f(a,u)}y&&function jA(a,l,u){if(l){const d=a.localNames=[];for(let f=0;f<l.length;f+=2){const m=u[l[f+1]];if(null==m)throw new Ne(-301,!1);d.push(l[f],m)}}}(u,d,y)}return u.mergedAttrs=Oa(u.mergedAttrs,u.attrs),f}function UA(a,l,u,d,f,m){const y=m.hostBindings;if(y){let D=a.hostBindingOpCodes;null===D&&(D=a.hostBindingOpCodes=[]);const I=~l.index;(function BA(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(D)!=I&&D.push(I),D.push(d,f,y)}}function Fd(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function ST(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function HA(a,l,u){if(u){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)u[l.exportAs[d]]=a;Gr(l)&&(u[""]=a)}}function AT(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function NT(a,l,u,d,f){a.data[d]=f;const m=f.factory||(f.factory=Bo(f.type)),y=new mo(m,Gr(f),Od);a.blueprint[d]=y,u[d]=y,UA(a,l,0,d,hf(a,u,f.hostVars,Ht),f)}function GA(a,l,u){const d=$r(l,a),f=J0(u),m=a[10],y=Ld(a,uf(a,f,null,u.onPush?32:16,d,l,m,m.createRenderer(d,u),null,null,null));a[l.index]=y}function eb(a,l,u,d,f,m,y){if(null==m)a.removeAttribute(l,f,u);else{const D=null==y?Ce(m):y(m,d||"",f);a.setAttribute(l,f,D,u)}}function xT(a,l,u,d,f,m){const y=m[l];if(null!==y){const D=d.setInput;for(let I=0;I<y.length;){const A=y[I++],R=y[I++],H=y[I++];null!==D?d.setInput(u,H,A,R):u[R]=H}}}function $A(a,l){let u=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,a[f],l[d+1])),d+=2}else d+=2;else d+=4}return u}function tb(a,l,u,d){return new Array(a,!0,!1,l,null,0,d,u,null,null)}function ZA(a,l){const u=yn(l,a);if(Sa(u)){const d=u[1];48&u[2]?gs(d,u,d.template,u[8]):u[5]>0&&ib(u)}}function ib(a){for(let d=GC(a);null!==d;d=di(d))for(let f=10;f<d.length;f++){const m=d[f];if(Sa(m))if(512&m[2]){const y=m[1];gs(y,m,y.template,m[8])}else m[5]>0&&ib(m)}const u=a[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=yn(u[d],a);Sa(f)&&f[5]>0&&ib(f)}}function qA(a,l){const u=yn(l,a),d=u[1];(function zA(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(d,u),wg(d,u,u[8])}function Ld(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function nv(a){for(;a;){a[2]|=32;const l=ag(a);if(_l(a)&&!l)return a;a=l}return null}function Tg(a,l,u,d=!0){const f=l[10];f.begin&&f.begin();try{gs(a,l,a.template,u)}catch(y){throw d&&kT(l,y),y}finally{f.end&&f.end()}}function vf(a,l,u){As(0),l(a,u)}function yf(a){return a[7]||(a[7]=[])}function sb(a){return a.cleanup||(a.cleanup=[])}function kT(a,l){const u=a[9],d=u?u.get(Wh,null):null;d&&d.handleError(l)}function ob(a,l,u,d,f){for(let m=0;m<u.length;){const y=u[m++],D=u[m++],I=l[y],A=a.data[y];null!==A.setInput?A.setInput(I,f,d,D):I[D]=f}}function iv(a,l,u){let d=u?a.styles:null,f=u?a.classes:null,m=0;if(null!==l)for(let y=0;y<l.length;y++){const D=l[y];"number"==typeof D?m=D:1==m?f=Te(f,D):2==m&&(d=Te(d,D+": "+l[++y]+";"))}u?a.styles=d:a.stylesWithoutHost=d,u?a.classes=f:a.classesWithoutHost=f}function Ud(a,l,u,d,f=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&d.push(En(m)),ir(m))for(let D=10;D<m.length;D++){const I=m[D],A=I[1].firstChild;null!==A&&Ud(I[1],I,A,d)}const y=u.type;if(8&y)Ud(a,l,u.child,d);else if(32&y){const D=og(u,l);let I;for(;I=D();)d.push(I)}else if(16&y){const D=Xh(l,u);if(Array.isArray(D))d.push(...D);else{const I=ag(l[16]);Ud(I[1],I,D,d,!0)}}u=f?u.projectionNext:u.next}return d}class Dg{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Ud(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(ir(l)){const u=l[8],d=u?u.indexOf(this):-1;d>-1&&(oa(l,d),Fa(u,d))}this._attachedToViewContainer=!1}w0(this._lView[1],this._lView)}onDestroy(l){mf(this._lView[1],this._lView,null,l)}markForCheck(){nv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Tg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fA(a,l){dg(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=l}}class KA extends Dg{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Tg(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class ab extends qh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=L(l);return new Eg(u,this.ngModule)}}function OT(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class JA{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,d){const f=this.injector.get(l,R_,d);return f!==R_||u===R_?f:this.parentInjector.get(l,u,d)}}class Eg extends f0{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function Rd(a){return a.map(bA).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return OT(this.componentDef.inputs)}get outputs(){return OT(this.componentDef.outputs)}create(l,u,d,f){let m=(f=f||this.ngModule)instanceof tu?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const y=m?new JA(l,m):l,D=y.get(p0,null);if(null===D)throw new Ne(407,!1);const I=y.get(YS,null),A=D.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",H=d?function gf(a,l,u){return a.selectRootElement(l,u===Dt.ShadowDom)}(A,d,this.componentDef.encapsulation):b0(D.createRenderer(null,this.componentDef),R,function YA(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(R)),K=this.componentDef.onPush?288:272,re=pf(0,null,null,1,0,null,null,null,null,null),Se=uf(null,re,null,K,null,null,D,A,I,y,null);let $e,tt;El(Se);try{const _t=function LT(a,l,u,d,f,m){const y=u[1];u[22]=a;const I=df(y,22,2,"#host",null),A=I.mergedAttrs=l.hostAttrs;null!==A&&(iv(I,A,!0),null!==a&&(Nl(f,a,A),null!==I.classes&&ur(f,a,I.classes),null!==I.styles&&mA(f,a,I.styles)));const R=d.createRenderer(a,l),H=uf(u,J0(l),null,l.onPush?32:16,u[22],I,d,R,m||null,null,null);return y.firstCreatePass&&(qs(Rl(I,u),y,l.type),ST(y,I),AT(I,u.length,1)),Ld(u,H),u[22]=H}(H,this.componentDef,Se,D,A);if(H)if(d)Nl(A,H,["ng-version",MC.full]);else{const{attrs:It,classes:Me}=function wA(a){const l=[],u=[];let d=1,f=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===f?""!==m&&l.push(m,a[++d]):8===f&&u.push(m);else{if(!So(f))break;f=m}d++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);It&&Nl(A,H,It),Me&&Me.length>0&&ur(A,H,Me.join(" "))}if(tt=Uc(re,22),void 0!==u){const It=tt.projection=[];for(let Me=0;Me<this.ngContentSelectors.length;Me++){const Pt=u[Me];It.push(null!=Pt?Array.from(Pt):null)}}$e=function UT(a,l,u,d){const f=u[1],m=function LA(a,l,u){const d=ei();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),NT(a,d,l,hf(a,l,1,null),u),_f(a,d));const f=bo(l,a,d.directiveStart,d);Dr(f,l);const m=$r(d,l);return m&&Dr(m,l),f}(f,u,l);if(a[8]=u[8]=m,null!==d)for(const D of d)D(m,l);if(l.contentQueries){const D=ei();l.contentQueries(1,m,D.directiveStart)}const y=ei();return!f.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ho(y.index),UA(u[1],y,0,y.directiveStart,y.directiveEnd,l),Fd(l,m)),m}(_t,this.componentDef,Se,[BT]),wg(re,Se,null)}finally{Zs()}return new FT(this.componentType,$e,zh(tt,Se),Se,tt)}}class FT extends class SC{}{constructor(l,u,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new KA(f),this.componentType=l}setInput(l,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[l])){const m=this._rootLView;ob(m[1],m,f,l,u),IT(m,this._tNode.index)}}get injector(){return new Wc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function BT(){const a=ei();Zo(Pe()[1],a)}function lb(a){let l=function VT(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const d=[a];for(;l;){let f;if(Gr(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Ne(903,!1);f=l.\u0275dir}if(f){if(u){d.push(f);const y=a;y.inputs=cb(a.inputs),y.declaredInputs=cb(a.declaredInputs),y.outputs=cb(a.outputs);const D=f.hostBindings;D&&jT(a,D);const I=f.viewQuery,A=f.contentQueries;if(I&&eN(a,I),A&&tN(a,A),me(a.inputs,f.inputs),me(a.declaredInputs,f.declaredInputs),me(a.outputs,f.outputs),Gr(f)&&f.data.animation){const R=a.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let y=0;y<m.length;y++){const D=m[y];D&&D.ngInherit&&D(a),D===lb&&(u=!1)}}l=Object.getPrototypeOf(l)}!function XA(a){let l=0,u=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=l+=f.hostVars,f.hostAttrs=Oa(f.hostAttrs,u=Oa(u,f.hostAttrs))}}(d)}function cb(a){return a===oi?{}:a===St?[]:a}function eN(a,l){const u=a.viewQuery;a.viewQuery=u?(d,f)=>{l(d,f),u(d,f)}:l}function tN(a,l){const u=a.contentQueries;a.contentQueries=u?(d,f,m)=>{l(d,f,m),u(d,f,m)}:l}function jT(a,l){const u=a.hostBindings;a.hostBindings=u?(d,f)=>{l(d,f),u(d,f)}:l}let db=null;function Bd(){if(!db){const a=Yt.Symbol;if(a&&a.iterator)db=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const d=l[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(db=d)}}}return db}function Ig(a){return!!sv(a)&&(Array.isArray(a)||!(a instanceof Map)&&Bd()in a)}function sv(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Ao(a,l,u){return a[l]=u}function es(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Ya(a,l,u,d){const f=es(a,l,u);return es(a,l+1,d)||f}function fb(a,l,u,d){const f=Pe();return es(f,Go(),l)&&(qt(),function Ka(a,l,u,d,f,m){const y=$r(a,l);eb(l[11],y,m,a.value,u,d,f)}(In(),f,a,l,u,d)),fb}function wf(a,l,u,d){return es(a,Go(),u)?l+Ce(u)+d:Ht}function lv(a,l,u,d,f,m,y,D){const I=Pe(),A=qt(),R=a+22,H=A.firstCreatePass?function Df(a,l,u,d,f,m,y,D,I){const A=l.consts,R=df(l,a,4,y||null,Zr(A,D));Q0(l,u,R,Zr(A,I)),Zo(l,R);const H=R.tViews=pf(2,R,d,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,A);return null!==l.queries&&(l.queries.template(l,R),H.queries=l.queries.embeddedTView(R)),R}(R,A,I,l,u,d,f,m,y):A.data[R];qr(H,!1);const K=I[11].createComment("");Qh(A,I,K,H),Dr(K,I),Ld(I,I[R]=tb(K,I,K,H)),ml(H)&&K0(A,I,H),null!=y&&Y0(I,H,D)}function mb(a){return fs(function Zu(){return Ft.lFrame.contextLView}(),22+a)}function cv(a,l,u){const d=Pe();return es(d,Go(),l)&&Xs(qt(),In(),d,a,l,d[11],u,!1),cv}function Ng(a,l,u,d,f){const y=f?"class":"style";ob(a,u,l.inputs[y],y,d)}function uv(a,l,u,d){const f=Pe(),m=qt(),y=22+a,D=f[11],I=f[y]=b0(D,l,function xa(){return Ft.lFrame.currentNamespace}()),A=m.firstCreatePass?function oN(a,l,u,d,f,m,y){const D=l.consts,A=df(l,a,2,f,Zr(D,m));return Q0(l,u,A,Zr(D,y)),null!==A.attrs&&iv(A,A.attrs,!1),null!==A.mergedAttrs&&iv(A,A.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,A),A}(y,m,f,0,l,u,d):m.data[y];qr(A,!0);const R=A.mergedAttrs;null!==R&&Nl(D,I,R);const H=A.classes;null!==H&&ur(D,I,H);const K=A.styles;return null!==K&&mA(D,I,K),64!=(64&A.flags)&&Qh(m,f,I,A),0===function Vc(){return Ft.lFrame.elementDepthCount}()&&Dr(I,f),function bh(){Ft.lFrame.elementDepthCount++}(),ml(A)&&(K0(m,f,A),function ff(a,l,u){if(gl(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const y=a.data[m];y.contentQueries&&y.contentQueries(1,u[m],m)}}}(m,A,f)),null!==d&&Y0(f,A),uv}function dv(){let a=ei();Hc()?Gc():(a=a.parent,qr(a,!1));const l=a;!function Op(){Ft.lFrame.elementDepthCount--}();const u=qt();return u.firstCreatePass&&(Zo(u,a),gl(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function ka(a){return 0!=(16&a.flags)}(l)&&Ng(u,l,Pe(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Sh(a){return 0!=(32&a.flags)}(l)&&Ng(u,l,Pe(),l.stylesWithoutHost,!1),dv}function hv(a,l,u,d){return uv(a,l,u,d),dv(),hv}function _b(){return Pe()}function vb(a){return!!a&&"function"==typeof a.then}function WT(a){return!!a&&"function"==typeof a.subscribe}const yb=WT;function bb(a,l,u,d){const f=Pe(),m=qt(),y=ei();return function YT(a,l,u,d,f,m,y,D){const I=ml(d),R=a.firstCreatePass&&sb(a),H=l[8],K=yf(l);let re=!0;if(3&d.type||D){const tt=$r(d,l),_t=D?D(tt):tt,It=K.length,Me=D?Dn=>D(En(Dn[d.index])):d.index;let Pt=null;if(!D&&I&&(Pt=function cN(a,l,u,d){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const y=f[m];if(y===u&&f[m+1]===d){const D=l[7],I=f[m+2];return D.length>I?D[I]:null}"string"==typeof y&&(m+=2)}return null}(a,l,f,d.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=m,Pt.__ngLastListenerFn__=m,re=!1;else{m=wb(d,l,H,m,!1);const Dn=u.listen(_t,f,m);K.push(m,Dn),R&&R.push(f,Me,It,It+1)}}else m=wb(d,l,H,m,!1);const Se=d.outputs;let $e;if(re&&null!==Se&&($e=Se[f])){const tt=$e.length;if(tt)for(let _t=0;_t<tt;_t+=2){const ii=l[$e[_t]][$e[_t+1]].subscribe(m),Mo=K.length;K.push(m,ii),R&&R.push(f,d.index,Mo,-(Mo+1))}}}(m,f,f[11],y,a,l,0,d),bb}function JT(a,l,u,d){try{return!1!==u(d)}catch(f){return kT(a,f),!1}}function wb(a,l,u,d,f){return function m(y){if(y===Function)return d;nv(2&a.flags?yn(a.index,l):l);let I=JT(l,0,d,y),A=m.__ngNextListenerFn__;for(;A;)I=JT(l,0,A,y)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function QT(a=1){return function $o(a){return(Ft.lFrame.contextLView=function Pp(a,l){for(;a>0;)l=l[15],a--;return l}(a,Ft.lFrame.contextLView))[8]}(a)}function AP(a,l){let u=null;const d=function eT(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let f=0;f<l.length;f++){const m=l[f];if("*"!==m){if(null===d?x0(a,m,!0):sn(d,m))return f}else u=f}return u}function XT(a){const l=Pe()[16][6];if(!l.projection){const d=l.projection=yr(a?a.length:1,null),f=d.slice();let m=l.child;for(;null!==m;){const y=a?AP(m,a):0;null!==y&&(f[y]?f[y].projectionNext=m:d[y]=m,f[y]=m),m=m.next}}}function ne(a,l=0,u){const d=Pe(),f=qt(),m=df(f,22+a,16,null,u||null);null===m.projection&&(m.projection=l),Gc(),64!=(64&m.flags)&&function za(a,l,u){A0(l[11],0,l,u,cr(a,u,l),ou(u.parent||l[6],u,l))}(f,d,m)}function xg(a,l,u){return ts(a,"",l,"",u),xg}function ts(a,l,u,d,f){const m=Pe(),y=wf(m,l,u,d);return y!==Ht&&Xs(qt(),In(),m,a,y,m[11],f,!1),ts}function Tb(a,l,u,d,f){const m=a[u+1],y=null===l;let D=d?Ir(m):ac(m),I=!1;for(;0!==D&&(!1===I||y);){const R=a[D+1];uN(a[D],l)&&(I=!0,a[D+1]=d?V0(R):U0(R)),D=d?Ir(R):ac(R)}I&&(a[u+1]=d?U0(m):V0(m))}function uN(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Ws(a,l)>=0}const Sr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function If(a){return a.substring(Sr.key,Sr.keyEnd)}function Sf(a,l){const u=Sr.textEnd;return u===l?-1:(l=Sr.keyEnd=function fN(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,Sr.key=l,u),lu(a,l,u))}function lu(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function Af(a,l,u){return da(a,l,u,!1),Af}function Hd(a,l){return da(a,l,null,!0),Hd}function sD(a){!function Wn(a,l,u,d){const f=qt(),m=zr(2);f.firstUpdatePass&&dr(f,null,m,d);const y=Pe();if(u!==Ht&&es(y,m,u)){const D=f.data[Qt()];if(xb(D,d)&&!Mg(f,m)){let I=d?D.classesWithoutHost:D.stylesWithoutHost;null!==I&&(u=Te(I,u||"")),Ng(f,D,y,u,d)}else!function aD(a,l,u,d,f,m,y,D){f===Ht&&(f=St);let I=0,A=0,R=0<f.length?f[0]:null,H=0<m.length?m[0]:null;for(;null!==R||null!==H;){const K=I<f.length?f[I+1]:void 0,re=A<m.length?m[A+1]:void 0;let $e,Se=null;R===H?(I+=2,A+=2,K!==re&&(Se=H,$e=re)):null===H||null!==R&&R<H?(I+=2,Se=R):(A+=2,Se=H,$e=re),null!==Se&&pv(a,l,u,d,Se,$e,y,D),R=I<f.length?f[I]:null,H=A<m.length?m[A]:null}}(f,D,y,y[11],y[m+1],y[m+1]=function gN(a,l,u){if(null==u||""===u)return St;const d=[],f=E(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)a(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&a(d,m,f[m]);else"string"==typeof f&&l(d,f);return d}(a,l,u),d,m)}}(br,Xa,a,!0)}function Xa(a,l){for(let u=function Db(a){return function hN(a){Sr.key=0,Sr.keyEnd=0,Sr.value=0,Sr.valueEnd=0,Sr.textEnd=a.length}(a),Sf(a,lu(a,0,Sr.textEnd))}(l);u>=0;u=Sf(l,u))br(a,If(l),!0)}function da(a,l,u,d){const f=Pe(),m=qt(),y=zr(2);m.firstUpdatePass&&dr(m,a,y,d),l!==Ht&&es(f,y,l)&&pv(m,m.data[Qt()],f,f[11],a,f[y+1]=function Nb(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ye(E(a)))),a}(l,u),d,y)}function Mg(a,l){return l>=a.expandoStartIndex}function dr(a,l,u,d){const f=a.data;if(null===f[u+1]){const m=f[Qt()],y=Mg(a,u);xb(m,d)&&null===l&&!y&&(l=!1),l=function cu(a,l,u,d){const f=function qu(a){const l=Ft.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let m=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(u=Yi(u=fv(null,a,l,u,d),l.attrs,d),m=null);else{const y=l.directiveStylingLast;if(-1===y||a[y]!==f)if(u=fv(f,a,l,u,d),null===m){let I=function pN(a,l,u){const d=u?l.classBindings:l.styleBindings;if(0!==ac(d))return a[Ir(d)]}(a,l,d);void 0!==I&&Array.isArray(I)&&(I=fv(null,a,l,I[1],d),I=Yi(I,l.attrs,d),function oD(a,l,u,d){a[Ir(u?l.classBindings:l.styleBindings)]=d}(a,l,d,I))}else m=function Ab(a,l,u){let d;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)d=Yi(d,a[m].hostAttrs,u);return Yi(d,l.attrs,u)}(a,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),u}(f,m,l,d),function ca(a,l,u,d,f,m){let y=m?l.classBindings:l.styleBindings,D=Ir(y),I=ac(y);a[d]=u;let R,A=!1;if(Array.isArray(u)){const H=u;R=H[1],(null===R||Ws(H,R)>0)&&(A=!0)}else R=u;if(f)if(0!==I){const K=Ir(a[D+1]);a[d+1]=af(K,D),0!==K&&(a[K+1]=B0(a[K+1],d)),a[D+1]=function pT(a,l){return 131071&a|l<<17}(a[D+1],d)}else a[d+1]=af(D,0),0!==D&&(a[D+1]=B0(a[D+1],d)),D=d;else a[d+1]=af(I,0),0===D?D=d:a[I+1]=B0(a[I+1],d),I=d;A&&(a[d+1]=U0(a[d+1])),Tb(a,R,d,!0),Tb(a,R,d,!1),function rD(a,l,u,d,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&Ws(m,l)>=0&&(u[d+1]=V0(u[d+1]))}(l,R,a,d,m),y=af(D,I),m?l.classBindings=y:l.styleBindings=y}(f,m,l,u,y,d)}}function fv(a,l,u,d,f){let m=null;const y=u.directiveEnd;let D=u.directiveStylingLast;for(-1===D?D=u.directiveStart:D++;D<y&&(m=l[D],d=Yi(d,m.hostAttrs,f),m!==a);)D++;return null!==a&&(u.directiveStylingLast=D),d}function Yi(a,l,u){const d=u?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const y=l[m];"number"==typeof y?f=y:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),br(a,y,!!u||l[++m]))}return void 0===a?null:a}function pv(a,l,u,d,f,m,y,D){if(!(3&l.type))return;const I=a.data,A=I[D+1];eo(function gT(a){return 1==(1&a)}(A)?kg(I,l,u,f,ac(A),y):void 0)||(eo(m)||function vg(a){return 2==(2&a)}(A)&&(m=kg(I,null,u,f,D,y)),function YC(a,l,u,d,f){if(l)f?a.addClass(u,d):a.removeClass(u,d);else{let m=-1===d.indexOf("-")?void 0:sa.DashCase;null==f?a.removeStyle(u,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=sa.Important),a.setStyle(u,d,f,m))}}(d,y,Vo(Qt(),u),f,m))}function kg(a,l,u,d,f,m){const y=null===l;let D;for(;f>0;){const I=a[f],A=Array.isArray(I),R=A?I[1]:I,H=null===R;let K=u[f+1];K===Ht&&(K=H?St:void 0);let re=H?Bl(K,d):R===d?K:void 0;if(A&&!eo(re)&&(re=Bl(I,d)),eo(re)&&(D=re,y))return D;const Se=a[f+1];f=y?Ir(Se):ac(Se)}if(null!==l){let I=m?l.residualClasses:l.residualStyles;null!=I&&(D=Bl(I,d))}return D}function eo(a){return void 0!==a}function xb(a,l){return 0!=(a.flags&(l?16:32))}function lD(a,l=""){const u=Pe(),d=qt(),f=a+22,m=d.firstCreatePass?df(d,f,1,l,null):d.data[f],y=u[f]=ru(u[11],l);Qh(d,u,y,m),qr(m,!1)}function uu(a){return Og("",a,""),uu}function Og(a,l,u){const d=Pe(),f=wf(d,a,l,u);return f!==Ht&&function uc(a,l,u){const d=Vo(l,a);$C(a[11],d,u)}(d,Qt(),f),Og}function Hb(a,l,u){const d=Pe();return es(d,Go(),l)&&Xs(qt(),In(),d,a,l,d[11],u,!0),Hb}const dc=void 0;var Ar=["en",[["a","p"],["AM","PM"],dc],[["AM","PM"],dc,dc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dc,"{1} 'at' {0}",dc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Gb(a){const u=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let ki={};function Ug(a){const l=function mD(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=Zb(l);if(u)return u;const d=l.split("-")[0];if(u=Zb(d),u)return u;if("en"===d)return Ar;throw new Ne(701,!1)}function gD(a){return Ug(a)[Ot.PluralCase]}function Zb(a){return a in ki||(ki[a]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[a]),ki[a]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const qb=["zero","one","two","few","many"],du="en-US",Ev={marker:"element"},Gd={marker:"ICU"};var hi=(()=>((hi=hi||{})[hi.SHIFT=2]="SHIFT",hi[hi.APPEND_EAGERLY=1]="APPEND_EAGERLY",hi[hi.COMMENT=2]="COMMENT",hi))();let zb=du;function yD(a){(function gn(a,l){null==a&&it(l,a,null,"!=")})(a,"Expected localeId to be defined"),"string"==typeof a&&(zb=a.toLowerCase().replace(/_/g,"-"))}function Wb(a,l,u){const d=l.insertBeforeIndex,f=Array.isArray(d)?d[0]:d;return null===f?L_(a,0,u):En(u[f])}function Kb(a,l,u,d,f){const m=l.insertBeforeIndex;if(Array.isArray(m)){let y=d,D=null;if(3&l.type||(D=y,y=f),null!==y&&0==(2&l.flags))for(let I=1;I<m.length;I++)qa(a,y,u[m[I]],D,!1)}}function Yb(a,l){if(a.push(l),a.length>1)for(let u=a.length-2;u>=0;u--){const d=a[u];Vg(d)||TN(d,l)&&null===DN(d)&&Nf(d,l.index)}}function Vg(a){return!(64&a.type)}function TN(a,l){return Vg(l)||a.index>l.index}function DN(a){const l=a.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function Nf(a,l){const u=a.insertBeforeIndex;Array.isArray(u)?u[0]=l:(E0(Wb,Kb),a.insertBeforeIndex=l)}function jg(a,l){const u=a.data[l];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function bD(a,l,u){const d=z0(a,u,64,null,null);return Yb(l,d),d}function Zd(a,l){const u=l[a.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function Jb(a){return a>>>17}function xf(a){return(131070&a)>>>1}let Mf=0,hc=0;function ew(a,l,u,d){const f=u[11];let y,m=null;for(let D=0;D<l.length;D++){const I=l[D];if("string"==typeof I){const A=l[++D];null===u[A]&&(u[A]=ru(f,I))}else if("number"==typeof I)switch(1&I){case 0:const A=Jb(I);let R,H;if(null===m&&(m=A,y=aa(f,d)),A===m?(R=d,H=y):(R=null,H=En(u[A])),null!==H){const $e=xf(I);qa(f,H,u[$e],R,!1);const _t=jg(a,$e);if(null!==_t&&"object"==typeof _t){const It=Zd(_t,u);null!==It&&ew(a,_t.create[It],u,u[_t.anchorIdx])}}break;case 1:const re=l[++D],Se=l[++D];eb(f,Vo(I>>>1,u),null,null,re,Se,null)}else switch(I){case Gd:const A=l[++D],R=l[++D];null===u[R]&&Dr(u[R]=F_(f,A),u);break;case Ev:const H=l[++D],K=l[++D];null===u[K]&&Dr(u[K]=b0(f,H,null),u)}}}function tw(a,l,u,d,f){for(let m=0;m<u.length;m++){const y=u[m],D=u[++m];if(y&f){let I="";for(let A=m+1;A<=m+D;A++){const R=u[A];if("string"==typeof R)I+=R;else if("number"==typeof R)if(R<0)I+=Ce(l[d-R]);else{const H=R>>>2;switch(3&R){case 1:const K=u[++A],re=u[++A],Se=a.data[H];"string"==typeof Se?eb(l[11],l[H],null,Se,K,I,re):Xs(a,Se,l,K,I,l[11],re,!1);break;case 0:const $e=l[H];null!==$e&&$C(l[11],$e,I);break;case 2:nw(a,jg(a,H),l,I);break;case 3:Rf(a,jg(a,H),d,l)}}}}else{const I=u[m+1];if(I>0&&3==(3&I)){const R=jg(a,I>>>2);l[R.currentCaseLViewIndex]<0&&Rf(a,R,d,l)}}m+=D}}function Rf(a,l,u,d){let f=d[l.currentCaseLViewIndex];if(null!==f){let m=Mf;f<0&&(f=d[l.currentCaseLViewIndex]=~f,m=-1),tw(a,d,l.update[f],u,m)}}function nw(a,l,u,d){const f=function iw(a,l){let u=a.cases.indexOf(l);if(-1===u)switch(a.type){case 1:{const d=function CN(a,l){const u=gD(l)(parseInt(a,10)),d=qb[u];return void 0!==d?d:"other"}(l,function Bg(){return zb}());u=a.cases.indexOf(d),-1===u&&"other"!==d&&(u=a.cases.indexOf("other"));break}case 0:u=a.cases.indexOf("other")}return-1===u?null:u}(l,d);if(Zd(l,u)!==f&&(Sv(a,l,u),u[l.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const y=u[l.anchorIdx];y&&ew(a,l.create[f],u,y)}}function Sv(a,l,u){let d=Zd(l,u);if(null!==d){const f=l.remove[d];for(let m=0;m<f.length;m++){const y=f[m];if(y>0){const D=Vo(y,u);null!==D&&xd(u[11],D)}else Sv(a,jg(a,~y),u)}}}function Av(){const a=[];let u,d,l=-1;function m(D,I){l=0;const A=Zd(D,I);d=null!==A?D.remove[A]:St}function y(){if(l<d.length){const D=d[l++];return D>0?u[D]:(a.push(l,d),m(u[1].data[~D],u),y())}return 0===a.length?null:(d=a.pop(),l=a.pop(),y())}return function f(D,I){for(u=I;a.length;)a.pop();return m(D.value,I),y}}const kf=/\ufffd(\d+):?\d*\ufffd/gi,DD=/\ufffd(\d+)\ufffd/,rw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,$g=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ED=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,xv=/\uE500/g;function Mv(a,l,u,d,f,m,y){const D=hf(a,d,1,null);let I=D<<hi.SHIFT,A=Ho();l===A&&(A=null),null===A&&(I|=hi.APPEND_EAGERLY),y&&(I|=hi.COMMENT,function uA(a){void 0===y0&&(y0=a())}(Av)),f.push(I,null===m?"":m);const R=z0(a,D,y?32:1,null===m?"":m,null);Yb(u,R);const H=R.index;return qr(R,!1),null!==A&&l!==A&&function $d(a,l){let u=a.insertBeforeIndex;null===u?(E0(Wb,Kb),u=a.insertBeforeIndex=[null,l]):(function Je(a,l,u){a!=l&&it(u,a,l,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(l))}(A,H),R}function SN(a,l,u,d,f,m,y){const D=y.match(kf),I=Mv(a,l,u,m,d,D?null:y,!1);D&&Of(f,y,I.index,null,0,null)}function Of(a,l,u,d,f,m){const y=a.length,D=y+1;a.push(null,null);const I=y+2,A=l.split(kf);let R=0;for(let H=0;H<A.length;H++){const K=A[H];if(1&H){const re=f+parseInt(K,10);a.push(-1-re),R|=SD(re)}else""!==K&&a.push(K)}return a.push(u<<2|(d?1:0)),d&&a.push(d,m),a[y]=R,a[D]=a.length-I,R}function SD(a){return 1<<Math.min(a,31)}function el(a){let l,m,u="",d=0,f=!1;for(;null!==(l=$g.exec(a));)f?l[0]===`\ufffd/*${m}\ufffd`&&(d=l.index,f=!1):(u+=a.substring(d,l.index+l[0].length),m=l[1],f=!0);return u+=a.slice(d),u}function qg(a,l,u,d,f,m){let y=0;const D={type:f.type,currentCaseLViewIndex:hf(a,l,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function ND(a,l,u){a.push(SD(l.mainBinding),2,-1-l.mainBinding,u<<2|2)})(u,f,m),function EN(a,l,u){const d=a.data[l];null===d?a.data[l]=u:d.value=u}(a,m,D);const I=f.values;for(let A=0;A<I.length;A++){const R=I[A],H=[];for(let K=0;K<R.length;K++){const re=R[K];if("string"!=typeof re){const Se=H.push(re)-1;R[K]=`\x3c!--\ufffd${Se}\ufffd--\x3e`}}y=kv(a,D,l,u,d,f.cases[A],R.join(""),H)|y}y&&function xN(a,l,u){a.push(l,1,u<<2|3)}(u,y,m)}function AD(a){const l=[],u=[];let d=1,f=0;const m=Kn(a=a.replace(rw,function(y,D,I){return d="select"===I?0:1,f=parseInt(D.slice(1),10),""}));for(let y=0;y<m.length;){let D=m[y++].trim();1===d&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&l.push(D);const I=Kn(m[y++]);l.length>u.length&&u.push(I)}return{type:d,mainBinding:f,cases:l,values:u}}function Kn(a){if(!a)return[];let l=0;const u=[],d=[],f=/[{}]/g;let m;for(f.lastIndex=0;m=f.exec(a);){const D=m.index;if("}"==m[0]){if(u.pop(),0==u.length){const I=a.substring(l,D);rw.test(I)?d.push(AD(I)):d.push(I),l=D+1}}else{if(0==u.length){const I=a.substring(l,D);d.push(I),l=D+1}u.push("{")}}const y=a.substring(l);return d.push(y),d}function kv(a,l,u,d,f,m,y,D){const I=[],A=[],R=[];l.cases.push(m),l.create.push(I),l.remove.push(A),l.update.push(R);const K=function ft(a){const l=new kt(a);return function Cr(){try{return!!(new window.DOMParser).parseFromString(Ks(""),"text/html")}catch{return!1}}()?new Mt(l):l}(function T_(){return void 0!==Xl?Xl:typeof document<"u"?document:void 0}()).getInertBodyElement(y),re=function b(a){return"content"in a&&function g(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}(K)||K;return re?Pf(a,l,u,d,I,A,R,re,f,D,0):0}function Pf(a,l,u,d,f,m,y,D,I,A,R){let H=0,K=D.firstChild;for(;K;){const re=hf(a,u,1,null);switch(K.nodeType){case Node.ELEMENT_NODE:const Se=K,$e=Se.tagName.toLowerCase();if(Cd.hasOwnProperty($e)){sw(f,Ev,$e,I,re),a.data[re]=$e;const Me=Se.attributes;for(let Pt=0;Pt<Me.length;Pt++){const Dn=Me.item(Pt),ii=Dn.name.toLowerCase();Dn.value.match(kf)?Jp.hasOwnProperty(ii)&&Of(y,Dn.value,re,Dn.name,0,Td[ii]?Ys:null):MN(f,re,Dn)}H=Pf(a,l,u,d,f,m,y,K,re,A,R+1)|H,Ff(m,re,R)}break;case Node.TEXT_NODE:const tt=K.textContent||"",_t=tt.match(kf);sw(f,null,_t?"":tt,I,re),Ff(m,re,R),_t&&(H=Of(y,tt,re,null,0,null)|H);break;case Node.COMMENT_NODE:const It=DD.exec(K.textContent||"");if(It){const Pt=A[parseInt(It[1],10)];sw(f,Gd,"",I,re),qg(a,u,d,I,Pt,re),NN(m,re,R)}}K=K.nextSibling}return H}function Ff(a,l,u){0===u&&a.push(l)}function NN(a,l,u){0===u&&(a.push(~l),a.push(l))}function sw(a,l,u,d,f){null!==l&&a.push(l),a.push(u,f,function vs(a,l,u){return a|l<<17|u<<1}(0,d,f))}function MN(a,l,u){a.push(l<<1|1,u.name,u.value)}function ow(a,l,u=-1){const d=qt(),f=Pe(),m=22+a,y=Zr(d.consts,l),D=Ho();d.firstCreatePass&&function qd(a,l,u,d,f,m){const y=Ho(),D=[],I=[],A=[[]];f=function Rv(a,l){if(function zd(a){return-1===a}(l))return el(a);{const u=a.indexOf(`:${l}\ufffd`)+2+l.toString().length,d=a.search(new RegExp(`\ufffd\\/\\*\\d+:${l}\ufffd`));return el(a.substring(u,d))}}(f,m);const R=function Zg(a){return a.replace(xv," ")}(f).split(ED);for(let H=0;H<R.length;H++){let K=R[H];if(0==(1&H)){const re=Kn(K);for(let Se=0;Se<re.length;Se++){let $e=re[Se];if(0==(1&Se)){const tt=$e;""!==tt&&SN(a,y,A[0],D,I,u,tt)}else{const tt=$e;if("object"!=typeof tt)throw new Error(`Unable to parse ICU expression in "${f}" message.`);qg(a,u,I,l,tt,Mv(a,y,A[0],u,D,"",!0).index)}}}else{const re=47===K.charCodeAt(0),$e=(K.charCodeAt(re?1:0),22+Number.parseInt(K.substring(re?2:1)));if(re)A.shift(),qr(Ho(),!1);else{const tt=bD(a,A[0],$e);A.unshift([]),qr(tt,!0)}}}a.data[d]={create:D,update:I}}(d,null===D?0:D.index,f,m,y,u);const I=d.data[m],R=su(d,D===f[6]?null:D,f);(function Xb(a,l,u,d){const f=a[11];for(let m=0;m<l.length;m++){const y=l[m++],D=l[m],I=(y&hi.COMMENT)===hi.COMMENT,A=(y&hi.APPEND_EAGERLY)===hi.APPEND_EAGERLY,R=y>>>hi.SHIFT;let H=a[R];null===H&&(H=a[R]=I?f.createComment(D):ru(f,D)),A&&null!==u&&qa(f,u,H,d,!1)}})(f,I.create,R,D&&8&D.type?f[D.index]:null),Ch(!0)}function aw(a,l,u){ow(a,l,u),function OD(){Ch(!1)}()}function Wg(a){return function Iv(a){a&&(Mf|=1<<Math.min(hc,31)),hc++}(es(Pe(),Go(),a)),Wg}function Ov(a){!function wD(a,l,u){if(hc>0){const d=a.data[u];tw(a,l,Array.isArray(d)?d:d.update,function Vi(){return Ft.lFrame.bindingIndex}()-hc-1,Mf)}Mf=0,hc=0}(qt(),Pe(),a+22)}function Kg(a,l,u,d,f){if(a=ee(a),Array.isArray(a))for(let m=0;m<a.length;m++)Kg(a[m],l,u,d,f);else{const m=qt(),y=Pe();let D=nc(a)?a:ee(a.provide),I=d0(a);const A=ei(),R=1048575&A.providerIndexes,H=A.directiveStart,K=A.providerIndexes>>20;if(nc(a)||!a.multi){const re=new mo(I,f,Od),Se=cw(D,l,f?R:R+K,H);-1===Se?(qs(Rl(A,y),m,D),lw(m,a,l.length),l.push(D),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(re),y.push(re)):(u[Se]=re,y[Se]=re)}else{const re=cw(D,l,R+K,H),Se=cw(D,l,R,R+K),$e=re>=0&&u[re],tt=Se>=0&&u[Se];if(f&&!tt||!f&&!$e){qs(Rl(A,y),m,D);const _t=function uw(a,l,u,d,f){const m=new mo(a,u,Od);return m.multi=[],m.index=l,m.componentProviders=0,UD(m,f,d&&!u),m}(f?Yg:Pv,u.length,f,d,I);!f&&tt&&(u[Se].providerFactory=_t),lw(m,a,l.length,0),l.push(D),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(_t),y.push(_t)}else lw(m,a,re>-1?re:Se,UD(u[f?Se:re],I,!f&&d));!f&&d&&tt&&u[Se].componentProviders++}}}function lw(a,l,u,d){const f=nc(l),m=function GS(a){return!!a.useClass}(l);if(f||m){const I=(m?ee(l.useClass):l).prototype.ngOnDestroy;if(I){const A=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const R=A.indexOf(u);-1===R?A.push(u,[d,I]):A[R+1].push(d,I)}else A.push(u,I)}}}function UD(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function cw(a,l,u,d){for(let f=u;f<d;f++)if(l[f]===a)return f;return-1}function Pv(a,l,u,d){return Uf(this.multi,[])}function Yg(a,l,u,d){const f=this.multi;let m;if(this.providerFactory){const y=this.providerFactory.componentProviders,D=bo(u,u[1],this.providerFactory.index,d);m=D.slice(0,y),Uf(f,m);for(let I=y;I<D.length;I++)m.push(D[I])}else m=[],Uf(f,m);return m}function Uf(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function dw(a,l=[]){return u=>{u.providersResolver=(d,f)=>function LD(a,l,u){const d=qt();if(d.firstCreatePass){const f=Gr(a);Kg(u,d.data,d.blueprint,f,!0),Kg(l,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,l)}}class tl{}class Bf{}function ON(a,l){return new hw(a,l??null)}class hw extends tl{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ab(this);const d=Ye(l);this._bootstrapComponents=iu(d.bootstrap),this._r3Injector=sT(l,u,[{provide:tl,useValue:this},{provide:qh,useValue:this.componentFactoryResolver}],ye(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class fw extends Bf{constructor(l){super(),this.moduleType=l}create(l){return new hw(this.moduleType,l)}}class PN extends tl{constructor(l,u,d){super(),this.componentFactoryResolver=new ab(this),this.instance=null;const f=new EC([...l,{provide:tl,useValue:this},{provide:qh,useValue:this.componentFactoryResolver}],u||N_(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function pw(a,l,u=null){return new PN(a,l,u).injector}let BD=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=eg(0,u.type),f=d.length>0?pw([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=en({token:a,providedIn:"environment",factory:()=>new a(ui(tu))}),a})();function gw(a){a.getStandaloneInjector=l=>l.get(BD).getOrCreateStandaloneInjector(a)}function Vv(a,l,u,d){return function em(a,l,u,d,f,m){const y=l+u;return es(a,y,f)?Ao(a,y+1,m?d.call(m,f):d(f)):Vf(a,y+1)}(Pe(),Mi(),a,l,u,d)}function Cw(a,l,u,d,f){return function ks(a,l,u,d,f,m,y){const D=l+u;return Ya(a,D,f,m)?Ao(a,D+2,y?d.call(y,f,m):d(f,m)):Vf(a,D+2)}(Pe(),Mi(),a,l,u,d,f)}function Xg(a,l,u,d,f,m){return Tw(Pe(),Mi(),a,l,u,d,f,m)}function Vf(a,l){const u=a[l];return u===Ht?void 0:u}function Tw(a,l,u,d,f,m,y,D){const I=l+u;return function ov(a,l,u,d,f){const m=Ya(a,l,u,d);return es(a,l+2,f)||m}(a,I,f,m,y)?Ao(a,I+3,D?d.call(D,f,m,y):d(f,m,y)):Vf(a,I+3)}function KD(a,l){const u=qt();let d;const f=a+22;u.firstCreatePass?(d=function ha(a,l){if(l)for(let u=l.length-1;u>=0;u--){const d=l[u];if(a===d.name)return d}}(l,u.pipeRegistry),u.data[f]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,d.onDestroy)):d=u.data[f];const m=d.factory||(d.factory=Bo(d.type)),y=Qn(Od);try{const D=Kr(!1),I=m();return Kr(D),function SP(a,l,u,d){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=d}(u,Pe(),f,I),I}finally{Qn(y)}}function jv(a,l,u,d,f){const m=a+22,y=Pe(),D=fs(y,m);return function Yd(a,l){return a[1].data[l].pure}(y,m)?Tw(y,Mi(),l,D.transform,u,d,f,D):D.transform(u,d,f)}function tm(a){return l=>{setTimeout(a,void 0,l)}}const fa=class jf extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,d){let f=l,m=u||(()=>null),y=d;if(l&&"object"==typeof l){const I=l;f=I.next?.bind(I),m=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(m=tm(m),f&&(f=tm(f)),y&&(y=tm(y)));const D=super.subscribe({next:f,error:m,complete:y});return l instanceof $.w0&&l.add(D),D}};function fc(){return this._results[Bd()]()}class Os{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Bd(),d=Os.prototype;d[u]||(d[u]=fc)}get changes(){return this._changes||(this._changes=new fa)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const d=this;d.dirty=!1;const f=sr(l);(this._changesDetected=!function Yc(a,l,u){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],m=l[d];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Gi=(()=>{class a{}return a.__NG_ELEMENT_ID__=nm,a})();const Hv=Gi,Gv=class extends Hv{constructor(l,u,d){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(l,u){const d=this._declarationTContainer.tViews,f=uf(this._declarationLView,d,l,16,null,d.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(f[19]=y.createEmbeddedView(d)),wg(d,f,l),new Dg(f)}};function nm(){return Jd(ei(),Pe())}function Jd(a,l){return 4&a.type?new Gv(l,a,zh(a,l)):null}let im=(()=>{class a{}return a.__NG_ELEMENT_ID__=Hf,a})();function Hf(){return XD(ei(),Pe())}const BN=im,QD=class extends BN{constructor(l,u,d){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=d}get element(){return zh(this._hostTNode,this._hostLView)}get injector(){return new Wc(this._hostTNode,this._hostLView)}get parentInjector(){const l=Ol(this._hostTNode,this._hostLView);if(ed(l)){const u=zo(l,this._hostLView),d=xl(l);return new Wc(u[1].data[d+8],u)}return new Wc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=$v(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const y=l.createEmbeddedView(u||{},m);return this.insert(y,f),y}createComponent(l,u,d,f,m){const y=l&&!function Bn(a){return"function"==typeof a}(l);let D;if(y)D=u;else{const H=u||{};D=H.index,d=H.injector,f=H.projectableNodes,m=H.environmentInjector||H.ngModuleRef}const I=y?l:new Eg(L(l)),A=d||this.parentInjector;if(!m&&null==I.ngModule){const K=(y?A:this.parentInjector).get(tu,null);K&&(m=K)}const R=I.create(A,f,void 0,m);return this.insert(R.hostView,D),R}insert(l,u){const d=l._lView,f=d[1];if(function Bc(a){return ir(a[3])}(d)){const R=this.indexOf(l);if(-1!==R)this.detach(R);else{const H=d[3],K=new QD(H,H[6],H[3]);K.detach(K.indexOf(l))}}const m=this._adjustIndex(u),y=this._lContainer;!function qC(a,l,u,d){const f=10+d,m=u.length;d>0&&(u[f-1][4]=l),d<m-10?(l[4]=u[f],Ul(u,10+d,l)):(u.push(l),l[4]=null),l[3]=u;const y=l[17];null!==y&&u!==y&&function pA(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(y,l);const D=l[19];null!==D&&D.insertView(a),l[2]|=64}(f,d,y,m);const D=I0(m,y),I=d[11],A=aa(I,y[7]);return null!==A&&function lg(a,l,u,d,f,m){d[0]=f,d[6]=l,dg(a,d,u,1,f,m)}(f,y[6],I,d,A,D),l.attachToViewContainerRef(),Ul(Ew(y),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=$v(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),d=oa(this._lContainer,u);d&&(Fa(Ew(this._lContainer),u),w0(d[1],d))}detach(l){const u=this._adjustIndex(l,-1),d=oa(this._lContainer,u);return d&&null!=Fa(Ew(this._lContainer),u)?new Dg(d):null}_adjustIndex(l,u=0){return l??this.length+u}};function $v(a){return a[8]}function Ew(a){return a[8]||(a[8]=[])}function XD(a,l){let u;const d=l[a.index];if(ir(d))u=d;else{let f;if(8&a.type)f=En(d);else{const m=l[11];f=m.createComment("");const y=$r(a,l);qa(m,aa(m,y),f,function gA(a,l){return a.nextSibling(l)}(m,y),!1)}l[a.index]=u=tb(d,l,f,a),Ld(l,u)}return new QD(u,a,l)}class Sw{constructor(l){this.queryList=l,this.matches=null}clone(){return new Sw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Aw{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const d=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let m=0;m<d;m++){const y=u.getByIndex(m);f.push(this.queries[y.indexInDeclarationView].clone())}return new Aw(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==Qi(l,u).matches&&this.queries[u].setDirty()}}class Qd{constructor(l,u,d=null){this.predicate=l,this.flags=u,this.read=d}}class Zv{constructor(l=[]){this.queries=l}elementStart(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,m=this.getByIndex(d).embeddedTView(l,f);m&&(m.indexInDeclarationView=d,null!==u?u.push(m):u=[m])}return null!==u?new Zv(u):null}template(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Ji{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Ji(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(l,u,Gf(u,m)),this.matchTNodeWithReadOption(l,u,Pl(u,l,m,!1,!1))}else d===Gi?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Pl(u,l,d,!1,!1))}matchTNodeWithReadOption(l,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Ad||f===im||f===Gi&&4&u.type)this.addMatch(u.index,-2);else{const m=Pl(u,l,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,d)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function Gf(a,l){const u=a.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===l)return u[d+1];return null}function Nw(a,l,u,d){return-1===u?function fu(a,l){return 11&a.type?zh(a,l):4&a.type?Jd(a,l):null}(l,a):-2===u?function jN(a,l,u){return u===Ad?zh(l,a):u===Gi?Jd(l,a):u===im?XD(l,a):void 0}(a,l,d):bo(a,a[1],u,l)}function je(a,l,u,d){const f=l[19].queries[d];if(null===f.matches){const m=a.data,y=u.matches,D=[];for(let I=0;I<y.length;I+=2){const A=y[I];D.push(A<0?null:Nw(l,m[A],y[I+1],u.metadata.read))}f.matches=D}return f.matches}function Di(a,l,u,d){const f=a.queries.getByIndex(u),m=f.matches;if(null!==m){const y=je(a,l,f,u);for(let D=0;D<m.length;D+=2){const I=m[D];if(I>0)d.push(y[D/2]);else{const A=m[D+1],R=l[-I];for(let H=10;H<R.length;H++){const K=R[H];K[17]===K[3]&&Di(K[1],K,A,d)}if(null!==R[9]){const H=R[9];for(let K=0;K<H.length;K++){const re=H[K];Di(re[1],re,A,d)}}}}}return d}function to(a){const l=Pe(),u=qt(),d=zu();As(d+1);const f=Qi(u,d);if(a.dirty&&function Hu(a){return 4==(4&a[2])}(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?Di(u,l,d,[]):je(u,l,f,d);a.reset(m,NC),a.notifyOnChanges()}return!0}return!1}function qv(a,l,u){const d=qt();d.firstCreatePass&&(pe(d,new Qd(a,l,u),-1),2==(2&l)&&(d.staticViewQueries=!0)),st(d,Pe(),l)}function pt(a,l,u,d){const f=qt();if(f.firstCreatePass){const m=ei();pe(f,new Qd(l,u,d),m.index),function Fe(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}st(f,Pe(),u)}function Tt(){return function HN(a,l){return a[19].queries[l].queryList}(Pe(),zu())}function st(a,l,u){const d=new Os(4==(4&u));mf(a,l,d,d.destroy),null===l[19]&&(l[19]=new Aw),l[19].queries.push(new Sw(d))}function pe(a,l,u){null===a.queries&&(a.queries=new Zv),a.queries.track(new Ji(l,u))}function Qi(a,l){return a.queries.getByIndex(l)}function xw(a,l){return Jd(a,l)}function Kv(...a){}const uE=new wn("Application Initializer");let Yv=(()=>{class a{constructor(u){this.appInits=u,this.resolve=Kv,this.reject=Kv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(vb(m))u.push(m);else if(yb(m)){const y=new Promise((D,I)=>{m.subscribe({complete:D,error:I})});u.push(y)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(ui(uE,8))},a.\u0275prov=en({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const dE=new wn("AppId",{providedIn:"root",factory:function hE(){return`${Fw()}${Fw()}${Fw()}`}});function Fw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fE=new wn("Platform Initializer"),ex=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pE=new wn("appBootstrapListener");let gE=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=en({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const dm=new wn("LocaleId",{providedIn:"root",factory:()=>$l(dm,ut.Optional|ut.SkipSelf)||function tx(){return typeof $localize<"u"&&$localize.locale||du}()}),mE=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vE{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let vu=(()=>{class a{compileModuleSync(u){return new fw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),m=iu(Ye(u).declarations).reduce((y,D)=>{const I=L(D);return I&&y.push(new Eg(I)),y},[]);return new vE(d,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=en({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Fs=(()=>Promise.resolve(0))();function Qv(a){typeof Zone>"u"?Fs.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Mn{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fa(!1),this.onMicrotaskEmpty=new fa(!1),this.onStable=new fa(!1),this.onError=new fa(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ix(){let a=Yt.requestAnimationFrame,l=Yt.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function gc(a){const l=()=>{!function Oi(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Yt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Kf(a),a.isCheckStableRunning=!0,rl(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Kf(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,m,y,D)=>{try{return hm(a),u.invokeTask(f,m,y,D)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),Yf(a)}},onInvoke:(u,d,f,m,y,D,I)=>{try{return hm(a),u.invoke(f,m,y,D,I)}finally{a.shouldCoalesceRunChangeDetection&&l(),Yf(a)}},onHasTask:(u,d,f,m)=>{u.hasTask(f,m),d===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,Kf(a),rl(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,d,f,m)=>(u.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mn.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(Mn.isInAngularZone())throw new Ne(909,!1)}run(l,u,d){return this._inner.run(l,u,d)}runTask(l,u,d,f){const m=this._inner,y=m.scheduleEventTask("NgZoneEvent: "+f,l,rx,Kv,Kv);try{return m.runTask(y,u,d)}finally{m.cancelTask(y)}}runGuarded(l,u,d){return this._inner.runGuarded(l,u,d)}runOutsideAngular(l){return this._outer.run(l)}}const rx={};function rl(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Kf(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function hm(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Yf(a){a._nesting--,rl(a)}class sx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fa,this.onMicrotaskEmpty=new fa,this.onStable=new fa,this.onError=new fa}run(l,u,d){return l.apply(u,d)}runGuarded(l,u,d){return l.apply(u,d)}runOutsideAngular(l){return l()}runTask(l,u,d,f){return l.apply(u,d)}}const mc=new wn(""),_c=new wn("");let Xd,Xv=(()=>{class a{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xd||(function sl(a){Xd=a}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mn.assertNotInAngularZone(),Qv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qv(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==m),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(ui(Mn),ui(vc),ui(_c))},a.\u0275prov=en({token:a,factory:a.\u0275fac}),a})(),vc=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Xd?.findTestabilityInTree(this,u,d)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=en({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),bs=null;const Lw=new wn("AllowMultipleToken"),yu=new wn("PlatformDestroyListeners");class fm{constructor(l,u){this.name=l,this.token=u}}function Bw(a,l,u=[]){const d=`Platform: ${l}`,f=new wn(d);return(m=[])=>{let y=ny();if(!y||y.injector.get(Lw,!1)){const D=[...u,...m,{provide:f,useValue:!0}];a?a(D):function bE(a){if(bs&&!bs.get(Lw,!1))throw new Ne(400,!1);bs=a;const l=a.get(xr);(function pm(a){const l=a.get(fE,null);l&&l.forEach(u=>u())})(a)}(function CE(a=[],l){return kd.create({name:l,providers:[{provide:ig,useValue:"platform"},{provide:yu,useValue:new Set([()=>bs=null])},...a]})}(D,d))}return function ox(a){const l=ny();if(!l)throw new Ne(401,!1);return l}()}}function ny(){return bs?.get(xr)??null}let xr=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function Jn(a,l){let u;return u="noop"===a?new sx:("zone.js"===a?void 0:a)||new Mn(l),u}(d?.ngZone,function Vw(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:Mn,useValue:f}];return f.run(()=>{const y=kd.create({providers:m,parent:this.injector,name:u.moduleType.name}),D=u.create(y),I=D.injector.get(Wh,null);if(!I)throw new Ne(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:R=>{I.handleError(R)}});D.onDestroy(()=>{bc(this._modules,D),A.unsubscribe()})}),function yc(a,l,u){try{const d=u();return vb(d)?d.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(I,f,()=>{const A=D.injector.get(Yv);return A.runInitializers(),A.donePromise.then(()=>(yD(D.injector.get(dm,du)||du),this._moduleDoBootstrap(D),D))})})}bootstrapModule(u,d=[]){const f=jw({},d);return function ey(a,l,u){const d=new fw(u);return Promise.resolve(d)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const d=u.injector.get(gm);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ne(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(yu,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(ui(kd))},a.\u0275prov=en({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function jw(a,l){return Array.isArray(l)?l.reduce(jw,a):{...a,...l}}let gm=(()=>{class a{constructor(u,d,f){this._zone=u,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new P.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),y=new P.y(D=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Mn.assertNotInAngularZone(),Qv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=(0,oe.T)(m,y.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const f=u instanceof f0;if(!this._injector.get(Yv).done)throw!f&&Ee(u),new Ne(405,false);let y;y=f?u:this._injector.get(qh).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const D=function Uw(a){return a.isBoundToModule}(y)?void 0:this._injector.get(tl),A=y.create(kd.NULL,[],d||y.selector,D),R=A.location.nativeElement,H=A.injector.get(mc,null);return H?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),bc(this.components,A),H?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ne(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;bc(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(pE,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>bc(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ne(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(ui(Mn),ui(tu),ui(Wh))},a.\u0275prov=en({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function bc(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let ln=!0,Rn=!1;function Qf(){return Rn=!0,ln}function Hw(){if(Rn)throw new Error("Cannot enable prod mode after platform setup.");ln=!1}let IE=(()=>{class a{}return a.__NG_ELEMENT_ID__=SE,a})();function SE(a){return function AE(a,l,u){if(Gs(a)&&!u){const d=yn(a.index,l);return new Dg(d,d)}return 47&a.type?new Dg(l[16],l):null}(ei(),Pe(),16==(16&a))}class ay{constructor(){}supports(l){return Ig(l)}create(l){return new ws(l)}}const eh=(a,l)=>l;class ws{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||eh}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,d=this._removalsHead,f=0,m=null;for(;u||d;){const y=!d||u&&u.currentIndex<Zw(d,f,m)?u:d,D=Zw(y,f,m),I=y.currentIndex;if(y===d)f--,d=d._nextRemoved;else if(u=u._next,null==y.previousIndex)f++;else{m||(m=[]);const A=D-f,R=I-f;if(A!=R){for(let K=0;K<A;K++){const re=K<m.length?m[K]:m[K]=0,Se=re+K;R<=Se&&Se<A&&(m[K]=re+1)}m[y.previousIndex]=R-A}}D!==I&&l(y,D,I)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Ig(l))throw new Ne(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,y,u=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let D=0;D<this.length;D++)m=l[D],y=this._trackByFn(D,m),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,m,y,D)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,y,D),d=!0),u=u._next}else f=0,function rv(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Bd()]();let d;for(;!(d=u.next()).done;)l(d.value)}}(l,D=>{y=this._trackByFn(f,D),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,D,y,f)),Object.is(u.item,D)||this._addIdentityChange(u,D)):(u=this._mismatch(u,D,y,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,d,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,f)):l=this._addAfter(new $w(u,d),m,f),l}_verifyReinsertion(l,u,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,u,d),this._addToMoves(l,d),l}_moveAfter(l,u,d){return this._unlink(l),this._insertAfter(l,u,d),this._addToMoves(l,d),l}_addAfter(l,u,d){return this._insertAfter(l,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,d){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new np),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,d=l._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new np),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class $w{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ly{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const u=l._prevDup,d=l._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class np{constructor(){this.map=new Map}put(l){const u=l.trackById;let d=this.map.get(u);d||(d=new ly,this.map.set(u,d)),d.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zw(a,l,u){const d=a.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+l+f}class cy{constructor(){}supports(l){return l instanceof Map||sv(l)}create(){return new vm}}class vm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||sv(l)))throw new Ne(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const d=l._prev;return u._next=l,u._prev=d,l._prev=u,d&&(d._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const m=f._prev,y=f._next;return m&&(m._next=y),y&&(y._prev=m),f._next=null,f._prev=null,f}const d=new RE(l);return this._records.set(l,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(d=>u(l[d],d))}}class RE{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qw(){return new zw([new ay])}let zw=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||qw()),deps:[[a,new Xo,new Ms]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Ne(901,!1)}}return a.\u0275prov=en({token:a,providedIn:"root",factory:qw}),a})();function kE(){return new rs([new cy])}let rs=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||kE()),deps:[[a,new Xo,new Ms]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Ne(901,!1)}}return a.\u0275prov=en({token:a,providedIn:"root",factory:kE}),a})();const PE=Bw(null,"core",[]);let bm=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(ui(gm))},a.\u0275mod=xi({type:a}),a.\u0275inj=An({}),a})();function px(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function UE(a,l){const u=L(a),d=l.elementInjector||N_();return new Eg(u).create(d,l.projectableNodes,l.hostElement,l.environmentInjector)}},3942:(bt,Re,V)=>{V.d(Re,{Z:()=>Ne});var o=V(2090),$=V(4859),P=V(6881),oe=V(1877);class he{constructor(Ce,be){this._delegate=Ce,this.firebase=be,(0,P._addComponent)(Ce,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ce,be=P._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(Ce);return!yt.isInitialized()&&"EXPLICIT"===(null===(Ct=yt.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:be})}_removeServiceInstance(Ce,be=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(be)}_addComponent(Ce){(0,P._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,P._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Te(){const ct=function ye(ct){const Ce={},be={__esModule:!0,initializeApp:function ke(We,de={}){const Je=P.initializeApp(We,de);if((0,o.r3)(Ce,Je.name))return Ce[Je.name];const ae=new ct(Je,be);return Ce[Je.name]=ae,ae},app:yt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function xe(We){const de=We.name,Je=de.replace("-compat","");if(P._registerComponent(We)&&"PUBLIC"===We.type){const ae=(le=yt())=>{if("function"!=typeof le[Je])throw me.create("invalid-app-argument",{appName:de});return le[Je]()};void 0!==We.serviceProps&&(0,o.ZB)(ae,We.serviceProps),be[Je]=ae,ct.prototype[Je]=function(...le){return this._getService.bind(this,de).apply(this,We.multipleInstances?le:[])}}return"PUBLIC"===We.type?be[Je]:null},removeApp:function Ct(We){delete Ce[We]},useAsService:function ze(We,de){return"serverAuth"===de?null:de},modularAPIs:P}};function yt(We){if(!(0,o.r3)(Ce,We=We||P._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:We});return Ce[We]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ae(){return Object.keys(Ce).map(We=>Ce[We])}}),yt.App=ct,be}(he);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function Ce(be){(0,o.ZB)(ct,be)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),ct}(),z=new oe.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=W;!function Le(ct){(0,P.registerVersion)("@firebase/app-compat","0.2.10",ct)}()},6881:(bt,Re,V)=>{V.r(Re),V.d(Re,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ds,_DEFAULT_ENTRY_NAME:()=>gr,_addComponent:()=>gt,_addOrOverwriteComponent:()=>Dt,_apps:()=>Nn,_clearComponents:()=>oi,_components:()=>jt,_getProvider:()=>mr,_registerComponent:()=>Yt,_removeServiceInstance:()=>yi,deleteApp:()=>ai,getApp:()=>$n,getApps:()=>bn,initializeApp:()=>Jt,onLog:()=>li,registerVersion:()=>_r,setLogLevel:()=>Hr});var o=V(5861),$=V(4859),P=V(1877),oe=V(2090);let ve,me;const W=new WeakMap,z=new WeakMap,ee=new WeakMap,Ze=new WeakMap,Le=new WeakMap;let Ce={get(ue,se,Ue){if(ue instanceof IDBTransaction){if("done"===se)return z.get(ue);if("objectStoreNames"===se)return ue.objectStoreNames||ee.get(ue);if("store"===se)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return ke(ue[se])},set:(ue,se,Ue)=>(ue[se]=Ue,!0),has:(ue,se)=>ue instanceof IDBTransaction&&("done"===se||"store"===se)||se in ue};function yt(ue){return"function"==typeof ue?function Ct(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...se){return ue.apply(Ae(this),se),ke(W.get(this))}:function(...se){return ke(ue.apply(Ae(this),se))}:function(se,...Ue){const Ve=ue.call(Ae(this),se,...Ue);return ee.set(Ve,se.sort?se.sort():[se]),ke(Ve)}}(ue):(ue instanceof IDBTransaction&&function ct(ue){if(z.has(ue))return;const se=new Promise((Ue,Ve)=>{const At=()=>{ue.removeEventListener("complete",Lt),ue.removeEventListener("error",mn),ue.removeEventListener("abort",mn)},Lt=()=>{Ue(),At()},mn=()=>{Ve(ue.error||new DOMException("AbortError","AbortError")),At()};ue.addEventListener("complete",Lt),ue.addEventListener("error",mn),ue.addEventListener("abort",mn)});z.set(ue,se)}(ue),((ue,se)=>se.some(Ue=>ue instanceof Ue))(ue,function ye(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Ce):ue)}function ke(ue){if(ue instanceof IDBRequest)return function Ne(ue){const se=new Promise((Ue,Ve)=>{const At=()=>{ue.removeEventListener("success",Lt),ue.removeEventListener("error",mn)},Lt=()=>{Ue(ke(ue.result)),At()},mn=()=>{Ve(ue.error),At()};ue.addEventListener("success",Lt),ue.addEventListener("error",mn)});return se.then(Ue=>{Ue instanceof IDBCursor&&W.set(Ue,ue)}).catch(()=>{}),Le.set(se,ue),se}(ue);if(Ze.has(ue))return Ze.get(ue);const se=yt(ue);return se!==ue&&(Ze.set(ue,se),Le.set(se,ue)),se}const Ae=ue=>Le.get(ue),We=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],Je=new Map;function ae(ue,se){if(!(ue instanceof IDBDatabase)||se in ue||"string"!=typeof se)return;if(Je.get(se))return Je.get(se);const Ue=se.replace(/FromIndex$/,""),Ve=se!==Ue,At=de.includes(Ue);if(!(Ue in(Ve?IDBIndex:IDBObjectStore).prototype)||!At&&!We.includes(Ue))return;const Lt=function(){var mn=(0,o.Z)(function*(Zn,...Zt){const nr=this.transaction(Zn,At?"readwrite":"readonly");let hs=nr.store;return Ve&&(hs=hs.index(Zt.shift())),(yield Promise.all([hs[Ue](...Zt),At&&nr.done]))[0]});return function(Zt){return mn.apply(this,arguments)}}();return Je.set(se,Lt),Lt}!function be(ue){Ce=ue(Ce)}(ue=>({...ue,get:(se,Ue,Ve)=>ae(se,Ue)||ue.get(se,Ue,Ve),has:(se,Ue)=>!!ae(se,Ue)||ue.has(se,Ue)}));class le{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(Ue=>{if(function we(ue){return"VERSION"===ue.getComponent()?.type}(Ue)){const Ve=Ue.getImmediate();return`${Ve.library}/${Ve.version}`}return null}).filter(Ue=>Ue).join(" ")}}const fe="@firebase/app",Ge=new P.Yd("@firebase/app"),gr="[DEFAULT]",jn={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nn=new Map,jt=new Map;function gt(ue,se){try{ue.container.addComponent(se)}catch(Ue){Ge.debug(`Component ${se.name} failed to register with FirebaseApp ${ue.name}`,Ue)}}function Dt(ue,se){ue.container.addOrOverwriteComponent(se)}function Yt(ue){const se=ue.name;if(jt.has(se))return Ge.debug(`There were multiple attempts to register component ${se}.`),!1;jt.set(se,ue);for(const Ue of Nn.values())gt(Ue,ue);return!0}function mr(ue,se){const Ue=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return Ue&&Ue.triggerHeartbeat(),ue.container.getProvider(se)}function yi(ue,se,Ue=gr){mr(ue,se).clearInstance(Ue)}function oi(){jt.clear()}const Gn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bt{constructor(se,Ue,Ve){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},Ue),this._name=Ue.name,this._automaticDataCollectionEnabled=Ue.automaticDataCollectionEnabled,this._container=Ve,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const ds="9.22.0";function Jt(ue,se={}){let Ue=ue;"object"!=typeof se&&(se={name:se});const Ve=Object.assign({name:gr,automaticDataCollectionEnabled:!1},se),At=Ve.name;if("string"!=typeof At||!At)throw Gn.create("bad-app-name",{appName:String(At)});if(Ue||(Ue=(0,oe.aH)()),!Ue)throw Gn.create("no-options");const Lt=Nn.get(At);if(Lt){if((0,oe.vZ)(Ue,Lt.options)&&(0,oe.vZ)(Ve,Lt.config))return Lt;throw Gn.create("duplicate-app",{appName:At})}const mn=new $.H0(At);for(const Zt of jt.values())mn.addComponent(Zt);const Zn=new Bt(Ue,Ve,mn);return Nn.set(At,Zn),Zn}function $n(ue=gr){const se=Nn.get(ue);if(!se&&ue===gr&&(0,oe.aH)())return Jt();if(!se)throw Gn.create("no-app",{appName:ue});return se}function bn(){return Array.from(Nn.values())}function ai(ue){return Un.apply(this,arguments)}function Un(){return(Un=(0,o.Z)(function*(ue){const se=ue.name;Nn.has(se)&&(Nn.delete(se),yield Promise.all(ue.container.getProviders().map(Ue=>Ue.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function _r(ue,se,Ue){var Ve;let At=null!==(Ve=jn[ue])&&void 0!==Ve?Ve:ue;Ue&&(At+=`-${Ue}`);const Lt=At.match(/\s|\//),mn=se.match(/\s|\//);if(Lt||mn){const Zn=[`Unable to register library "${At}" with version "${se}":`];return Lt&&Zn.push(`library name "${At}" contains illegal characters (whitespace or "/")`),Lt&&mn&&Zn.push("and"),mn&&Zn.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void Ge.warn(Zn.join(" "))}Yt(new $.wA(`${At}-version`,()=>({library:At,version:se}),"VERSION"))}function li(ue,se){if(null!==ue&&"function"!=typeof ue)throw Gn.create("invalid-log-argument");(0,P.Am)(ue,se)}function Hr(ue){(0,P.Ub)(ue)}const q="firebase-heartbeat-store";let Z=null;function U(){return Z||(Z=function xe(ue,se,{blocked:Ue,upgrade:Ve,blocking:At,terminated:Lt}={}){const mn=indexedDB.open(ue,se),Zn=ke(mn);return Ve&&mn.addEventListener("upgradeneeded",Zt=>{Ve(ke(mn.result),Zt.oldVersion,Zt.newVersion,ke(mn.transaction),Zt)}),Ue&&mn.addEventListener("blocked",Zt=>Ue(Zt.oldVersion,Zt.newVersion,Zt)),Zn.then(Zt=>{Lt&&Zt.addEventListener("close",()=>Lt()),At&&Zt.addEventListener("versionchange",nr=>At(nr.oldVersion,nr.newVersion,nr))}).catch(()=>{}),Zn}("firebase-heartbeat-database",1,{upgrade:(ue,se)=>{0===se&&ue.createObjectStore(q)}}).catch(ue=>{throw Gn.create("idb-open",{originalErrorMessage:ue.message})})),Z}function k(){return(k=(0,o.Z)(function*(ue){try{return yield(yield U()).transaction(q).objectStore(q).get(Ye(ue))}catch(se){if(se instanceof oe.ZR)Ge.warn(se.message);else{const Ue=Gn.create("idb-get",{originalErrorMessage:se?.message});Ge.warn(Ue.message)}}})).apply(this,arguments)}function Q(ue,se){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,o.Z)(function*(ue,se){try{const Ve=(yield U()).transaction(q,"readwrite");yield Ve.objectStore(q).put(se,Ye(ue)),yield Ve.done}catch(Ue){if(Ue instanceof oe.ZR)Ge.warn(Ue.message);else{const Ve=Gn.create("idb-set",{originalErrorMessage:Ue?.message});Ge.warn(Ve.message)}}})).apply(this,arguments)}function Ye(ue){return`${ue.name}!${ue.options.appId}`}class rt{constructor(se){this.container=se,this._heartbeatsCache=null;const Ue=this.container.getProvider("app").getImmediate();this._storage=new Rt(Ue),this._heartbeatsCachePromise=this._storage.read().then(Ve=>(this._heartbeatsCache=Ve,Ve))}triggerHeartbeat(){var se=this;return(0,o.Z)(function*(){const Ve=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=dt();if(null===se._heartbeatsCache&&(se._heartbeatsCache=yield se._heartbeatsCachePromise),se._heartbeatsCache.lastSentHeartbeatDate!==At&&!se._heartbeatsCache.heartbeats.some(Lt=>Lt.date===At))return se._heartbeatsCache.heartbeats.push({date:At,agent:Ve}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(Lt=>{const mn=new Date(Lt.date).valueOf();return Date.now()-mn<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,o.Z)(function*(){if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null===se._heartbeatsCache||0===se._heartbeatsCache.heartbeats.length)return"";const Ue=dt(),{heartbeatsToSend:Ve,unsentEntries:At}=function $t(ue,se=1024){const Ue=[];let Ve=ue.slice();for(const At of ue){const Lt=Ue.find(mn=>mn.agent===At.agent);if(Lt){if(Lt.dates.push(At.date),tn(Ue)>se){Lt.dates.pop();break}}else if(Ue.push({agent:At.agent,dates:[At.date]}),tn(Ue)>se){Ue.pop();break}Ve=Ve.slice(1)}return{heartbeatsToSend:Ue,unsentEntries:Ve}}(se._heartbeatsCache.heartbeats),Lt=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ve}));return se._heartbeatsCache.lastSentHeartbeatDate=Ue,At.length>0?(se._heartbeatsCache.heartbeats=At,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),Lt})()}}function dt(){return(new Date).toISOString().substring(0,10)}class Rt{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,o.Z)(function*(){return(yield se._canUseIndexedDBPromise)&&(yield function L(ue){return k.apply(this,arguments)}(se.app))||{heartbeats:[]}})()}overwrite(se){var Ue=this;return(0,o.Z)(function*(){var Ve;if(yield Ue._canUseIndexedDBPromise){const Lt=yield Ue.read();return Q(Ue.app,{lastSentHeartbeatDate:null!==(Ve=se.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Lt.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var Ue=this;return(0,o.Z)(function*(){var Ve;if(yield Ue._canUseIndexedDBPromise){const Lt=yield Ue.read();return Q(Ue.app,{lastSentHeartbeatDate:null!==(Ve=se.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...se.heartbeats]})}})()}}function tn(ue){return(0,oe.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function tr(ue){Yt(new $.wA("platform-logger",se=>new le(se),"PRIVATE")),Yt(new $.wA("heartbeat",se=>new rt(se),"PRIVATE")),_r(fe,"0.9.10",ue),_r(fe,"0.9.10","esm2017"),_r("fire-js","")}("")},4859:(bt,Re,V)=>{V.d(Re,{H0:()=>ye,wA:()=>P,zt:()=>he});var o=V(5861),$=V(2090);class P{constructor(W,z,ee){this.name=W,this.instanceFactory=z,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const oe="[DEFAULT]";class he{constructor(W,z){this.name=W,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(z)){const ee=new $.BH;if(this.instancesDeferred.set(z,ee),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:z});Ze&&ee.resolve(Ze)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(W){var z;const ee=this.normalizeInstanceIdentifier(W?.identifier),Ze=null!==(z=W?.optional)&&void 0!==z&&z;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Le){if(Ze)return null;throw Le}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function me(Te){return"EAGER"===Te.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[z,ee]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(z);try{const Le=this.getOrInitializeService({instanceIdentifier:Ze});ee.resolve(Le)}catch{}}}}clearInstance(W=oe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,o.Z)(function*(){const z=Array.from(W.instances.values());yield Promise.all([...z.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...z.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=oe){return this.instances.has(W)}getOptions(W=oe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:z={}}=W,ee=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:ee,options:z});for(const[Le,Ne]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Le)&&Ne.resolve(Ze);return Ze}onInit(W,z){var ee;const Ze=this.normalizeInstanceIdentifier(z),Le=null!==(ee=this.onInitCallbacks.get(Ze))&&void 0!==ee?ee:new Set;Le.add(W),this.onInitCallbacks.set(Ze,Le);const Ne=this.instances.get(Ze);return Ne&&W(Ne,Ze),()=>{Le.delete(W)}}invokeOnInitCallbacks(W,z){const ee=this.onInitCallbacks.get(z);if(ee)for(const Ze of ee)try{Ze(W,z)}catch{}}getOrInitializeService({instanceIdentifier:W,options:z={}}){let ee=this.instances.get(W);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=W,Te===oe?void 0:Te),options:z}),this.instances.set(W,ee),this.instancesOptions.set(W,z),this.invokeOnInitCallbacks(ee,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ee)}catch{}var Te;return ee||null}normalizeInstanceIdentifier(W=oe){return this.component?this.component.multipleInstances?W:oe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const z=this.getProvider(W.name);if(z.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);z.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const z=new he(W,this);return this.providers.set(W,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Re,V)=>{V.d(Re,{Am:()=>Te,Ub:()=>ye,Yd:()=>me,in:()=>$});const o=[];var $=(()=>{return(W=$||($={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",$;var W})();const P={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},oe=$.INFO,he={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ve=(W,z,...ee)=>{if(z<W.logLevel)return;const Ze=(new Date).toISOString(),Le=he[z];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Le](`[${Ze}]  ${W.name}:`,...ee)};class me{constructor(z){this.name=z,this._logLevel=oe,this._logHandler=ve,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?P[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function ye(W){o.forEach(z=>{z.setLogLevel(W)})}function Te(W,z){for(const ee of o){let Ze=null;z&&z.level&&(Ze=P[z.level]),ee.userLogHandler=null===W?null:(Le,Ne,...ct)=>{const Ce=ct.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");Ne>=(Ze??Le.logLevel)&&W({level:$[Ne].toLowerCase(),message:Ce,args:ct,type:Le.name})}}}},259:(bt,Re,V)=>{V.d(Re,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=V(6881);(0,o.registerVersion)("firebase","9.22.0","app")},9260:(bt,Re,V)=>{V.d(Re,{Z:()=>o.Z});var o=V(3942);o.Z.registerVersion("firebase","9.22.0","app-compat")},9568:(bt,Re,V)=>{V.r(Re);var o=V(5861),$=V(3942),P=V(1389),oe=V(2090),me=(V(6881),V(1877),V(4859));function ye(){return window}function z(){return(z=(0,o.Z)(function*(U,L,k){var Q;const{BuildInfo:Ee}=ye();(0,P.as)(L.sessionId,"AuthEvent did not contain a session ID");const Ye=yield be(L.sessionId),vt={};return(0,P.at)()?vt.ibi=Ee.packageName:(0,P.au)()?vt.apn=Ee.packageName:(0,P.av)(U,"operation-not-supported-in-this-environment"),Ee.displayName&&(vt.appDisplayName=Ee.displayName),vt.sessionId=Ye,(0,P.aw)(U,k,L.type,void 0,null!==(Q=L.eventId)&&void 0!==Q?Q:void 0,vt)})).apply(this,arguments)}function Ze(){return(Ze=(0,o.Z)(function*(U){const{BuildInfo:L}=ye(),k={};(0,P.at)()?k.iosBundleId=L.packageName:(0,P.au)()?k.androidPackageName=L.packageName:(0,P.av)(U,"operation-not-supported-in-this-environment"),yield(0,P.ax)(U,k)})).apply(this,arguments)}function ct(){return(ct=(0,o.Z)(function*(U,L,k){const{cordova:Q}=ye();let Ee=()=>{};try{yield new Promise((Ye,vt)=>{let Ie=null;function rt(){var Rt;Ye();const tn=null===(Rt=Q.plugins.browsertab)||void 0===Rt?void 0:Rt.close;"function"==typeof tn&&tn(),"function"==typeof k?.close&&k.close()}function dt(){Ie||(Ie=window.setTimeout(()=>{vt((0,P.az)(U,"redirect-cancelled-by-user"))},2e3))}function $t(){"visible"===document?.visibilityState&&dt()}L.addPassiveListener(rt),document.addEventListener("resume",dt,!1),(0,P.au)()&&document.addEventListener("visibilitychange",$t,!1),Ee=()=>{L.removePassiveListener(rt),document.removeEventListener("resume",dt,!1),document.removeEventListener("visibilitychange",$t,!1),Ie&&window.clearTimeout(Ie)}})}finally{Ee()}})).apply(this,arguments)}function be(U){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,o.Z)(function*(U){const L=yt(U),k=yield crypto.subtle.digest("SHA-256",L);return Array.from(new Uint8Array(k)).map(Ee=>Ee.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yt(U){if((0,P.as)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const L=new ArrayBuffer(U.length),k=new Uint8Array(L);for(let Q=0;Q<U.length;Q++)k[Q]=U.charCodeAt(Q);return k}class Ae extends P.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(L=>{this.resolveInialized=L})}addPassiveListener(L){this.passiveListeners.add(L)}removePassiveListener(L){this.passiveListeners.delete(L)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(L){return this.resolveInialized(),this.passiveListeners.forEach(k=>k(L)),super.onEvent(L)}initialized(){var L=this;return(0,o.Z)(function*(){yield L.initPromise})()}}function We(U){return de.apply(this,arguments)}function de(){return(de=(0,o.Z)(function*(U){const L=yield le()._get(we(U));return L&&(yield le()._remove(we(U))),L})).apply(this,arguments)}function ae(){const U=[],L="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<20;k++){const Q=Math.floor(Math.random()*L.length);U.push(L.charAt(Q))}return U.join("")}function le(){return(0,P.aC)(P.b)}function we(U){return(0,P.aD)("authEvent",U.config.apiKey,U.name)}function Ge(U){if(!U?.includes("?"))return{};const[L,...k]=U.split("?");return(0,oe.zd)(k.join("?"))}function it(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.az)("no-auth-event")}}function Sn(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function On(U=(0,oe.z$)()){return!("file:"!==Sn()&&"ionic:"!==Sn()&&"capacitor:"!==Sn()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function Es(){try{const U=self.localStorage,L=P.aL();if(U)return U.setItem(L,"1"),U.removeItem(L),!function ls(U=(0,oe.z$)()){return function Mr(){return(0,oe.w1)()&&11===document?.documentMode}()||function Po(U=(0,oe.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,oe.hl)()}catch{return Ui()&&(0,oe.hl)()}return!1}function Ui(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rr(){return(function An(){return"http:"===Sn()||"https:"===Sn()}()||(0,oe.ru)()||On())&&!function Hs(){return(0,oe.b$)()||(0,oe.UG)()}()&&Es()&&!Ui()}function cs(){return On()&&typeof document<"u"}function ut(){return(ut=(0,o.Z)(function*(){return!!cs()&&new Promise(U=>{const L=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(L),U(!0)})})})).apply(this,arguments)}const si={LOCAL:"local",NONE:"none",SESSION:"session"},Qn=P.aA,us="persistence";function jn(U){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,o.Z)(function*(U){yield U._initializationPromise;const L=gt(),k=P.aD(us,U.config.apiKey,U.name);L&&L.setItem(k,U._getPersistence())})).apply(this,arguments)}function gt(){var U;try{return(null===(U=function Ni(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const Dt=P.aA;class Yt{constructor(){this.browserResolver=P.aC(P.k),this.cordovaResolver=P.aC(class dn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aE,this._overrideRedirectResult=P.aF}_initialize(L){var k=this;return(0,o.Z)(function*(){const Q=L._key();let Ee=k.eventManagers.get(Q);return Ee||(Ee=new Ae(L),k.eventManagers.set(Q,Ee),k.attachCallbackListeners(L,Ee)),Ee})()}_openPopup(L){(0,P.av)(L,"operation-not-supported-in-this-environment")}_openRedirect(L,k,Q,Ee){var Ye=this;return(0,o.Z)(function*(){!function Ce(U){var L,k,Q,Ee,Ye,vt,Ie,rt,dt,$t;const Rt=ye();(0,P.aA)("function"==typeof(null===(L=Rt?.universalLinks)||void 0===L?void 0:L.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aA)(typeof(null===(k=Rt?.BuildInfo)||void 0===k?void 0:k.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aA)("function"==typeof(null===(Ye=null===(Ee=null===(Q=Rt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===Ye?void 0:Ye.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aA)("function"==typeof(null===(rt=null===(Ie=null===(vt=Rt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===rt?void 0:rt.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aA)("function"==typeof(null===($t=null===(dt=Rt?.cordova)||void 0===dt?void 0:dt.InAppBrowser)||void 0===$t?void 0:$t.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(L);const vt=yield Ye._initialize(L);yield vt.initialized(),vt.resetRedirect(),(0,P.aG)(),yield Ye._originValidation(L);const Ie=function xe(U,L,k=null){return{type:L,eventId:k,urlResponse:null,sessionId:ae(),postBody:null,tenantId:U.tenantId,error:(0,P.az)(U,"no-auth-event")}}(L,Q,Ee);yield function ze(U,L){return le()._set(we(U),L)}(L,Ie);const rt=yield function W(U,L,k){return z.apply(this,arguments)}(L,Ie,k),dt=yield function Le(U){const{cordova:L}=ye();return new Promise(k=>{L.plugins.browsertab.isAvailable(Q=>{let Ee=null;Q?L.plugins.browsertab.openUrl(U):Ee=L.InAppBrowser.open(U,(0,P.ay)()?"_blank":"_system","location=yes"),k(Ee)})})}(rt);return function Ne(U,L,k){return ct.apply(this,arguments)}(L,vt,dt)})()}_isIframeWebStorageSupported(L,k){throw new Error("Method not implemented.")}_originValidation(L){const k=L._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function ee(U){return Ze.apply(this,arguments)}(L)),this.originValidationPromises[k]}attachCallbackListeners(L,k){const{universalLinks:Q,handleOpenURL:Ee,BuildInfo:Ye}=ye(),vt=setTimeout((0,o.Z)(function*(){yield We(L),k.onEvent(it())}),500),Ie=function(){var $t=(0,o.Z)(function*(Rt){clearTimeout(vt);const tn=yield We(L);let tr=null;tn&&Rt?.url&&(tr=function Je(U,L){var k,Q;const Ee=function Xe(U){const L=Ge(U),k=L.link?decodeURIComponent(L.link):void 0,Q=Ge(k).link,Ee=L.deep_link_id?decodeURIComponent(L.deep_link_id):void 0;return Ge(Ee).link||Ee||Q||k||U}(L);if(Ee.includes("/__/auth/callback")){const Ye=Ge(Ee),vt=Ye.firebaseError?function fe(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(Ye.firebaseError)):null,Ie=null===(Q=null===(k=vt?.code)||void 0===k?void 0:k.split("auth/"))||void 0===Q?void 0:Q[1],rt=Ie?(0,P.az)(Ie):null;return rt?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:rt,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Ee,postBody:null}}return null}(tn,Rt.url)),k.onEvent(tr||it())});return function(tn){return $t.apply(this,arguments)}}();typeof Q<"u"&&"function"==typeof Q.subscribe&&Q.subscribe(null,Ie);const rt=Ee,dt=`${Ye.packageName.toLowerCase()}://`;ye().handleOpenURL=function(){var $t=(0,o.Z)(function*(Rt){if(Rt.toLowerCase().startsWith(dt)&&Ie({url:Rt}),"function"==typeof rt)try{rt(Rt)}catch(tn){console.error(tn)}});return function(Rt){return $t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aE,this._overrideRedirectResult=P.aF}_initialize(L){var k=this;return(0,o.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize(L)})()}_openPopup(L,k,Q,Ee){var Ye=this;return(0,o.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openPopup(L,k,Q,Ee)})()}_openRedirect(L,k,Q,Ee){var Ye=this;return(0,o.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openRedirect(L,k,Q,Ee)})()}_isIframeWebStorageSupported(L,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(L,k)}_originValidation(L){return this.assertedUnderlyingResolver._originValidation(L)}get _shouldInitProactively(){return cs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var L=this;return(0,o.Z)(function*(){if(L.underlyingResolver)return;const k=yield function Ta(){return ut.apply(this,arguments)}();L.underlyingResolver=k?L.cordovaResolver:L.browserResolver})()}}function mr(U){return U.unwrap()}function oi(U){return Gn(U)}function Gn(U){const{_tokenResponse:L}=U instanceof oe.ZR?U.customData:U;if(!L)return null;if(!(U instanceof oe.ZR)&&"temporaryProof"in L&&"phoneNumber"in L)return P.P.credentialFromResult(U);const k=L.providerId;if(!k||k===P.p.PASSWORD)return null;let Q;switch(k){case P.p.GOOGLE:Q=P.V;break;case P.p.FACEBOOK:Q=P.U;break;case P.p.GITHUB:Q=P.W;break;case P.p.TWITTER:Q=P.Z;break;default:const{oauthIdToken:Ee,oauthAccessToken:Ye,oauthTokenSecret:vt,pendingToken:Ie,nonce:rt}=L;return Ye||vt||Ee||Ie?Ie?k.startsWith("saml.")?P.aO._create(k,Ie):P.L._fromParams({providerId:k,signInMethod:k,pendingToken:Ie,idToken:Ee,accessToken:Ye}):new P.X(k).credential({idToken:Ee,accessToken:Ye,rawNonce:rt}):null}return U instanceof oe.ZR?Q.credentialFromError(U):Q.credentialFromResult(U)}function Bt(U,L){return L.catch(k=>{throw k instanceof oe.ZR&&function St(U,L){var k;const Q=null===(k=L.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===L?.code)L.resolver=new $n(U,P.aq(U,L));else if(Q){const Ee=Gn(L),Ye=L;Ee&&(Ye.credential=Ee,Ye.tenantId=Q.tenantId||void 0,Ye.email=Q.email||void 0,Ye.phoneNumber=Q.phoneNumber||void 0)}}(U,k),k}).then(k=>{const Ee=k.user;return{operationType:k.operationType,credential:oi(k),additionalUserInfo:P.ao(k),user:bn.getOrCreate(Ee)}})}function ds(U,L){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,o.Z)(function*(U,L){const k=yield L;return{verificationId:k.verificationId,confirm:Q=>Bt(U,k.confirm(Q))}})).apply(this,arguments)}class $n{constructor(L,k){this.resolver=k,this.auth=function yi(U){return U.wrapped()}(L)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(L){return Bt(mr(this.auth),this.resolver.resolveSignIn(L))}}class bn{constructor(L){this._delegate=L,this.multiFactor=P.ar(L)}static getOrCreate(L){return bn.USER_MAP.has(L)||bn.USER_MAP.set(L,new bn(L)),bn.USER_MAP.get(L)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(L){return this._delegate.getIdTokenResult(L)}getIdToken(L){return this._delegate.getIdToken(L)}linkAndRetrieveDataWithCredential(L){return this.linkWithCredential(L)}linkWithCredential(L){var k=this;return(0,o.Z)(function*(){return Bt(k.auth,P.a0(k._delegate,L))})()}linkWithPhoneNumber(L,k){var Q=this;return(0,o.Z)(function*(){return ds(Q.auth,P.l(Q._delegate,L,k))})()}linkWithPopup(L){var k=this;return(0,o.Z)(function*(){return Bt(k.auth,P.d(k._delegate,L,Yt))})()}linkWithRedirect(L){var k=this;return(0,o.Z)(function*(){return yield jn(P.aH(k.auth)),P.g(k._delegate,L,Yt)})()}reauthenticateAndRetrieveDataWithCredential(L){return this.reauthenticateWithCredential(L)}reauthenticateWithCredential(L){var k=this;return(0,o.Z)(function*(){return Bt(k.auth,P.a1(k._delegate,L))})()}reauthenticateWithPhoneNumber(L,k){return ds(this.auth,P.r(this._delegate,L,k))}reauthenticateWithPopup(L){return Bt(this.auth,P.e(this._delegate,L,Yt))}reauthenticateWithRedirect(L){var k=this;return(0,o.Z)(function*(){return yield jn(P.aH(k.auth)),P.h(k._delegate,L,Yt)})()}sendEmailVerification(L){return P.ae(this._delegate,L)}unlink(L){var k=this;return(0,o.Z)(function*(){return yield P.an(k._delegate,L),k})()}updateEmail(L){return P.aj(this._delegate,L)}updatePassword(L){return P.ak(this._delegate,L)}updatePhoneNumber(L){return P.u(this._delegate,L)}updateProfile(L){return P.ai(this._delegate,L)}verifyBeforeUpdateEmail(L,k){return P.af(this._delegate,L,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bn.USER_MAP=new WeakMap;const ai=P.aA;let Un=(()=>{class U{constructor(k,Q){if(this.app=k,Q.isInitialized())return this._delegate=Q.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ee}=k.options;ai(Ee,"invalid-api-key",{appName:k.name}),ai(Ee,"invalid-api-key",{appName:k.name});const Ye=typeof window<"u"?Yt:void 0;this._delegate=Q.initialize({options:{persistence:li(Ee,k.name),popupRedirectResolver:Ye}}),this._delegate._updateErrorMap(P.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,Q){P.I(this._delegate,k,Q)}applyActionCode(k){return P.a5(this._delegate,k)}checkActionCode(k){return P.a6(this._delegate,k)}confirmPasswordReset(k,Q){return P.a4(this._delegate,k,Q)}createUserWithEmailAndPassword(k,Q){var Ee=this;return(0,o.Z)(function*(){return Bt(Ee._delegate,P.a8(Ee._delegate,k,Q))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return P.ad(this._delegate,k)}isSignInWithEmailLink(k){return P.ab(this._delegate,k)}getRedirectResult(){var k=this;return(0,o.Z)(function*(){ai(Rr(),k._delegate,"operation-not-supported-in-this-environment");const Q=yield P.j(k._delegate,Yt);return Q?Bt(k._delegate,Promise.resolve(Q)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function vi(U,L){(0,P.aH)(U)._logFramework(L)}(this._delegate,k)}onAuthStateChanged(k,Q,Ee){const{next:Ye,error:vt,complete:Ie}=_r(k,Q,Ee);return this._delegate.onAuthStateChanged(Ye,vt,Ie)}onIdTokenChanged(k,Q,Ee){const{next:Ye,error:vt,complete:Ie}=_r(k,Q,Ee);return this._delegate.onIdTokenChanged(Ye,vt,Ie)}sendSignInLinkToEmail(k,Q){return P.aa(this._delegate,k,Q)}sendPasswordResetEmail(k,Q){return P.a3(this._delegate,k,Q||void 0)}setPersistence(k){var Q=this;return(0,o.Z)(function*(){let Ee;switch(function gr(U,L){Qn(Object.values(si).includes(L),U,"invalid-persistence-type"),(0,oe.b$)()?Qn(L!==si.SESSION,U,"unsupported-persistence-type"):(0,oe.UG)()?Qn(L===si.NONE,U,"unsupported-persistence-type"):Ui()?Qn(L===si.NONE||L===si.LOCAL&&(0,oe.hl)(),U,"unsupported-persistence-type"):Qn(L===si.NONE||Es(),U,"unsupported-persistence-type")}(Q._delegate,k),k){case si.SESSION:Ee=P.a;break;case si.LOCAL:Ee=(yield P.aC(P.i)._isAvailable())?P.i:P.b;break;case si.NONE:Ee=P.N;break;default:return P.av("argument-error",{appName:Q._delegate.name})}return Q._delegate.setPersistence(Ee)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return Bt(this._delegate,P._(this._delegate))}signInWithCredential(k){return Bt(this._delegate,P.$(this._delegate,k))}signInWithCustomToken(k){return Bt(this._delegate,P.a2(this._delegate,k))}signInWithEmailAndPassword(k,Q){return Bt(this._delegate,P.a9(this._delegate,k,Q))}signInWithEmailLink(k,Q){return Bt(this._delegate,P.ac(this._delegate,k,Q))}signInWithPhoneNumber(k,Q){return ds(this._delegate,P.s(this._delegate,k,Q))}signInWithPopup(k){var Q=this;return(0,o.Z)(function*(){return ai(Rr(),Q._delegate,"operation-not-supported-in-this-environment"),Bt(Q._delegate,P.c(Q._delegate,k,Yt))})()}signInWithRedirect(k){var Q=this;return(0,o.Z)(function*(){return ai(Rr(),Q._delegate,"operation-not-supported-in-this-environment"),yield jn(Q._delegate),P.f(Q._delegate,k,Yt)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return P.a7(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=si,U})();function _r(U,L,k){let Q=U;"function"!=typeof U&&({next:Q,error:L,complete:k}=U);const Ee=Q;return{next:vt=>Ee(vt&&bn.getOrCreate(vt)),error:L,complete:k}}function li(U,L){const k=function jt(U,L){const k=gt();if(!k)return[];const Q=P.aD(us,U,L);switch(k.getItem(Q)){case si.NONE:return[P.N];case si.LOCAL:return[P.i,P.a];case si.SESSION:return[P.a];default:return[]}}(U,L);if(typeof self<"u"&&!k.includes(P.i)&&k.push(P.i),typeof window<"u")for(const Q of[P.b,P.a])k.includes(Q)||k.push(Q);return k.includes(P.N)||k.push(P.N),k}class Hr{constructor(){this.providerId="phone",this._delegate=new P.P(mr($.Z.auth()))}static credential(L,k){return P.P.credential(L,k)}verifyPhoneNumber(L,k){return this._delegate.verifyPhoneNumber(L,k)}unwrap(){return this._delegate}}Hr.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Hr.PROVIDER_ID=P.P.PROVIDER_ID;const xi=P.aA;class er{constructor(L,k,Q=$.Z.app()){var Ee;xi(null===(Ee=Q.options)||void 0===Ee?void 0:Ee.apiKey,"invalid-api-key",{appName:Q.name}),this._delegate=new P.R(L,k,Q.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Z(U){U.INTERNAL.registerComponent(new me.wA("auth-compat",L=>{const k=L.getProvider("app-compat").getImmediate(),Q=L.getProvider("auth");return new Un(k,Q)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.Q,FacebookAuthProvider:P.U,GithubAuthProvider:P.W,GoogleAuthProvider:P.V,OAuthProvider:P.X,SAMLAuthProvider:P.Y,PhoneAuthProvider:Hr,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:er,TwitterAuthProvider:P.Z,Auth:Un,AuthCredential:P.J,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},5861:(bt,Re,V)=>{function o(P,oe,he,ve,me,ye,Te){try{var W=P[ye](Te),z=W.value}catch(ee){return void he(ee)}W.done?oe(z):Promise.resolve(z).then(ve,me)}function $(P){return function(){var oe=this,he=arguments;return new Promise(function(ve,me){var ye=P.apply(oe,he);function Te(z){o(ye,ve,me,Te,W,"next",z)}function W(z){o(ye,ve,me,Te,W,"throw",z)}Te(void 0)})}}V.d(Re,{Z:()=>$})}},bt=>{bt(bt.s=141)}]);
"use strict";(self.webpackChunktma_angular=self.webpackChunktma_angular||[]).push([[179],{2011:(bt,ze,F)=>{F.d(ze,{Dh:()=>_e,GT:()=>we,cc:()=>Le,hO:()=>Ge,on:()=>W,pX:()=>de,xv:()=>Me});var o=F(4650),j=F(9260),V=F(4976);bt=F.hmd(bt);const oe=["ngOnDestroy"],de=(be,Ct,_t,Ne={})=>new Proxy(be,{get:(Ee,Se)=>_t.runOutsideAngular(()=>{var qe;if(be[Se])return!(null===(qe=Ne?.spy)||void 0===qe)&&qe.get&&Ne.spy.get(Se,be[Se]),be[Se];if(oe.indexOf(Se)>-1)return()=>{};const We=Ct.toPromise().then(he=>{const Je=he&&he[Se];return"function"==typeof Je?Je.bind(he):Je&&Je.then?Je.then(ae=>_t.run(()=>ae)):_t.run(()=>Je)});return new Proxy(()=>{},{get:(he,Je)=>We[Je],apply:(he,Je,ae)=>We.then(le=>{var ye;const fe=le&&le(...ae);return!(null===(ye=Ne?.spy)||void 0===ye)&&ye.apply&&Ne.spy.apply(Se,ae,fe),fe})})})}),we=(be,Ct)=>{Ct.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(Ne=>{Object.defineProperty(be.prototype,Ne,Object.getOwnPropertyDescriptor(_t.prototype||_t,Ne))})})};class ve{constructor(Ct){return Ct}}const _e=new o.OlP("angularfire2.app.options"),Me=new o.OlP("angularfire2.app.name");function W(be,Ct,_t){const Ee="object"==typeof _t&&_t||{};Ee.name=Ee.name||"string"==typeof _t&&_t||"[DEFAULT]";const qe=j.Z.apps.filter(We=>We&&We.name===Ee.name)[0]||Ct.runOutsideAngular(()=>j.Z.initializeApp(be,Ee));try{JSON.stringify(be)!==JSON.stringify(qe.options)&&q("error",`${qe.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(qe)}const q=(be,...Ct)=>{(0,o.X6Q)()&&typeof console<"u"&&console[be](...Ct)},ee={provide:ve,useFactory:W,deps:[_e,o.R0b,[new o.FiY,Me]]};let Ge=(()=>{class be{constructor(_t){j.Z.registerVersion("angularfire",V.q4.full,"core"),j.Z.registerVersion("angularfire",V.q4.full,"app-compat"),j.Z.registerVersion("angular",o.q4F.full,_t.toString())}static initializeApp(_t,Ne){return{ngModule:be,providers:[{provide:_e,useValue:_t},{provide:Me,useValue:Ne}]}}}return be.\u0275fac=function(_t){return new(_t||be)(o.LFG(o.Lbi))},be.\u0275mod=o.oAB({type:be}),be.\u0275inj=o.cJS({providers:[ee]}),be})();function Le(be,Ct,_t,Ne,Ee){const[,Se,qe]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===be)||[];if(Se)return function Ie(be,Ct){try{return be.toString()===Ct.toString()}catch{return be===Ct}}(Ee,qe)||(Ce("error",`${Ct} was already initialized on the ${_t} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Ee,was:qe})),Se;{const We=Ne();return globalThis.\u0275AngularfireInstanceCache.push([be,We,Ee]),We}}const lt=!!bt.hot,Ce=(be,...Ct)=>{(0,o.X6Q)()&&typeof console<"u"&&console[be](...Ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(bt,ze,F)=>{F.d(ze,{q4:()=>fs,iC:()=>Ll,fc:()=>To,HU:()=>Do,vb:()=>O0,JM:()=>Rl});var o=F(4650),j=F(259),V=F(5861),oe=F(6881),de=F(2090),we=F(4859),ve=F(1877);let Me,W;const Ge=new WeakMap,Le=new WeakMap,Ie=new WeakMap,lt=new WeakMap,Ce=new WeakMap;let _t={get(C,D,S){if(C instanceof IDBTransaction){if("done"===D)return Le.get(C);if("objectStoreNames"===D)return C.objectStoreNames||Ie.get(C);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return qe(C[D])},set:(C,D,S)=>(C[D]=S,!0),has:(C,D)=>C instanceof IDBTransaction&&("done"===D||"store"===D)||D in C};function Se(C){return"function"==typeof C?function Ee(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ee(){return W||(W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...D){return C.apply(We(this),D),qe(Ge.get(this))}:function(...D){return qe(C.apply(We(this),D))}:function(D,...S){const B=C.call(We(this),D,...S);return Ie.set(B,D.sort?D.sort():[D]),qe(B)}}(C):(C instanceof IDBTransaction&&function Ct(C){if(Le.has(C))return;const D=new Promise((S,B)=>{const Y=()=>{C.removeEventListener("complete",ne),C.removeEventListener("error",me),C.removeEventListener("abort",me)},ne=()=>{S(),Y()},me=()=>{B(C.error||new DOMException("AbortError","AbortError")),Y()};C.addEventListener("complete",ne),C.addEventListener("error",me),C.addEventListener("abort",me)});Le.set(C,D)}(C),((C,D)=>D.some(S=>C instanceof S))(C,function q(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,_t):C)}function qe(C){if(C instanceof IDBRequest)return function be(C){const D=new Promise((S,B)=>{const Y=()=>{C.removeEventListener("success",ne),C.removeEventListener("error",me)},ne=()=>{S(qe(C.result)),Y()},me=()=>{B(C.error),Y()};C.addEventListener("success",ne),C.addEventListener("error",me)});return D.then(S=>{S instanceof IDBCursor&&Ge.set(S,C)}).catch(()=>{}),Ce.set(D,C),D}(C);if(lt.has(C))return lt.get(C);const D=Se(C);return D!==C&&(lt.set(C,D),Ce.set(D,C)),D}const We=C=>Ce.get(C),ae=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],ye=new Map;function fe(C,D){if(!(C instanceof IDBDatabase)||D in C||"string"!=typeof D)return;if(ye.get(D))return ye.get(D);const S=D.replace(/FromIndex$/,""),B=D!==S,Y=le.includes(S);if(!(S in(B?IDBIndex:IDBObjectStore).prototype)||!Y&&!ae.includes(S))return;const ne=function(){var me=(0,V.Z)(function*(Xe,...Ke){const dt=this.transaction(Xe,Y?"readwrite":"readonly");let zt=dt.store;return B&&(zt=zt.index(Ke.shift())),(yield Promise.all([zt[S](...Ke),Y&&dt.done]))[0]});return function(Ke){return me.apply(this,arguments)}}();return ye.set(D,ne),ne}!function Ne(C){_t=C(_t)}(C=>({...C,get:(D,S,B)=>fe(D,S)||C.get(D,S,B),has:(D,S)=>!!fe(D,S)||C.has(D,S)}));const Qe="@firebase/installations",ln="w:0.6.4",dn="FIS_v2",Dn=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Tn(C){return C instanceof de.ZR&&C.code.includes("request-failed")}function Nn({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function I0(C){return{token:C.token,requestStatus:2,expiresIn:Jr(C.expiresIn),creationTime:Date.now()}}function pr(C,D){return ys.apply(this,arguments)}function ys(){return(ys=(0,V.Z)(function*(C,D){const B=(yield D.json()).error;return Dn.create("request-failed",{requestName:C,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Yr({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function g0(C,{refreshToken:D}){const S=Yr(C);return S.append("Authorization",function oo(C){return`${dn} ${C}`}(D)),S}function Si(C){return vr.apply(this,arguments)}function vr(){return(vr=(0,V.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function Jr(C){return Number(C.replace("s","000"))}function ct(C,D){return bi.apply(this,arguments)}function bi(){return(bi=(0,V.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:S}){const B=Nn(C),Y=Yr(C),ne=D.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Xe={method:"POST",headers:Y,body:JSON.stringify({fid:S,authVersion:dn,appId:C.appId,sdkVersion:ln})},Ke=yield Si(()=>fetch(B,Xe));if(Ke.ok){const dt=yield Ke.json();return{fid:dt.fid||S,registrationStatus:2,refreshToken:dt.refreshToken,authToken:I0(dt.authToken)}}throw yield pr("Create Installation",Ke)})).apply(this,arguments)}function Jn(C){return new Promise(D=>{setTimeout(D,C)})}const Qr=/^[cdef][\w-]{21}$/;function On(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const S=function En(C){return function $n(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Qr.test(S)?S:""}catch{return""}}function Ht(C){return`${C.appName}!${C.appId}`}const gt=new Map;function Mt(C,D){const S=Ht(C);ui(S,D),function Qn(C,D){const S=function Un(){return!Dt&&"BroadcastChannel"in self&&(Dt=new BroadcastChannel("[Firebase] FID Change"),Dt.onmessage=C=>{ui(C.data.key,C.data.fid)}),Dt}();S&&S.postMessage({key:C,fid:D}),function Pt(){0===gt.size&&Dt&&(Dt.close(),Dt=null)}()}(S,D)}function ui(C,D){const S=gt.get(C);if(S)for(const B of S)B(D)}let Dt=null;const Zn="firebase-installations-store";let wn=null;function Xn(){return wn||(wn=function he(C,D,{blocked:S,upgrade:B,blocking:Y,terminated:ne}={}){const me=indexedDB.open(C,D),Xe=qe(me);return B&&me.addEventListener("upgradeneeded",Ke=>{B(qe(me.result),Ke.oldVersion,Ke.newVersion,qe(me.transaction))}),S&&me.addEventListener("blocked",()=>S()),Xe.then(Ke=>{ne&&Ke.addEventListener("close",()=>ne()),Y&&Ke.addEventListener("versionchange",()=>Y())}).catch(()=>{}),Xe}("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Zn)}})),wn}function Vn(C,D){return or.apply(this,arguments)}function or(){return(or=(0,V.Z)(function*(C,D){const S=Ht(C),Y=(yield Xn()).transaction(Zn,"readwrite"),ne=Y.objectStore(Zn),me=yield ne.get(S);return yield ne.put(D,S),yield Y.done,(!me||me.fid!==D.fid)&&Mt(C,D.fid),D})).apply(this,arguments)}function ei(C){return Er.apply(this,arguments)}function Er(){return(Er=(0,V.Z)(function*(C){const D=Ht(C),B=(yield Xn()).transaction(Zn,"readwrite");yield B.objectStore(Zn).delete(D),yield B.done})).apply(this,arguments)}function yi(C,D){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,V.Z)(function*(C,D){const S=Ht(C),Y=(yield Xn()).transaction(Zn,"readwrite"),ne=Y.objectStore(Zn),me=yield ne.get(S),Xe=D(me);return void 0===Xe?yield ne.delete(S):yield ne.put(Xe,S),yield Y.done,Xe&&(!me||me.fid!==Xe.fid)&&Mt(C,Xe.fid),Xe})).apply(this,arguments)}function $(C){return G.apply(this,arguments)}function G(){return(G=(0,V.Z)(function*(C){let D;const S=yield yi(C.appConfig,B=>{const Y=P(B),ne=O(C,Y);return D=ne.registrationPromise,ne.installationEntry});return""===S.fid?{installationEntry:yield D}:{installationEntry:S,registrationPromise:D}})).apply(this,arguments)}function P(C){return De(C||{fid:On(),registrationStatus:0})}function O(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Dn.create("app-offline"))};const S={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},B=function k(C,D){return Q.apply(this,arguments)}(C,S);return{installationEntry:S,registrationPromise:B}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ae(C)}:{installationEntry:D}}function Q(){return(Q=(0,V.Z)(function*(C,D){try{const S=yield ct(C,D);return Vn(C.appConfig,S)}catch(S){throw Tn(S)&&409===S.customData.serverCode?yield ei(C.appConfig):yield Vn(C.appConfig,{fid:D.fid,registrationStatus:0}),S}})).apply(this,arguments)}function Ae(C){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,V.Z)(function*(C){let D=yield mt(C.appConfig);for(;1===D.registrationStatus;)yield Jn(100),D=yield mt(C.appConfig);if(0===D.registrationStatus){const{installationEntry:S,registrationPromise:B}=yield $(C);return B||S}return D})).apply(this,arguments)}function mt(C){return yi(C,D=>{if(!D)throw Dn.create("installation-not-found");return De(D)})}function De(C){return function it(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function ut(C,D){return jt.apply(this,arguments)}function jt(){return(jt=(0,V.Z)(function*({appConfig:C,heartbeatServiceProvider:D},S){const B=Nt(C,S),Y=g0(C,S),ne=D.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Xe={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ln,appId:C.appId}})},Ke=yield Si(()=>fetch(B,Xe));if(Ke.ok)return I0(yield Ke.json());throw yield pr("Generate Auth Token",Ke)})).apply(this,arguments)}function Nt(C,{fid:D}){return`${Nn(C)}/${D}/authTokens:generate`}function en(C){return $i.apply(this,arguments)}function $i(){return($i=(0,V.Z)(function*(C,D=!1){let S;const B=yield yi(C.appConfig,ne=>{if(!Ot(ne))throw Dn.create("not-registered");const me=ne.authToken;if(!D&&fn(me))return ne;if(1===me.requestStatus)return S=ce(C,D),ne;{if(!navigator.onLine)throw Dn.create("app-offline");const Xe=Gt(ne);return S=Fe(C,Xe),Xe}});return S?yield S:B.authToken})).apply(this,arguments)}function ce(C,D){return se.apply(this,arguments)}function se(){return(se=(0,V.Z)(function*(C,D){let S=yield Pe(C.appConfig);for(;1===S.authToken.requestStatus;)yield Jn(100),S=yield Pe(C.appConfig);const B=S.authToken;return 0===B.requestStatus?en(C,D):B})).apply(this,arguments)}function Pe(C){return yi(C,D=>{if(!Ot(D))throw Dn.create("not-registered");return function qi(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Fe(C,D){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,V.Z)(function*(C,D){try{const S=yield ut(C,D),B=Object.assign(Object.assign({},D),{authToken:S});return yield Vn(C.appConfig,B),S}catch(S){if(!Tn(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const B=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Vn(C.appConfig,B)}else yield ei(C.appConfig);throw S}})).apply(this,arguments)}function Ot(C){return void 0!==C&&2===C.registrationStatus}function fn(C){return 2===C.requestStatus&&!function jn(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function Gt(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function mr(){return(mr=(0,V.Z)(function*(C){const D=C,{installationEntry:S,registrationPromise:B}=yield $(D);return B?B.catch(console.error):en(D).catch(console.error),S.fid})).apply(this,arguments)}function ao(){return(ao=(0,V.Z)(function*(C,D=!1){const S=C;return yield rn(S),(yield en(S,D)).token})).apply(this,arguments)}function rn(C){return $o.apply(this,arguments)}function $o(){return($o=(0,V.Z)(function*(C){const{registrationPromise:D}=yield $(C);D&&(yield D)})).apply(this,arguments)}function zi(C){return Dn.create("missing-app-config-values",{valueName:C})}const Wi="installations",S0=C=>{const D=C.getProvider("app").getImmediate(),S=function Mc(C){if(!C||!C.options)throw zi("App Configuration");if(!C.name)throw zi("App Name");const D=["projectId","apiKey","appId"];for(const S of D)if(!C.options[S])throw zi(S);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:S,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Wo=C=>{const D=C.getProvider("app").getImmediate(),S=(0,oe._getProvider)(D,Wi).getImmediate();return{getId:()=>function e0(C){return mr.apply(this,arguments)}(S),getToken:Y=>function Go(C){return ao.apply(this,arguments)}(S,Y)}};(function Ir(){(0,oe._registerComponent)(new we.wA(Wi,S0,"PUBLIC")),(0,oe._registerComponent)(new we.wA("installations-internal",Wo,"PRIVATE"))})(),(0,oe.registerVersion)(Qe,"0.6.4"),(0,oe.registerVersion)(Qe,"0.6.4","esm2017");const Ko="@firebase/remote-config",kn=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class el{constructor(D,S,B,Y){this.client=D,this.storage=S,this.storageCache=B,this.logger=Y}isCachedDataFresh(D,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-S,Y=B<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var S=this;return(0,V.Z)(function*(){const[B,Y]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(Y&&S.isCachedDataFresh(D.cacheMaxAgeMillis,B))return Y;D.eTag=Y&&Y.eTag;const ne=yield S.client.fetch(D),me=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&me.push(S.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(me),ne})()}}function o1(C=navigator){return C.languages&&C.languages[0]||C.language}class tl{constructor(D,S,B,Y,ne,me){this.firebaseInstallations=D,this.sdkVersion=S,this.namespace=B,this.projectId=Y,this.apiKey=ne,this.appId=me}fetch(D){var S=this;return(0,V.Z)(function*(){const[B,Y]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ke={sdk_version:S.sdkVersion,app_instance_id:B,app_instance_id_token:Y,app_id:S.appId,language_code:o1()},dt={method:"POST",headers:Xe,body:JSON.stringify(Ke)},zt=fetch(me,dt),kt=new Promise((dr,F0)=>{D.signal.addEventListener(()=>{const Eo=new Error("The operation was aborted.");Eo.name="AbortError",F0(Eo)})});let hr;try{yield Promise.race([zt,kt]),hr=yield zt}catch(dr){let F0="fetch-client-network";throw"AbortError"===dr?.name&&(F0="fetch-timeout"),kn.create(F0,{originalErrorMessage:dr?.message})}let Kn=hr.status;const P0=hr.headers.get("ETag")||void 0;let yr,H0;if(200===hr.status){let dr;try{dr=yield hr.json()}catch(F0){throw kn.create("fetch-client-parse",{originalErrorMessage:F0?.message})}yr=dr.entries,H0=dr.state}if("INSTANCE_STATE_UNSPECIFIED"===H0?Kn=500:"NO_CHANGE"===H0?Kn=304:("NO_TEMPLATE"===H0||"EMPTY_CONFIG"===H0)&&(yr={}),304!==Kn&&200!==Kn)throw kn.create("fetch-status",{httpStatus:Kn});return{status:Kn,eTag:P0,config:yr}})()}}class nl{constructor(D,S){this.client=D,this.storage=S}fetch(D){var S=this;return(0,V.Z)(function*(){const B=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(D,B)})()}attemptFetch(D,{throttleEndTimeMillis:S,backoffCount:B}){var Y=this;return(0,V.Z)(function*(){yield function Jo(C,D){return new Promise((S,B)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(S,Y);C.addEventListener(()=>{clearTimeout(ne),B(kn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,S);try{const ne=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Qo(C){if(!(C instanceof de.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const me={throttleEndTimeMillis:Date.now()+(0,de.$s)(B),backoffCount:B+1};return yield Y.storage.setThrottleMetadata(me),Y.attemptFetch(D,me)}})()}}class il{constructor(D,S,B,Y,ne){this.app=D,this._client=S,this._storageCache=B,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qn(C,D){const S=C.target.error||void 0;return kn.create(D,{originalErrorMessage:S&&S?.message})}const z0="app_namespace_store";class bu{constructor(D,S,B,Y=function Of(){return new Promise((C,D)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=B=>{D(qn(B,"storage-open"))},S.onsuccess=B=>{C(B.target.result)},S.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(z0,{keyPath:"compositeKey"})}}catch(S){D(kn.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=D,this.appName=S,this.namespace=B,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var S=this;return(0,V.Z)(function*(){const B=yield S.openDbPromise;return new Promise((Y,ne)=>{const Xe=B.transaction([z0],"readonly").objectStore(z0),Ke=S.createCompositeKey(D);try{const dt=Xe.get(Ke);dt.onerror=zt=>{ne(qn(zt,"storage-get"))},dt.onsuccess=zt=>{const kt=zt.target.result;Y(kt?kt.value:void 0)}}catch(dt){ne(kn.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(D,S){var B=this;return(0,V.Z)(function*(){const Y=yield B.openDbPromise;return new Promise((ne,me)=>{const Ke=Y.transaction([z0],"readwrite").objectStore(z0),dt=B.createCompositeKey(D);try{const zt=Ke.put({compositeKey:dt,value:S});zt.onerror=kt=>{me(qn(kt,"storage-set"))},zt.onsuccess=()=>{ne()}}catch(zt){me(kn.create("storage-set",{originalErrorMessage:zt?.message}))}})})()}delete(D){var S=this;return(0,V.Z)(function*(){const B=yield S.openDbPromise;return new Promise((Y,ne)=>{const Xe=B.transaction([z0],"readwrite").objectStore(z0),Ke=S.createCompositeKey(D);try{const dt=Xe.delete(Ke);dt.onerror=zt=>{ne(qn(zt,"storage-delete"))},dt.onsuccess=()=>{Y()}}catch(dt){ne(kn.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Mn{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,V.Z)(function*(){const S=D.storage.getLastFetchStatus(),B=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),ne=yield S;ne&&(D.lastFetchStatus=ne);const me=yield B;me&&(D.lastSuccessfulFetchTimestampMillis=me);const Xe=yield Y;Xe&&(D.activeConfig=Xe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Sr(){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,V.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}let t0,mn;!function co(){(0,oe._registerComponent)(new we.wA("remote-config",function C(D,{instanceIdentifier:S}){const B=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw kn.create("registration-window");if(!(0,de.hl)())throw kn.create("indexed-db-unavailable");const{projectId:ne,apiKey:me,appId:Xe}=B.options;if(!ne)throw kn.create("registration-project-id");if(!me)throw kn.create("registration-api-key");if(!Xe)throw kn.create("registration-app-id");const Ke=new bu(Xe,B.name,S=S||"firebase"),dt=new Mn(Ke),zt=new ve.Yd(Ko);zt.logLevel=ve.in.ERROR;const kt=new tl(Y,oe.SDK_VERSION,S,ne,me,Xe),hr=new nl(kt,Ke),Kn=new el(hr,Ke,dt,zt),P0=new il(B,Kn,dt,Ke,zt);return function Ic(C){const D=(0,de.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(P0),P0},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ko,"0.4.4"),(0,oe.registerVersion)(Ko,"0.4.4","esm2017")}();const c1=new WeakMap,zr=new WeakMap,ar=new WeakMap,ho=new WeakMap,Vt=new WeakMap;let u1={get(C,D,S){if(C instanceof IDBTransaction){if("done"===D)return zr.get(C);if("objectStoreNames"===D)return C.objectStoreNames||ar.get(C);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return n0(C[D])},set:(C,D,S)=>(C[D]=S,!0),has:(C,D)=>C instanceof IDBTransaction&&("done"===D||"store"===D)||D in C};function Ts(C){return"function"==typeof C?function yu(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function uo(){return mn||(mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...D){return C.apply(Xo(this),D),n0(c1.get(this))}:function(...D){return n0(C.apply(Xo(this),D))}:function(D,...S){const B=C.call(Xo(this),D,...S);return ar.set(B,D.sort?D.sort():[D]),n0(B)}}(C):(C instanceof IDBTransaction&&function zc(C){if(zr.has(C))return;const D=new Promise((S,B)=>{const Y=()=>{C.removeEventListener("complete",ne),C.removeEventListener("error",me),C.removeEventListener("abort",me)},ne=()=>{S(),Y()},me=()=>{B(C.error||new DOMException("AbortError","AbortError")),Y()};C.addEventListener("complete",ne),C.addEventListener("error",me),C.addEventListener("abort",me)});zr.set(C,D)}(C),((C,D)=>D.some(S=>C instanceof S))(C,function sl(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,u1):C)}function n0(C){if(C instanceof IDBRequest)return function ol(C){const D=new Promise((S,B)=>{const Y=()=>{C.removeEventListener("success",ne),C.removeEventListener("error",me)},ne=()=>{S(n0(C.result)),Y()},me=()=>{B(C.error),Y()};C.addEventListener("success",ne),C.addEventListener("error",me)});return D.then(S=>{S instanceof IDBCursor&&c1.set(S,C)}).catch(()=>{}),Vt.set(D,C),D}(C);if(ho.has(C))return ho.get(C);const D=Ts(C);return D!==C&&(ho.set(C,D),Vt.set(D,C)),D}const Xo=C=>Vt.get(C);function Re(C,D,{blocked:S,upgrade:B,blocking:Y,terminated:ne}={}){const me=indexedDB.open(C,D),Xe=n0(me);return B&&me.addEventListener("upgradeneeded",Ke=>{B(n0(me.result),Ke.oldVersion,Ke.newVersion,n0(me.transaction))}),S&&me.addEventListener("blocked",()=>S()),Xe.then(Ke=>{ne&&Ke.addEventListener("close",()=>ne()),Y&&Ke.addEventListener("versionchange",()=>Y())}).catch(()=>{}),Xe}function $t(C,{blocked:D}={}){const S=indexedDB.deleteDatabase(C);return D&&S.addEventListener("blocked",()=>D()),n0(S).then(()=>{})}const kc=["get","getKey","getAll","getAllKeys","count"],h1=["put","add","delete","clear"],Wn=new Map;function ea(C,D){if(!(C instanceof IDBDatabase)||D in C||"string"!=typeof D)return;if(Wn.get(D))return Wn.get(D);const S=D.replace(/FromIndex$/,""),B=D!==S,Y=h1.includes(S);if(!(S in(B?IDBIndex:IDBObjectStore).prototype)||!Y&&!kc.includes(S))return;const ne=function(){var me=(0,V.Z)(function*(Xe,...Ke){const dt=this.transaction(Xe,Y?"readwrite":"readonly");let zt=dt.store;return B&&(zt=zt.index(Ke.shift())),(yield Promise.all([zt[S](...Ke),Y&&dt.done]))[0]});return function(Ke){return me.apply(this,arguments)}}();return Wn.set(D,ne),ne}!function Nc(C){u1=C(u1)}(C=>({...C,get:(D,S,B)=>ea(D,S)||C.get(D,S,B),has:(D,S)=>!!ea(D,S)||C.has(D,S)}));const Es="/firebase-messaging-sw.js",Nr="/firebase-cloud-messaging-push-scope",d1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",al="google.c.a.c_id",ll="google.c.a.c_l",gd="google.c.a.ts",fo="google.c.a.e";var Ni=(()=>{return(C=Ni||(Ni={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Ni;var C})();function Ki(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Is(C){const S=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(S),Y=new Uint8Array(B.length);for(let ne=0;ne<B.length;++ne)Y[ne]=B.charCodeAt(ne);return Y}const kr="fcm_token_details_db",Rc="fcm_token_object_Store";function Vc(C){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,V.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(kr))return null;let D=null;return(yield Re(kr,5,{upgrade:(B=(0,V.Z)(function*(Y,ne,me,Xe){var Ke;if(ne<2||!Y.objectStoreNames.contains(Rc))return;const dt=Xe.objectStore(Rc),zt=yield dt.index("fcmSenderId").get(C);if(yield dt.clear(),zt)if(2===ne){const kt=zt;if(!kt.auth||!kt.p256dh||!kt.endpoint)return;D={token:kt.fcmToken,createTime:null!==(Ke=kt.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:kt.auth,p256dh:kt.p256dh,endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:"string"==typeof kt.vapidKey?kt.vapidKey:Ki(kt.vapidKey)}}}else if(3===ne){const kt=zt;D={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:Ki(kt.auth),p256dh:Ki(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:Ki(kt.vapidKey)}}}else if(4===ne){const kt=zt;D={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:Ki(kt.auth),p256dh:Ki(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:Ki(kt.vapidKey)}}}}),function(ne,me,Xe,Ke){return B.apply(this,arguments)})})).close(),yield $t(kr),yield $t("fcm_vapid_details_db"),yield $t("undefined"),g1(D)?D:null;var B}),Lc.apply(this,arguments)}function g1(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const m0="firebase-messaging-store";let na=null;function hl(){return na||(na=Re("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(m0)}})),na}function ia(C){return dl.apply(this,arguments)}function dl(){return(dl=(0,V.Z)(function*(C){const D=Ss(C),B=yield(yield hl()).transaction(m0).objectStore(m0).get(D);if(B)return B;{const Y=yield Vc(C.appConfig.senderId);if(Y)return yield ra(C,Y),Y}})).apply(this,arguments)}function ra(C,D){return fl.apply(this,arguments)}function fl(){return(fl=(0,V.Z)(function*(C,D){const S=Ss(C),Y=(yield hl()).transaction(m0,"readwrite");return yield Y.objectStore(m0).put(D,S),yield Y.done,D})).apply(this,arguments)}function Oc(C){return N0.apply(this,arguments)}function N0(){return(N0=(0,V.Z)(function*(C){const D=Ss(C),B=(yield hl()).transaction(m0,"readwrite");yield B.objectStore(m0).delete(D),yield B.done})).apply(this,arguments)}function Ss({appConfig:C}){return C.appId}const Yt=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ts(C,D){return xn.apply(this,arguments)}function xn(){return(xn=(0,V.Z)(function*(C,D){const S=yield ns(C),B=is(D),Y={method:"POST",headers:S,body:JSON.stringify(B)};let ne;try{ne=yield(yield fetch(go(C.appConfig),Y)).json()}catch(me){throw Yt.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(ne.error)throw Yt.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw Yt.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Pc(C,D){return sa.apply(this,arguments)}function sa(){return(sa=(0,V.Z)(function*(C,D){const S=yield ns(C),B=is(D.subscriptionOptions),Y={method:"PATCH",headers:S,body:JSON.stringify(B)};let ne;try{ne=yield(yield fetch(`${go(C.appConfig)}/${D.token}`,Y)).json()}catch(me){throw Yt.create("token-update-failed",{errorInfo:me?.toString()})}if(ne.error)throw Yt.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw Yt.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Hc(C,D){return oa.apply(this,arguments)}function oa(){return(oa=(0,V.Z)(function*(C,D){const B={method:"DELETE",headers:yield ns(C)};try{const ne=yield(yield fetch(`${go(C.appConfig)}/${D}`,B)).json();if(ne.error)throw Yt.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw Yt.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function go({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function ns(C){return zs.apply(this,arguments)}function zs(){return(zs=(0,V.Z)(function*({appConfig:C,installations:D}){const S=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function is({p256dh:C,auth:D,endpoint:S,vapidKey:B}){const Y={web:{endpoint:S,auth:D,p256dh:C}};return B!==d1&&(Y.web.applicationPubKey=B),Y}const rs=6048e5;function po(C){return vo.apply(this,arguments)}function vo(){return(vo=(0,V.Z)(function*(C){const D=yield pl(C.swRegistration,C.vapidKey),S={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Ki(D.getKey("auth")),p256dh:Ki(D.getKey("p256dh"))},B=yield ia(C.firebaseDependencies);if(B){if(Fc(B.subscriptionOptions,S))return Date.now()>=B.createTime+rs?ss(C,{token:B.token,createTime:Date.now(),subscriptionOptions:S}):B.token;try{yield Hc(C.firebaseDependencies,B.token)}catch(Y){console.warn(Y)}return Ns(C.firebaseDependencies,S)}return Ns(C.firebaseDependencies,S)})).apply(this,arguments)}function p1(C){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,V.Z)(function*(C){const D=yield ia(C.firebaseDependencies);D&&(yield Hc(C.firebaseDependencies,D.token),yield Oc(C.firebaseDependencies));const S=yield C.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function ss(C,D){return gl.apply(this,arguments)}function gl(){return(gl=(0,V.Z)(function*(C,D){try{const S=yield Pc(C.firebaseDependencies,D),B=Object.assign(Object.assign({},D),{token:S,createTime:Date.now()});return yield ra(C.firebaseDependencies,B),S}catch(S){throw yield p1(C),S}})).apply(this,arguments)}function Ns(C,D){return os.apply(this,arguments)}function os(){return(os=(0,V.Z)(function*(C,D){const B={token:yield ts(C,D),createTime:Date.now(),subscriptionOptions:D};return yield ra(C,B),B.token})).apply(this,arguments)}function pl(C,D){return mo.apply(this,arguments)}function mo(){return(mo=(0,V.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Is(D)})})).apply(this,arguments)}function Fc(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function pd(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Bc(C,D){if(!D.notification)return;C.notification={};const S=D.notification.title;S&&(C.notification.title=S);const B=D.notification.body;B&&(C.notification.body=B);const Y=D.notification.image;Y&&(C.notification.image=Y);const ne=D.notification.icon;ne&&(C.notification.icon=ne)}(D,C),function aa(C,D){!D.data||(C.data=D.data)}(D,C),function Mu(C,D){var S,B,Y,ne,me;if(!(D.fcmOptions||null!==(S=D.notification)&&void 0!==S&&S.click_action))return;C.fcmOptions={};const Xe=null!==(Y=null===(B=D.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==Y?Y:null===(ne=D.notification)||void 0===ne?void 0:ne.click_action;Xe&&(C.fcmOptions.link=Xe);const Ke=null===(me=D.fcmOptions)||void 0===me?void 0:me.analytics_label;Ke&&(C.fcmOptions.analyticsLabel=Ke)}(D,C),D}function vl(C){return"object"==typeof C&&!!C&&al in C}function wo(C,D){const S=[];for(let B=0;B<C.length;B++)S.push(C.charAt(B)),B<D.length&&S.push(D.charAt(B));return S.join("")}function ml(C){return Yt.create("missing-app-config-values",{valueName:C})}wo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class la{constructor(D,S,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function xu(C){if(!C||!C.options)throw ml("App Configuration Object");if(!C.name)throw ml("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:S}=C;for(const B of D)if(!S[B])throw ml(B);return{appName:C.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:S,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Uc(C){return ks.apply(this,arguments)}function ks(){return(ks=(0,V.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Es,{scope:Nr}),C.swRegistration.update().catch(()=>{})}catch(D){throw Yt.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function ca(C,D){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,V.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield Uc(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Yt.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function v1(C,D){return wl.apply(this,arguments)}function wl(){return(wl=(0,V.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=d1)})).apply(this,arguments)}function m1(){return(m1=(0,V.Z)(function*(C,D){if(!navigator)throw Yt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yt.create("permission-blocked");return yield v1(C,D?.vapidKey),yield ca(C,D?.serviceWorkerRegistration),po(C)})).apply(this,arguments)}function as(C,D,S){return _l.apply(this,arguments)}function _l(){return(_l=(0,V.Z)(function*(C,D,S){const B=ua(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:S[al],message_name:S[ll],message_time:S[gd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ua(C){switch(C){case Ni.NOTIFICATION_CLICKED:return"notification_open";case Ni.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ls(){return(ls=(0,V.Z)(function*(C,D){const S=D.data;if(!S.isFirebaseMessaging)return;C.onMessageHandler&&S.messageType===Ni.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(pd(S)):C.onMessageHandler.next(pd(S)));const B=S.data;vl(B)&&"1"===B[fo]&&(yield as(C,S.messageType,B))})).apply(this,arguments)}const da="@firebase/messaging",bl=C=>{const D=new la(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function ha(C,D){return ls.apply(this,arguments)}(D,S)),D},yl=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:B=>function Zc(C,D){return m1.apply(this,arguments)}(D,B)}};function Gc(){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,V.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function jc(){(0,oe._registerComponent)(new we.wA("messaging",bl,"PUBLIC")),(0,oe._registerComponent)(new we.wA("messaging-internal",yl,"PRIVATE")),(0,oe.registerVersion)(da,"0.12.4"),(0,oe.registerVersion)(da,"0.12.4","esm2017")}();const Lr="analytics",ga="firebase_id",_1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vs="https://www.googletagmanager.com/gtag/js",Pn=new ve.Yd("@firebase/analytics"),di=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ml(C){if(!C.startsWith(Vs)){const D=di.create("invalid-gtag-resource",{gtagURL:C});return Pn.warn(D.message),""}return C}function w0(C){return Promise.all(C.map(D=>D.catch(S=>S)))}function md(C,D){const S=function $c(C,D){let S;return window.trustedTypes&&(S=window.trustedTypes.createPolicy(C,D)),S}("firebase-js-sdk-policy",{createScriptURL:Ml}),B=document.createElement("script"),Y=`${Vs}?l=${C}&id=${D}`;B.src=S?S?.createScriptURL(Y):Y,B.async=!0,document.head.appendChild(B)}function Eu(C,D,S,B,Y,ne){return xl.apply(this,arguments)}function xl(){return(xl=(0,V.Z)(function*(C,D,S,B,Y,ne){const me=B[Y];try{if(me)yield D[me];else{const Ke=(yield w0(S)).find(dt=>dt.measurementId===Y);Ke&&(yield D[Ke.appId])}}catch(Xe){Pn.error(Xe)}C("config",Y,ne)})).apply(this,arguments)}function Pf(C,D,S,B,Y){return Al.apply(this,arguments)}function Al(){return(Al=(0,V.Z)(function*(C,D,S,B,Y){try{let ne=[];if(Y&&Y.send_to){let me=Y.send_to;Array.isArray(me)||(me=[me]);const Xe=yield w0(S);for(const Ke of me){const dt=Xe.find(kt=>kt.measurementId===Ke),zt=dt&&D[dt.appId];if(!zt){ne=[];break}ne.push(zt)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),C("event",B,Y||{})}catch(ne){Pn.error(ne)}})).apply(this,arguments)}function Ff(C){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Vs)&&S.src.includes(C))return S;return null}const fi=new class bd{constructor(D={},S=1e3){this.throttleMetadata=D,this.intervalMillis=S}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,S){this.throttleMetadata[D]=S}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function gn(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Rn(C){return qc.apply(this,arguments)}function qc(){return(qc=(0,V.Z)(function*(C){var D;const{appId:S,apiKey:B}=C,Y={method:"GET",headers:gn(B)},ne=_1.replace("{app-id}",S),me=yield fetch(ne,Y);if(200!==me.status&&304!==me.status){let Xe="";try{const Ke=yield me.json();null!==(D=Ke.error)&&void 0!==D&&D.message&&(Xe=Ke.error.message)}catch{}throw di.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Xe})}return me.json()})).apply(this,arguments)}function b1(C){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,V.Z)(function*(C,D=fi,S){const{appId:B,apiKey:Y,measurementId:ne}=C.options;if(!B)throw di.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:B};throw di.create("no-api-key")}const me=D.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new R0;return setTimeout((0,V.Z)(function*(){Xe.abort()}),void 0!==S?S:6e4),_0({appId:B,apiKey:Y,measurementId:ne},me,Xe,D)})).apply(this,arguments)}function _0(C,D,S){return va.apply(this,arguments)}function va(){return(va=(0,V.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:S},B,Y=fi){var ne;const{appId:me,measurementId:Xe}=C;try{yield bo(B,D)}catch(Ke){if(Xe)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${Ke?.message}]`),{appId:me,measurementId:Xe};throw Ke}try{const Ke=yield Rn(C);return Y.deleteThrottleMetadata(me),Ke}catch(Ke){const dt=Ke;if(!lr(dt)){if(Y.deleteThrottleMetadata(me),Xe)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:me,measurementId:Xe};throw Ke}const zt=503===Number(null===(ne=dt?.customData)||void 0===ne?void 0:ne.httpStatus)?(0,de.$s)(S,Y.intervalMillis,30):(0,de.$s)(S,Y.intervalMillis),kt={throttleEndTimeMillis:Date.now()+zt,backoffCount:S+1};return Y.setThrottleMetadata(me,kt),Pn.debug(`Calling attemptFetch again in ${zt} millis`),_0(C,kt,B,Y)}})).apply(this,arguments)}function bo(C,D){return new Promise((S,B)=>{const Y=Math.max(D-Date.now(),0),ne=setTimeout(S,Y);C.addEventListener(()=>{clearTimeout(ne),B(di.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function lr(C){if(!(C instanceof de.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class R0{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let In,wa;function Wc(){return(Wc=(0,V.Z)(function*(C,D,S,B,Y){if(Y&&Y.global)C("event",S,B);else{const ne=yield D;C("event",S,Object.assign(Object.assign({},B),{send_to:ne}))}})).apply(this,arguments)}function _a(C){wa=C}function Ls(C){In=C}function Il(){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,V.Z)(function*(){if(!(0,de.hl)())return Pn.warn(di.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(C){return Pn.warn(di.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function bn(){return(bn=(0,V.Z)(function*(C,D,S,B,Y,ne,me){var Xe;const Ke=b1(C);Ke.then(Kn=>{S[Kn.measurementId]=Kn.appId,C.options.measurementId&&Kn.measurementId!==C.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>Pn.error(Kn)),D.push(Ke);const dt=Il().then(Kn=>{if(Kn)return B.getId()}),[zt,kt]=yield Promise.all([Ke,dt]);Ff(ne)||md(ne,zt.measurementId),wa&&(Y("consent","default",wa),_a(void 0)),Y("js",new Date);const hr=null!==(Xe=me?.config)&&void 0!==Xe?Xe:{};return hr.origin="firebase",hr.update=!0,null!=kt&&(hr[ga]=kt),Y("config",zt.measurementId,hr),In&&(Y("set",In),Ls(void 0)),zt.measurementId})).apply(this,arguments)}class Or{constructor(D){this.app=D}_delete(){return delete _r[this.app.options.appId],Promise.resolve()}}let _r={},zu=[];const Sl={};let Ps,Oi,Os="dataLayer",Co=!1;function Ca(C,D,S){!function ya(){const C=[];if((0,de.ru)()&&C.push("This is a browser extension environment."),(0,de.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((B,Y)=>`(${Y+1}) ${B}`).join(" "),S=di.create("invalid-analytics-context",{errorInfo:D});Pn.warn(S.message)}}();const B=C.options.appId;if(!B)throw di.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw di.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_r[B])throw di.create("already-exists",{id:B});if(!Co){!function _n(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Os);const{wrappedGtag:ne,gtagCore:me}=function Hf(C,D,S,B,Y){let ne=function(...me){window[B].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function wd(C,D,S,B){function ne(){return(ne=(0,V.Z)(function*(me,...Xe){try{if("event"===me){const[Ke,dt]=Xe;yield Pf(C,D,S,Ke,dt)}else if("config"===me){const[Ke,dt]=Xe;yield Eu(C,D,S,B,Ke,dt)}else if("consent"===me){const[Ke]=Xe;C("consent","update",Ke)}else if("get"===me){const[Ke,dt,zt]=Xe;C("get",Ke,dt,zt)}else if("set"===me){const[Ke]=Xe;C("set",Ke)}else C(me,...Xe)}catch(Ke){Pn.error(Ke)}})).apply(this,arguments)}return function Y(me){return ne.apply(this,arguments)}}(ne,C,D,S),{gtagCore:ne,wrappedGtag:window[Y]}}(_r,zu,Sl,Os,"gtag");Oi=ne,Ps=me,Co=!0}return _r[B]=function Su(C,D,S,B,Y,ne,me){return bn.apply(this,arguments)}(C,zu,Sl,D,Ps,Os,S),new Or(C)}function Kc(){return ds.apply(this,arguments)}function ds(){return(ds=(0,V.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const Da="@firebase/analytics";!function C1(){(0,oe._registerComponent)(new we.wA(Lr,(D,{options:S})=>Ca(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,oe._registerComponent)(new we.wA("analytics-internal",function C(D){try{const S=D.getProvider(Lr).getImmediate();return{logEvent:(B,Y,ne)=>function Fs(C,D,S,B){C=(0,de.m9)(C),function ht(C,D,S,B,Y){return Wc.apply(this,arguments)}(Oi,_r[C.app.options.appId],D,S,B).catch(Y=>Pn.error(Y))}(S,B,Y,ne)}}catch(S){throw di.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,oe.registerVersion)(Da,"0.10.0"),(0,oe.registerVersion)(Da,"0.10.0","esm2017")}();var Bs=F(4408),ki=F(7565);const kl=new class Us extends ki.v{}(class Mo extends Bs.o{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}schedule(D,S=0){return S>0?super.schedule(D,S):(this.delay=S,this.state=D,this.scheduler.flush(this),this)}execute(D,S){return S>0||this.closed?super.execute(D,S):this._execute(D,S)}requestAsyncId(D,S,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(D,S,B):(D.flush(this),0)}});var Bf=F(4986),Ea=F(8505),L0=F(5363),Ia=F(9468);const fs=new o.GfV("7.4.1"),xo="__angularfire_symbol__analyticsIsSupportedValue",Sa="__angularfire_symbol__analyticsIsSupported",za="__angularfire_symbol__remoteConfigIsSupportedValue",Jc="__angularfire_symbol__remoteConfigIsSupported",M1="__angularfire_symbol__messagingIsSupportedValue",ku="__angularfire_symbol__messagingIsSupported";function Rl(C,D,S){if(D){if(1===D.length)return D[0];const ne=D.filter(me=>me.app===S);if(1===ne.length)return ne[0]}return S.container.getProvider(C).getImmediate({optional:!0})}globalThis[Sa]||(globalThis[Sa]=Kc().then(C=>globalThis[xo]=C).catch(()=>globalThis[xo]=!1)),globalThis[ku]||(globalThis[ku]=Gc().then(C=>globalThis[M1]=C).catch(()=>globalThis[M1]=!1)),globalThis[Jc]||(globalThis[Jc]=Sr().then(C=>globalThis[za]=C).catch(()=>globalThis[za]=!1));const O0=(C,D)=>{const S=D?[D]:(0,j.C6)(),B=[];return S.forEach(Y=>{Y.container.getProvider(C).instances.forEach(me=>{B.includes(me)||B.push(me)})}),B};function Ao(){}class Xc{constructor(D,S=kl){this.zone=D,this.delegate=S}now(){return this.delegate.now()}schedule(D,S,B){const Y=this.zone;return this.delegate.schedule(function(me){Y.runGuarded(()=>{D.apply(this,[me])})},S,B)}}class Vu{constructor(D){this.zone=D,this.task=null}call(D,S){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ao,{},Ao,Ao)),S.pipe((0,Ea.b)({next:B,complete:B,error:B})).subscribe(D).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Do=(()=>{class C{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new Xc(Zone.current)),this.insideAngular=S.run(()=>new Xc(Zone.current,Bf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(S){return new(S||C)(o.LFG(o.R0b))},C.\u0275prov=o.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Pi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function To(C){return C.pipe((0,L0.Q)(Pi().outsideAngular))}function Ll(C){return Pi(),function Ol(C){return function(S){return(S=S.lift(new Vu(C.ngZone))).pipe((0,Ia.R)(C.outsideAngular),(0,L0.Q)(C.insideAngular))}}(Pi())(C)}},1389:(bt,ze,F)=>{F.d(ze,{$:()=>Es,A:()=>q,D:()=>Le,I:()=>cn,J:()=>S0,L:()=>v0,N:()=>yi,P:()=>Su,Q:()=>bu,R:()=>cr,U:()=>Ds,V:()=>Sr,W:()=>Sc,X:()=>rl,Y:()=>sl,Z:()=>uo,_:()=>Vt,a:()=>cs,a0:()=>d1,a1:()=>al,a2:()=>Ci,a3:()=>Rc,a4:()=>Lc,a5:()=>cl,a6:()=>m0,a7:()=>hl,a8:()=>dl,a9:()=>fl,aA:()=>he,aB:()=>za,aC:()=>ei,aD:()=>Gi,aE:()=>L0,aF:()=>Nl,aG:()=>Yc,aH:()=>Gn,aL:()=>Rs,aO:()=>t0,aa:()=>Oc,ab:()=>Ss,ac:()=>Cu,ad:()=>Pc,ae:()=>Hc,af:()=>go,ai:()=>rs,aj:()=>vo,ak:()=>p1,an:()=>yu,ao:()=>Bc,aq:()=>wl,ar:()=>da,as:()=>ae,at:()=>De,au:()=>Ae,av:()=>Ne,aw:()=>hr,ax:()=>Na,ay:()=>it,az:()=>Ee,b:()=>Au,c:()=>Oi,d:()=>Ca,e:()=>ni,f:()=>Da,g:()=>Us,h:()=>Bs,i:()=>_d,j:()=>Bf,k:()=>dr,l:()=>Tl,m:()=>gv,p:()=>_e,r:()=>El,s:()=>us,u:()=>Il});var o=F(5861),j=F(2090),V=F(6881),oe=F(655),de=F(1877),we=F(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Le=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ie=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lt=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new de.Yd("@firebase/auth");function _t(b,...p){be.logLevel<=de.in.ERROR&&be.error(`Auth (${V.SDK_VERSION}): ${b}`,...p)}function Ne(b,...p){throw We(b,...p)}function Ee(b,...p){return We(b,...p)}function Se(b,p,m){const M=Object.assign(Object.assign({},Ie()),{[p]:m});return new j.LL("auth","Firebase",M).create(p,{appName:b.name})}function qe(b,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ne(b,"argument-error"),Se(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(b,...p){if("string"!=typeof b){const m=p[0],M=[...p.slice(1)];return M[0]&&(M[0].appName=b.name),b._errorFactory.create(m,...M)}return lt.create(b,...p)}function he(b,p,...m){if(!b)throw We(p,...m)}function Je(b){const p="INTERNAL ASSERTION FAILED: "+b;throw _t(p),new Error(p)}function ae(b,p){b||Je(p)}function le(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ye(){return"http:"===fe()||"https:"===fe()}function fe(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class St{constructor(p,m){this.shortDelay=p,this.longDelay=m,ae(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Qe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ye()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(b,p){ae(b.emulator,"Emulator should always be set here");const{url:m}=b.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class dn{static initialize(p,m,M){this.fetchImpl=p,m&&(this.headersImpl=m),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ci=new St(3e4,6e4);function nn(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function Et(b,p,m,M){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,o.Z)(function*(b,p,m,M,z={}){return Dn(b,z,(0,o.Z)(function*(){let L={},X={};M&&("GET"===p?X=M:L={body:JSON.stringify(M)});const ge=(0,j.xO)(Object.assign({key:b.config.apiKey},X)).slice(1),$e=yield b._getAdditionalHeaders();return $e["Content-Type"]="application/json",b.languageCode&&($e["X-Firebase-Locale"]=b.languageCode),dn.fetch()(pr(b,b.config.apiHost,m,ge),Object.assign({method:p,headers:$e,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Dn(b,p,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,o.Z)(function*(b,p,m){b._canInitEmulator=!1;const M=Object.assign(Object.assign({},nt),p);try{const z=new ys(b),L=yield Promise.race([m(),z.promise]);z.clearNetworkTimeout();const X=yield L.json();if("needConfirmation"in X)throw Yr(b,"account-exists-with-different-credential",X);if(L.ok&&!("errorMessage"in X))return X;{const ge=L.ok?X.errorMessage:X.error.message,[$e,rt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw Yr(b,"credential-already-in-use",X);if("EMAIL_EXISTS"===$e)throw Yr(b,"email-already-in-use",X);if("USER_DISABLED"===$e)throw Yr(b,"user-disabled",X);const yt=M[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Se(b,yt,rt);Ne(b,yt)}}catch(z){if(z instanceof j.ZR)throw z;Ne(b,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function Nn(b,p,m,M){return I0.apply(this,arguments)}function I0(){return(I0=(0,o.Z)(function*(b,p,m,M,z={}){const L=yield Et(b,p,m,M,z);return"mfaPendingCredential"in L&&Ne(b,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function pr(b,p,m,M){const z=`${p}${m}?${M}`;return b.config.emulator?ln(b.config,z):`${b.config.apiScheme}://${z}`}class ys{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,M)=>{this.timer=setTimeout(()=>M(Ee(this.auth,"network-request-failed")),ci.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yr(b,p,m){const M={appName:b.name};m.email&&(M.email=m.email),m.phoneNumber&&(M.phoneNumber=m.phoneNumber);const z=Ee(b,p,M);return z.customData._tokenResponse=m,z}function Si(){return(Si=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function vr(b,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function oo(b,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function bi(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Qr(){return(Qr=(0,o.Z)(function*(b,p=!1){const m=(0,j.m9)(b),M=yield m.getIdToken(p),z=On(M);he(z&&z.exp&&z.auth_time&&z.iat,m.auth,"internal-error");const L="object"==typeof z.firebase?z.firebase:void 0,X=L?.sign_in_provider;return{claims:z,token:M,authTime:bi(rr(z.auth_time)),issuedAtTime:bi(rr(z.iat)),expirationTime:bi(rr(z.exp)),signInProvider:X||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function rr(b){return 1e3*Number(b)}function On(b){const[p,m,M]=b.split(".");if(void 0===p||void 0===m||void 0===M)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,j.tV)(m);return z?JSON.parse(z):(_t("Failed to decode base64 JWT payload"),null)}catch(z){return _t("Caught error parsing JWT payload as JSON",z?.toString()),null}}function Ht(b,p){return gt.apply(this,arguments)}function gt(){return(gt=(0,o.Z)(function*(b,p,m=!1){if(m)return p;try{return yield p}catch(M){throw M instanceof j.ZR&&Mt(M)&&b.auth.currentUser===b&&(yield b.auth.signOut()),M}})).apply(this,arguments)}function Mt({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Wt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const z=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const M=this.getInterval(p);this.timerId=setTimeout((0,o.Z)(function*(){yield m.iteration()}),M)}iteration(){var p=this;return(0,o.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class sr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=bi(this.lastLoginAt),this.creationTime=bi(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(b){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,o.Z)(function*(b){var p;const m=b.auth,M=yield b.getIdToken(),z=yield Ht(b,oo(m,{idToken:M}));he(z?.users.length,m,"internal-error");const L=z.users[0];b._notifyReloadListener(L);const X=null!==(p=L.providerUserInfo)&&void 0!==p&&p.length?Xr(L.providerUserInfo):[],ge=Pt(b.providerData,X),yt=!!b.isAnonymous&&!(b.email&&L.passwordHash||ge?.length),tn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:ge,metadata:new sr(L.createdAt,L.lastLoginAt),isAnonymous:yt};Object.assign(b,tn)})).apply(this,arguments)}function Un(){return(Un=(0,o.Z)(function*(b){const p=(0,j.m9)(b);yield ui(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Pt(b,p){return[...b.filter(M=>!p.some(z=>z.providerId===M.providerId)),...p]}function Xr(b){return b.map(p=>{var{providerId:m}=p,M=(0,oe._T)(p,["providerId"]);return{providerId:m,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function Zn(){return(Zn=(0,o.Z)(function*(b,p){const m=yield Dn(b,{},(0,o.Z)(function*(){const M=(0,j.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:z,apiKey:L}=b.config,X=pr(b,z,"/v1/token",`key=${L}`),ge=yield b._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",dn.fetch()(X,{method:"POST",headers:ge,body:M})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class wn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){he(p.idToken,"internal-error"),he(typeof p.idToken<"u","internal-error"),he(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function En(b){const p=On(b);return he(p,"internal-error"),he(typeof p.exp<"u","internal-error"),he(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var M=this;return(0,o.Z)(function*(){return he(!M.accessToken||M.refreshToken,p,"user-token-expired"),m||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(p,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var M=this;return(0,o.Z)(function*(){const{accessToken:z,refreshToken:L,expiresIn:X}=yield function Kt(b,p){return Zn.apply(this,arguments)}(p,m);M.updateTokensAndExpiration(z,L,Number(X))})()}updateTokensAndExpiration(p,m,M){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(p,m){const{refreshToken:M,accessToken:z,expirationTime:L}=m,X=new wn;return M&&(he("string"==typeof M,"internal-error",{appName:p}),X.refreshToken=M),z&&(he("string"==typeof z,"internal-error",{appName:p}),X.accessToken=z),L&&(he("number"==typeof L,"internal-error",{appName:p}),X.expirationTime=L),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new wn,this.toJSON())}_performRefresh(){return Je("not implemented")}}function Xn(b,p){he("string"==typeof b||typeof b>"u","internal-error",{appName:p})}class Vn{constructor(p){var{uid:m,auth:M,stsTokenManager:z}=p,L=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=M,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new sr(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,o.Z)(function*(){const M=yield Ht(m,m.stsTokenManager.getToken(m.auth,p));return he(M,m.auth,"internal-error"),m.accessToken!==M&&(m.accessToken=M,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),M})()}getIdTokenResult(p){return function $n(b){return Qr.apply(this,arguments)}(this,p)}reload(){return function Dt(b){return Un.apply(this,arguments)}(this)}_assign(p){this!==p&&(he(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Vn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var M=this;return(0,o.Z)(function*(){let z=!1;p.idToken&&p.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(p),z=!0),m&&(yield ui(M)),yield M.auth._persistUserIfCurrent(M),z&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var p=this;return(0,o.Z)(function*(){const m=yield p.getIdToken();return yield Ht(p,function g0(b,p){return Si.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var M,z,L,X,ge,$e,rt,yt;const tn=null!==(M=m.displayName)&&void 0!==M?M:void 0,Pr=null!==(z=m.email)&&void 0!==z?z:void 0,gs=null!==(L=m.phoneNumber)&&void 0!==L?L:void 0,r0=null!==(X=m.photoURL)&&void 0!==X?X:void 0,t5=null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,Bl=null!==($e=m._redirectEventId)&&void 0!==$e?$e:void 0,Hu=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,xd=null!==(yt=m.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:n5,emailVerified:Fu,isAnonymous:i5,providerData:Ul,stsTokenManager:Ad}=m;he(n5&&Ad,p,"internal-error");const Bu=wn.fromJSON(this.name,Ad);he("string"==typeof n5,p,"internal-error"),Xn(tn,p.name),Xn(Pr,p.name),he("boolean"==typeof Fu,p,"internal-error"),he("boolean"==typeof i5,p,"internal-error"),Xn(gs,p.name),Xn(r0,p.name),Xn(t5,p.name),Xn(Bl,p.name),Xn(Hu,p.name),Xn(xd,p.name);const Zl=new Vn({uid:n5,auth:p,email:Pr,emailVerified:Fu,displayName:tn,isAnonymous:i5,photoURL:r0,phoneNumber:gs,tenantId:t5,stsTokenManager:Bu,createdAt:Hu,lastLoginAt:xd});return Ul&&Array.isArray(Ul)&&(Zl.providerData=Ul.map(Uu=>Object.assign({},Uu))),Bl&&(Zl._redirectEventId=Bl),Zl}static _fromIdTokenResponse(p,m,M=!1){return(0,o.Z)(function*(){const z=new wn;z.updateFromServerResponse(m);const L=new Vn({uid:m.localId,auth:p,stsTokenManager:z,isAnonymous:M});return yield ui(L),L})()}}const or=new Map;function ei(b){ae(b instanceof Function,"Expected a class definition");let p=or.get(b);return p?(ae(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,or.set(b,p),p)}const yi=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(m,M){var z=this;return(0,o.Z)(function*(){z.storage[m]=M})()}_get(m){var M=this;return(0,o.Z)(function*(){const z=M.storage[m];return void 0===z?null:z})()}_remove(m){var M=this;return(0,o.Z)(function*(){delete M.storage[m]})()}_addListener(m,M){}_removeListener(m,M){}}return b.type="NONE",b})();function Gi(b,p,m){return`firebase:${b}:${p}:${m}`}class ${constructor(p,m,M){this.persistence=p,this.auth=m,this.userKey=M;const{config:z,name:L}=this.auth;this.fullUserKey=Gi(this.userKey,z.apiKey,L),this.fullPersistenceKey=Gi("persistence",z.apiKey,L),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,o.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Vn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,o.Z)(function*(){if(m.persistence===p)return;const M=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,M?m.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,M="authUser"){return(0,o.Z)(function*(){if(!m.length)return new $(ei(yi),p,M);const z=(yield Promise.all(m.map(function(){var rt=(0,o.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let L=z[0]||ei(yi);const X=Gi(M,p.config.apiKey,p.name);let ge=null;for(const rt of m)try{const yt=yield rt._get(X);if(yt){const tn=Vn._fromJSON(p,yt);rt!==L&&(ge=tn),L=rt;break}}catch{}const $e=z.filter(rt=>rt._shouldAllowMigration);return L._shouldAllowMigration&&$e.length?(L=$e[0],ge&&(yield L._set(X,ge.toJSON())),yield Promise.all(m.map(function(){var rt=(0,o.Z)(function*(yt){if(yt!==L)try{yield yt._remove(X)}catch{}});return function(yt){return rt.apply(this,arguments)}}())),new $(L,p,M)):new $(L,p,M)})()}}function G(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Q(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(P(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ye(p))return"Blackberry";if(mt(p))return"Webos";if(O(p))return"Safari";if((p.includes("chrome/")||k(p))&&!p.includes("edge/"))return"Chrome";if(Ae(p))return"Android";{const M=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function P(b=(0,j.z$)()){return/firefox\//i.test(b)}function O(b=(0,j.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function k(b=(0,j.z$)()){return/crios\//i.test(b)}function Q(b=(0,j.z$)()){return/iemobile/i.test(b)}function Ae(b=(0,j.z$)()){return/android/i.test(b)}function Ye(b=(0,j.z$)()){return/blackberry/i.test(b)}function mt(b=(0,j.z$)()){return/webos/i.test(b)}function De(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function it(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Nt(b=(0,j.z$)()){return De(b)||Ae(b)||mt(b)||Ye(b)||/windows phone/i.test(b)||Q(b)}function $i(b,p=[]){let m;switch(b){case"Browser":m=G((0,j.z$)());break;case"Worker":m=`${G((0,j.z$)())}-${b}`;break;default:m=b}const M=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${V.SDK_VERSION}/${M}`}function se(){return(se=(0,o.Z)(function*(b){return(yield Et(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pe(b,p){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,o.Z)(function*(b,p){return Et(b,"GET","/v2/recaptchaConfig",nn(b,p))})).apply(this,arguments)}function Tt(b){return void 0!==b&&void 0!==b.getResponse}function Ot(b){return void 0!==b&&void 0!==b.enterprise}class fn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Gt(b){return new Promise((p,m)=>{const M=document.createElement("script");M.setAttribute("src",b),M.onload=p,M.onerror=z=>{const L=Ee("internal-error");L.customData=z,m(L)},M.type="text/javascript",M.charset="UTF-8",function jn(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(M)})}function qi(b){return`__${b}${Math.floor(1e6*Math.random())}`}class ao{constructor(p){this.type="recaptcha-enterprise",this.auth=Gn(p)}verify(p="verify",m=!1){var M=this;return(0,o.Z)(function*(){function L(){return L=(0,o.Z)(function*(ge){if(!m){if(null==ge.tenantId&&null!=ge._agentRecaptchaConfig)return ge._agentRecaptchaConfig.siteKey;if(null!=ge.tenantId&&void 0!==ge._tenantRecaptchaConfigs[ge.tenantId])return ge._tenantRecaptchaConfigs[ge.tenantId].siteKey}return new Promise(function(){var $e=(0,o.Z)(function*(rt,yt){Pe(ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tn=>{if(void 0!==tn.recaptchaKey){const Pr=new fn(tn);return null==ge.tenantId?ge._agentRecaptchaConfig=Pr:ge._tenantRecaptchaConfigs[ge.tenantId]=Pr,rt(Pr.siteKey)}yt(new Error("recaptcha Enterprise site key undefined"))}).catch(tn=>{yt(tn)})});return function(rt,yt){return $e.apply(this,arguments)}}())}),L.apply(this,arguments)}function X(ge,$e,rt){const yt=window.grecaptcha;Ot(yt)?yt.enterprise.ready(()=>{yt.enterprise.execute(ge,{action:p}).then(tn=>{$e(tn)}).catch(()=>{$e("NO_RECAPTCHA")})}):rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ge,$e)=>{(function z(ge){return L.apply(this,arguments)})(M.auth).then(rt=>{if(!m&&Ot(window.grecaptcha))X(rt,ge,$e);else{if(typeof window>"u")return void $e(new Error("RecaptchaVerifier is only supported in browser"));Gt("https://www.google.com/recaptcha/enterprise.js?render="+rt).then(()=>{X(rt,ge,$e)}).catch(yt=>{$e(yt)})}}).catch(rt=>{$e(rt)})})})()}}function rn(b,p,m){return $o.apply(this,arguments)}function $o(){return($o=(0,o.Z)(function*(b,p,m,M=!1){const z=new ao(b);let L;try{L=yield z.verify(m)}catch{L=yield z.verify(m,!0)}const X=Object.assign({},p);return Object.assign(X,M?{captchaResp:L}:{captchaResponse:L}),Object.assign(X,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(X,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),X})).apply(this,arguments)}class Cc{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const M=L=>new Promise((X,ge)=>{try{X(p(L))}catch($e){ge($e)}});M.onAbort=m,this.queue.push(M);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,o.Z)(function*(){if(m.auth.currentUser===p)return;const M=[];try{for(const z of m.queue)yield z(p),z.onAbort&&M.push(z.onAbort)}catch(z){M.reverse();for(const L of M)try{L()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:z?.message})}})()}}class Cs{constructor(p,m,M,z){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=M,this.config=z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hi(this),this.idTokenSubscription=new hi(this),this.beforeStateQueue=new Cc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=z.sdkClientVersion}_initializeWithPersistence(p,m){var M=this;return m&&(this._popupRedirectResolver=ei(m)),this._initializationPromise=this.queue((0,o.Z)(function*(){var z,L;if(!M._deleted&&(M.persistenceManager=yield $.create(M,p),!M._deleted)){if(null!==(z=M._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(m),M.lastNotifiedUid=(null===(L=M.currentUser)||void 0===L?void 0:L.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,o.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,o.Z)(function*(){var M;const z=yield m.assertedPersistence.getCurrentUser();let L=z,X=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ge=null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId,$e=L?._redirectEventId,rt=yield m.tryRedirectSignIn(p);(!ge||ge===$e)&&rt?.user&&(L=rt.user,X=!0)}if(!L)return m.directlySetCurrentUser(null);if(!L._redirectEventId){if(X)try{yield m.beforeStateQueue.runMiddleware(L)}catch(ge){L=z,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ge))}return L?m.reloadAndSetCurrentUserOrClear(L):m.directlySetCurrentUser(null)}return he(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===L._redirectEventId?m.directlySetCurrentUser(L):m.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(p){var m=this;return(0,o.Z)(function*(){let M=null;try{M=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,o.Z)(function*(){try{yield ui(p)}catch(M){if("auth/network-request-failed"!==M?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ue(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,o.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,o.Z)(function*(){const M=p?(0,j.m9)(p):null;return M&&he(M.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(M&&M._clone(m))})()}_updateCurrentUser(p,m=!1){var M=this;return(0,o.Z)(function*(){if(!M._deleted)return p&&he(M.tenantId===p.tenantId,M,"tenant-id-mismatch"),m||(yield M.beforeStateQueue.runMiddleware(p)),M.queue((0,o.Z)(function*(){yield M.directlySetCurrentUser(p),M.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,o.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,o.Z)(function*(){yield m.assertedPersistence.setPersistence(ei(p))}))}initializeRecaptchaConfig(){var p=this;return(0,o.Z)(function*(){const m=yield Pe(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),M=new fn(m);null==p.tenantId?p._agentRecaptchaConfig=M:p._tenantRecaptchaConfigs[p.tenantId]=M,M.emailPasswordEnabled&&new ao(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new j.LL("auth","Firebase",p())}onAuthStateChanged(p,m,M){return this.registerStateListener(this.authStateSubscription,p,m,M)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,M){return this.registerStateListener(this.idTokenSubscription,p,m,M)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var M=this;return(0,o.Z)(function*(){const z=yield M.getOrInitRedirectPersistenceManager(m);return null===p?z.removeCurrentUser():z.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,o.Z)(function*(){if(!m.redirectPersistenceManager){const M=p&&ei(p)||m._popupRedirectResolver;he(M,m,"argument-error"),m.redirectPersistenceManager=yield $.create(m,[ei(M._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,o.Z)(function*(){var M,z;return m._isInitialized&&(yield m.queue((0,o.Z)(function*(){}))),(null===(M=m._currentUser)||void 0===M?void 0:M._redirectEventId)===p?m._currentUser:(null===(z=m.redirectUser)||void 0===z?void 0:z._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,o.Z)(function*(){if(p===m.currentUser)return m.queue((0,o.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,M,z){if(this._deleted)return()=>{};const L="function"==typeof m?m:m.next.bind(m),X=this._isInitialized?Promise.resolve():this._initializationPromise;return he(X,this,"internal-error"),X.then(()=>L(this.currentUser)),"function"==typeof m?p.addObserver(m,M,z):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,o.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=$i(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,o.Z)(function*(){var m;const M={"X-Client-Version":p.clientVersion};p.app.options.appId&&(M["X-Firebase-gmpid"]=p.app.options.appId);const z=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();z&&(M["X-Firebase-Client"]=z);const L=yield p._getAppCheckToken();return L&&(M["X-Firebase-AppCheck"]=L),M})()}_getAppCheckToken(){var p=this;return(0,o.Z)(function*(){var m;const M=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return M?.error&&function Ct(b,...p){be.logLevel<=de.in.WARN&&be.warn(`Auth (${V.SDK_VERSION}): ${b}`,...p)}(`Error while retrieving App Check token: ${M.error}`),M?.token})()}}function Gn(b){return(0,j.m9)(b)}class hi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function cn(b,p,m){const M=Gn(b);he(M._canInitEmulator,M,"emulator-config-failed"),he(/^https?:\/\//.test(p),M,"invalid-emulator-scheme");const z=!!m?.disableWarnings,L=Mc(p),{host:X,port:ge}=function zi(b){const p=Mc(b),m=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!m)return{host:"",port:null};const M=m[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(M);if(z){const L=z[1];return{host:L,port:Wi(M.substr(L.length+1))}}{const[L,X]=M.split(":");return{host:L,port:Wi(X)}}}(p);M.config.emulator={url:`${L}//${X}${null===ge?"":`:${ge}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:X,port:ge,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function qo(){function b(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Mc(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function Wi(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class S0{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Je("not implemented")}_getIdTokenResponse(p){return Je("not implemented")}_linkToIdToken(p,m){return Je("not implemented")}_getReauthenticationResolver(p){return Je("not implemented")}}function Wo(b,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:resetPassword",nn(b,p))})).apply(this,arguments)}function Ko(b,p){return Y1.apply(this,arguments)}function Y1(){return(Y1=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xc(b,p){return p0.apply(this,arguments)}function p0(){return(p0=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:update",nn(b,p))})).apply(this,arguments)}function vu(b,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signInWithPassword",nn(b,p))})).apply(this,arguments)}function J1(b,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:sendOobCode",nn(b,p))})).apply(this,arguments)}function dd(b,p){return Q1.apply(this,arguments)}function Q1(){return(Q1=(0,o.Z)(function*(b,p){return J1(b,p)})).apply(this,arguments)}function Dc(b,p){return i1.apply(this,arguments)}function i1(){return(i1=(0,o.Z)(function*(b,p){return J1(b,p)})).apply(this,arguments)}function mu(b,p){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,o.Z)(function*(b,p){return J1(b,p)})).apply(this,arguments)}function Ec(b,p){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,o.Z)(function*(b,p){return J1(b,p)})).apply(this,arguments)}function r1(){return(r1=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signInWithEmailLink",nn(b,p))})).apply(this,arguments)}function s1(){return(s1=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signInWithEmailLink",nn(b,p))})).apply(this,arguments)}class X1 extends S0{constructor(p,m,M,z=null){super("password",M),this._email=p,this._password=m,this._tenantId=z}static _fromEmailAndPassword(p,m){return new X1(p,m,"password")}static _fromEmailAndCode(p,m,M=null){return new X1(p,m,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,o.Z)(function*(){var M;switch(m.signInMethod){case"password":const z={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(M=p._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const L=yield rn(p,z,"signInWithPassword");return vu(p,L)}return vu(p,z).catch(function(){var L=(0,o.Z)(function*(X){if("auth/missing-recaptcha-token"===X.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ge=yield rn(p,z,"signInWithPassword");return vu(p,ge)}return Promise.reject(X)});return function(X){return L.apply(this,arguments)}}());case"emailLink":return function fd(b,p){return r1.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ne(p,"internal-error")}})()}_linkToIdToken(p,m){var M=this;return(0,o.Z)(function*(){switch(M.signInMethod){case"password":return Ko(p,{idToken:m,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function wu(b,p){return s1.apply(this,arguments)}(p,{idToken:m,email:M._email,oobCode:M._password});default:Ne(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function xs(b,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signInWithIdp",nn(b,p))})).apply(this,arguments)}class v0 extends S0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new v0(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ne("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:M,signInMethod:z}=m,L=(0,oe._T)(m,["providerId","signInMethod"]);if(!M||!z)return null;const X=new v0(M,z);return X.idToken=L.idToken||void 0,X.accessToken=L.accessToken||void 0,X.secret=L.secret,X.nonce=L.nonce,X.pendingToken=L.pendingToken||null,X}_getIdTokenResponse(p){return xs(p,this.buildRequest())}_linkToIdToken(p,m){const M=this.buildRequest();return M.idToken=m,xs(p,M)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,xs(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,j.xO)(m)}return p}}function el(b,p){return o1.apply(this,arguments)}function o1(){return(o1=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:sendVerificationCode",nn(b,p))})).apply(this,arguments)}function Jo(){return(Jo=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signInWithPhoneNumber",nn(b,p))})).apply(this,arguments)}function nl(){return(nl=(0,o.Z)(function*(b,p){const m=yield Nn(b,"POST","/v1/accounts:signInWithPhoneNumber",nn(b,p));if(m.temporaryProof)throw Yr(b,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const wr={USER_NOT_FOUND:"user-not-found"};function il(){return(il=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signInWithPhoneNumber",nn(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),wr)})).apply(this,arguments)}class qn extends S0{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new qn({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new qn({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function tl(b,p){return Jo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Qo(b,p){return nl.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function a1(b,p){return il.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:M,verificationCode:z}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:M,code:z}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:M,phoneNumber:z,temporaryProof:L}=p;return M||m||z||L?new qn({verificationId:m,verificationCode:M,phoneNumber:z,temporaryProof:L}):null}}class es{constructor(p){var m,M,z,L,X,ge;const $e=(0,j.zd)((0,j.pd)(p)),rt=null!==(m=$e.apiKey)&&void 0!==m?m:null,yt=null!==(M=$e.oobCode)&&void 0!==M?M:null,tn=function z0(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=$e.mode)&&void 0!==z?z:null);he(rt&&yt&&tn,"argument-error"),this.apiKey=rt,this.operation=tn,this.code=yt,this.continueUrl=null!==(L=$e.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(X=$e.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(ge=$e.tenantId)&&void 0!==ge?ge:null}static parseLink(p){const m=function _u(b){const p=(0,j.zd)((0,j.pd)(b)).link,m=p?(0,j.zd)((0,j.pd)(p)).deep_link_id:null,M=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(M?(0,j.zd)((0,j.pd)(M)).link:null)||M||m||p||b}(p);try{return new es(m)}catch{return null}}}let bu=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(m,M){return X1._fromEmailAndPassword(m,M)}static credentialWithLink(m,M){const z=es.parseLink(M);return he(z,"argument-error"),X1._fromEmailAndCode(m,z.code,z.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Mn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class co extends Mn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class rl extends co{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return he("providerId"in m&&"signInMethod"in m,"argument-error"),v0._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return he(p.idToken||p.accessToken,"argument-error"),v0._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return rl.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return rl.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:M,oauthTokenSecret:z,pendingToken:L,nonce:X,providerId:ge}=p;if(!M&&!z&&!m&&!L||!ge)return null;try{return new rl(ge)._credential({idToken:m,accessToken:M,nonce:X,pendingToken:L})}catch{return null}}}let Ds=(()=>{class b extends co{constructor(){super("facebook.com")}static credential(m){return v0._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Sr=(()=>{class b extends co{constructor(){super("google.com"),this.addScope("profile")}static credential(m,M){return v0._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:M})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:M,oauthAccessToken:z}=m;if(!M&&!z)return null;try{return b.credential(M,z)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Sc=(()=>{class b extends co{constructor(){super("github.com")}static credential(m){return v0._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class t0 extends S0{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return xs(p,this.buildRequest())}_linkToIdToken(p,m){const M=this.buildRequest();return M.idToken=m,xs(p,M)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,xs(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:M,signInMethod:z,pendingToken:L}=m;return M&&z&&L&&M===z?new t0(M,L):null}static _create(p,m){return new t0(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class sl extends Mn{constructor(p){he(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return sl.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return sl.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=t0.fromJSON(p);return he(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:M}=p;if(!m||!M)return null;try{return t0._create(M,m)}catch{return null}}}let uo=(()=>{class b extends co{constructor(){super("twitter.com")}static credential(m,M){return v0._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:M})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:M,oauthTokenSecret:z}=m;if(!M||!z)return null;try{return b.credential(M,z)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function c1(b,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signUp",nn(b,p))})).apply(this,arguments)}class ar{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,M,z=!1){return(0,o.Z)(function*(){const L=yield Vn._fromIdTokenResponse(p,M,z),X=ho(M);return new ar({user:L,providerId:X,_tokenResponse:M,operationType:m})})()}static _forOperation(p,m,M){return(0,o.Z)(function*(){yield p._updateTokensIfNecessary(M,!0);const z=ho(M);return new ar({user:p,providerId:z,_tokenResponse:M,operationType:m})})()}}function ho(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Vt(b){return ol.apply(this,arguments)}function ol(){return(ol=(0,o.Z)(function*(b){var p;const m=Gn(b);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new ar({user:m.currentUser,providerId:null,operationType:"signIn"});const M=yield c1(m,{returnSecureToken:!0}),z=yield ar._fromIdTokenResponse(m,"signIn",M,!0);return yield m._updateCurrentUser(z.user),z})).apply(this,arguments)}class zc extends j.ZR{constructor(p,m,M,z){var L;super(m.code,m.message),this.operationType=M,this.user=z,Object.setPrototypeOf(this,zc.prototype),this.customData={appName:p.name,tenantId:null!==(L=p.tenantId)&&void 0!==L?L:void 0,_serverResponse:m.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(p,m,M,z){return new zc(p,m,M,z)}}function u1(b,p,m,M){return("reauthenticate"===p?m._getReauthenticationResolver(b):m._getIdTokenResponse(b)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?zc._fromErrorAndOperation(b,L,p,M):L})}function Nc(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function yu(b,p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,o.Z)(function*(b,p){const m=(0,j.m9)(b);yield Re(!0,m,p);const{providerUserInfo:M}=yield vr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),z=Nc(M||[]);return m.providerData=m.providerData.filter(L=>z.has(L.providerId)),z.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function n0(b,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,o.Z)(function*(b,p,m=!1){const M=yield Ht(b,p._linkToIdToken(b.auth,yield b.getIdToken()),m);return ar._forOperation(b,"link",M)})).apply(this,arguments)}function Re(b,p,m){return $t.apply(this,arguments)}function $t(){return($t=(0,o.Z)(function*(b,p,m){yield ui(p);const z=!1===b?"provider-already-linked":"no-such-provider";he(Nc(p.providerData).has(m)===b,p.auth,z)})).apply(this,arguments)}function kc(b,p){return h1.apply(this,arguments)}function h1(){return(h1=(0,o.Z)(function*(b,p,m=!1){const{auth:M}=b,z="reauthenticate";try{const L=yield Ht(b,u1(M,z,p,b),m);he(L.idToken,M,"internal-error");const X=On(L.idToken);he(X,M,"internal-error");const{sub:ge}=X;return he(b.uid===ge,M,"user-mismatch"),ar._forOperation(b,z,L)}catch(L){throw"auth/user-not-found"===L?.code&&Ne(M,"user-mismatch"),L}})).apply(this,arguments)}function Wn(b,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,o.Z)(function*(b,p,m=!1){const M="signIn",z=yield u1(b,M,p),L=yield ar._fromIdTokenResponse(b,M,z);return m||(yield b._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Es(b,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,o.Z)(function*(b,p){return Wn(Gn(b),p)})).apply(this,arguments)}function d1(b,p){return f1.apply(this,arguments)}function f1(){return(f1=(0,o.Z)(function*(b,p){const m=(0,j.m9)(b);return yield Re(!1,m,p.providerId),n0(m,p)})).apply(this,arguments)}function al(b,p){return ll.apply(this,arguments)}function ll(){return(ll=(0,o.Z)(function*(b,p){return kc((0,j.m9)(b),p)})).apply(this,arguments)}function gd(b,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,o.Z)(function*(b,p){return Nn(b,"POST","/v1/accounts:signInWithCustomToken",nn(b,p))})).apply(this,arguments)}function Ci(b,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,o.Z)(function*(b,p){const m=Gn(b),M=yield gd(m,{token:p,returnSecureToken:!0}),z=yield ar._fromIdTokenResponse(m,"signIn",M);return yield m._updateCurrentUser(z.user),z})).apply(this,arguments)}class Ki{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Is._fromServerResponse(p,m):"totpInfo"in m?kr._fromServerResponse(p,m):Ne(p,"internal-error")}}class Is extends Ki{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Is(m)}}class kr extends Ki{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new kr(m)}}function ta(b,p,m){var M;he((null===(M=m.url)||void 0===M?void 0:M.length)>0,b,"invalid-continue-uri"),he(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(he(m.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(he(m.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Rc(b,p,m){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,o.Z)(function*(b,p,m){var M;const z=Gn(b),L={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(M=z._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const X=yield rn(z,L,"getOobCode",!0);m&&ta(z,X,m),yield Dc(z,X)}else m&&ta(z,L,m),yield Dc(z,L).catch(function(){var X=(0,o.Z)(function*(ge){if("auth/missing-recaptcha-token"!==ge.code)return Promise.reject(ge);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const $e=yield rn(z,L,"getOobCode",!0);m&&ta(z,$e,m),yield Dc(z,$e)}});return function(ge){return X.apply(this,arguments)}}())}),Vc.apply(this,arguments)}function Lc(b,p,m){return g1.apply(this,arguments)}function g1(){return(g1=(0,o.Z)(function*(b,p,m){yield Wo((0,j.m9)(b),{oobCode:p,newPassword:m})})).apply(this,arguments)}function cl(b,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,o.Z)(function*(b,p){yield xc((0,j.m9)(b),{oobCode:p})})).apply(this,arguments)}function m0(b,p){return na.apply(this,arguments)}function na(){return(na=(0,o.Z)(function*(b,p){const m=(0,j.m9)(b),M=yield Wo(m,{oobCode:p}),z=M.requestType;switch(he(z,m,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(M.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(M.mfaInfo,m,"internal-error");default:he(M.email,m,"internal-error")}let L=null;return M.mfaInfo&&(L=Ki._fromServerResponse(Gn(m),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:L},operation:z}})).apply(this,arguments)}function hl(b,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,o.Z)(function*(b,p){const{data:m}=yield m0((0,j.m9)(b),p);return m.email})).apply(this,arguments)}function dl(b,p,m){return ra.apply(this,arguments)}function ra(){return ra=(0,o.Z)(function*(b,p,m){var M;const z=Gn(b),L={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let X;if(null!==(M=z._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const rt=yield rn(z,L,"signUpPassword");X=c1(z,rt)}else X=c1(z,L).catch(function(){var rt=(0,o.Z)(function*(yt){if("auth/missing-recaptcha-token"===yt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tn=yield rn(z,L,"signUpPassword");return c1(z,tn)}return Promise.reject(yt)});return function(yt){return rt.apply(this,arguments)}}());const ge=yield X.catch(rt=>Promise.reject(rt)),$e=yield ar._fromIdTokenResponse(z,"signIn",ge);return yield z._updateCurrentUser($e.user),$e}),ra.apply(this,arguments)}function fl(b,p,m){return Es((0,j.m9)(b),bu.credential(p,m))}function Oc(b,p,m){return N0.apply(this,arguments)}function N0(){return N0=(0,o.Z)(function*(b,p,m){var M;const z=Gn(b),L={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function X(ge,$e){he($e.handleCodeInApp,z,"argument-error"),$e&&ta(z,ge,$e)}if(null!==(M=z._getRecaptchaConfig())&&void 0!==M&&M.emailPasswordEnabled){const ge=yield rn(z,L,"getOobCode",!0);X(ge,m),yield mu(z,ge)}else X(L,m),yield mu(z,L).catch(function(){var ge=(0,o.Z)(function*($e){if("auth/missing-recaptcha-token"!==$e.code)return Promise.reject($e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const rt=yield rn(z,L,"getOobCode",!0);X(rt,m),yield mu(z,rt)}});return function($e){return ge.apply(this,arguments)}}())}),N0.apply(this,arguments)}function Ss(b,p){return"EMAIL_SIGNIN"===es.parseLink(p)?.operation}function Cu(b,p,m){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b),z=bu.credentialWithLink(p,m||le());return he(z._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Es(M,z)})).apply(this,arguments)}function ts(b,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:createAuthUri",nn(b,p))})).apply(this,arguments)}function Pc(b,p){return sa.apply(this,arguments)}function sa(){return(sa=(0,o.Z)(function*(b,p){const M={identifier:p,continueUri:ye()?le():"http://localhost"},{signinMethods:z}=yield ts((0,j.m9)(b),M);return z||[]})).apply(this,arguments)}function Hc(b,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,o.Z)(function*(b,p){const m=(0,j.m9)(b),z={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&ta(m.auth,z,p);const{email:L}=yield dd(m.auth,z);L!==b.email&&(yield b.reload())})).apply(this,arguments)}function go(b,p,m){return ns.apply(this,arguments)}function ns(){return(ns=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};m&&ta(M.auth,L,m);const{email:X}=yield Ec(M.auth,L);X!==b.email&&(yield b.reload())})).apply(this,arguments)}function zs(b,p){return is.apply(this,arguments)}function is(){return(is=(0,o.Z)(function*(b,p){return Et(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function rs(b,p){return po.apply(this,arguments)}function po(){return(po=(0,o.Z)(function*(b,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const M=(0,j.m9)(b),L={idToken:yield M.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},X=yield Ht(M,zs(M.auth,L));M.displayName=X.displayName||null,M.photoURL=X.photoUrl||null;const ge=M.providerData.find(({providerId:$e})=>"password"===$e);ge&&(ge.displayName=M.displayName,ge.photoURL=M.photoURL),yield M._updateTokensIfNecessary(X)})).apply(this,arguments)}function vo(b,p){return Rr((0,j.m9)(b),p,null)}function p1(b,p){return Rr((0,j.m9)(b),null,p)}function Rr(b,p,m){return ss.apply(this,arguments)}function ss(){return(ss=(0,o.Z)(function*(b,p,m){const{auth:M}=b,L={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(L.email=p),m&&(L.password=m);const X=yield Ht(b,Ko(M,L));yield b._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class Ns{constructor(p,m,M={}){this.isNewUser=p,this.providerId=m,this.profile=M}}class os extends Ns{constructor(p,m,M,z){super(p,m,M),this.username=z}}class pl extends Ns{constructor(p,m){super(p,"facebook.com",m)}}class mo extends os{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Fc extends Ns{constructor(p,m){super(p,"google.com",m)}}class pd extends os{constructor(p,m,M){super(p,"twitter.com",m,M)}}function Bc(b){const{user:p,_tokenResponse:m}=b;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function gl(b){var p,m;if(!b)return null;const{providerId:M}=b,z=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},L=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!M&&b?.idToken){const X=null===(m=null===(p=On(b.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(X)return new Ns(L,"anonymous"!==X&&"custom"!==X?X:null)}if(!M)return null;switch(M){case"facebook.com":return new pl(L,z);case"github.com":return new mo(L,z);case"google.com":return new Fc(L,z);case"twitter.com":return new pd(L,z,b.screenName||null);case"custom":case"anonymous":return new Ns(L,null);default:return new Ns(L,M,z)}}(m)}class Vr{constructor(p,m,M){this.type=p,this.credential=m,this.auth=M}static _fromIdtoken(p,m){return new Vr("enroll",p,m)}static _fromMfaPendingCredential(p){return new Vr("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,M;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Vr._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(M=p.multiFactorSession)&&void 0!==M&&M.idToken)return Vr._fromIdtoken(p.multiFactorSession.idToken)}return null}}class v1{constructor(p,m,M){this.session=p,this.hints=m,this.signInResolver=M}static _fromError(p,m){const M=Gn(p),z=m.customData._serverResponse,L=(z.mfaInfo||[]).map(ge=>Ki._fromServerResponse(M,ge));he(z.mfaPendingCredential,M,"internal-error");const X=Vr._fromMfaPendingCredential(z.mfaPendingCredential);return new v1(X,L,function(){var ge=(0,o.Z)(function*($e){const rt=yield $e._process(M,X);delete z.mfaInfo,delete z.mfaPendingCredential;const yt=Object.assign(Object.assign({},z),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const tn=yield ar._fromIdTokenResponse(M,m.operationType,yt);return yield M._updateCurrentUser(tn.user),tn;case"reauthenticate":return he(m.user,M,"internal-error"),ar._forOperation(m.user,m.operationType,yt);default:Ne(M,"internal-error")}});return function($e){return ge.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,o.Z)(function*(){return m.signInResolver(p)})()}}function wl(b,p){var m;const M=(0,j.m9)(b),z=p;return he(p.customData.operationType,M,"argument-error"),he(null===(m=z.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,M,"argument-error"),v1._fromError(M,z)}function Zc(b,p){return Et(b,"POST","/v2/accounts/mfaEnrollment:start",nn(b,p))}class ha{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(M=>Ki._fromServerResponse(p.auth,M)))})}static _fromUser(p){return new ha(p)}getSession(){var p=this;return(0,o.Z)(function*(){return Vr._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var M=this;return(0,o.Z)(function*(){const z=p,L=yield M.getSession(),X=yield Ht(M.user,z._process(M.user.auth,L,m));return yield M.user._updateTokensIfNecessary(X),M.user.reload()})()}unenroll(p){var m=this;return(0,o.Z)(function*(){const M="string"==typeof p?p:p.uid,z=yield m.user.getIdToken();try{const L=yield Ht(m.user,function ua(b,p){return Et(b,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(b,p))}(m.user.auth,{idToken:z,mfaEnrollmentId:M}));m.enrolledFactors=m.enrolledFactors.filter(({uid:X})=>X!==M),yield m.user._updateTokensIfNecessary(L),yield m.user.reload()}catch(L){throw L}})()}}const ls=new WeakMap;function da(b){const p=(0,j.m9)(b);return ls.has(p)||ls.set(p,ha._fromUser(p)),ls.get(p)}const k0="__sak";class bl{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(k0,"1"),this.storage.removeItem(k0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Au=(()=>{class b extends bl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,M)=>this.onStorageEvent(m,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yl(){const b=(0,j.z$)();return O(b)||De(b)}()&&function en(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Nt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const M of Object.keys(this.listeners)){const z=this.storage.getItem(M),L=this.localCache[M];z!==L&&m(M,L,z)}}onStorageEvent(m,M=!1){if(!m.key)return void this.forAllChangedKeys((ge,$e,rt)=>{this.notifyListeners(ge,rt)});const z=m.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(z);if(m.newValue!==ge)null!==m.newValue?this.storage.setItem(z,m.newValue):this.storage.removeItem(z);else if(this.localCache[z]===m.newValue&&!M)return}const L=()=>{const ge=this.storage.getItem(z);!M&&this.localCache[z]===ge||this.notifyListeners(z,ge)},X=this.storage.getItem(z);!function jt(){return(0,j.w1)()&&10===document.documentMode}()||X===m.newValue||m.newValue===m.oldValue?L():setTimeout(L,10)}notifyListeners(m,M){this.localCache[m]=M;const z=this.listeners[m];if(z)for(const L of Array.from(z))L(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,M,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:M,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(M)}_removeListener(m,M){this.listeners[m]&&(this.listeners[m].delete(M),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,M){var z=()=>super._set,L=this;return(0,o.Z)(function*(){yield z().call(L,m,M),L.localCache[m]=JSON.stringify(M)})()}_get(m){var M=()=>super._get,z=this;return(0,o.Z)(function*(){const L=yield M().call(z,m);return z.localCache[m]=JSON.stringify(L),L})()}_remove(m){var M=()=>super._remove,z=this;return(0,o.Z)(function*(){yield M().call(z,m),delete z.localCache[m]})()}}return b.type="LOCAL",b})(),cs=(()=>{class b extends bl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,M){}_removeListener(m,M){}}return b.type="SESSION",b})();let Du=(()=>{class b{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const M=this.receivers.find(L=>L.isListeningto(m));if(M)return M;const z=new b(m);return this.receivers.push(z),z}isListeningto(m){return this.eventTarget===m}handleEvent(m){var M=this;return(0,o.Z)(function*(){const z=m,{eventId:L,eventType:X,data:ge}=z.data,$e=M.handlersMap[X];if(!$e?.size)return;z.ports[0].postMessage({status:"ack",eventId:L,eventType:X});const rt=Array.from($e).map(function(){var tn=(0,o.Z)(function*(Pr){return Pr(z.origin,ge)});return function(Pr){return tn.apply(this,arguments)}}()),yt=yield function vd(b){return Promise.all(b.map(function(){var p=(0,o.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(M){return{fulfilled:!1,reason:M}}});return function(m){return p.apply(this,arguments)}}()))}(rt);z.ports[0].postMessage({status:"done",eventId:L,eventType:X,response:yt})})()}_subscribe(m,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(M)}_unsubscribe(m,M){this.handlersMap[m]&&M&&this.handlersMap[m].delete(M),(!M||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Rs(b="",p=10){let m="";for(let M=0;M<p;M++)m+=Math.floor(10*Math.random());return b+m}class w1{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,M=50){var z=this;return(0,o.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let X,ge;return new Promise(($e,rt)=>{const yt=Rs("",20);L.port1.start();const tn=setTimeout(()=>{rt(new Error("unsupported_event"))},M);ge={messageChannel:L,onMessage(Pr){const gs=Pr;if(gs.data.eventId===yt)switch(gs.data.status){case"ack":clearTimeout(tn),X=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),$e(gs.data.response);break;default:clearTimeout(tn),clearTimeout(X),rt(new Error("invalid_response"))}}},z.handlers.add(ge),L.port1.addEventListener("message",ge.onMessage),z.target.postMessage({eventType:p,eventId:yt,data:m},[L.port2])}).finally(()=>{ge&&z.removeMessageHandler(ge)})})()}}function ti(){return window}function ga(){return typeof ti().WorkerGlobalScope<"u"&&"function"==typeof ti().importScripts}function _o(){return(_o=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Pn="firebaseLocalStorageDb",di="firebaseLocalStorage",Ml="fbase_key";class w0{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function $c(b,p){return b.transaction([di],p?"readwrite":"readonly").objectStore(di)}function _n(){const b=indexedDB.open(Pn,1);return new Promise((p,m)=>{b.addEventListener("error",()=>{m(b.error)}),b.addEventListener("upgradeneeded",()=>{const M=b.result;try{M.createObjectStore(di,{keyPath:Ml})}catch(z){m(z)}}),b.addEventListener("success",(0,o.Z)(function*(){const M=b.result;M.objectStoreNames.contains(di)?p(M):(M.close(),yield function md(){const b=indexedDB.deleteDatabase(Pn);return new w0(b).toPromise()}(),p(yield _n()))}))})}function Eu(b,p,m){return xl.apply(this,arguments)}function xl(){return(xl=(0,o.Z)(function*(b,p,m){const M=$c(b,!0).put({[Ml]:p,value:m});return new w0(M).toPromise()})).apply(this,arguments)}function Al(){return(Al=(0,o.Z)(function*(b,p){const m=$c(b,!1).get(p),M=yield new w0(m).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function wd(b,p){const m=$c(b,!0).delete(p);return new w0(m).toPromise()}const _d=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,o.Z)(function*(){return m.db||(m.db=yield _n()),m.db})()}_withRetries(m){var M=this;return(0,o.Z)(function*(){let z=0;for(;;)try{const L=yield M._openDb();return yield m(L)}catch(L){if(z++>3)throw L;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,o.Z)(function*(){return ga()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,o.Z)(function*(){m.receiver=Du._getInstance(function Vs(){return ga()?self:null}()),m.receiver._subscribe("keyChanged",function(){var M=(0,o.Z)(function*(z,L){return{keyProcessed:(yield m._poll()).includes(L.key)}});return function(z,L){return M.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var M=(0,o.Z)(function*(z,L){return["keyChanged"]});return function(z,L){return M.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,o.Z)(function*(){var M,z;if(m.activeServiceWorker=yield function Tu(){return _o.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new w1(m.activeServiceWorker);const L=yield m.sender._send("ping",{},800);!L||(null===(M=L[0])||void 0===M?void 0:M.fulfilled)&&(null===(z=L[0])||void 0===z?void 0:z.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var M=this;return(0,o.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function _1(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:m},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const m=yield _n();return yield Eu(m,k0,"1"),yield wd(m,k0),!0}catch{}return!1})()}_withPendingWrite(m){var M=this;return(0,o.Z)(function*(){M.pendingWrites++;try{yield m()}finally{M.pendingWrites--}})()}_set(m,M){var z=this;return(0,o.Z)(function*(){return z._withPendingWrite((0,o.Z)(function*(){return yield z._withRetries(L=>Eu(L,m,M)),z.localCache[m]=M,z.notifyServiceWorker(m)}))})()}_get(m){var M=this;return(0,o.Z)(function*(){const z=yield M._withRetries(L=>function Pf(b,p){return Al.apply(this,arguments)}(L,m));return M.localCache[m]=z,z})()}_remove(m){var M=this;return(0,o.Z)(function*(){return M._withPendingWrite((0,o.Z)(function*(){return yield M._withRetries(z=>wd(z,m)),delete M.localCache[m],M.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,o.Z)(function*(){const M=yield m._withRetries(X=>{const ge=$c(X,!1).getAll();return new w0(ge).toPromise()});if(!M)return[];if(0!==m.pendingWrites)return[];const z=[],L=new Set;for(const{fbase_key:X,value:ge}of M)L.add(X),JSON.stringify(m.localCache[X])!==JSON.stringify(ge)&&(m.notifyListeners(X,ge),z.push(X));for(const X of Object.keys(m.localCache))m.localCache[X]&&!L.has(X)&&(m.notifyListeners(X,null),z.push(X));return z})()}notifyListeners(m,M){this.localCache[m]=M;const z=this.listeners[m];if(z)for(const L of Array.from(z))L(M)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(M)}_removeListener(m,M){this.listeners[m]&&(this.listeners[m].delete(M),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function bd(b,p){return Et(b,"POST","/v2/accounts/mfaSignIn:start",nn(b,p))}const b1=1e12;class Yi{constructor(p){this.auth=p,this.counter=b1,this._widgets=new Map}render(p,m){const M=this.counter;return this._widgets.set(M,new _0(p,this.auth.name,m||{})),this.counter++,M}reset(p){var m;const M=p||b1;null===(m=this._widgets.get(M))||void 0===m||m.delete(),this._widgets.delete(M)}getResponse(p){var m;return(null===(m=this._widgets.get(p||b1))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,o.Z)(function*(){var M;return null===(M=m._widgets.get(p||b1))||void 0===M||M.execute(),""})()}}class _0{constructor(p,m,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof p?document.getElementById(p):p;he(z,"argument-error",{appName:m}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function va(b){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<b;M++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const bo=qi("rcb"),lr=new St(3e4,6e4);class In{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=ti().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return he(function ht(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Tt(ti().grecaptcha)?Promise.resolve(ti().grecaptcha):new Promise((M,z)=>{const L=ti().setTimeout(()=>{z(Ee(p,"network-request-failed"))},lr.get());ti()[bo]=()=>{ti().clearTimeout(L),delete ti()[bo];const ge=ti().grecaptcha;if(!ge||!Tt(ge))return void z(Ee(p,"internal-error"));const $e=ge.render;ge.render=(rt,yt)=>{const tn=$e(rt,yt);return this.counter++,tn},this.hostLanguage=m,M(ge)},Gt(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:bo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(L),z(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=ti().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wc{load(p){return(0,o.Z)(function*(){return new Yi(p)})()}clearedOneInstance(){}}const Iu="recaptcha",yo={theme:"light",type:"image"};class cr{constructor(p,m=Object.assign({},yo),M){this.parameters=m,this.type=Iu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gn(M),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof p?document.getElementById(p):p;he(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wc:new In,this.validateStartingState()}verify(){var p=this;return(0,o.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),M=p.getAssertedRecaptcha();return M.getResponse(m)||new Promise(L=>{const X=ge=>{!ge||(p.tokenChangeListeners.delete(X),L(ge))};p.tokenChangeListeners.add(X),p.isInvisible&&M.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(M=>M(m)),"function"==typeof p)p(m);else if("string"==typeof p){const M=ti()[p];"function"==typeof M&&M(m)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,o.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const M=document.createElement("div");m.appendChild(M),m=M}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,o.Z)(function*(){he(ye()&&!ga(),p.auth,"internal-error"),yield function ma(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ce(b){return se.apply(this,arguments)}(p.auth);he(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class V0{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=qn._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function us(b,p,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,o.Z)(function*(b,p,m){const M=Gn(b),z=yield _a(M,p,(0,j.m9)(m));return new V0(z,L=>Es(M,L))})).apply(this,arguments)}function Tl(b,p,m){return y1.apply(this,arguments)}function y1(){return(y1=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b);yield Re(!1,M,"phone");const z=yield _a(M.auth,p,(0,j.m9)(m));return new V0(z,L=>d1(M,L))})).apply(this,arguments)}function El(b,p,m){return wa.apply(this,arguments)}function wa(){return(wa=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b),z=yield _a(M.auth,p,(0,j.m9)(m));return new V0(z,L=>al(M,L))})).apply(this,arguments)}function _a(b,p,m){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,o.Z)(function*(b,p,m){var M;const z=yield m.verify();try{let L;if(he("string"==typeof z,b,"argument-error"),he(m.type===Iu,b,"argument-error"),L="string"==typeof p?{phoneNumber:p}:p,"session"in L){const X=L.session;if("phoneNumber"in L)return he("enroll"===X.type,b,"internal-error"),(yield Zc(b,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{he("signin"===X.type,b,"internal-error");const ge=(null===(M=L.multiFactorHint)||void 0===M?void 0:M.uid)||L.multiFactorUid;return he(ge,b,"missing-multi-factor-info"),(yield bd(b,{mfaPendingCredential:X.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield el(b,{phoneNumber:L.phoneNumber,recaptchaToken:z});return X}}finally{m._reset()}})).apply(this,arguments)}function Il(b,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,o.Z)(function*(b,p){yield n0((0,j.m9)(b),p)})).apply(this,arguments)}let Su=(()=>{class b{constructor(m){this.providerId=b.PROVIDER_ID,this.auth=Gn(m)}verifyPhoneNumber(m,M){return _a(this.auth,m,(0,j.m9)(M))}static credential(m,M){return qn._fromVerification(m,M)}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:M,temporaryProof:z}=m;return M&&z?qn._fromTokenResponse(M,z):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function bn(b,p){return p?ei(p):(he(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Or extends S0{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return xs(p,this._buildIdpRequest())}_linkToIdToken(p,m){return xs(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return xs(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function _r(b){return Wn(b.auth,new Or(b),b.bypassAuthState)}function zu(b){const{auth:p,user:m}=b;return he(m,p,"internal-error"),kc(m,new Or(b),b.bypassAuthState)}function Sl(b){return Os.apply(this,arguments)}function Os(){return(Os=(0,o.Z)(function*(b){const{auth:p,user:m}=b;return he(m,p,"internal-error"),n0(m,new Or(b),b.bypassAuthState)})).apply(this,arguments)}class ba{constructor(p,m,M,z,L=!1){this.auth=p,this.resolver=M,this.user=z,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,o.Z)(function*(M,z){p.pendingPromise={resolve:M,reject:z};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(L){p.reject(L)}});return function(M,z){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,o.Z)(function*(){const{urlResponse:M,sessionId:z,postBody:L,tenantId:X,error:ge,type:$e}=p;if(ge)return void m.reject(ge);const rt={auth:m.auth,requestUri:M,sessionId:z,tenantId:X||void 0,postBody:L||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask($e)(rt))}catch(yt){m.reject(yt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return _r;case"linkViaPopup":case"linkViaRedirect":return Sl;case"reauthViaPopup":case"reauthViaRedirect":return zu;default:Ne(this.auth,"internal-error")}}resolve(p){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ps=new St(2e3,1e4);function Oi(b,p,m){return Co.apply(this,arguments)}function Co(){return(Co=(0,o.Z)(function*(b,p,m){const M=Gn(b);qe(b,p,Mn);const z=bn(M,m);return new hs(M,"signInViaPopup",p,z).executeNotNull()})).apply(this,arguments)}function ni(b,p,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b);qe(M.auth,p,Mn);const z=bn(M.auth,m);return new hs(M.auth,"reauthViaPopup",p,z,M).executeNotNull()})).apply(this,arguments)}function Ca(b,p,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b);qe(M.auth,p,Mn);const z=bn(M.auth,m);return new hs(M.auth,"linkViaPopup",p,z,M).executeNotNull()})).apply(this,arguments)}let hs=(()=>{class b extends ba{constructor(m,M,z,L,X){super(m,M,L,X),this.provider=z,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var m=this;return(0,o.Z)(function*(){const M=yield m.execute();return he(M,m.auth,"internal-error"),M})()}onExecution(){var m=this;return(0,o.Z)(function*(){ae(1===m.filter.length,"Popup operations only handle one event");const M=Rs();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],M),m.authWindow.associatedEvent=M,m.resolver._originValidation(m.auth).catch(z=>{m.reject(z)}),m.resolver._isIframeWebStorageSupported(m.auth,z=>{z||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const m=()=>{var M,z;this.pollId=null!==(z=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==z&&z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Ps.get())};m()}}return b.currentPopupAction=null,b})();const ds=new Map;class yd extends ba{constructor(p,m,M=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,M),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,o.Z)(function*(){let M=ds.get(m.auth._key());if(!M){try{const L=(yield function zl(b,p){return b0.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;M=()=>Promise.resolve(L)}catch(z){M=()=>Promise.reject(z)}ds.set(m.auth._key(),M)}return m.bypassAuthState||ds.set(m.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,M=this;return(0,o.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(M,p);if("unknown"!==p.type){if(p.eventId){const z=yield M.auth._redirectUserForId(p.eventId);if(z)return M.user=z,m().call(M,p);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function b0(){return(b0=(0,o.Z)(function*(b,p){const m=Aa(p),M=Fs(b);if(!(yield M._isAvailable()))return!1;const z="true"===(yield M._get(m));return yield M._remove(m),z})).apply(this,arguments)}function xa(b,p){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,o.Z)(function*(b,p){return Fs(b)._set(Aa(p),"true")})).apply(this,arguments)}function Yc(){ds.clear()}function Nl(b,p){ds.set(b._key(),p)}function Fs(b){return ei(b._redirectPersistence)}function Aa(b){return Gi("pendingRedirect",b.config.apiKey,b.name)}function Da(b,p,m){return function Ta(b,p,m){return C1.apply(this,arguments)}(b,p,m)}function C1(){return(C1=(0,o.Z)(function*(b,p,m){const M=Gn(b);qe(b,p,Mn),yield M._initializationPromise;const z=bn(M,m);return yield xa(z,M),z._openRedirect(M,p,"signInViaRedirect")})).apply(this,arguments)}function Bs(b,p,m){return function Mo(b,p,m){return ki.apply(this,arguments)}(b,p,m)}function ki(){return(ki=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b);qe(M.auth,p,Mn),yield M.auth._initializationPromise;const z=bn(M.auth,m);yield xa(z,M.auth);const L=yield fs(M);return z._openRedirect(M.auth,p,"reauthViaRedirect",L)})).apply(this,arguments)}function Us(b,p,m){return function kl(b,p,m){return Nu.apply(this,arguments)}(b,p,m)}function Nu(){return(Nu=(0,o.Z)(function*(b,p,m){const M=(0,j.m9)(b);qe(M.auth,p,Mn),yield M.auth._initializationPromise;const z=bn(M.auth,m);yield Re(!1,M,p.providerId),yield xa(z,M.auth);const L=yield fs(M);return z._openRedirect(M.auth,p,"linkViaRedirect",L)})).apply(this,arguments)}function Bf(b,p){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,o.Z)(function*(b,p){return yield Gn(b)._initializationPromise,L0(b,p,!1)})).apply(this,arguments)}function L0(b,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,o.Z)(function*(b,p,m=!1){const M=Gn(b),z=bn(M,p),X=yield new yd(M,z,m).execute();return X&&!m&&(delete X.user._redirectEventId,yield M._persistUserIfCurrent(X.user),yield M._setRedirectUser(null,p)),X})).apply(this,arguments)}function fs(b){return xo.apply(this,arguments)}function xo(){return(xo=(0,o.Z)(function*(b){const p=Rs(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class za{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(p,M)&&(m=!0,this.sendToConsumer(p,M),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ku(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M1(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var M;if(p.error&&!M1(p)){const z=(null===(M=p.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,z))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const M=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&M}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jc(p))}saveEventToCache(p){this.cachedEventUids.add(Jc(p)),this.lastProcessedEventTime=Date.now()}}function Jc(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function M1({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===p?.code}function Na(b){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,o.Z)(function*(b,p={}){return Et(b,"GET","/v1/projects",p)})).apply(this,arguments)}const Cd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qc=/^https?/;function O0(){return(O0=(0,o.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield Na(b);for(const m of p)try{if(Ao(m))return}catch{}Ne(b,"unauthorized-domain")})).apply(this,arguments)}function Ao(b){const p=le(),{protocol:m,hostname:M}=new URL(p);if(b.startsWith("chrome-extension://")){const X=new URL(b);return""===X.hostname&&""===M?"chrome-extension:"===m&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&X.hostname===M}if(!Qc.test(m))return!1;if(Cd.test(b))return M===b;const z=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(M)}const Xc=new St(3e4,6e4);function Vu(){const b=ti().___jsl;if(b?.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let m=0;m<b.CP.length;m++)b.CP[m]=null}let Pi=null;function ka(b){return Pi=Pi||function Do(b){return new Promise((p,m)=>{var M,z,L;function X(){Vu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Vu(),m(Ee(b,"network-request-failed"))},timeout:Xc.get()})}if(null!==(z=null===(M=ti().gapi)||void 0===M?void 0:M.iframes)&&void 0!==z&&z.Iframe)p(gapi.iframes.getContext());else{if(null===(L=ti().gapi)||void 0===L||!L.load){const ge=qi("iframefcb");return ti()[ge]=()=>{gapi.load?X():m(Ee(b,"network-request-failed"))},Gt(`https://apis.google.com/js/api.js?onload=${ge}`).catch($e=>m($e))}X()}}).catch(p=>{throw Pi=null,p})}(b),Pi}const br=new St(5e3,15e3),Ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e5(b){const p=b.config;he(p.authDomain,b,"auth-domain-config-required");const m=p.emulator?ln(p,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,M={apiKey:p.apiKey,appName:b.name,v:V.SDK_VERSION},z=Ol.get(b.config.apiHost);z&&(M.eid=z);const L=b._getFrameworks();return L.length&&(M.fw=L.join(",")),`${m}?${(0,j.xO)(M).slice(1)}`}function C(){return C=(0,o.Z)(function*(b){const p=yield ka(b),m=ti().gapi;return he(m,b,"internal-error"),p.open({where:document.body,url:e5(b),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ll,dontclear:!0},M=>new Promise(function(){var z=(0,o.Z)(function*(L,X){yield M.restyle({setHideOnLeave:!1});const ge=Ee(b,"network-request-failed"),$e=ti().setTimeout(()=>{X(ge)},br.get());function rt(){ti().clearTimeout($e),L(M)}M.ping(rt).then(rt,()=>{X(ge)})});return function(L,X){return z.apply(this,arguments)}}()))}),C.apply(this,arguments)}const D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class me{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const kt=encodeURIComponent("fac");function hr(b,p,m,M,z,L){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,o.Z)(function*(b,p,m,M,z,L){he(b.config.authDomain,b,"auth-domain-config-required"),he(b.config.apiKey,b,"invalid-api-key");const X={apiKey:b.config.apiKey,appName:b.name,authType:m,redirectUrl:M,v:V.SDK_VERSION,eventId:z};if(p instanceof Mn){p.setDefaultLanguage(b.languageCode),X.providerId=p.providerId||"",(0,j.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[yt,tn]of Object.entries(L||{}))X[yt]=tn}if(p instanceof co){const yt=p.getScopes().filter(tn=>""!==tn);yt.length>0&&(X.scopes=yt.join(","))}b.tenantId&&(X.tid=b.tenantId);const ge=X;for(const yt of Object.keys(ge))void 0===ge[yt]&&delete ge[yt];const $e=yield b._getAppCheckToken(),rt=$e?`#${kt}=${encodeURIComponent($e)}`:"";return`${P0(b)}?${(0,j.xO)(ge).slice(1)}${rt}`})).apply(this,arguments)}function P0({config:b}){return b.emulator?ln(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}const yr="webStorageSupport",dr=class H0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cs,this._completeRedirectFn=L0,this._overrideRedirectResult=Nl}_openPopup(p,m,M,z){var L=this;return(0,o.Z)(function*(){var X;ae(null===(X=L.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const ge=yield hr(p,m,M,le(),z);return function Xe(b,p,m,M=500,z=600){const L=Math.max((window.screen.availHeight-z)/2,0).toString(),X=Math.max((window.screen.availWidth-M)/2,0).toString();let ge="";const $e=Object.assign(Object.assign({},D),{width:M.toString(),height:z.toString(),top:L,left:X}),rt=(0,j.z$)().toLowerCase();m&&(ge=k(rt)?"_blank":m),P(rt)&&(p=p||"http://localhost",$e.scrollbars="yes");const yt=Object.entries($e).reduce((Pr,[gs,r0])=>`${Pr}${gs}=${r0},`,"");if(function ut(b=(0,j.z$)()){var p;return De(b)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(rt)&&"_self"!==ge)return function Ke(b,p){const m=document.createElement("a");m.href=b,m.target=p;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(M)}(p||"",ge),new me(null);const tn=window.open(p||"",ge,yt);he(tn,b,"popup-blocked");try{tn.focus()}catch{}return new me(tn)}(p,ge,Rs())})()}_openRedirect(p,m,M,z){var L=this;return(0,o.Z)(function*(){return yield L._originValidation(p),function Lr(b){ti().location.href=b}(yield hr(p,m,M,le(),z)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:z,promise:L}=this.eventManagers[m];return z?Promise.resolve(z):(ae(L,"If manager is not set, promise should be"),L)}const M=this.initAndGetManager(p);return this.eventManagers[m]={promise:M},M.catch(()=>{delete this.eventManagers[m]}),M}initAndGetManager(p){var m=this;return(0,o.Z)(function*(){const M=yield function Pl(b){return C.apply(this,arguments)}(p),z=new za(p);return M.register("authEvent",L=>(he(L?.authEvent,p,"invalid-auth-event"),{status:z.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:z},m.iframes[p._key()]=M,z})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(yr,{type:yr},z=>{var L;const X=null===(L=z?.[0])||void 0===L?void 0:L[yr];void 0!==X&&m(!!X),Ne(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Rl(b){return O0.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Nt()||O()||De()}};class Eo extends class F0{constructor(p){this.factorId=p}_process(p,m,M){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,M);case"signin":return this._finalizeSignIn(p,m.credential);default:return Je("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Eo(p)}_finalizeEnroll(p,m,M){return function m1(b,p){return Et(b,"POST","/v2/accounts/mfaEnrollment:finalize",nn(b,p))}(p,{idToken:m,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function fi(b,p){return Et(b,"POST","/v2/accounts/mfaSignIn:finalize",nn(b,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gv=(()=>{class b{constructor(){}static assertion(m){return Eo._fromCredential(m)}}return b.FACTOR_ID="phone",b})();var Lu="@firebase/auth";class Ou{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,o.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(M=>{p(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function Zf(b){(0,V._registerComponent)(new we.wA("auth",(p,{options:m})=>{const M=p.getProvider("app").getImmediate(),z=p.getProvider("heartbeat"),L=p.getProvider("app-check-internal"),{apiKey:X,authDomain:ge}=M.options;he(X&&!X.includes(":"),"invalid-api-key",{appName:M.name});const $e={apiKey:X,authDomain:ge,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$i(b)},rt=new Cs(M,z,L,$e);return function lo(b,p){const m=p?.persistence||[],M=(Array.isArray(m)?m:[m]).map(ei);p?.errorMap&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(M,p?.popupRedirectResolver)}(rt,m),rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,M)=>{p.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new we.wA("auth-internal",p=>{const m=Gn(p.getProvider("auth").getImmediate());return new Ou(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(Lu,"0.23.2",function Pu(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,V.registerVersion)(Lu,"0.23.2","esm2017")}("Browser")},2090:(bt,ze,F)=>{F.d(ze,{$s:()=>ei,BH:()=>Se,DV:()=>Jr,Dv:()=>ui,G6:()=>ln,GJ:()=>Si,L:()=>Me,LL:()=>Xt,Pz:()=>Ee,Sg:()=>qe,UG:()=>Je,UI:()=>ct,US:()=>we,Wj:()=>Un,Wl:()=>I0,Yr:()=>St,ZB:()=>ee,ZR:()=>Et,aH:()=>Ne,b$:()=>ye,cI:()=>Nn,dS:()=>Xr,eu:()=>nt,g5:()=>V,gK:()=>Qn,gQ:()=>En,h$:()=>_e,hl:()=>dn,hu:()=>j,jU:()=>ae,lb:()=>Pt,m9:()=>Gi,ne:()=>Ht,p$:()=>q,pd:()=>On,r3:()=>vr,ru:()=>le,tV:()=>W,uI:()=>he,ug:()=>Kt,vZ:()=>bi,w1:()=>Qe,w9:()=>g0,xO:()=>Qr,xb:()=>oo,z$:()=>We,zI:()=>ci,zd:()=>rr});const j=function($,G){if(!$)throw V(G)},V=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},oe=function($){const G=[];let P=0;for(let O=0;O<$.length;O++){let k=$.charCodeAt(O);k<128?G[P++]=k:k<2048?(G[P++]=k>>6|192,G[P++]=63&k|128):55296==(64512&k)&&O+1<$.length&&56320==(64512&$.charCodeAt(O+1))?(k=65536+((1023&k)<<10)+(1023&$.charCodeAt(++O)),G[P++]=k>>18|240,G[P++]=k>>12&63|128,G[P++]=k>>6&63|128,G[P++]=63&k|128):(G[P++]=k>>12|224,G[P++]=k>>6&63|128,G[P++]=63&k|128)}return G},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,G){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,O=[];for(let k=0;k<$.length;k+=3){const Q=$[k],Ae=k+1<$.length,Ye=Ae?$[k+1]:0,mt=k+2<$.length,De=mt?$[k+2]:0;let jt=(15&Ye)<<2|De>>6,Nt=63&De;mt||(Nt=64,Ae||(jt=64)),O.push(P[Q>>2],P[(3&Q)<<4|Ye>>4],P[jt],P[Nt])}return O.join("")},encodeString($,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa($):this.encodeByteArray(oe($),G)},decodeString($,G){return this.HAS_NATIVE_SUPPORT&&!G?atob($):function($){const G=[];let P=0,O=0;for(;P<$.length;){const k=$[P++];if(k<128)G[O++]=String.fromCharCode(k);else if(k>191&&k<224){const Q=$[P++];G[O++]=String.fromCharCode((31&k)<<6|63&Q)}else if(k>239&&k<365){const mt=((7&k)<<18|(63&$[P++])<<12|(63&$[P++])<<6|63&$[P++])-65536;G[O++]=String.fromCharCode(55296+(mt>>10)),G[O++]=String.fromCharCode(56320+(1023&mt))}else{const Q=$[P++],Ae=$[P++];G[O++]=String.fromCharCode((15&k)<<12|(63&Q)<<6|63&Ae)}}return G.join("")}(this.decodeStringToByteArray($,G))},decodeStringToByteArray($,G){this.init_();const P=G?this.charToByteMapWebSafe_:this.charToByteMap_,O=[];for(let k=0;k<$.length;){const Q=P[$.charAt(k++)],Ye=k<$.length?P[$.charAt(k)]:0;++k;const De=k<$.length?P[$.charAt(k)]:64;++k;const ut=k<$.length?P[$.charAt(k)]:64;if(++k,null==Q||null==Ye||null==De||null==ut)throw new ve;O.push(Q<<2|Ye>>4),64!==De&&(O.push(Ye<<4&240|De>>2),64!==ut&&O.push(De<<6&192|ut))}return O},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function($){const G=oe($);return we.encodeByteArray(G,!0)},Me=function($){return _e($).replace(/\./g,"")},W=function($){try{return we.decodeString($,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function q($){return ee(void 0,$)}function ee($,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return G}for(const P in G)!G.hasOwnProperty(P)||!Ge(P)||($[P]=ee($[P],G[P]));return $}function Ge($){return"__proto__"!==$}const be=()=>{try{return function Le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=$&&W($[1]);return G&&JSON.parse(G)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Ne=()=>{var $;return null===($=be())||void 0===$?void 0:$.config},Ee=$=>{var G;return null===(G=be())||void 0===G?void 0:G[`_${$}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,P)=>{this.resolve=G,this.reject=P})}wrapCallback(G){return(P,O)=>{P?this.reject(P):this.resolve(O),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(P):G(P,O))}}}function qe($,G){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const O=G||"demo-project",k=$.iat||0,Q=$.sub||$.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ae=Object.assign({iss:`https://securetoken.google.com/${O}`,aud:O,iat:k,exp:k+3600,auth_time:k,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},$);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(Ae)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Je(){var $;const G=null===($=be())||void 0===$?void 0:$.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ae(){return"object"==typeof self&&self.self===self}function le(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){const $=We();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function St(){return!1}function ln(){return!Je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dn(){try{return"object"==typeof indexedDB}catch{return!1}}function nt(){return new Promise(($,G)=>{try{let P=!0;const O="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(O);k.onsuccess=()=>{k.result.close(),P||self.indexedDB.deleteDatabase(O),$(!0)},k.onupgradeneeded=()=>{P=!1},k.onerror=()=>{var Q;G((null===(Q=k.error)||void 0===Q?void 0:Q.message)||"")}}catch(P){G(P)}})}function ci(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Et extends Error{constructor(G,P,O){super(P),this.code=G,this.customData=O,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}}class Xt{constructor(G,P,O){this.service=G,this.serviceName=P,this.errors=O}create(G,...P){const O=P[0]||{},k=`${this.service}/${G}`,Q=this.errors[G],Ae=Q?function Dn($,G){return $.replace(Tn,(P,O)=>{const k=G[O];return null!=k?String(k):`<${O}?>`})}(Q,O):"Error";return new Et(k,`${this.serviceName}: ${Ae} (${k}).`,O)}}const Tn=/\{\$([^}]+)}/g;function Nn($){return JSON.parse($)}function I0($){return JSON.stringify($)}const pr=function($){let G={},P={},O={},k="";try{const Q=$.split(".");G=Nn(W(Q[0])||""),P=Nn(W(Q[1])||""),k=Q[2],O=P.d||{},delete P.d}catch{}return{header:G,claims:P,data:O,signature:k}},g0=function($){const P=pr($).claims;return!!P&&"object"==typeof P&&P.hasOwnProperty("iat")},Si=function($){const G=pr($).claims;return"object"==typeof G&&!0===G.admin};function vr($,G){return Object.prototype.hasOwnProperty.call($,G)}function Jr($,G){if(Object.prototype.hasOwnProperty.call($,G))return $[G]}function oo($){for(const G in $)if(Object.prototype.hasOwnProperty.call($,G))return!1;return!0}function ct($,G,P){const O={};for(const k in $)Object.prototype.hasOwnProperty.call($,k)&&(O[k]=G.call(P,$[k],k,$));return O}function bi($,G){if($===G)return!0;const P=Object.keys($),O=Object.keys(G);for(const k of P){if(!O.includes(k))return!1;const Q=$[k],Ae=G[k];if(Jn(Q)&&Jn(Ae)){if(!bi(Q,Ae))return!1}else if(Q!==Ae)return!1}for(const k of O)if(!P.includes(k))return!1;return!0}function Jn($){return null!==$&&"object"==typeof $}function Qr($){const G=[];for(const[P,O]of Object.entries($))Array.isArray(O)?O.forEach(k=>{G.push(encodeURIComponent(P)+"="+encodeURIComponent(k))}):G.push(encodeURIComponent(P)+"="+encodeURIComponent(O));return G.length?"&"+G.join("&"):""}function rr($){const G={};return $.replace(/^\?/,"").split("&").forEach(O=>{if(O){const[k,Q]=O.split("=");G[decodeURIComponent(k)]=decodeURIComponent(Q)}}),G}function On($){const G=$.indexOf("?");if(!G)return"";const P=$.indexOf("#",G);return $.substring(G,P>0?P:void 0)}class En{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,P){P||(P=0);const O=this.W_;if("string"==typeof G)for(let ut=0;ut<16;ut++)O[ut]=G.charCodeAt(P)<<24|G.charCodeAt(P+1)<<16|G.charCodeAt(P+2)<<8|G.charCodeAt(P+3),P+=4;else for(let ut=0;ut<16;ut++)O[ut]=G[P]<<24|G[P+1]<<16|G[P+2]<<8|G[P+3],P+=4;for(let ut=16;ut<80;ut++){const jt=O[ut-3]^O[ut-8]^O[ut-14]^O[ut-16];O[ut]=4294967295&(jt<<1|jt>>>31)}let De,it,k=this.chain_[0],Q=this.chain_[1],Ae=this.chain_[2],Ye=this.chain_[3],mt=this.chain_[4];for(let ut=0;ut<80;ut++){ut<40?ut<20?(De=Ye^Q&(Ae^Ye),it=1518500249):(De=Q^Ae^Ye,it=1859775393):ut<60?(De=Q&Ae|Ye&(Q|Ae),it=2400959708):(De=Q^Ae^Ye,it=3395469782);const jt=(k<<5|k>>>27)+De+mt+it+O[ut]&4294967295;mt=Ye,Ye=Ae,Ae=4294967295&(Q<<30|Q>>>2),Q=k,k=jt}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+Q&4294967295,this.chain_[2]=this.chain_[2]+Ae&4294967295,this.chain_[3]=this.chain_[3]+Ye&4294967295,this.chain_[4]=this.chain_[4]+mt&4294967295}update(G,P){if(null==G)return;void 0===P&&(P=G.length);const O=P-this.blockSize;let k=0;const Q=this.buf_;let Ae=this.inbuf_;for(;k<P;){if(0===Ae)for(;k<=O;)this.compress_(G,k),k+=this.blockSize;if("string"==typeof G){for(;k<P;)if(Q[Ae]=G.charCodeAt(k),++Ae,++k,Ae===this.blockSize){this.compress_(Q),Ae=0;break}}else for(;k<P;)if(Q[Ae]=G[k],++Ae,++k,Ae===this.blockSize){this.compress_(Q),Ae=0;break}}this.inbuf_=Ae,this.total_+=P}digest(){const G=[];let P=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&P,P/=256;this.compress_(this.buf_);let O=0;for(let k=0;k<5;k++)for(let Q=24;Q>=0;Q-=8)G[O]=this.chain_[k]>>Q&255,++O;return G}}function Ht($,G){const P=new gt($,G);return P.subscribe.bind(P)}class gt{constructor(G,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{G(this)}).catch(O=>{this.error(O)})}next(G){this.forEachObserver(P=>{P.next(G)})}error(G){this.forEachObserver(P=>{P.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,P,O){let k;if(void 0===G&&void 0===P&&void 0===O)throw new Error("Missing Observer.");k=function Wt($,G){if("object"!=typeof $||null===$)return!1;for(const P of G)if(P in $&&"function"==typeof $[P])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:P,complete:O},void 0===k.next&&(k.next=sr),void 0===k.error&&(k.error=sr),void 0===k.complete&&(k.complete=sr);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),Q}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,G)}sendOne(G,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{P(this.observers[G])}catch(O){typeof console<"u"&&console.error&&console.error(O)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sr(){}const ui=function($,G,P,O){let k;if(O<G?k="at least "+G:O>P&&(k=0===P?"none":"no more than "+P),k)throw new Error($+" failed: Was called with "+O+(1===O?" argument.":" arguments.")+" Expects "+k+".")};function Qn($,G){return`${$} failed: ${G} argument `}function Un($,G,P,O){if((!O||P)&&"function"!=typeof P)throw new Error(Qn($,G)+"must be a valid function.")}function Pt($,G,P,O){if((!O||P)&&("object"!=typeof P||null===P))throw new Error(Qn($,G)+"must be a valid context object.")}const Xr=function($){const G=[];let P=0;for(let O=0;O<$.length;O++){let k=$.charCodeAt(O);if(k>=55296&&k<=56319){const Q=k-55296;O++,j(O<$.length,"Surrogate pair missing trail surrogate."),k=65536+(Q<<10)+($.charCodeAt(O)-56320)}k<128?G[P++]=k:k<2048?(G[P++]=k>>6|192,G[P++]=63&k|128):k<65536?(G[P++]=k>>12|224,G[P++]=k>>6&63|128,G[P++]=63&k|128):(G[P++]=k>>18|240,G[P++]=k>>12&63|128,G[P++]=k>>6&63|128,G[P++]=63&k|128)}return G},Kt=function($){let G=0;for(let P=0;P<$.length;P++){const O=$.charCodeAt(P);O<128?G++:O<2048?G+=2:O>=55296&&O<=56319?(G+=4,P++):G+=3}return G};function ei($,G=1e3,P=2){const O=G*Math.pow(P,$),k=Math.round(.5*O*(Math.random()-.5)*2);return Math.min(144e5,O+k)}function Gi($){return $&&$._delegate?$._delegate:$}},1671:(bt,ze,F)=>{var o=F(4650);let j=null;function V(){return j}const ve=new o.OlP("DocumentToken");let _e=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Me(){return(0,o.LFG)(q)}()},providedIn:"platform"}),n})();const W=new o.OlP("Location Initialized");let q=(()=>{class n extends _e{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(e){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ee()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ee()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ge(){return new q((0,o.LFG)(ve))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Le(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ie(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function lt(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(Ct)},providedIn:"root"}),n})();const be=new o.OlP("appBaseHref");let Ct=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Le(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+lt(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+lt(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+lt(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(_e),o.LFG(be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_t=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Le(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+lt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+lt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(_e),o.LFG(be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(e){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Ie(qe(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+lt(i))}normalize(e){return n.stripTrailingSlash(function Se(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,qe(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+lt(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+lt(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=lt,n.joinWithSlash=Le,n.stripTrailingSlash=Ie,n.\u0275fac=function(e){return new(e||n)(o.LFG(Ce))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ee(){return new Ne((0,o.LFG)(Ce))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}function ao(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}class Gn{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hi=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Gn(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),Ms(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Ms(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ms(n,t){n.context.$implicit=t.item}let cn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Mc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){zi("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){zi("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Mc{constructor(){this.$implicit=null,this.ngIf=null}}function zi(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let xc=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),c=-1===r.indexOf("-")?void 0:o.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,r,c)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),p0=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=i.createEmbeddedView(r,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[o.TTD]}),n})();let Qo=(()=>{class n{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw function kn(n,t){return new o.vHH(2100,!1)}();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"slice",type:n,pure:!1,standalone:!0}),n})(),wr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const a1="browser";function es(n){return"server"===n}let co=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new rl((0,o.LFG)(ve),window)}),n})();class rl{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Sr(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ds(this.window.history)||Ds(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ds(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class l1{}class N0 extends class Oc extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){j||(j=n)}(new N0)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Cu(){return Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null}();return null==e?null:function ts(n){Yt=Yt||document.createElement("a"),Yt.setAttribute("href",n);const t=Yt.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ao(document.cookie,t)}}let Yt,Ss=null;const xn=new o.OlP("TRANSITION_ID"),sa=[{provide:o.ip1,useFactory:function Pc(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=V(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[xn,ve,o.zs3],multi:!0}];let oa=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const go=new o.OlP("EventManagerPlugins");let ns=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class zs{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=V().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let is=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),rs=(()=>{class n extends is{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(po),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(po))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function po(n){V().remove(n)}const vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},p1=/%COMP%/g;function mo(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?mo(n,r,e):(r=r.replace(p1,n),e.push(r))}return e}function Fc(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Bc=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new aa(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new xu(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new ml(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=mo(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ns),o.LFG(rs),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class aa{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(vo[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(wo(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(wo(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=vo[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=vo[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Fc(i)):this.eventManager.addEventListener(t,e,Fc(i))}}function wo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class xu extends aa{constructor(t,e,i,r){super(t),this.component=i;const s=mo(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function os(n){return"_ngcontent-%COMP%".replace(p1,n)}(r+"-"+i.id),this.hostAttr=function pl(n){return"_nghost-%COMP%".replace(p1,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class ml extends aa{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=mo(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let la=(()=>{class n extends zs{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Uc=["alt","control","meta","shift"],ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ca={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Vr=(()=>{class n extends zs{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),Uc.forEach(w=>{const y=i.indexOf(w);y>-1&&(i.splice(y,1),c+=w+".")}),c+=s,0!=i.length||0===s.length)return null;const g={};return g.domEventName=r,g.fullKey=c,g}static matchEventFullKeyCode(e,i){let r=ks[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Uc.forEach(c=>{c!==r&&(0,ca[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const da=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:a1},{provide:o.g9A,useValue:function _l(){N0.makeCurrent()},multi:!0},{provide:ve,useFactory:function ha(){return(0,o.RDi)(document),document},deps:[]}]),k0=new o.OlP(""),bl=[{provide:o.rWj,useClass:class Hc{addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(g){c=c||g,s--,0==s&&i(c)};r.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?V().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],yl=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function ua(){return new o.qLn},deps:[]},{provide:go,useClass:la,multi:!0,deps:[ve,o.R0b,o.Lbi]},{provide:go,useClass:Vr,multi:!0,deps:[ve]},{provide:Bc,useClass:Bc,deps:[ns,rs,o.AFp]},{provide:o.FYo,useExisting:Bc},{provide:is,useExisting:rs},{provide:rs,useClass:rs,deps:[ve]},{provide:ns,useClass:ns,deps:[go,o.R0b]},{provide:l1,useClass:oa,deps:[]},[]];let jc=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:xn,useExisting:o.AFp},sa]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(k0,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...yl,...bl],imports:[wr,o.hGG]}),n})(),cs=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function fa(){return new cs((0,o.LFG)(ve))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var gn=F(8996),Rn=F(9751);const{isArray:qc}=Array,{getPrototypeOf:b1,prototype:Yi,keys:_0}=Object;function va(n){if(1===n.length){const t=n[0];if(qc(t))return{args:t,keys:null};if(function bo(n){return n&&"object"==typeof n&&b1(n)===Yi}(t)){const e=_0(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var lr=F(8421),R0=F(3269),In=F(5403),ht=F(4004);const{isArray:Wc}=Array;function yo(n){return(0,ht.U)(t=>function Iu(n,t){return Wc(t)?n(...t):n(t)}(n,t))}function cr(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}let V0=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),us=(()=>{class n extends V0{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const ur=new o.OlP("NgValueAccessor"),El={provide:ur,useExisting:(0,o.Gpc)(()=>Ls),multi:!0},_a=new o.OlP("CompositionEventMode");let Ls=(()=>{class n extends V0{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wa(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(_a,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([El]),o.qOj]}),n})();const bn=new o.OlP("NgValidators"),Or=new o.OlP("NgAsyncValidators");function Ma(n){return null!=n}function hs(n){return(0,o.QGY)(n)?(0,gn.D)(n):n}function Kc(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function ds(n,t){return t.map(e=>e(n))}function zl(n){return n.map(t=>function yd(n){return!n.validate}(t)?t:e=>t.validate(e))}function xa(n){return null!=n?function b0(n){if(!n)return null;const t=n.filter(Ma);return 0==t.length?null:function(e){return Kc(ds(e,t))}}(zl(n)):null}function Yc(n){return null!=n?function Hs(n){if(!n)return null;const t=n.filter(Ma);return 0==t.length?null:function(e){return function ma(...n){const t=(0,R0.jO)(n),{args:e,keys:i}=va(n),r=new Rn.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let g=c,w=c;for(let y=0;y<c;y++){let A=!1;(0,lr.Xf)(e[y]).subscribe((0,In.x)(s,I=>{A||(A=!0,w--),d[y]=I},()=>g--,void 0,()=>{(!g||!A)&&(w||s.next(i?cr(i,d):d),s.complete())}))}});return t?r.pipe(yo(t)):r}(ds(e,t).map(hs)).pipe((0,ht.U)(Kc))}}(zl(n)):null}function Nl(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Da(n){return n?Array.isArray(n)?n:[n]:[]}function Ta(n,t){return Array.isArray(n)?n.includes(t):n===t}function C1(n,t){const e=Da(t);return Da(n).forEach(r=>{Ta(e,r)||e.push(r)}),e}function Bs(n,t){return Da(t).filter(e=>!Ta(n,e))}class Mo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=xa(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Yc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ki extends Mo{get formDirective(){return null}get path(){return null}}class Us extends Mo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kl{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ea=(()=>{class n extends kl{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Us,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})(),L0=(()=>{class n extends kl{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ki,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o.qOj]}),n})();const Pi="VALID",ka="INVALID",br="PENDING",To="DISABLED";function Vl(n){return(Pl(n)?n.validators:n)||null}function Ll(n){return Array.isArray(n)?xa(n):n||null}function Ol(n,t){return(Pl(t)?t.asyncValidators:n)||null}function e5(n){return Array.isArray(n)?Yc(n):n||null}function Pl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function C(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[e])throw new o.vHH(1001,"")}function D(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new o.vHH(1002,"")})}class S{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Ll(this._rawValidators),this._composedAsyncValidatorFn=e5(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Pi}get invalid(){return this.status===ka}get pending(){return this.status==br}get disabled(){return this.status===To}get enabled(){return this.status!==To}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Ll(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=e5(t)}addValidators(t){this.setValidators(C1(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(C1(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Bs(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Bs(t,this._rawAsyncValidators))}hasValidator(t){return Ta(this._rawValidators,t)}hasAsyncValidator(t){return Ta(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=br,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=To,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Pi,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pi||this.status===br)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?To:Pi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=br,this._hasOwnPendingAsyncValidator=!0;const e=hs(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?To:this.errors?ka:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(br)?br:this._anyControlsHaveStatus(ka)?ka:Pi}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Pl(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class B extends S{constructor(t,e,i){super(Vl(e),Ol(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){D(this,0,t),Object.keys(t).forEach(i=>{C(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class me extends B{}function dt(n,t){Kn(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function yr(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&dr(n,t)})}(n,t),function F0(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function H0(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&dr(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function hr(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function kt(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Kn(n,t){const e=function Fs(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(Nl(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function Aa(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(Nl(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();kt(t._rawValidators,r),kt(t._rawAsyncValidators,r)}function dr(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const jf={provide:ki,useExisting:(0,o.Gpc)(()=>B0)},Ra=(()=>Promise.resolve())();let B0=(()=>{class n extends ki{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new B({},xa(e),Yc(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Ra.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),dt(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Ra.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Ra.then(()=>{const i=this._findContainer(e.path),r=new B({});(function Eo(n,t){Kn(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Ra.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Ra.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function Ou(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(bn,10),o.Y36(Or,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([jf]),o.qOj]}),n})();function Gf(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function b(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const p=class extends S{constructor(t=null,e,i){super(Vl(e),Ol(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pl(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=b(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Gf(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Gf(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){b(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},tn={provide:Us,useExisting:(0,o.Gpc)(()=>gs)},Pr=(()=>Promise.resolve())();let gs=(()=>{class n extends Us{constructor(e,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new p,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Pu(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Ls?e=s:function Uf(n){return Object.getPrototypeOf(n.constructor)===us}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Lu(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){dt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Pr.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,o.D6c)(i);Pr.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function Ke(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ki,9),o.Y36(bn,10),o.Y36(Or,10),o.Y36(ur,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([tn]),o.qOj,o.TTD]}),n})(),r0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),n5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Bu=new o.OlP("NgModelWithFormControlWarning"),mv={provide:ur,useExisting:(0,o.Gpc)(()=>Sd),multi:!0};function Id(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Sd=(()=>{class n extends us{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=Id(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function Sb(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([mv]),o.qOj]}),n})(),qf=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Id(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Sd,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const r5={provide:ur,useExisting:(0,o.Gpc)(()=>Wf),multi:!0};function wv(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Wf=(()=>{class n extends us{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,c)=>{s._setSelected(r.indexOf(c.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const c=s;for(let d=0;d<c.length;d++){const w=this._getOptionValue(c[d].value);r.push(w)}}else{const c=i.options;for(let d=0;d<c.length;d++){const g=c[d];if(g.selected){const w=this._getOptionValue(g.value);r.push(w)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function zb(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([r5]),o.qOj]}),n})(),zd=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(wv(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(wv(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Wf,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Ob=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[n5]}),n})(),Pb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ob]}),n})(),kd=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Bu,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ob]}),n})();class Hb extends S{constructor(t,e,i){super(Vl(e),Ol(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){D(this,0,t),t.forEach((i,r)=>{C(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function Fb(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let ZN=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return Fb(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new B(r,s)}record(e,i=null){const r=this._reduceControls(e);return new me(r,i)}control(e,i,r){let s={};return this.useNonNullable?(Fb(i)?s=i:(s.validators=i,s.asyncValidators=r),new p(e,{...s,nonNullable:!0})):new p(e,i,r)}array(e,i,r){const s=e.map(c=>this._createControl(c));return new Hb(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof p||e instanceof S?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:kd}),n})();function pt(...n){const t=(0,R0.yG)(n);return(0,gn.D)(n,t)}var Qi=F(5577),Zs=F(576);function Io(n,t){return(0,Zs.m)(t)?(0,Qi.z)(n,t,1):(0,Qi.z)(n,1)}var Hi=F(4482);function Hn(n,t){return(0,Hi.e)((e,i)=>{let r=0;e.subscribe((0,In.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}class a5{}class Dv{}class La{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof La?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new La;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof La?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Tv{encodeKey(t){return Ev(t)}encodeValue(t){return Ev(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Zb=/%(\d[a-f0-9])/gi,jb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ev(n){return encodeURIComponent(n).replace(Zb,(t,e)=>jb[e]??t)}function l5(n){return`${n}`}class A1{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Tv,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ub(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],g=e.get(c)||[];g.push(d),e.set(c,g)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(l5):[l5(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new A1({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(l5(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(l5(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Gb{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Sv(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zv(n){return typeof Blob<"u"&&n instanceof Blob}function Hr(n){return typeof FormData<"u"&&n instanceof FormData}class c5{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Iv(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new La),this.context||(this.context=new Gb),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new A1,this.urlWithParams=e}serializeBody(){return null===this.body?null:Sv(this.body)||zv(this.body)||Hr(this.body)||function Qf(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof A1?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Hr(this.body)?null:zv(this.body)?this.body.type||null:Sv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof A1?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let g=t.headers||this.headers,w=t.params||this.params;const y=t.context??this.context;return void 0!==t.setHeaders&&(g=Object.keys(t.setHeaders).reduce((A,I)=>A.set(I,t.setHeaders[I]),g)),t.setParams&&(w=Object.keys(t.setParams).reduce((A,I)=>A.set(I,t.setParams[I]),w)),new c5(e,i,s,{params:w,headers:g,context:y,reportProgress:d,responseType:r,withCredentials:c})}}var Mi=(()=>((Mi=Mi||{})[Mi.Sent=0]="Sent",Mi[Mi.UploadProgress=1]="UploadProgress",Mi[Mi.ResponseHeader=2]="ResponseHeader",Mi[Mi.DownloadProgress=3]="DownloadProgress",Mi[Mi.Response=4]="Response",Mi[Mi.User=5]="User",Mi))();class fr{constructor(t,e=200,i="OK"){this.headers=t.headers||new La,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class $l extends fr{constructor(t={}){super(t),this.type=Mi.ResponseHeader}clone(t={}){return new $l({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ju extends fr{constructor(t={}){super(t),this.type=Mi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ju({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Nv extends fr{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Xf(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Rd=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof c5)s=e;else{let g,w;g=r.headers instanceof La?r.headers:new La(r.headers),r.params&&(w=r.params instanceof A1?r.params:new A1({fromObject:r.params})),s=new c5(e,i,void 0!==r.body?r.body:null,{headers:g,context:r.context,params:w,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=pt(s).pipe(Io(g=>this.handler.handle(g)));if(e instanceof c5||"events"===r.observe)return c;const d=c.pipe(Hn(g=>g instanceof ju));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,ht.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return d.pipe((0,ht.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return d.pipe((0,ht.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return d.pipe((0,ht.U)(g=>g.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new A1).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Xf(r,i))}post(e,i,r={}){return this.request("POST",e,Xf(r,i))}put(e,i,r={}){return this.request("PUT",e,Xf(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(a5))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class kv{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const eg=new o.OlP("HTTP_INTERCEPTORS");let $b=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Wb=/^\)\]\}',?\n/;let Kb=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Rn.y(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((N,Z)=>r.setRequestHeader(N,Z.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const N=e.detectContentTypeHeader();null!==N&&r.setRequestHeader("Content-Type",N)}if(e.responseType){const N=e.responseType.toLowerCase();r.responseType="json"!==N?N:"text"}const s=e.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const N=r.statusText||"OK",Z=new La(r.getAllResponseHeaders()),J=function XN(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return c=new $l({headers:Z,status:r.status,statusText:N,url:J}),c},g=()=>{let{headers:N,status:Z,statusText:J,url:te}=d(),xe=null;204!==Z&&(xe=typeof r.response>"u"?r.responseText:r.response),0===Z&&(Z=xe?200:0);let ke=Z>=200&&Z<300;if("json"===e.responseType&&"string"==typeof xe){const He=xe;xe=xe.replace(Wb,"");try{xe=""!==xe?JSON.parse(xe):null}catch(Be){xe=He,ke&&(ke=!1,xe={error:Be,text:xe})}}ke?(i.next(new ju({body:xe,headers:N,status:Z,statusText:J,url:te||void 0})),i.complete()):i.error(new Nv({error:xe,headers:N,status:Z,statusText:J,url:te||void 0}))},w=N=>{const{url:Z}=d(),J=new Nv({error:N,status:r.status||0,statusText:r.statusText||"Unknown Error",url:Z||void 0});i.error(J)};let y=!1;const A=N=>{y||(i.next(d()),y=!0);let Z={type:Mi.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(Z.total=N.total),"text"===e.responseType&&!!r.responseText&&(Z.partialText=r.responseText),i.next(Z)},I=N=>{let Z={type:Mi.UploadProgress,loaded:N.loaded};N.lengthComputable&&(Z.total=N.total),i.next(Z)};return r.addEventListener("load",g),r.addEventListener("error",w),r.addEventListener("timeout",w),r.addEventListener("abort",w),e.reportProgress&&(r.addEventListener("progress",A),null!==s&&r.upload&&r.upload.addEventListener("progress",I)),r.send(s),i.next({type:Mi.Sent}),()=>{r.removeEventListener("error",w),r.removeEventListener("abort",w),r.removeEventListener("load",g),r.removeEventListener("timeout",w),e.reportProgress&&(r.removeEventListener("progress",A),null!==s&&r.upload&&r.upload.removeEventListener("progress",I)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(l1))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Vd=new o.OlP("XSRF_COOKIE_NAME"),Rv=new o.OlP("XSRF_HEADER_NAME");class js{}let tg=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ao(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve),o.LFG(o.Lbi),o.LFG(Vd))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),$u=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(js),o.LFG(Rv))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Yb=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(eg,[]);this.chain=i.reduceRight((r,s)=>new kv(r,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Dv),o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),qu=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:$u,useClass:$b}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:Vd,useValue:e.cookieName}:[],e.headerName?{provide:Rv,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[$u,{provide:eg,useExisting:$u,multi:!0},{provide:js,useClass:tg},{provide:Vd,useValue:"XSRF-TOKEN"},{provide:Rv,useValue:"X-XSRF-TOKEN"}]}),n})(),Qb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Rd,{provide:a5,useClass:Yb},Kb,{provide:Dv,useExisting:Kb}],imports:[qu.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const ng=["*"];class Ld{constructor(t){this.icons=t}}let u5=(()=>{class n{constructor(e,i,r){this.elem=e,this.changeDetector=i,this.icons=r}ngOnChanges(e){const r=Object.assign({},...this.icons)[function nk(n){return n.toLowerCase().replace(/(?:^\w|[A-Z]|\b\w)/g,t=>t.toUpperCase()).replace(/[-_]/g,"")}(e.name.currentValue)]||"";r||console.warn(`Icon not found: ${e.name.currentValue}\nRefer to documentation on https://github.com/biutas/ng-bootstrap-icons/issues`),this.elem.nativeElement.innerHTML=r,this.changeDetector.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Ld))},n.\u0275cmp=o.Xpm({type:n,selectors:[["bt-icon"],["bootstrap-icon"],["bi"]],inputs:{name:"name"},features:[o.TTD],ngContentSelectors:ng,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;fill:none;stroke-linecap:round;stroke-linejoin:round}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:100%!important;height:100%!important}"]}),n})(),Od=(()=>{class n{constructor(e){if(this.icons=e,!this.icons)throw new Error("No icon provided. Make sure to use 'BootstrapIconsModule.pick({ ... })' when importing the module\nRefer to documentation on https://github.com/biutas/ng-bootstrap-icons/issues")}static pick(e){return{ngModule:n,providers:[{provide:Ld,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ld,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var Fi=F(7579);class Br extends Fi.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const aw=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var y2=F(4671),Fre=F(9672);function lw(...n){const t=(0,R0.yG)(n),e=(0,R0.jO)(n),{args:i,keys:r}=va(n);if(0===i.length)return(0,gn.D)([],t);const s=new Rn.y(function Bre(n,t,e=y2.y){return i=>{KR(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let g=0;g<r;g++)KR(t,()=>{const w=(0,gn.D)(n[g],t);let y=!1;w.subscribe((0,In.x)(i,A=>{s[g]=A,y||(y=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>cr(r,c):y2.y));return e?s.pipe(yo(e)):s}function KR(n,t,e){n?(0,Fre.f)(e,n,t):t()}var Zp=F(8189);function jp(...n){return function Ure(){return(0,Zp.J)(1)}()((0,gn.D)(n,(0,R0.yG)(n)))}function YR(n){return new Rn.y(t=>{(0,lr.Xf)(n()).subscribe(t)})}var Zre=F(9635);function Gp(n,t){const e=(0,Zs.m)(n)?n:()=>n,i=r=>r.error(e());return new Rn.y(t?r=>t.schedule(i,0,r):i)}var ec=F(515),JR=F(727);function mD(){return(0,Hi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,In.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class QR extends Rn.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Hi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new JR.w0;const e=this.getSubject();t.add(this.source.subscribe((0,In.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=JR.w0.EMPTY)}return t}refCount(){return mD()(this)}}function Ri(n,t){return(0,Hi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,In.x)(i,g=>{r?.unsubscribe();let w=0;const y=s++;(0,lr.Xf)(n(g,y)).subscribe(r=(0,In.x)(i,A=>i.next(t?t(g,A,y,w++):A),()=>{r=null,d()}))},()=>{c=!0,d()}))})}function Ur(n){return n<=0?()=>ec.E:(0,Hi.e)((t,e)=>{let i=0;t.subscribe((0,In.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function ch(...n){const t=(0,R0.yG)(n);return(0,Hi.e)((e,i)=>{(t?jp(n,e,t):jp(n,e)).subscribe(i)})}function cw(n){return(0,Hi.e)((t,e)=>{let i=!1;t.subscribe((0,In.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function XR(n=jre){return(0,Hi.e)((t,e)=>{let i=!1;t.subscribe((0,In.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function jre(){return new aw}function tc(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Hn((r,s)=>n(r,s,i)):y2.y,Ur(1),e?cw(t):XR(()=>new aw))}var Cr=F(8505);function S5(n){return(0,Hi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,In.x)(e,void 0,void 0,c=>{s=(0,lr.Xf)(n(c,S5(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Gre(n,t,e,i,r){return(s,c)=>{let d=e,g=t,w=0;s.subscribe((0,In.x)(c,y=>{const A=w++;g=d?n(g,y,A):(d=!0,y),i&&c.next(g)},r&&(()=>{d&&c.next(g),c.complete()})))}}function uh(n,t){return(0,Hi.e)(Gre(n,t,arguments.length>=2,!0))}function wD(n){return n<=0?()=>ec.E:(0,Hi.e)((t,e)=>{let i=[];t.subscribe((0,In.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function eV(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Hn((r,s)=>n(r,s,i)):y2.y,wD(1),e?cw(t):XR(()=>new aw))}function tV(n){return(0,ht.U)(()=>n)}function _D(n){return(0,Hi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const sn="primary",$p=Symbol("RouteTitle");class qre{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function C2(n){return new qre(n)}function Wre(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function S1(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!nV(n[r],t[r]))return!1;return!0}function nV(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function iV(n){return Array.prototype.concat.apply([],n)}function rV(n){return n.length>0?n[n.length-1]:null}function o0(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function z5(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,gn.D)(Promise.resolve(n)):pt(n)}const Jre={exact:function aV(n,t,e){if(!dh(n.segments,t.segments)||!uw(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!aV(n.children[i],t.children[i],e))return!1;return!0},subset:lV},sV={exact:function Qre(n,t){return S1(n,t)},subset:function Xre(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>nV(n[e],t[e]))},ignored:()=>!0};function oV(n,t,e){return Jre[e.paths](n.root,t.root,e.matrixParams)&&sV[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function lV(n,t,e){return cV(n,t,t.segments,e)}function cV(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!dh(r,e)||t.hasChildren()||!uw(r,e,i))}if(n.segments.length===e.length){if(!dh(n.segments,e)||!uw(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!lV(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(dh(n.segments,r)&&uw(n.segments,r,i)&&n.children[sn])&&cV(n.children[sn],t,s,i)}}function uw(n,t,e){return t.every((i,r)=>sV[e](n[r].parameters,i.parameters))}class hh{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=C2(this.queryParams)),this._queryParamMap}toString(){return n0e.serialize(this)}}class un{constructor(t,e){this.segments=t,this.children=e,this.parent=null,o0(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hw(this)}}class qp{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=C2(this.parameters)),this._parameterMap}toString(){return fV(this)}}function dh(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let uV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new yD},providedIn:"root"}),n})();class yD{parse(t){const e=new h0e(t);return new hh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Wp(t.root,!0)}`,i=function s0e(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${dw(e)}=${dw(r)}`).join("&"):`${dw(e)}=${dw(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function i0e(n){return encodeURI(n)}(t.fragment)}`:""}`}}const n0e=new yD;function hw(n){return n.segments.map(t=>fV(t)).join("/")}function Wp(n,t){if(!n.hasChildren())return hw(n);if(t){const e=n.children[sn]?Wp(n.children[sn],!1):"",i=[];return o0(n.children,(r,s)=>{s!==sn&&i.push(`${s}:${Wp(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function t0e(n,t){let e=[];return o0(n.children,(i,r)=>{r===sn&&(e=e.concat(t(i,r)))}),o0(n.children,(i,r)=>{r!==sn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===sn?[Wp(n.children[sn],!1)]:[`${r}:${Wp(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[sn]?`${hw(n)}/${e[0]}`:`${hw(n)}/(${e.join("//")})`}}function hV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dw(n){return hV(n).replace(/%3B/gi,";")}function CD(n){return hV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fw(n){return decodeURIComponent(n)}function dV(n){return fw(n.replace(/\+/g,"%20"))}function fV(n){return`${CD(n.path)}${function r0e(n){return Object.keys(n).map(t=>`;${CD(t)}=${CD(n[t])}`).join("")}(n.parameters)}`}const o0e=/^[^\/()?;=#]+/;function gw(n){const t=n.match(o0e);return t?t[0]:""}const a0e=/^[^=?&#]+/,c0e=/^[^&#]+/;class h0e{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[sn]=new un(t,e)),i}parseSegment(){const t=gw(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new o.vHH(4009,!1);return this.capture(t),new qp(fw(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=gw(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=gw(this.remaining);r&&(i=r,this.capture(i))}t[fw(e)]=fw(i)}parseQueryParam(t){const e=function l0e(n){const t=n.match(a0e);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function u0e(n){const t=n.match(c0e);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=dV(e),s=dV(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=gw(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new o.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=sn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[sn]:new un([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new o.vHH(4011,!1)}}function MD(n){return n.segments.length>0?new un([],{[sn]:n}):n}function pw(n){const t={};for(const i of Object.keys(n.children)){const s=pw(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function d0e(n){if(1===n.numberOfChildren&&n.children[sn]){const t=n.children[sn];return new un(n.segments.concat(t.segments),t.children)}return n}(new un(n.segments,t))}function fh(n){return n instanceof hh}function p0e(n,t,e,i,r){if(0===e.length)return M2(t.root,t.root,t.root,i,r);const s=function vV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pV(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return o0(s.outlets,(g,w)=>{d[w]="string"==typeof g?g.split("/"):g}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new pV(e,t,i)}(e);return s.toRoot()?M2(t.root,t.root,new un([],{}),i,r):function c(g){const w=function m0e(n,t,e,i){if(n.isAbsolute)return new x2(t.root,!0,0);if(-1===i)return new x2(e,e===t.root,0);return function mV(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new o.vHH(4005,!1);r=i.segments.length}return new x2(i,!1,r-s)}(e,i+(Kp(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,g),y=w.processChildren?Jp(w.segmentGroup,w.index,s.commands):AD(w.segmentGroup,w.index,s.commands);return M2(t.root,w.segmentGroup,y,i,r)}(n.snapshot?._lastPathIndex)}function Kp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yp(n){return"object"==typeof n&&null!=n&&n.outlets}function M2(n,t,e,i,r){let c,s={};i&&o0(i,(g,w)=>{s[w]=Array.isArray(g)?g.map(y=>`${y}`):`${g}`}),c=n===t?e:gV(n,t,e);const d=MD(pw(c));return new hh(d,s,r)}function gV(n,t,e){const i={};return o0(n.children,(r,s)=>{i[s]=r===t?e:gV(r,t,e)}),new un(n.segments,i)}class pV{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Kp(i[0]))throw new o.vHH(4003,!1);const r=i.find(Yp);if(r&&r!==rV(i))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class x2{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function AD(n,t,e){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return Jp(n,t,e);const i=function _0e(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(Yp(d))break;const g=`${d}`,w=i<e.length-1?e[i+1]:null;if(r>0&&void 0===g)break;if(g&&w&&"object"==typeof w&&void 0===w.outlets){if(!_V(g,w,c))return s;i+=2}else{if(!_V(g,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new un(n.segments.slice(0,i.pathIndex),{});return s.children[sn]=new un(n.segments.slice(i.pathIndex),n.children),Jp(s,0,r)}return i.match&&0===r.length?new un(n.segments,{}):i.match&&!n.hasChildren()?DD(n,t,e):i.match?Jp(n,0,r):DD(n,t,e)}function Jp(n,t,e){if(0===e.length)return new un(n.segments,{});{const i=function w0e(n){return Yp(n[0])?n[0].outlets:{[sn]:n}}(e),r={};return o0(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=AD(n.children[c],t,s))}),o0(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new un(n.segments,r)}}function DD(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Yp(s)){const g=b0e(s.outlets);return new un(i,g)}if(0===r&&Kp(e[0])){i.push(new qp(n.segments[t].path,wV(e[0]))),r++;continue}const c=Yp(s)?s.outlets[sn]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&Kp(d)?(i.push(new qp(c,wV(d))),r+=2):(i.push(new qp(c,{})),r++)}return new un(i,{})}function b0e(n){const t={};return o0(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=DD(new un([],{}),0,e))}),t}function wV(n){const t={};return o0(n,(e,i)=>t[i]=`${e}`),t}function _V(n,t,e){return n==e.path&&S1(t,e.parameters)}class nc{constructor(t,e){this.id=t,this.url=e}}class TD extends nc{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ic extends nc{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vw extends nc{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bV extends nc{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class y0e extends nc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C0e extends nc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M0e extends nc{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class x0e extends nc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class A0e extends nc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D0e{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T0e{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class E0e{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I0e{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S0e{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z0e{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yV{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class CV{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ED(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=ED(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ID(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return ID(t,this._root).map(e=>e.value)}}function ED(n,t){if(n===t.value)return t;for(const e of t.children){const i=ED(n,e);if(i)return i}return null}function ID(n,t){if(n===t.value)return[t];for(const e of t.children){const i=ID(n,e);if(i.length)return i.unshift(t),i}return[]}class rc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function A2(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class MV extends CV{constructor(t,e){super(t),this.snapshot=e,SD(this,t)}toString(){return this.snapshot.toString()}}function xV(n,t){const e=function k0e(n,t){const c=new mw([],{},{},"",{},sn,t,null,n.root,-1,{});return new DV("",new rc(c,[]))}(n,t),i=new Br([new qp("",{})]),r=new Br({}),s=new Br({}),c=new Br({}),d=new Br(""),g=new gh(i,r,c,d,s,sn,t,e.root);return g.snapshot=e.root,new MV(new rc(g,[]),e)}class gh{constructor(t,e,i,r,s,c,d,g){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,ht.U)(w=>w[$p]))??pt(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(t=>C2(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(t=>C2(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function AV(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function R0e(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class mw{constructor(t,e,i,r,s,c,d,g,w,y,A,I){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.[$p],this.routeConfig=g,this._urlSegment=w,this._lastPathIndex=y,this._correctedLastPathIndex=I??y,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=C2(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=C2(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class DV extends CV{constructor(t,e){super(e),this.url=t,SD(this,e)}toString(){return TV(this._root)}}function SD(n,t){t.value._routerState=n,t.children.forEach(e=>SD(n,e))}function TV(n){const t=n.children.length>0?` { ${n.children.map(TV).join(", ")} } `:"";return`${n.value}${t}`}function zD(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,S1(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),S1(t.params,e.params)||n.params.next(e.params),function Kre(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!S1(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),S1(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ND(n,t){const e=S1(n.params,t.params)&&function e0e(n,t){return dh(n,t)&&n.every((e,i)=>S1(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||ND(n.parent,t.parent))}function Qp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function L0e(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Qp(n,i,r);return Qp(n,i)})}(n,t,e);return new rc(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>Qp(n,d)),c}}const i=function O0e(n){return new gh(new Br(n.url),new Br(n.params),new Br(n.queryParams),new Br(n.fragment),new Br(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Qp(n,s));return new rc(i,r)}}const kD="ngNavigationCancelingError";function EV(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=fh(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=IV(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function IV(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[kD]=!0,i.cancellationCode=t,e&&(i.url=e),i}function SV(n){return zV(n)&&fh(n.url)}function zV(n){return n&&n[kD]}class P0e{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Xp,this.attachRef=null}}let Xp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new P0e,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ww=!1;let RD=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=r||sn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,ww);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,ww);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,ww);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new o.vHH(4013,ww);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,g=new H0e(e,d,r.injector);if(i&&function F0e(n){return!!n.resolveComponentFactory}(i)){const w=i.resolveComponentFactory(c);this.activated=r.createComponent(w,r.length,g)}else this.activated=r.createComponent(c,{index:r.length,injector:g,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Xp),o.Y36(o.s_b),o.$8M("name"),o.Y36(o.sBO),o.Y36(o.lqb))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class H0e{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===gh?this.route:t===Xp?this.childContexts:this.parent.get(t,e)}}let VD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[RD],encapsulation:2}),n})();function NV(n,t){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function OD(n){const t=n.children&&n.children.map(OD),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==sn&&(e.component=VD),e}function Vo(n){return n.outlet||sn}function kV(n,t){const e=n.filter(i=>Vo(i)===t);return e.push(...n.filter(i=>Vo(i)!==t)),e}function e3(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class G0e{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),zD(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=A2(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),o0(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=A2(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=A2(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=A2(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new z0e(s.value.snapshot))}),t.children.length&&this.forwardEvent(new I0e(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(zD(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),zD(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=e3(r.snapshot),g=d?.get(o._Vd)??null;c.attachRef=null,c.route=r,c.resolver=g,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class RV{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class _w{constructor(t,e){this.component=t,this.route=e}}function $0e(n,t,e){const i=n._root;return t3(i,t?t._root:null,e,[i.value])}function D2(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,o.Z0I)(n)?t.get(n):n:i}function t3(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=A2(t);return n.children.forEach(c=>{(function W0e(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const g=function K0e(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!dh(n.url,t.url);case"pathParamsOrQueryParamsChange":return!dh(n.url,t.url)||!S1(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ND(n,t)||!S1(n.queryParams,t.queryParams);default:return!ND(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new RV(i)):(s.data=c.data,s._resolvedData=c._resolvedData),t3(n,t,s.component?d?d.children:null:e,i,r),g&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new _w(d.outlet.component,c))}else c&&n3(t,d,r),r.canActivateChecks.push(new RV(i)),t3(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),o0(s,(c,d)=>n3(c,e.getContext(d),r)),r}function n3(n,t,e){const i=A2(n),r=n.value;o0(i,(s,c)=>{n3(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new _w(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function r3(n){return"function"==typeof n}function PD(n){return n instanceof aw||"EmptyError"===n?.name}const bw=Symbol("INITIAL_VALUE");function T2(){return Ri(n=>lw(n.map(t=>t.pipe(Ur(1),ch(bw)))).pipe((0,ht.U)(t=>{for(const e of t)if(!0!==e){if(e===bw)return bw;if(!1===e||e instanceof hh)return e}return!0}),Hn(t=>t!==bw),Ur(1)))}function VV(n){return(0,Zre.z)((0,Cr.b)(t=>{if(fh(t))throw EV(0,t)}),(0,ht.U)(t=>!0===t))}const HD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LV(n,t,e,i,r){const s=FD(n,t,e);return s.matched?function dse(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?pt(r.map(c=>{const d=D2(c,n);return z5(function tse(n){return n&&r3(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(T2(),VV()):pt(!0)}(i=NV(t,i),t,e).pipe((0,ht.U)(c=>!0===c?s:{...HD})):pt(s)}function FD(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...HD}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Wre)(e,n,t);if(!r)return{...HD};const s={};o0(r.posParams,(d,g)=>{s[g]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function yw(n,t,e,i,r="corrected"){if(e.length>0&&function pse(n,t,e){return e.some(i=>Cw(n,t,i)&&Vo(i)!==sn)}(n,e,i)){const c=new un(t,function gse(n,t,e,i){const r={};r[sn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Vo(s)!==sn){const c=new un([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Vo(s)]=c}return r}(n,t,i,new un(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function vse(n,t,e){return e.some(i=>Cw(n,t,i))}(n,e,i)){const c=new un(n.segments,function fse(n,t,e,i,r,s){const c={};for(const d of i)if(Cw(n,e,d)&&!r[Vo(d)]){const g=new un([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[Vo(d)]=g}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new un(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Cw(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function OV(n,t,e,i){return!!(Vo(n)===i||i!==sn&&Cw(t,e,n))&&("**"===n.path||FD(t,n,e).matched)}function PV(n,t,e){return 0===t.length&&!n.children[e]}const Mw=!1;class xw{constructor(t){this.segmentGroup=t||null}}class HV{constructor(t){this.urlTree=t}}function s3(n){return Gp(new xw(n))}function FV(n){return Gp(new HV(n))}class bse{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=yw(this.urlTree.root,[],[],this.config).segmentGroup,e=new un(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,sn).pipe((0,ht.U)(s=>this.createUrlTree(pw(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(S5(s=>{if(s instanceof HV)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof xw?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,sn).pipe((0,ht.U)(r=>this.createUrlTree(pw(r),t.queryParams,t.fragment))).pipe(S5(r=>{throw r instanceof xw?this.noMatchError(r):r}))}noMatchError(t){return new o.vHH(4002,Mw)}createUrlTree(t,e,i){const r=MD(t);return new hh(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,ht.U)(s=>new un([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,gn.D)(r).pipe(Io(s=>{const c=i.children[s],d=kV(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,ht.U)(g=>({segment:g,outlet:s})))}),uh((s,c)=>(s[c.outlet]=c.segment,s),{}),eV())}expandSegment(t,e,i,r,s,c){return(0,gn.D)(i).pipe(Io(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(S5(w=>{if(w instanceof xw)return pt(null);throw w}))),tc(d=>!!d),S5((d,g)=>{if(PD(d))return PV(e,r,s)?pt(new un([],{})):s3(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return OV(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):s3(e):s3(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?FV(s):this.lineralizeSegments(i,s).pipe((0,Qi.z)(c=>{const d=new un(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:g,remainingSegments:w,positionalParamSegments:y}=FD(e,r,s);if(!d)return s3(e);const A=this.applyRedirectCommands(g,r.redirectTo,y);return r.redirectTo.startsWith("/")?FV(A):this.lineralizeSegments(r,A).pipe((0,Qi.z)(I=>this.expandSegment(t,e,i,I.concat(w),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=NV(i,t),i.loadChildren?(i._loadedRoutes?pt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,ht.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new un(r,{})))):pt(new un(r,{}))):LV(e,i,r,t).pipe(Ri(({matched:c,consumedSegments:d,remainingSegments:g})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,Qi.z)(y=>{const A=y.injector??t,I=y.routes,{segmentGroup:N,slicedSegments:Z}=yw(e,d,g,I),J=new un(N.segments,N.children);if(0===Z.length&&J.hasChildren())return this.expandChildren(A,I,J).pipe((0,ht.U)(He=>new un(d,He)));if(0===I.length&&0===Z.length)return pt(new un(d,{}));const te=Vo(i)===s;return this.expandSegment(A,J,I,Z,te?sn:s,!0).pipe((0,ht.U)(ke=>new un(d.concat(ke.segments),ke.children)))})):s3(e)))}getChildConfig(t,e,i){return e.children?pt({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?pt({routes:e._loadedRoutes,injector:e._loadedInjector}):function hse(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?pt(!0):pt(r.map(c=>{const d=D2(c,n);return z5(function J0e(n){return n&&r3(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(T2(),VV())}(t,e,i).pipe((0,Qi.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Cr.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function wse(n){return Gp(IV(Mw,3))}())):pt({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return pt(i);if(r.numberOfChildren>1||!r.children[sn])return Gp(new o.vHH(4e3,Mw));r=r.children[sn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new hh(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return o0(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return o0(e.children,(d,g)=>{c[g]=this.createSegmentGroup(t,d,i,r)}),new un(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new o.vHH(4001,Mw);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class Cse{}class Ase{constructor(t,e,i,r,s,c,d,g){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=g}recognize(){const t=yw(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,sn).pipe((0,ht.U)(e=>{if(null===e)return null;const i=new mw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},sn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new rc(i,e),s=new DV(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=AV(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,gn.D)(Object.keys(i.children)).pipe(Io(r=>{const s=i.children[r],c=kV(e,r);return this.processSegmentGroup(t,c,s,r)}),uh((r,s)=>r&&s?(r.push(...s),r):null),function $re(n,t=!1){return(0,Hi.e)((e,i)=>{let r=0;e.subscribe((0,In.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),cw(null),eV(),(0,ht.U)(r=>{if(null===r)return null;const s=BV(r);return function Dse(n){n.sort((t,e)=>t.value.outlet===sn?-1:e.value.outlet===sn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,gn.D)(e).pipe(Io(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),tc(c=>!!c),S5(c=>{if(PD(c))return PV(i,r,s)?pt([]):pt(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!OV(e,i,r,s))return pt(null);let c;if("**"===e.path){const d=r.length>0?rV(r).parameters:{},g=ZV(i)+r.length;c=pt({snapshot:new mw(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GV(e),Vo(e),e.component??e._loadedComponent??null,e,UV(i),g,$V(e),g),consumedSegments:[],remainingSegments:[]})}else c=LV(i,e,r,t).pipe((0,ht.U)(({matched:d,consumedSegments:g,remainingSegments:w,parameters:y})=>{if(!d)return null;const A=ZV(i)+g.length;return{snapshot:new mw(g,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GV(e),Vo(e),e.component??e._loadedComponent??null,e,UV(i),A,$V(e),A),consumedSegments:g,remainingSegments:w}}));return c.pipe(Ri(d=>{if(null===d)return pt(null);const{snapshot:g,consumedSegments:w,remainingSegments:y}=d;t=e._injector??t;const A=e._loadedInjector??t,I=function Tse(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:N,slicedSegments:Z}=yw(i,w,y,I.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===Z.length&&N.hasChildren())return this.processChildren(A,I,N).pipe((0,ht.U)(te=>null===te?null:[new rc(g,te)]));if(0===I.length&&0===Z.length)return pt([new rc(g,[])]);const J=Vo(e)===s;return this.processSegment(A,I,N,Z,J?sn:s).pipe((0,ht.U)(te=>null===te?null:[new rc(g,te)]))}))}}function Ese(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function BV(n){const t=[],e=new Set;for(const i of n){if(!Ese(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=BV(i.children);t.push(new rc(i.value,r))}return t.filter(i=>!e.has(i))}function UV(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function ZV(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function GV(n){return n.data||{}}function $V(n){return n.resolve||{}}function qV(n){return"string"==typeof n.title||null===n.title}function BD(n){return Ri(t=>{const e=n(t);return e?(0,gn.D)(e).pipe((0,ht.U)(()=>t)):pt(t)})}let WV=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===sn);return i}getResolvedTitleForRoute(e){return e.data[$p]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(KV)},providedIn:"root"}),n})(),KV=(()=>{class n extends WV{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(cs))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Lse{}class Pse extends class Ose{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Dw=new o.OlP("",{providedIn:"root",factory:()=>({})}),UD=new o.OlP("ROUTES");let ZD=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return pt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=z5(e.loadComponent()).pipe((0,Cr.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),_D(()=>{this.componentLoaders.delete(e)})),r=new QR(i,()=>new Fi.x).pipe(mD());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return pt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,ht.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let g,w,y=!1;Array.isArray(d)?w=d:(g=d.create(e).injector,w=iV(g.get(UD,[],o.XFs.Self|o.XFs.Optional)));return{routes:w.map(OD),injector:g}}),_D(()=>{this.childrenLoaders.delete(i)})),c=new QR(s,()=>new Fi.x).pipe(mD());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return z5(e()).pipe((0,Qi.z)(i=>i instanceof o.YKP||Array.isArray(i)?pt(i):(0,gn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Fse{}class Bse{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Use(n){throw n}function Zse(n,t,e){return t.parse("/")}const jse={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gse={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function JV(){const n=(0,o.f3M)(uV),t=(0,o.f3M)(Xp),e=(0,o.f3M)(Ne),i=(0,o.f3M)(o.zs3),r=(0,o.f3M)(o.Sil),s=(0,o.f3M)(UD,{optional:!0})??[],c=(0,o.f3M)(Dw,{optional:!0})??{},d=(0,o.f3M)(KV),g=(0,o.f3M)(WV,{optional:!0}),w=(0,o.f3M)(Fse,{optional:!0}),y=(0,o.f3M)(Lse,{optional:!0}),A=new gi(null,n,t,e,i,r,iV(s));return w&&(A.urlHandlingStrategy=w),y&&(A.routeReuseStrategy=y),A.titleStrategy=g??d,function $se(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,A),A}let gi=(()=>{class n{constructor(e,i,r,s,c,d,g){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fi.x,this.errorHandler=Use,this.malformedUriErrorHandler=Zse,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>pt(void 0),this.urlHandlingStrategy=new Bse,this.routeReuseStrategy=new Pse,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(ZD),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new T0e(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new D0e(I)),this.ngModule=c.get(o.h0i),this.console=c.get(o.c2e);const A=c.get(o.R0b);this.isNgZoneEnabled=A instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Yre(){return new hh(new un([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xV(this.currentUrlTree,this.rootComponentType),this.transitions=new Br({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Hn(r=>0!==r.id),(0,ht.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ri(r=>{let s=!1,c=!1;return pt(r).pipe((0,Cr.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ri(d=>{const g=this.browserUrlTree.toString(),w=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return QV(d.source)&&(this.browserUrlTree=d.extractedUrl),pt(d).pipe(Ri(A=>{const I=this.transitions.getValue();return i.next(new TD(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),I!==this.transitions.getValue()?ec.E:Promise.resolve(A)}),function yse(n,t,e,i){return Ri(r=>function _se(n,t,e,i,r){return new bse(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,ht.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Cr.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function Sse(n,t,e,i,r,s){return(0,Qi.z)(c=>function xse(n,t,e,i,r,s,c="emptyOnly",d="legacy"){return new Ase(n,t,e,i,r,c,d,s).recognize().pipe(Ri(g=>null===g?function Mse(n){return new Rn.y(t=>t.error(n))}(new Cse):pt(g)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,ht.U)(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Cr.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(N,A)}this.browserUrlTree=A.urlAfterRedirects}const I=new y0e(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);i.next(I)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:N,source:Z,restoredState:J,extras:te}=d,xe=new TD(I,this.serializeUrl(N),Z,J);i.next(xe);const ke=xV(N,this.rootComponentType).snapshot;return pt(r={...d,targetSnapshot:ke,urlAfterRedirects:N,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),ec.E}),(0,Cr.b)(d=>{const g=new C0e(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,ht.U)(d=>r={...d,guards:$0e(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function ise(n,t){return(0,Qi.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?pt({...e,guardsResult:!0}):function rse(n,t,e,i){return(0,gn.D)(n).pipe((0,Qi.z)(r=>function use(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?pt(s.map(d=>{const g=e3(t)??r,w=D2(d,g);return z5(function ese(n){return n&&r3(n.canDeactivate)}(w)?w.canDeactivate(n,t,e,i):g.runInContext(()=>w(n,t,e,i))).pipe(tc())})).pipe(T2()):pt(!0)}(r.component,r.route,e,t,i)),tc(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Qi.z)(d=>d&&function Y0e(n){return"boolean"==typeof n}(d)?function sse(n,t,e,i){return(0,gn.D)(t).pipe(Io(r=>jp(function ase(n,t){return null!==n&&t&&t(new E0e(n)),pt(!0)}(r.route.parent,i),function ose(n,t){return null!==n&&t&&t(new S0e(n)),pt(!0)}(r.route,i),function cse(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function q0e(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>YR(()=>pt(c.guards.map(g=>{const w=e3(c.node)??e,y=D2(g,w);return z5(function X0e(n){return n&&r3(n.canActivateChild)}(y)?y.canActivateChild(i,n):w.runInContext(()=>y(i,n))).pipe(tc())})).pipe(T2())));return pt(s).pipe(T2())}(n,r.path,e),function lse(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return pt(!0);const r=i.map(s=>YR(()=>{const c=e3(t)??e,d=D2(s,c);return z5(function Q0e(n){return n&&r3(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(tc())}));return pt(r).pipe(T2())}(n,r.route,e))),tc(r=>!0!==r,!0))}(i,s,n,t):pt(d)),(0,ht.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Cr.b)(d=>{if(r.guardsResult=d.guardsResult,fh(d.guardsResult))throw EV(0,d.guardsResult);const g=new M0e(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),Hn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),BD(d=>{if(d.guards.canActivateChecks.length)return pt(d).pipe((0,Cr.b)(g=>{const w=new x0e(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}),Ri(g=>{let w=!1;return pt(g).pipe(function zse(n,t){return(0,Qi.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return pt(e);let s=0;return(0,gn.D)(r).pipe(Io(c=>function Nse(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!qV(r)&&(s[$p]=r.title),function kse(n,t,e,i){const r=function Rse(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return pt({});const s={};return(0,gn.D)(r).pipe((0,Qi.z)(c=>function Vse(n,t,e,i){const r=e3(t)??i,s=D2(n,r);return z5(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(tc(),(0,Cr.b)(d=>{s[c]=d}))),wD(1),tV(s),S5(c=>PD(c)?ec.E:Gp(c)))}(s,n,t,i).pipe((0,ht.U)(c=>(n._resolvedData=c,n.data=AV(n,e).resolve,r&&qV(r)&&(n.data[$p]=r.title),null)))}(c.route,i,n,t)),(0,Cr.b)(()=>s++),wD(1),(0,Qi.z)(c=>s===r.length?pt(e):ec.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Cr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Cr.b)(g=>{const w=new A0e(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}))}),BD(d=>{const g=w=>{const y=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Cr.b)(A=>{w.component=A}),(0,ht.U)(()=>{})));for(const A of w.children)y.push(...g(A));return y};return lw(g(d.targetSnapshot.root)).pipe(cw(),Ur(1))}),BD(()=>this.afterPreactivation()),(0,ht.U)(d=>{const g=function V0e(n,t,e){const i=Qp(n,t._root,e?e._root:void 0);return new MV(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:g}}),(0,Cr.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,ht.U)(i=>(new G0e(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Cr.b)({next(){s=!0},complete(){s=!0}}),_D(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),S5(d=>{if(c=!0,zV(d)){SV(d)||(this.navigated=!0,this.restoreHistory(r,!0));const g=new vw(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(g),SV(d)){const w=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||QV(r.source)};this.scheduleNavigation(w,"imperative",null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const g=new bV(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(g);try{r.resolve(this.errorHandler(d))}catch(w){r.reject(w)}}return ec.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(OD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:g}=i,w=r||this.routerState.root,y=g?this.currentUrlTree.fragment:c;let A=null;switch(d){case"merge":A={...this.currentUrlTree.queryParams,...s};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=s||null}return null!==A&&(A=this.removeEmptyProps(A)),p0e(w,this.currentUrlTree,e,A,y??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=fh(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function qse(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new o.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...jse}:!1===i?{...Gse}:i,fh(e))return oV(this.currentUrlTree,e,r);const s=this.parseUrl(e);return oV(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ic(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,g,w;c?(d=c.resolve,g=c.reject,w=c.promise):w=new Promise((I,N)=>{d=I,g=N});const y=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),A=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:y,targetPageId:A,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:g,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(I=>Promise.reject(I))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new vw(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:function(){return JV()},providedIn:"root"}),n})();function QV(n){return"imperative"!==n}let z1=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Fi.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,o.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,o.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,o.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gi),o.Y36(gh),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})(),N1=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Fi.x,this.subscription=e.events.subscribe(s=>{s instanceof ic&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,o.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,o.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,o.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){return!!(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gi),o.Y36(gh),o.Y36(Ce))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&o.uIk("target",i.target)("href",i.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})();class XV{}let Yse=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Hn(e=>e instanceof ic),Io(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,o.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,gn.D)(r).pipe((0,Zp.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):pt(null);const s=r.pipe((0,Qi.z)(c=>null===c?pt(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,gn.D)([s,c]).pipe((0,Zp.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(gi),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(XV),o.LFG(ZD))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jD=new o.OlP("");let eL=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof TD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ic&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yV&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new yV(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function E2(n,t){return{\u0275kind:n,\u0275providers:t}}function GD(n){return[{provide:UD,multi:!0,useValue:n}]}function nL(){const n=(0,o.f3M)(o.zs3);return t=>{const e=n.get(o.z2F);if(t!==e.components[0])return;const i=n.get(gi),r=n.get(iL);1===n.get($D)&&i.initialNavigation(),n.get(rL,null,o.XFs.Optional)?.setUpPreloading(),n.get(jD,null,o.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const iL=new o.OlP("",{factory:()=>new Fi.x}),$D=new o.OlP("",{providedIn:"root",factory:()=>1});const rL=new o.OlP("");function eoe(n){return E2(0,[{provide:rL,useExisting:Yse},{provide:XV,useExisting:n}])}const sL=new o.OlP("ROUTER_FORROOT_GUARD"),toe=[Ne,{provide:uV,useClass:yD},{provide:gi,useFactory:JV},Xp,{provide:gh,useFactory:function tL(n){return n.routerState.root},deps:[gi]},ZD];function noe(){return new o.PXZ("Router",gi)}let oL=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[toe,[],GD(e),{provide:sL,useFactory:ooe,deps:[[gi,new o.FiY,new o.tp0]]},{provide:Dw,useValue:i||{}},i?.useHash?{provide:Ce,useClass:_t}:{provide:Ce,useClass:Ct},{provide:jD,useFactory:()=>{const n=(0,o.f3M)(gi),t=(0,o.f3M)(co),e=(0,o.f3M)(Dw);return e.scrollOffset&&t.setOffset(e.scrollOffset),new eL(n,t,e)}},i?.preloadingStrategy?eoe(i.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:noe},i?.initialNavigation?aoe(i):[],[{provide:aL,useFactory:nL},{provide:o.tb,multi:!0,useExisting:aL}]]}}static forChild(e){return{ngModule:n,providers:[GD(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(sL,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[VD]}),n})();function ooe(n){return"guarded"}function aoe(n){return["disabled"===n.initialNavigation?E2(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const t=(0,o.f3M)(gi);return()=>{t.setUpLocationChangeListener()}}},{provide:$D,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?E2(2,[{provide:$D,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:t=>{const e=t.get(W,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(gi),d=t.get(iL);(function r(s){t.get(gi).events.pipe(Hn(d=>d instanceof ic||d instanceof vw||d instanceof bV),(0,ht.U)(d=>d instanceof ic||d instanceof vw&&(0===d.code||1===d.code)&&null),Hn(d=>null!==d),Ur(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||d.closed?pt(void 0):d),c.initialNavigation()}))}}]).\u0275providers:[]]}const aL=new o.OlP("");let coe=(()=>{class n{constructor(){this.debug=!0,this.debug&&console.log("HomeService()")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ie=F(5861);const qD_firebase={apiKey:"AIzaSyCHwyX_gJ_ZVg-u6EwfKpDonVy9n7J39RM",authDomain:"the-movie-app-344909.firebaseapp.com",databaseURL:"https://the-movie-app-344909-default-rtdb.europe-west1.firebasedatabase.app",projectId:"the-movie-app-344909",storageBucket:"the-movie-app-344909.appspot.com",messagingSenderId:"146570405981",appId:"1:146570405981:web:8d60c8e38e0b0cc41e85b4",measurementId:"G-T44447336X"},qD_tmdb_api_key="837510eb0be61188d342d8c49173bb6e";let Ys=(()=>{class n{constructor(e){this.http=e,this.debug=!1,this.timer={start:Date.now(),stop:null,time:null},this.debug&&console.log("TmdbService()"),this.api_key=qD_tmdb_api_key}static init(e){}getMovieDetails$(e){return this.debug&&console.log("//-----getMovieDetails$()-----//"),new Rn.y(i=>{this.getDetailsTmdb(e).then(r=>r).then(r=>{console.log(r),i.next(r),i.complete()}).catch(r=>i.error(r))})}getDetailsTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getDetailsTmdb()-----//");let c="https://api.themoviedb.org/3/movie/"+e;c+="?api_key="+i.api_key,c+="&language=sv";let g,d=yield fetch(c);try{g=yield d.json()}catch(w){console.log("ERROR!!"),console.log(w),console.log(e),g={results:null}}return i.timer.stop=Date.now(),i.timer.time=(i.timer.stop-i.timer.start)/1e3,g})()}getImagesTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getImagesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/";r+=e,r+="/images",r+="?api_key="+i.api_key,r+="&language=null,en,sv";const s=yield fetch(r);let c;try{c=yield s.json()}catch(d){console.log("ERROR!!"),console.log(d),console.log(e),c={results:null}}return c})()}getWatchProvidersTMDB(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getWatchProvidersTMDB()-----//");let r="https://api.themoviedb.org/3/movie/";return r+=e,r+="/watch/providers",r+="?api_key="+i.api_key,(yield(yield fetch(r)).json()).results.SE})()}searchMoviesTmdb(e,i){this.debug&&console.log("//-----searchMoviesTmdb()-----//"),e=(e=e.toLowerCase()).split(" ").join("+");let r="https://api.themoviedb.org/3/search/movie";return r+="?api_key="+this.api_key,r+="&language=sv",r+="&include_adult=false",r+="&query="+e,r+="&page="+i,this.http.get(r)}movieDiscoverTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----movieDiscoverTmdb()-----//"),i.debug&&console.log("discoverMoviesTmdb params"),i.debug&&console.log("params.with_genres"+e.with_genres);let r="https://api.themoviedb.org/3/discover/movie";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&include_video=false",r+="&page="+e.page,r+="&certification_country=US",null!=e.certification&&(r+="&certification="+e.certification),null!=e.with_genres&&(r+="&with_genres="+e.with_genres),null!=e.without_genres&&(r+="&without_genres="+e.without_genres),r+=null!=e.sort_by?"&sort_by="+e.sort_by:"&sort_by=popularity.desc",yield(yield fetch(r)).json()})()}getKeywordsTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getKeywordsTmdb()-----//");let r="https://api.themoviedb.org/3/movie/";return r+=e,r+="/keywords",r+="?api_key="+i.api_key,yield(yield fetch(r)).json()})()}getAlternativeTitlesTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getAlternativeTitlesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/"+e;r+="/alternative_titles",r+="?api_key="+i.api_key,r+="&page=1";let c=yield(yield fetch(r)).json();return c=c.results,c})()}getRecommendationsTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getRecommendationsTMDB()-----//");let r="https://api.themoviedb.org/3/movie/"+e;r+="/recommendations",r+="?api_key="+i.api_key,r+="&language=sv",r+="&page=1";let c=yield(yield fetch(r)).json();return c=c.results,c})()}getSimilarMoviesTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getSimilarMoviesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/";r+=e,r+="/similar",r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page=1";let c=yield(yield fetch(r)).json();return c=c.results,c})()}getTrendingMovies(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getTrendingMovies()-----//");let r="https://api.themoviedb.org/3/trending/movie/day";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page="+e,yield(yield fetch(r)).json()})()}getTopRatedTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getTopRatedTmdb()-----//");let r="https://api.themoviedb.org/3/movie/top_rated";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page="+e,yield(yield fetch(r)).json()})()}getPopularTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&console.log("//-----getPopularTmdb()-----//");let r="https://api.themoviedb.org/3/movie/popular";return r+="?api_key="+i.api_key,r+="&language=sv",r+="&include_adult=false",r+="&page="+e,yield(yield fetch(r)).json()})()}getMovieCertificationsTmdb(){var e=this;return(0,ie.Z)(function*(){e.debug&&console.log("//-----getMovieCertificationsTmdb()-----//");let i="https://api.themoviedb.org/3/certification/movie";return i+="/list?api_key="+e.api_key,yield(yield fetch(i)).json()})()}getReleaseDatesTmdb(e){var i=this;return(0,ie.Z)(function*(){i.debug&&i.debug&&console.log("//-----getReleaseDatesTmdb()-----//");let r="https://api.themoviedb.org/3/movie/"+e;r+="/release_dates",r+="?api_key="+i.api_key;let c,s=yield fetch(r);try{c=yield s.json()}catch(d){console.log("ERROR!!"),console.log(d),c={results:null}}return c})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Rd))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uoe{constructor(){this.debug=!1}setAvgCertification(){this.debug&&console.log("Certification.setAvgCertification()"),this.debug&&console.log(this.countries);let t=new Array,e=0,i=0,r="",s="";this.countries.forEach(d=>{let g=new Array,w=0,y=0;r+=d.iso_3166_1+":[ ",d.release_dates.forEach(A=>{if(A.certification){let I=null;I="AU"==d.iso_3166_1?this.calcAU(A.certification):"DE"==d.iso_3166_1?this.calcDE(A.certification):"FI"==d.iso_3166_1?this.calcFI(A.certification):"FR"==d.iso_3166_1?this.calcFR(A.certification):"NO"==d.iso_3166_1?this.calcNO(A.certification):"SE"==d.iso_3166_1?this.calcSE(A.certification):"US"==d.iso_3166_1?this.calcUS(A.certification):null,!isNaN(I)&&null!=I&&null!=I&&(r+=I.toString()+"",g.push(I)),r+="("+A.certification+"), "}}),g.forEach(A=>{w+=A}),g.length>0&&(y=w/g.length,t.push(y)),r+="]",r+=".[total:"+w+"]",r+=".[length:"+g.length+"]",r+=".[cAvg:"+y+"]",r+="\n"}),this.debug&&(s+="Result:["),t.forEach(d=>{this.debug&&(s+=d+", "),e+=d}),i=e/t.length,this.debug&&(s+="]"),this.debug&&(s+=".[total:"+e+"]"),this.debug&&(s+=".[length:"+t.length+"]"),this.debug&&(s+=".[result:"+i+"]"),this.debug&&console.log(r),this.debug&&console.log(t),this.debug&&console.log(s);let c=this.setAvg(i);this.avg_rating=Math.round(c)}setAvg(t){let e;return e=t<6?0:t>=6&&t<7?6:t>=7&&t<9?7:t>=9&&t<10?9:t>=10&&t<11?10:t>=11&&t<12?11:t>=12&&t<13?12:t>=13&&t<15||t>=13&&t<15?13:t>=15&&t<16?15:t>=16&&t<17?16:t>=17&&t<18?17:18,e}calcAU(t){let e=null;return"G"==t&&(e=0),"PG"==t&&(e=10),"M"==t&&(e=13),"MA15+"==t&&(e=15),("X18+"==t||"R18+"==t)&&(e=18),e}calcFI(t){let e=null;return"S"==t&&(e=0),"K-7"==t&&(e=7),"K-12"==t&&(e=12),"K-16"==t&&(e=16),"K-18"==t&&(e=18),e}calcUS(t){let e=null;return"G"==t&&(e=0),"PG"==t&&(e=10),"PG-13"==t&&(e=13),("R"==t||"NC-17"==t)&&(e=17),e}calcSE(t){let e=null;return"Btl"==t&&(e=0),"7"==t&&(e=7),"11"==t&&(e=11),"15"==t&&(e=15),"18"==t&&(e=18),e}calcNO(t){let e=null;return"A"==t&&(e=0),"6"==t&&(e=6),"9"==t&&(e=9),"12"==t&&(e=12),"15"==t&&(e=15),"18"==t&&(e=18),e}calcDE(t){let e=null;return"A"==t&&(e=0),"6"==t&&(e=6),"12"==t&&(e=12),"16"==t&&(e=16),"18"==t&&(e=18),e}calcFR(t){let e=null;return"U"==t&&(e=0),"10"==t&&(e=10),"12"==t&&(e=12),"16"==t&&(e=16),"18"==t&&(e=18),e}calcGB(t){let e=null;return"U"==t&&(e=0),"PG"==t&&(e=0),"12"==t&&(e=12),"15"==t&&(e=15),"12A"==t&&(e=18),"R18"==t&&(e=18),e}}class hoe{constructor(){this.counter=0,this.timing=0,this.isEven=!1,this.nIntervId=setInterval(()=>{this.counter++,this.timing++,this.timing>100&&(this.timing=0),this.isEven=this.counter%2==0},100)}count(){this.counter++}start(){this.nIntervId=setInterval(this.count,1e3)}stop(){clearInterval(this.nIntervId)}reset(){console.log("timer.reset()"),clearInterval(this.nIntervId),this.counter=0,this.timing=0}}class Fa{constructor(t){this.lists=[],this.base_url="https://image.tmdb.org/t/p/",this.preloading=!0,this.loading=!0,this.poster_loading=!0,this.backdrop_loading=!0,this.posters_loading=!0,this.backdrops_loading=!0,this.show=!1,this.placeholder_url="https://via.placeholder.com/",this.ticker={start:Date.now(),stop:null,time:null},this.preloading=!0,this.loading=!0,this.poster_loading=!0,this.backdrop_loading=!0,this.posters_loading=!0,this.backdrops_loading=!0,this.timer=new hoe,this.tmdb=new Ys(this.http),this.id=t.id,this.saved=t.saved,this.seen=t.seen,this.title=t.title,this.lists=t.lists,this.vote=t.vote}setData(t){this.id=t.id,this.saved=t.saved,this.seen=t.seen,this.title=t.title,this.lists=t.lists,this.vote=t.vote}preload(){var t=this;return(0,ie.Z)(function*(){let e=yield t.tmdb.getDetailsTmdb(t.id);t.poster_path=e.poster_path,t.poster_loading=!1,t.backdrop_path=e.backdrop_path,t.backdrop_loading=!1,t.overview=e.overview,t.title=e.title,t.genres=e.genres,t.runtime=e.runtime,t.length=t.timeConvert(t.runtime),t.budget=e.budget,t.tagline=e.tagline,t.vote_count=e.vote_count,t.vote_average=Math.round(e.vote_average/2);let r=yield t.tmdb.getKeywordsTmdb(t.id);t.keywords=r.keywords,t.preloading=!1})()}init(){var t=this;return(0,ie.Z)(function*(){let e=yield t.tmdb.getImagesTmdb(t.id);if(e){let r=e.backdrops;t.backdrops=[],r&&r.length>0&&(r.forEach(s=>{t.backdrops.push(s)}),t.backdrops_loading=!1)}let i=yield t.tmdb.getWatchProvidersTMDB(t.id).then(r=>({...t,...r}));return t.flatrate=i.flatrate,t.loading=!1,t.posters_loading=!1,t.loading||t.timer.stop(),t.ticker.stop=Date.now(),t.ticker.time=(t.ticker.stop-t.ticker.start)/1e3,!0})()}checkRating(t){var e=this;return(0,ie.Z)(function*(){let i=!1,r="",s=yield e.tmdb.getReleaseDatesTmdb(e.id);return s.results&&(yield e.setCert(s),e.certifications.avg_rating>t?(r+="[AGE<"+e.certifications.avg_rating+"]",r+=":["+e.title+"]",i=!1):(r+="-----[SHOW][AGE<"+e.certifications.avg_rating+"]",r+=":["+e.title+"]",r+=":[SHOW]-----",i=!0)),i})()}setCert(t){var e=this;return(0,ie.Z)(function*(){let i=t.results,r=new Array;i.forEach(s=>{"AU"==s.iso_3166_1&&r.push(s),"DE"==s.iso_3166_1&&r.push(s),"GB"==s.iso_3166_1&&r.push(s),"FI"==s.iso_3166_1&&r.push(s),"FR"==s.iso_3166_1&&r.push(s),"NO"==s.iso_3166_1&&r.push(s),"SE"==s.iso_3166_1&&r.push(s),"US"==s.iso_3166_1&&r.push(s)}),r&&(e.release_dates=r,e.certifications=new uoe,e.certifications.countries=r,e.certifications.setAvgCertification())})()}timeConvert(t){var i=t/60,r=Math.floor(i);return r+"h "+Math.round(60*(i-r))+"min"}*clock(){for(console.log("Tick!");;)yield,console.log("Tick!"),yield,console.log("Tock!")}}const doe=[{id:252171,title:"A Girl Walks Home Alone at Night",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:447332,title:"A Quiet Place",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:520763,title:"A Quiet Place Part II",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:73,title:"American History X",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:396806,title:"Anon",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:329865,title:"Arrival",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:18785,title:"Baksm\xe4llan",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:271404,title:"Beyond Skyline",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:569547,title:"Black Mirror: Bandersnatch",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:257117,title:"Blood Punch",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:513310,title:"Boss Level",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:425972,title:"Cargo",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:801335,title:"Carter",seen:!1,vote:0,saved:!0,lists:["Saved","Korea"]},{id:76726,title:"Chronicle",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:354912,title:"Coco",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:461130,title:"Code 8",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:220289,title:"Coherence",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:11655,title:"Cronos",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:475961,title:"Curvature",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:924,title:"Dawn of the Dead",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:923,title:"Dawn of the Dead",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:293660,title:"Deadpool",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:497,title:"Den gr\xf6na milen",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:44040,title:"Devil",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:43920,title:"Dog Pound",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:646380,title:"Don't Look Up",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:520901,title:"Doom: Annihilation",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:568124,title:"Encanto",seen:!0,vote:0,saved:!0,lists:["Saved","Family"]},{id:522681,title:"Escape Room",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:29917,title:"Exam",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:568091,title:"Fractured",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:550988,title:"Free Guy",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:453405,title:"Gemini Man",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:801335,title:"Girl in the Basement",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:450465,title:"Glass",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:440021,title:"Happy Death Day",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:512196,title:"Happy Death Day 2U",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:376865,title:"High Life",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:254302,title:"High-Rise",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:575774,title:"His House",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:475210,title:"How It Ends",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:49530,title:"In Time",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:581726,title:"Infinite",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:797861,title:"Infinitum: Subject Unknown",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:5595,title:"La Habitaci\xf3n de Fermat",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:37933,title:"Legender fr\xe5n \xd6v\xe4rlden",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:783461,title:"Looop Lapeta",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:590223,title:"Love and Monsters",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:508943,title:"Luca",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:769,title:"Maffiabr\xf6der",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:521936,title:"Mega Time Squad",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:675054,title:"MexZombies",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:458576,title:"Monster Hunter",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:597208,title:"Nightmare Alley",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:278,title:"Nyckeln till frihet",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:762504,title:"Nope",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:466272,title:"Once Upon a Time\u2026 in Hollywood",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:513434,title:"One Cut of the Dead",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:775996,title:"Outside the Wire",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:19898,title:"Pandorum",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:496243,title:"Parasit",seen:!0,vote:0,saved:!0,lists:["Saved","Korea"]},{id:635731,title:"Pig",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:12429,title:"Ponyo p\xe5 klippan vid havet",seen:!0,vote:0,saved:!0,lists:["Saved","Ghibli"]},{id:605116,title:"Project Power",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:1576,title:"Resident Evil",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:313943,title:"Revolt",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:653569,title:"Save Yourselves!",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:214,title:"Saw III",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:424,title:"Schindler's List",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:273477,title:"Scouts Guide to the Zombie Apocalypse",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:55165,title:"Simple Simon",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:50123,title:"Skins",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:11466,title:"Slim Susie",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:581389,title:"Space Sweepers",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:129,title:"Spirited Away",seen:!0,vote:0,saved:!0,lists:["Saved","Ghibli"]},{id:594718,title:"Sputnik",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:169644,title:"Stalled",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:559581,title:"Stowaway",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:549294,title:"Synchronic",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:577922,title:"Tenet",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:696806,title:"The Adam Project",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:22970,title:"The Cabin in the Woods",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:376134,title:"The Discovery",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:442249,title:"The First Purge",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:602223,title:"The Forever Purge",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:425552,title:"The Lure",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:333484,title:"The Magnificent Seven",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:198663,title:"The Maze Runner",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:242090,title:"The One I Love",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:158015,title:"The Purge",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:316727,title:"The Purge: Election Year",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:180299,title:"The Raid: Retaliation",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:11152,title:"The Ruins",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:242095,title:"The Signal",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:588228,title:"The Tomorrow War",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:293670,title:"The Wailing",seen:!1,vote:0,saved:!0,lists:["Saved","Korea"]},{id:535167,title:"The Wandering Earth",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:14139,title:"Timecrimes",seen:!0,vote:0,saved:!0,lists:["Saved","Time"]},{id:26466,title:"Triangle",seen:!0,vote:4,saved:!0,lists:["Saved","Time"]},{id:366171,title:"To Your Last Death",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:496704,title:"Tremors: A Cold Day in Hell",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:529216,title:"Under stormen",seen:!1,vote:0,saved:!0,lists:["Saved","Time"]},{id:500664,title:"Upgrade",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:643586,title:"Willy's Wonderland",seen:!1,vote:0,saved:!0,lists:["Saved"]},{id:72190,title:"World War Z",seen:!0,vote:0,saved:!0,lists:["Saved"]},{id:437311,title:"\xd3rbita 9",seen:!1,vote:0,saved:!0,lists:["Saved"]}],Sw=[{id:28,name:"Action",active:!1},{id:12,name:"\xc4ventyr",active:!1},{id:16,name:"Animerat",active:!1},{id:35,name:"Komedi",active:!1},{id:80,name:"Kriminal",active:!1},{id:99,name:"Dokument\xe4r",active:!1},{id:18,name:"Drama",active:!1},{id:10751,name:"Familj",active:!1},{id:14,name:"Fantasy",active:!1},{id:36,name:"Historisk",active:!1},{id:27,name:"Skr\xe4ck",active:!1},{id:10402,name:"Music",active:!1},{id:9648,name:"Mystik",active:!1},{id:10749,name:"Romantik",active:!1},{id:878,name:"Science Fiction",active:!1},{id:10770,name:"TV-film",active:!1},{id:53,name:"Thriller",active:!1},{id:10752,name:"Krig",active:!1},{id:37,name:"V\xe4stern",active:!1}];var foe=F(1389),H=F(2090),Z0=F(6881),Ba=F(1877),Ua=F(4859);class lL{constructor(){this.ageRating=18}}class cL{constructor(){this.vote={min:0,max:10},this.favorite={movies:[],genres:[],keywords:[]},this.liked={movies:[],genres:[],keywords:[]},this.disliked={movies:[],genres:[],keywords:[]},this.owned={movies:[],providers:[]}}}class goe{constructor(){this.liked={movies:[],genres:[],keywords:[]},this.disliked={movies:[],genres:[],keywords:[]}}}var o3=F(4986),Sn=F(4976);function WD(){return(0,Hi.e)((n,t)=>{let e,i=!1;n.subscribe((0,In.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function a3(n,t=y2.y){return n=n??poe,(0,Hi.e)((e,i)=>{let r,s=!0;e.subscribe((0,In.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function poe(n,t){return n===t}var ft,Mr=F(2011),KD=(F(9568),F(3942)),voe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Za={},YD=YD||{},Zt=voe||self;function zw(){}function Nw(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function l3(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var JD="closure_uid_"+(1e9*Math.random()>>>0),woe=0;function _oe(n,t,e){return n.call.apply(n.bind,arguments)}function boe(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function y0(n,t,e){return(y0=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_oe:boe).apply(null,arguments)}function kw(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Zr(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function N5(){this.s=this.s,this.o=this.o}N5.prototype.s=!1,N5.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function moe(n){Object.prototype.hasOwnProperty.call(n,JD)&&n[JD]||(n[JD]=++woe)}(this)},N5.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uL=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function QD(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function hL(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(Nw(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function C0(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}C0.prototype.h=function(){this.defaultPrevented=!0};var Coe=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",zw,t),Zt.removeEventListener("test",zw,t)}catch{}return n}();function Rw(n){return/^[\s\xa0]*$/.test(n)}var dL=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function XD(n,t){return n<t?-1:n>t?1:0}function Vw(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function k1(n){return-1!=Vw().indexOf(n)}function eT(n){return eT[" "](n),n}function fL(n,t,e){return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}eT[" "]=zw;var Lw,n,Moe=k1("Opera"),I2=k1("Trident")||k1("MSIE"),gL=k1("Edge"),tT=gL||I2,pL=k1("Gecko")&&!(-1!=Vw().toLowerCase().indexOf("webkit")&&!k1("Edge"))&&!(k1("Trident")||k1("MSIE"))&&!k1("Edge"),xoe=-1!=Vw().toLowerCase().indexOf("webkit")&&!k1("Edge");function vL(){var n=Zt.document;return n?n.documentMode:void 0}e:{var nT="",iT=(n=Vw(),pL?/rv:([^\);]+)(\)|;)/.exec(n):gL?/Edge\/([\d\.]+)/.exec(n):I2?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):xoe?/WebKit\/(\S+)/.exec(n):Moe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iT&&(nT=iT?iT[1]:""),I2){var rT=vL();if(null!=rT&&rT>parseFloat(nT)){Lw=String(rT);break e}}Lw=nT}var Aoe={},Toe=Zt.document&&I2&&(vL()||parseInt(Lw,10))||void 0;function c3(n,t){if(C0.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(pL){e:{try{eT(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Eoe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&c3.$.h.call(this)}}Zr(c3,C0);var Eoe={2:"touch",3:"pen",4:"mouse"};c3.prototype.h=function(){c3.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var u3="closure_listenable_"+(1e6*Math.random()|0),Ioe=0;function Soe(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++Ioe,this.fa=this.ia=!1}function Ow(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function oT(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function wL(n){const t={};for(const e in n)t[e]=n[e];return t}const _L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bL(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<_L.length;s++)e=_L[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Pw(n){this.src=n,this.g={},this.h=0}function aT(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=uL(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Ow(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function lT(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==t&&s.capture==!!e&&s.la==i)return r}return-1}Pw.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=lT(n,t,i,r);return-1<c?(t=n[c],e||(t.ia=!1)):((t=new Soe(t,this.src,s,!!i,r)).ia=e,n.push(t)),t};var cT="closure_lm_"+(1e6*Math.random()|0),uT={};function yL(n,t,e,i,r){if(i&&i.once)return ML(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)yL(n,t[s],e,i,r);return null}return e=gT(e),n&&n[u3]?n.O(t,e,l3(i)?!!i.capture:!!i,r):CL(n,t,e,!1,i,r)}function CL(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=l3(r)?!!r.capture:!!r,d=dT(n);if(d||(n[cT]=d=new Pw(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function zoe(){const t=Noe;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)Coe||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(AL(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function ML(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ML(n,t[s],e,i,r);return null}return e=gT(e),n&&n[u3]?n.P(t,e,l3(i)?!!i.capture:!!i,r):CL(n,t,e,!0,i,r)}function xL(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)xL(n,t[s],e,i,r);else i=l3(i)?!!i.capture:!!i,e=gT(e),n&&n[u3]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=lT(s=n.g[t],e,i,r))&&(Ow(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=dT(n))&&(t=n.g[t.toString()],n=-1,t&&(n=lT(t,e,i,r)),(e=-1<n?t[n]:null)&&hT(e))}function hT(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[u3])aT(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(AL(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=dT(t))?(aT(e,n),0==e.h&&(e.src=null,t[cT]=null)):Ow(n)}}}function AL(n){return n in uT?uT[n]:uT[n]="on"+n}function Noe(n,t){if(n.fa)n=!0;else{t=new c3(t,this);var e=n.listener,i=n.la||n.src;n.ia&&hT(n),n=e.call(i,t)}return n}function dT(n){return(n=n[cT])instanceof Pw?n:null}var fT="__closure_events_fn_"+(1e9*Math.random()>>>0);function gT(n){return"function"==typeof n?n:(n[fT]||(n[fT]=function(t){return n.handleEvent(t)}),n[fT])}function jr(){N5.call(this),this.i=new Pw(this),this.S=this,this.J=null}function a0(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new C0(t,n);else if(t instanceof C0)t.target=t.target||n;else{var r=t;bL(t=new C0(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=Hw(c,i,!0,t)&&r}if(r=Hw(c=t.g=n,i,!0,t)&&r,r=Hw(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=Hw(c=t.g=e[s],i,!1,t)&&r}function Hw(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.fa&&c.capture==e){var d=c.listener,g=c.la||c.src;c.ia&&aT(n.i,c),r=!1!==d.call(g,i)&&r}}return r&&!i.defaultPrevented}Zr(jr,N5),jr.prototype[u3]=!0,jr.prototype.removeEventListener=function(n,t,e,i){xL(this,n,t,e,i)},jr.prototype.N=function(){if(jr.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Ow(e[i]);delete n.g[t],n.h--}}this.J=null},jr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},jr.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var pT=Zt.JSON.stringify;function koe(){var n=EL;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var vT,DL=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Voe,n=>n.reset());class Voe{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Loe(n){Zt.setTimeout(()=>{throw n},0)}function TL(n,t){vT||function Ooe(){var n=Zt.Promise.resolve(void 0);vT=function(){n.then(Poe)}}(),mT||(vT(),mT=!0),EL.add(n,t)}var mT=!1,EL=new class Roe{constructor(){this.h=this.g=null}add(t,e){const i=DL.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function Poe(){for(var n;n=koe();){try{n.h.call(n.g)}catch(e){Loe(e)}var t=DL;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}mT=!1}function Fw(n,t){jr.call(this),this.h=n||1,this.g=t||Zt,this.j=y0(this.qb,this),this.l=Date.now()}function wT(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function _T(n,t,e){if("function"==typeof n)e&&(n=y0(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=y0(n.handleEvent,n)}return 2147483647<Number(t)?-1:Zt.setTimeout(n,t||0)}function IL(n){n.g=_T(()=>{n.g=null,n.i&&(n.i=!1,IL(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Zr(Fw,jr),(ft=Fw.prototype).ga=!1,ft.T=null,ft.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),a0(this,"tick"),this.ga&&(wT(this),this.start()))}},ft.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.N=function(){Fw.$.N.call(this),wT(this),delete this.g};class Hoe extends N5{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:IL(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function h3(n){N5.call(this),this.h=n,this.g={}}Zr(h3,N5);var SL=[];function zL(n,t,e,i){Array.isArray(e)||(e&&(SL[0]=e.toString()),e=SL);for(var r=0;r<e.length;r++){var s=yL(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function NL(n){oT(n.g,function(t,e){this.g.hasOwnProperty(e)&&hT(t)},n),n.g={}}function Bw(){this.g=!0}function S2(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Zoe(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return pT(e)}catch{return t}}(n,e)+(i?" "+i:"")})}h3.prototype.N=function(){h3.$.N.call(this),NL(this)},h3.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bw.prototype.Ea=function(){this.g=!1},Bw.prototype.info=function(){};var ph={},kL=null;function Uw(){return kL=kL||new jr}function RL(n){C0.call(this,ph.Ta,n)}function d3(n){const t=Uw();a0(t,new RL(t))}function VL(n,t){C0.call(this,ph.STAT_EVENT,n),this.stat=t}function j0(n){const t=Uw();a0(t,new VL(t,n))}function LL(n,t){C0.call(this,ph.Ua,n),this.size=t}function f3(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},t)}ph.Ta="serverreachability",Zr(RL,C0),ph.STAT_EVENT="statevent",Zr(VL,C0),ph.Ua="timingevent",Zr(LL,C0);var Zw={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},OL={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bT(){}function HL(){}bT.prototype.h=null;var MT,g3={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yT(){C0.call(this,"d")}function CT(){C0.call(this,"c")}function jw(){}function p3(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new h3(this),this.P=joe,this.V=new Fw(n=tT?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new FL}function FL(){this.i=null,this.g="",this.h=!1}Zr(yT,C0),Zr(CT,C0),Zr(jw,bT),jw.prototype.g=function(){return new XMLHttpRequest},jw.prototype.i=function(){return{}},MT=new jw;var joe=45e3,xT={},Gw={};function AT(n,t,e){n.L=1,n.v=Kw(sc(t)),n.s=e,n.S=!0,BL(n,null)}function BL(n,t){n.G=Date.now(),v3(n),n.A=sc(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),JL(e.i,"t",i),n.C=0,e=n.l.I,n.h=new FL,n.g=yO(n.l,e?t:null,!n.s),0<n.O&&(n.M=new Hoe(y0(n.Pa,n,n.g),n.O)),zL(n.U,n.g,"readystatechange",n.nb),t=n.I?wL(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),d3(),function Foe(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),g=0;g<d.length;g++){var w=d[g].split("=");if(1<w.length){var y=w[0];w=w[1];var A=y.split("_");c=2<=A.length&&"type"==A[1]?c+(y+"=")+w+"&":c+(y+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function UL(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function ZL(n,t,e){let r,i=!0;for(;!n.J&&n.C<e.length;){if(r=Goe(n,e),r==Gw){4==t&&(n.o=4,j0(14),i=!1),S2(n.j,n.m,null,"[Incomplete Response]");break}if(r==xT){n.o=4,j0(15),S2(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}S2(n.j,n.m,r,null),DT(n,r)}UL(n)&&r!=Gw&&r!=xT&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,j0(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ca&&(n.ca=!0,(t=n.l).g==n&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),RT(t),t.L=!0,j0(11))):(S2(n.j,n.m,e,"[Invalid Chunked Response]"),vh(n),m3(n))}function Goe(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?Gw:(e=Number(t.substring(e,i)),isNaN(e)?xT:(i+=1)+e>t.length?Gw:(t=t.substr(i,e),n.C=i+e,t))}function v3(n){n.Y=Date.now()+n.P,jL(n,n.P)}function jL(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=f3(y0(n.lb,n),t)}function $w(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function m3(n){0==n.l.H||n.J||mO(n.l,n)}function vh(n){$w(n);var t=n.M;t&&"function"==typeof t.ra&&t.ra(),n.M=null,wT(n.V),NL(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.ra())}function DT(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||TT(e.h,n)))if(!n.K&&TT(e.h,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;t_(e),Xw(e)}kT(e),j0(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.M&&0==e.A&&!e.v&&(e.v=f3(y0(e.ib,e),6e3));if(1>=eO(e.h)&&e.na){try{e.na()}catch{}e.na=void 0}}else wh(e,11)}else if((n.K||e.g==n)&&t_(e),!Rw(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let w=r[t];if(e.V=w[0],w=w[1],2==e.H)if("c"==w[0]){e.J=w[1],e.oa=w[2];const y=w[3];null!=y&&(e.qa=y,e.j.info("VER="+e.qa));const A=w[4];null!=A&&(e.Ga=A,e.j.info("SVER="+e.Ga));const I=w[5];null!=I&&"number"==typeof I&&0<I&&(e.K=i=1.5*I,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const N=n.g;if(N){const Z=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var s=i.h;s.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ET(s,s.h),s.h=null))}if(i.F){const J=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(i.Da=J,Ai(i.G,i.F,J))}}e.H=3,e.l&&e.l.Ba(),e.ca&&(e.S=Date.now()-n.G,e.j.info("Handshake RTT: "+e.S+"ms"));var c=n;if((i=e).wa=bO(i,i.I?i.oa:null,i.Y),c.K){tO(i.h,c);var d=c,g=i.K;g&&d.setTimeout(g),d.B&&($w(d),v3(d)),i.g=c}else pO(i);0<e.i.length&&e_(e)}else"stop"!=w[0]&&"close"!=w[0]||wh(e,7);else 3==e.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?wh(e,7):NT(e):"noop"!=w[0]&&e.l&&e.l.Aa(w),e.A=0)}d3()}catch{}}function GL(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(Nw(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function qoe(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Nw(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function $oe(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Nw(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(ft=p3.prototype).setTimeout=function(n){this.P=n},ft.nb=function(n){n=n.target;const t=this.M;t&&3==oc(n)?t.l():this.Pa(n)},ft.Pa=function(n){try{if(n==this.g)e:{const y=oc(this.g);var t=this.g.Ia();if(this.g.da(),!(3>y)&&(3!=y||tT||this.g&&(this.h.h||this.g.ja()||cO(this.g)))){this.J||4!=y||7==t||d3(),$w(this);var e=this.g.da();this.aa=e;t:if(UL(this)){var i=cO(this.g);n="";var r=i.length,s=4==oc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vh(this),m3(this);var c="";break t}this.h.i=new Zt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==e,function Boe(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,y,e),this.i){if(this.ba&&!this.K){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rw(d)){var w=d;break t}}w=null}if(!(e=w)){this.i=!1,this.o=3,j0(12),vh(this),m3(this);break e}S2(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,DT(this,e)}this.S?(ZL(this,y,c),tT&&this.i&&3==y&&(zL(this.U,this.V,"tick",this.mb),this.V.start())):(S2(this.j,this.m,c,null),DT(this,c)),4==y&&vh(this),this.i&&!this.J&&(4==y?mO(this.l,this):(this.i=!1,v3(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,j0(12)):(this.o=0,j0(13)),vh(this),m3(this)}}}catch{}},ft.mb=function(){if(this.g){var n=oc(this.g),t=this.g.ja();this.C<t.length&&($w(this),ZL(this,n,t),this.i&&4!=n&&v3(this))}},ft.cancel=function(){this.J=!0,vh(this)},ft.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Uoe(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(d3(),j0(17)),vh(this),this.o=2,m3(this)):jL(this,this.Y-n)};var $L=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mh(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof mh){this.h=void 0!==t?t:n.h,qw(this,n.j),this.s=n.s,this.g=n.g,Ww(this,n.m),this.l=n.l,t=n.i;var e=new b3;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),qL(this,e),this.o=n.o}else n&&(e=String(n).match($L))?(this.h=!!t,qw(this,e[1]||"",!0),this.s=w3(e[2]||""),this.g=w3(e[3]||"",!0),Ww(this,e[4]),this.l=w3(e[5]||"",!0),qL(this,e[6]||"",!0),this.o=w3(e[7]||"")):(this.h=!!t,this.i=new b3(null,this.h))}function sc(n){return new mh(n)}function qw(n,t,e){n.j=e?w3(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Ww(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function qL(n,t,e){t instanceof b3?(n.i=t,function eae(n,t){t&&!n.j&&(k5(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(KL(this,i),JL(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=_3(t,Qoe)),n.i=new b3(t,n.h))}function Ai(n,t,e){n.i.set(t,e)}function Kw(n){return Ai(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function w3(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function _3(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,Koe),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Koe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mh.prototype.toString=function(){var n=[],t=this.j;t&&n.push(_3(t,WL,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(_3(t,WL,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(_3(e,"/"==e.charAt(0)?Joe:Yoe,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",_3(e,Xoe)),n.join("")};var WL=/[#\/\?@]/g,Yoe=/[#\?:]/g,Joe=/[#\?]/g,Qoe=/[#\?@]/g,Xoe=/#/g;function b3(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function k5(n){n.g||(n.g=new Map,n.h=0,n.i&&function Woe(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function KL(n,t){k5(n),t=z2(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function YL(n,t){return k5(n),t=z2(n,t),n.g.has(t)}function JL(n,t,e){KL(n,t),0<e.length&&(n.i=null,n.g.set(z2(n,t),QD(e)),n.h+=e.length)}function z2(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function QL(n){this.l=n||nae,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=b3.prototype).add=function(n,t){k5(this),this.i=null,n=z2(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},ft.forEach=function(n,t){k5(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},ft.sa=function(){k5(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},ft.Z=function(n){k5(this);let t=[];if("string"==typeof n)YL(this,n)&&(t=t.concat(this.g.get(z2(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},ft.set=function(n,t){return k5(this),this.i=null,YL(this,n=z2(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},ft.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.Z(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var nae=10;function XL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function eO(n){return n.h?1:n.g?n.g.size:0}function TT(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function ET(n,t){n.g?n.g.add(t):n.h=t}function tO(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function nO(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return QD(n.i)}function IT(){}function iae(){this.g=new IT}function rae(n,t,e){const i=e||"";try{GL(n,function(r,s){let c=r;l3(r)&&(c=pT(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Yw(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function y3(n){this.l=n.fc||null,this.j=n.ob||!1}function Jw(n,t){jr.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=ST,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}QL.prototype.cancel=function(){if(this.i=nO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},IT.prototype.stringify=function(n){return Zt.JSON.stringify(n,void 0)},IT.prototype.parse=function(n){return Zt.JSON.parse(n,void 0)},Zr(y3,bT),y3.prototype.g=function(){return new Jw(this.l,this.j)},y3.prototype.i=function(n){return function(){return n}}({}),Zr(Jw,jr);var ST=0;function iO(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function C3(n){n.readyState=4,n.l=null,n.j=null,n.A=null,M3(n)}function M3(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=Jw.prototype).open=function(n,t){if(this.readyState!=ST)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,M3(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||Zt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,C3(this)),this.readyState=ST},ft.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,M3(this)),this.g&&(this.readyState=3,M3(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iO(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ft.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?C3(this):M3(this),3==this.readyState&&iO(this)}},ft.Za=function(n){this.g&&(this.response=this.responseText=n,C3(this))},ft.Ya=function(n){this.g&&(this.response=n,C3(this))},ft.ka=function(){this.g&&C3(this)},ft.setRequestHeader=function(n,t){this.v.append(n,t)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Jw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oae=Zt.JSON.parse;function Bi(n){jr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=rO,this.L=this.M=!1}Zr(Bi,jr);var rO="",aae=/^https?$/i,lae=["POST","PUT"];function sO(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,oO(n),Qw(n)}function oO(n){n.F||(n.F=!0,a0(n,"complete"),a0(n,"error"))}function aO(n){if(n.h&&typeof YD<"u"&&(!n.C[1]||4!=oc(n)||2!=n.da()))if(n.v&&4==oc(n))_T(n.La,0,n);else if(a0(n,"readystatechange"),4==oc(n)){n.h=!1;try{const d=n.da();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.I).match($L)[1]||null;if(!r&&Zt.self&&Zt.self.location){var s=Zt.self.location.protocol;r=s.substr(0,s.length-1)}i=!aae.test(r?r.toLowerCase():"")}e=i}if(e)a0(n,"complete"),a0(n,"success");else{n.m=6;try{var c=2<oc(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",oO(n)}}finally{Qw(n)}}}function Qw(n,t){if(n.g){lO(n);const e=n.g,i=n.C[0]?zw:null;n.g=null,n.C=null,t||a0(n,"ready");try{e.onreadystatechange=i}catch{}}}function lO(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function oc(n){return n.g?n.g.readyState:0}function cO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case rO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function uO(n){let t="";return oT(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function zT(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=uO(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Ai(n,t,e))}function x3(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function hO(n){this.Ga=0,this.i=[],this.j=new Bw,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=x3("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=x3("baseRetryDelayMs",5e3,n),this.hb=x3("retryDelaySeedMs",1e4,n),this.eb=x3("forwardChannelMaxRetries",2,n),this.xa=x3("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new QL(n&&n.concurrentRequestLimit),this.Ja=new iae,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function NT(n){if(dO(n),3==n.H){var t=n.W++,e=sc(n.G);Ai(e,"SID",n.J),Ai(e,"RID",t),Ai(e,"TYPE","terminate"),A3(n,e),(t=new p3(n,n.j,t,void 0)).L=2,t.v=Kw(sc(e)),e=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(e=Zt.navigator.sendBeacon(t.v.toString(),"")),!e&&Zt.Image&&((new Image).src=t.v,e=!0),e||(t.g=yO(t.l,null),t.g.ha(t.v)),t.G=Date.now(),v3(t)}_O(n)}function Xw(n){n.g&&(RT(n),n.g.cancel(),n.g=null)}function dO(n){Xw(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),t_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function e_(n){XL(n.h)||n.m||(n.m=!0,TL(n.Na,n),n.C=0)}function fO(n,t){var e;e=t?t.m:n.W++;const i=sc(n.G);Ai(i,"SID",n.J),Ai(i,"RID",e),Ai(i,"AID",n.V),A3(n,i),n.o&&n.s&&zT(i,n.o,n.s),e=new p3(n,n.j,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.i=t.F.concat(n.i)),t=gO(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),ET(n.h,e),AT(e,i,t)}function A3(n,t){n.ma&&oT(n.ma,function(e,i){Ai(t,i,e)}),n.l&&GL({},function(e,i){Ai(t,i,e)})}function gO(n,t,e){e=Math.min(n.i.length,e);var i=n.l?y0(n.l.Va,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let g=0;g<e;g++){let w=r[g].h;const y=r[g].g;if(w-=s,0>w)s=Math.max(0,r[g].h-100),d=!1;else try{rae(y,c,"req"+w+"_")}catch{i&&i(y)}}if(d){i=c.join("&");break e}}}return n=n.i.splice(0,e),t.F=n,i}function pO(n){n.g||n.u||(n.ba=1,TL(n.Ma,n),n.A=0)}function kT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=f3(y0(n.Ma,n),wO(n,n.A)),n.A++,0))}function RT(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function vO(n){n.g=new p3(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=sc(n.wa);Ai(t,"RID","rpc"),Ai(t,"SID",n.J),Ai(t,"CI",n.M?"0":"1"),Ai(t,"AID",n.V),Ai(t,"TYPE","xmlhttp"),A3(n,t),n.o&&n.s&&zT(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.oa,e.L=1,e.v=Kw(sc(t)),e.s=null,e.S=!0,BL(e,n)}function t_(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function mO(n,t){var e=null;if(n.g==t){t_(n),RT(n),n.g=null;var i=2}else{if(!TT(n.h,t))return;e=t.F,tO(n.h,t),i=1}if(0!=n.H)if(n.ta=t.aa,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var r=n.C;a0(i=Uw(),new LL(i,e)),e_(n)}else pO(n);else if(3==(r=t.o)||0==r&&0<n.ta||!(1==i&&function uae(n,t){return!(eO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=f3(y0(n.Na,n,t),wO(n,n.C)),n.C++,0)))}(n,t)||2==i&&kT(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:wh(n,5);break;case 4:wh(n,10);break;case 3:wh(n,6);break;default:wh(n,2)}}function wO(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.l||(e*=2),e*t}function wh(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=y0(n.pb,n);e||(e=new mh("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||qw(e,"https"),Kw(e)),function sae(n,t){const e=new Bw;if(Zt.Image){const i=new Image;i.onload=kw(Yw,e,i,"TestLoadImage: loaded",!0,t),i.onerror=kw(Yw,e,i,"TestLoadImage: error",!1,t),i.onabort=kw(Yw,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=kw(Yw,e,i,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else j0(2);n.H=0,n.l&&n.l.za(t),_O(n),dO(n)}function _O(n){if(n.H=0,n.pa=[],n.l){const t=nO(n.h);(0!=t.length||0!=n.i.length)&&(hL(n.pa,t),hL(n.pa,n.i),n.h.i.length=0,QD(n.i),n.i.length=0),n.l.ya()}}function bO(n,t,e){var i=e instanceof mh?sc(e):new mh(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),Ww(i,i.m);else{var r=Zt.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new mh(null,void 0);i&&qw(s,i),t&&(s.g=t),r&&Ww(s,r),e&&(s.l=e),i=s}return t=n.Da,(e=n.F)&&t&&Ai(i,e,t),Ai(i,"VER",n.qa),A3(n,i),i}function yO(n,t,e){if(t&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Bi(e&&n.Ha&&!n.va?new y3({ob:!0}):n.va)).Oa(n.I),t}function CO(){}function n_(){if(I2&&!(10<=Number(Toe)))throw Error("Environmental error: no available transport.")}function Js(n,t){jr.call(this),this.g=new hO(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!Rw(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Rw(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new N2(this)}function MO(n){yT.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function xO(){CT.call(this),this.status=1}function N2(n){this.g=n}function ja(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function VT(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var s=n.g[3],c=(t=n.g[0])+(s^(e=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;c=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=e+(c<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=t+(r^s&(e^r))+i[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=t+(e^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=t+(r^(e|~s))+i[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(t=e+((c=t+(r^(e|~s))+i[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((r=s+((c=r+(t^(s|~e))+i[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Fn(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==t||(e[r]=s,i=!1)}this.g=e}(ft=Bi.prototype).Oa=function(n){this.M=n},ft.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():MT.g(),this.C=function PL(n){return n.h||(n.h=n.i())}(this.u?this.u:MT),this.g.onreadystatechange=y0(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(s){return void sO(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=Zt.FormData&&n instanceof Zt.FormData,!(0<=uL(lae,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{lO(this),0<this.B&&((this.L=function cae(n){return I2&&function Doe(){return fL(Aoe,9,function(){let n=0;const t=dL(String(Lw)).split("."),e=dL("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=XD(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||XD(0==r[2].length,0==s[2].length)||XD(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y0(this.ua,this)):this.A=_T(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){sO(this,s)}},ft.ua=function(){typeof YD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,a0(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,a0(this,"complete"),a0(this,"abort"),Qw(this))},ft.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qw(this,!0)),Bi.$.N.call(this)},ft.La=function(){this.s||(this.G||this.v||this.l?aO(this):this.kb())},ft.kb=function(){aO(this)},ft.da=function(){try{return 2<oc(this)?this.g.status:-1}catch{return-1}},ft.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),oae(t)}},ft.Ia=function(){return this.m},ft.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=hO.prototype).qa=8,ft.H=1,ft.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new p3(this,this.j,n,void 0);let s=this.s;if(this.U&&(s?(s=wL(s),bL(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=gO(this,r,t),Ai(e=sc(this.G),"RID",n),Ai(e,"CVER",22),this.F&&Ai(e,"X-HTTP-Session-Id",this.F),A3(this,e),s&&(this.O?t="headers="+encodeURIComponent(String(uO(s)))+"&"+t:this.o&&zT(e,this.o,s)),ET(this.h,r),this.bb&&Ai(e,"TYPE","init"),this.P?(Ai(e,"$req",t),Ai(e,"SID","null"),r.ba=!0,AT(r,e,null)):AT(r,e,t),this.H=2}}else 3==this.H&&(n?fO(this,n):0==this.i.length||XL(this.h)||fO(this))},ft.Ma=function(){if(this.u=null,vO(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=f3(y0(this.jb,this),n)}},ft.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,j0(10),Xw(this),vO(this))},ft.ib=function(){null!=this.v&&(this.v=null,Xw(this),kT(this),j0(19))},ft.pb=function(n){n?(this.j.info("Successfully pinged google.com"),j0(2)):(this.j.info("Failed to ping google.com"),j0(1))},(ft=CO.prototype).Ba=function(){},ft.Aa=function(){},ft.za=function(){},ft.ya=function(){},ft.Va=function(){},n_.prototype.g=function(n,t){return new Js(n,t)},Zr(Js,jr),Js.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,t=this.l,e=this.h||void 0;j0(0),n.Y=t,n.ma=e||{},n.M=n.aa,n.G=bO(n,null,n.Y),e_(n)},Js.prototype.close=function(){NT(this.g)},Js.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=pT(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.fb++,n)),3==t.H&&e_(t)},Js.prototype.N=function(){this.g.l=null,delete this.j,NT(this.g),delete this.g,Js.$.N.call(this)},Zr(MO,yT),Zr(xO,CT),Zr(N2,CO),N2.prototype.Ba=function(){a0(this.g,"a")},N2.prototype.Aa=function(n){a0(this.g,new MO(n))},N2.prototype.za=function(n){a0(this.g,new xO)},N2.prototype.ya=function(){a0(this.g,"b")},Zr(ja,function hae(){this.blockSize=-1}),ja.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ja.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=e;)VT(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<t;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){VT(this,i),r=0;break}}else for(;s<t;)if(i[r++]=n[s++],r==this.blockSize){VT(this,i),r=0;break}}this.h=r,this.i+=t},ja.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var dae={};function LT(n){return-128<=n&&128>n?fL(dae,n,function(t){return new Fn([0|t],0>t?-1:0)}):new Fn([0|n],0>n?-1:0)}function R1(n){if(isNaN(n)||!isFinite(n))return k2;if(0>n)return l0(R1(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=OT;return new Fn(t,0)}var OT=4294967296,k2=LT(0),PT=LT(1),DO=LT(16777216);function ac(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function Lo(n){return-1==n.h}function l0(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new Fn(e,~n.h).add(PT)}function i_(n,t){return n.add(l0(t))}function r_(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function D3(n,t){this.g=n,this.h=t}function s_(n,t){if(ac(t))throw Error("division by zero");if(ac(n))return new D3(k2,k2);if(Lo(n))return t=s_(l0(n),t),new D3(l0(t.g),l0(t.h));if(Lo(t))return t=s_(n,l0(t)),new D3(l0(t.g),t.h);if(30<n.g.length){if(Lo(n)||Lo(t))throw Error("slowDivide_ only works with positive integers.");for(var e=PT,i=t;0>=i.X(n);)e=TO(e),i=TO(i);var r=R2(e,1),s=R2(i,1);for(i=R2(i,2),e=R2(e,2);!ac(i);){var c=s.add(i);0>=c.X(n)&&(r=r.add(e),s=c),i=R2(i,1),e=R2(e,1)}return t=i_(n,r.R(t)),new D3(r,t)}for(r=k2;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),c=(s=R1(e)).R(t);Lo(c)||0<c.X(n);)c=(s=R1(e-=i)).R(t);ac(s)&&(s=PT),r=r.add(s),n=i_(n,c)}return new D3(r,n)}function TO(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Fn(e,n.h)}function R2(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],s=0;s<i;s++)r[s]=0<t?n.D(s+e)>>>t|n.D(s+e+1)<<32-t:n.D(s+e);return new Fn(r,n.h)}(ft=Fn.prototype).ea=function(){if(Lo(this))return-l0(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:OT+i)*t,t*=OT}return n},ft.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ac(this))return"0";if(Lo(this))return"-"+l0(this).toString(n);for(var t=R1(Math.pow(n,6)),e=this,i="";;){var r=s_(e,t).g,s=((0<(e=i_(e,r.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(ac(e=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},ft.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ft.X=function(n){return Lo(n=i_(this,n))?-1:ac(n)?0:1},ft.abs=function(){return Lo(this)?l0(this):this},ft.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),c=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=c>>>16,e[r]=(c&=65535)<<16|(s&=65535)}return new Fn(e,-2147483648&e[e.length-1]?-1:0)},ft.R=function(n){if(ac(this)||ac(n))return k2;if(Lo(this))return Lo(n)?l0(this).R(l0(n)):l0(l0(this).R(n));if(Lo(n))return l0(this.R(l0(n)));if(0>this.X(DO)&&0>n.X(DO))return R1(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,c=65535&this.D(i),d=n.D(r)>>>16,g=65535&n.D(r);e[2*i+2*r]+=c*g,r_(e,2*i+2*r),e[2*i+2*r+1]+=s*g,r_(e,2*i+2*r+1),e[2*i+2*r+1]+=c*d,r_(e,2*i+2*r+1),e[2*i+2*r+2]+=s*d,r_(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new Fn(e,0)},ft.gb=function(n){return s_(this,n).h},ft.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new Fn(e,this.h&n.h)},ft.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new Fn(e,this.h|n.h)},ft.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new Fn(e,this.h^n.h)},n_.prototype.createWebChannel=n_.prototype.g,Js.prototype.send=Js.prototype.u,Js.prototype.open=Js.prototype.m,Js.prototype.close=Js.prototype.close,Zw.NO_ERROR=0,Zw.TIMEOUT=8,Zw.HTTP_ERROR=6,OL.COMPLETE="complete",HL.EventType=g3,g3.OPEN="a",g3.CLOSE="b",g3.ERROR="c",g3.MESSAGE="d",jr.prototype.listen=jr.prototype.O,Bi.prototype.listenOnce=Bi.prototype.P,Bi.prototype.getLastError=Bi.prototype.Sa,Bi.prototype.getLastErrorCode=Bi.prototype.Ia,Bi.prototype.getStatus=Bi.prototype.da,Bi.prototype.getResponseJson=Bi.prototype.Wa,Bi.prototype.getResponseText=Bi.prototype.ja,Bi.prototype.send=Bi.prototype.ha,Bi.prototype.setWithCredentials=Bi.prototype.Oa,ja.prototype.digest=ja.prototype.l,ja.prototype.reset=ja.prototype.reset,ja.prototype.update=ja.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=R1,Fn.fromString=function AO(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return l0(AO(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=R1(Math.pow(t,8)),i=k2,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),c=parseInt(n.substring(r,r+s),t);8>s?(s=R1(Math.pow(t,s)),i=i.R(s).add(R1(c))):i=(i=i.R(e)).add(R1(c))}return i};var fae=Za.createWebChannelTransport=function(){return new n_},gae=Za.getStatEventTarget=function(){return Uw()},HT=Za.ErrorCode=Zw,pae=Za.EventType=OL,vae=Za.Event=ph,EO=Za.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mae=Za.FetchXmlHttpFactory=y3,o_=Za.WebChannel=HL,wae=Za.XhrIo=Bi,_ae=Za.Md5=ja,V2=Za.Integer=Fn;const IO="@firebase/firestore";class Gr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let L2="9.22.0";const R5=new Ba.Yd("@firebase/firestore");function FT(){return R5.logLevel}function Ze(n,...t){if(R5.logLevel<=Ba.in.DEBUG){const e=t.map(BT);R5.debug(`Firestore (${L2}): ${n}`,...e)}}function er(n,...t){if(R5.logLevel<=Ba.in.ERROR){const e=t.map(BT);R5.error(`Firestore (${L2}): ${n}`,...e)}}function Oo(n,...t){if(R5.logLevel<=Ba.in.WARN){const e=t.map(BT);R5.warn(`Firestore (${L2}): ${n}`,...e)}}function BT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function vt(n="Unexpected state"){const t=`FIRESTORE (${L2}) INTERNAL ASSERTION FAILED: `+n;throw er(t),new Error(t)}function xt(n,t){n||vt()}function ot(n,t){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends H.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class SO{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Cae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Gr.UNAUTHENTICATED))}shutdown(){}}class Mae{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class xae{constructor(t){this.t=t,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=w=>this.i!==r?(r=this.i,e(w)):Promise.resolve();let c=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xr,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const w=c;t.enqueueRetryable((0,ie.Z)(function*(){yield w.promise,yield s(i.currentUser)}))},g=w=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(w=>g(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?g(w):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xr)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xt("string"==typeof i.accessToken),new SO(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return xt(null===t||"string"==typeof t),new Gr(t)}}class Aae{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Dae{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new Aae(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tae{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const i=s=>{null!=s.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.T;return this.T=s.token,Ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(xt("string"==typeof e.token),this.T=e.token,new zO(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Eae(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class NO{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=Eae(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Ut(n,t){return n<t?-1:n>t?1:0}function O2(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function kO(n){return n+"\0"}class Di{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Di.fromMillis(Date.now())}static fromDate(t){return Di.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Di(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ut(this.nanoseconds,t.nanoseconds):Ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(t){this.timestamp=t}static fromTimestamp(t){return new At(t)}static min(){return new At(new Di(0,0))}static max(){return new At(new Di(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class T3{constructor(t,e,i){void 0===e?e=0:e>t.length&&vt(),void 0===i?i=t.length-e:i>t.length-e&&vt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===T3.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof T3?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class yn extends T3{construct(t,e,i){return new yn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ve(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new yn(e)}static emptyPath(){return new yn([])}}const Iae=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ui extends T3{construct(t,e,i){return new Ui(t,e,i)}static isValidIdentifier(t){return Iae.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ui.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ui(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ve(pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ve(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[r+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ve(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=g,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Ve(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ui(e)}static emptyPath(){return new Ui([])}}class st{constructor(t){this.path=t}static fromPath(t){return new st(yn.fromString(t))}static fromName(t){return new st(yn.fromString(t).popFirst(5))}static empty(){return new st(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===yn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return yn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new st(new yn(t.slice()))}}class a_{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function UT(n){return n.fields.find(t=>2===t.kind)}function _h(n){return n.fields.filter(t=>2!==t.kind)}a_.UNKNOWN_ID=-1;class l_{constructor(t,e){this.fieldPath=t,this.kind=e}}class E3{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new E3(0,Qs.min())}}function RO(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=At.fromTimestamp(1e9===i?new Di(e+1,0):new Di(e,i));return new Qs(r,st.empty(),t)}function VO(n){return new Qs(n.readTime,n.key,-1)}class Qs{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Qs(At.min(),st.empty(),-1)}static max(){return new Qs(At.max(),st.empty(),-1)}}function ZT(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=st.comparator(n.documentKey,t.documentKey),0!==e?e:Ut(n.largestBatchId,t.largestBatchId))}const LO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function V5(n){return jT.apply(this,arguments)}function jT(){return jT=(0,ie.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==LO)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}),jT.apply(this,arguments)}class ue{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ue((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ue?e:ue.resolve(e)}catch(e){return ue.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ue.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ue.reject(e)}static resolve(t){return new ue((e,i)=>{e(t)})}static reject(t){return new ue((e,i)=>{i(t)})}static waitFor(t){return new ue((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},g=>i(g))}),c=!0,s===r&&e()})}static or(t){let e=ue.resolve(!1);for(const i of t)e=e.next(r=>r?ue.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new ue((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let g=0;g<s;g++){const w=g;e(t[w]).next(y=>{c[w]=y,++d,d===s&&i(c)},y=>r(y))}})}static doWhile(t,e){return new ue((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class c_{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new xr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new I3(t,e.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=GT(i.target.error);this.v.reject(new I3(t,r))}}static open(t,e,i,r){try{return new c_(e,t.transaction(r,i))}catch(s){throw new I3(e,s)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(Ze("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new kae(e)}}class Ga{constructor(t,e,i){this.name=t,this.version=e,this.V=i,12.2===Ga.S((0,H.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ze("SimpleDb","Removing database:",t),bh(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,H.hl)())return!1;if(Ga.C())return!0;const t=(0,H.z$)(),e=Ga.S(t),i=0<e&&e<10,r=Ga.N(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(t){var e=this;return(0,ie.Z)(function*(){return e.db||(Ze("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new I3(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Ve(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ve(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new I3(t,d))},s.onupgradeneeded=c=>{Ze("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.V.O(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=i=>e.F(i)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,ie.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.$(t);const g=c_.open(s.db,t,c?"readonly":"readwrite",i),w=r(g).next(y=>(g.P(),y)).catch(y=>(g.abort(y),ue.reject(y))).toPromise();return w.catch(()=>{}),yield g.R,w}catch(g){const w=g,y="FirebaseError"!==w.name&&d<3;if(Ze("SimpleDb","Transaction failed with error:",w.message,"Retrying:",y),s.close(),!y)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Nae{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return bh(this.L.delete())}}class I3 extends Ve{constructor(t,e){super(pe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function L5(n){return"IndexedDbTransactionError"===n.name}class kae{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ze("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),bh(i)}add(t){return Ze("SimpleDb","ADD",this.store.name,t,t),bh(this.store.add(t))}get(t){return bh(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ze("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ze("SimpleDb","DELETE",this.store.name,t),bh(this.store.delete(t))}count(){return Ze("SimpleDb","COUNT",this.store.name),bh(this.store.count())}j(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ue((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}H(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ue((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}J(t,e){Ze("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,c,d)=>d.delete())}X(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Z(t){const e=this.cursor({});return new ue((i,r)=>{e.onerror=s=>{const c=GT(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}W(t,e){const i=[];return new ue((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const g=new Nae(d),w=e(d.primaryKey,d.value,g);if(w instanceof ue){const y=w.catch(A=>(g.done(),ue.reject(A)));i.push(y)}g.isDone?r():null===g.K?d.continue():d.continue(g.K)}}).next(()=>ue.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function bh(n){return new ue((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=GT(i.target.error);e(r)}})}let PO=!1;function GT(n){const t=Ga.S((0,H.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PO||(PO=!0,setTimeout(()=>{throw i},0)),i}}return n}class Rae{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;Ze("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,ie.Z)(function*(){e.task=null;try{Ze("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(i){L5(i)?Ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield V5(i)}yield e.et(6e4)}))}}class Vae{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,ie.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.st(i,t))})()}st(t,e){const i=new Set;let r=e,s=!0;return ue.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return Ze("IndexBackiller",`Processing collection: ${c}`),this.it(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}it(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.rt(r,s)).next(d=>(Ze("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}rt(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=VO(s);ZT(c,i)>0&&(i=c)}),new Qs(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Xs=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return n.ct=-1,n})();function S3(n){return null==n}function z3(n){return 0===n&&1/n==-1/0}function HO(n){return"number"==typeof n&&Number.isInteger(n)&&!z3(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function M0(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=FO(t)),t=Lae(n.get(e),t);return FO(t)}function Lae(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function FO(n){return n+"\x01\x01"}function V1(n){const t=n.length;if(xt(t>=2),2===t)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&vt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let g;0===r.length?g=d:(r+=d,g=r,r=""),i.push(g);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:vt()}s=c+2}return new yn(i)}const BO=["userId","batchId"];function u_(n,t){return[n,M0(t)]}function UO(n,t,e){return[n,M0(t),e]}const Oae={},Pae=["prefixPath","collectionGroup","readTime","documentId"],Hae=["prefixPath","collectionGroup","documentId"],Fae=["collectionGroup","readTime","prefixPath","documentId"],Bae=["canonicalId","targetId"],Uae=["targetId","path"],Zae=["path","targetId"],jae=["collectionId","parent"],Gae=["indexId","uid"],$ae=["uid","sequenceNumber"],qae=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wae=["indexId","uid","orderedDocumentKey"],Kae=["userId","collectionPath","documentId"],Yae=["userId","collectionPath","largestBatchId"],Jae=["userId","collectionGroup","largestBatchId"],ZO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qae=[...ZO,"documentOverlays"],jO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GO=jO,Xae=[...GO,"indexConfiguration","indexState","indexEntries"];class $T extends OO{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function $r(n,t){const e=ot(n);return Ga.M(e.ht,t)}function $O(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function O5(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function qO(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class ri{constructor(t,e){this.comparator=t,this.root=e||c0.EMPTY}insert(t,e){return new ri(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,c0.BLACK,null,null))}remove(t){return new ri(this.comparator,this.root.remove(t,this.comparator).copy(null,null,c0.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new h_(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new h_(this.root,t,this.comparator,!1)}getReverseIterator(){return new h_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new h_(this.root,t,this.comparator,!0)}}class h_{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class c0{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??c0.RED,this.left=r??c0.EMPTY,this.right=s??c0.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new c0(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return c0.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return c0.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,c0.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,c0.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const t=this.left.check();if(t!==this.right.check())throw vt();return t+(this.isRed()?0:1)}}c0.EMPTY=null,c0.RED=!0,c0.BLACK=!1,c0.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new c0(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pi{constructor(t){this.comparator=t,this.data=new ri(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new WO(this.data.getIterator())}getIteratorFrom(t){return new WO(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof pi)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new pi(this.comparator);return e.data=t,e}}class WO{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function P2(n){return n.hasNext()?n.getNext():void 0}class ms{constructor(t){this.fields=t,t.sort(Ui.comparator)}static empty(){return new ms([])}unionWith(t){let e=new pi(Ui.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ms(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return O2(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class KO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ar{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new KO("Invalid base64 string: "+r):r}}(t);return new Ar(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Ar(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const t1e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function P5(n){if(xt(!!n),"string"==typeof n){let t=0;const e=t1e.exec(n);if(xt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Zi(n.seconds),nanos:Zi(n.nanos)}}function Zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function lc(n){return"string"==typeof n?Ar.fromBase64String(n):Ar.fromUint8Array(n)}function d_(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function f_(n){const t=n.mapValue.fields.__previous_value__;return d_(t)?f_(t):t}function N3(n){const t=P5(n.mapValue.fields.__local_write_time__.timestampValue);return new Di(t.seconds,t.nanos)}class n1e{constructor(t,e,i,r,s,c,d,g,w){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=w}}class H5{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new H5("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof H5&&t.projectId===this.projectId&&t.database===this.database}}const F5={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},g_={nullValue:"NULL_VALUE"};function B5(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d_(n)?4:XO(n)?9007199254740991:10:vt()}function L1(n,t){if(n===t)return!0;const e=B5(n);if(e!==B5(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return N3(n).isEqual(N3(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=P5(i.timestampValue),c=P5(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,lc(n.bytesValue).isEqual(lc(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Zi(i.geoPointValue.latitude)===Zi(r.geoPointValue.latitude)&&Zi(i.geoPointValue.longitude)===Zi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Zi(i.integerValue)===Zi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Zi(i.doubleValue),c=Zi(r.doubleValue);return s===c?z3(s)===z3(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return O2(n.arrayValue.values||[],t.arrayValue.values||[],L1);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if($O(s)!==$O(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!L1(s[d],c[d])))return!1;return!0}(n,t);default:return vt()}var r}function k3(n,t){return void 0!==(n.values||[]).find(e=>L1(e,t))}function U5(n,t){if(n===t)return 0;const e=B5(n),i=B5(t);if(e!==i)return Ut(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=Zi(r.integerValue||r.doubleValue),d=Zi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return YO(n.timestampValue,t.timestampValue);case 4:return YO(N3(n),N3(t));case 5:return Ut(n.stringValue,t.stringValue);case 6:return function(r,s){const c=lc(r),d=lc(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let g=0;g<c.length&&g<d.length;g++){const w=Ut(c[g],d[g]);if(0!==w)return w}return Ut(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Ut(Zi(r.latitude),Zi(s.latitude));return 0!==c?c:Ut(Zi(r.longitude),Zi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let g=0;g<c.length&&g<d.length;++g){const w=U5(c[g],d[g]);if(w)return w}return Ut(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===F5.mapValue&&s===F5.mapValue)return 0;if(r===F5.mapValue)return 1;if(s===F5.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),g=s.fields||{},w=Object.keys(g);d.sort(),w.sort();for(let y=0;y<d.length&&y<w.length;++y){const A=Ut(d[y],w[y]);if(0!==A)return A;const I=U5(c[d[y]],g[w[y]]);if(0!==I)return I}return Ut(d.length,w.length)}(n.mapValue,t.mapValue);default:throw vt()}}function YO(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Ut(n,t);const e=P5(n),i=P5(t),r=Ut(e.seconds,i.seconds);return 0!==r?r:Ut(e.nanos,i.nanos)}function H2(n){return qT(n)}function qT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=P5(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?lc(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=qT(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${qT(i.fields[d])}`;return s+"}"}(n.mapValue):vt();var t}function yh(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function WT(n){return!!n&&"integerValue"in n}function R3(n){return!!n&&"arrayValue"in n}function JO(n){return!!n&&"nullValue"in n}function QO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function v_(n){return!!n&&"mapValue"in n}function V3(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return O5(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=V3(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=V3(n.arrayValue.values[e]);return t}return Object.assign({},n)}function XO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function i1e(n){return"nullValue"in n?g_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yh(H5.empty(),st.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:vt()}function r1e(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yh(H5.empty(),st.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?F5:vt()}function eP(n,t){const e=U5(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function tP(n,t){const e=U5(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class u0{constructor(t){this.value=t}static empty(){return new u0({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!v_(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=V3(e)}setAll(t){let e=Ui.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const g=this.getFieldsMap(e);this.applyChanges(g,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=V3(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());v_(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return L1(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];v_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){O5(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new u0(V3(this.value))}}function nP(n){const t=[];return O5(n.fields,(e,i)=>{const r=new Ui([e]);if(v_(i)){const s=nP(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new ms(t)}class vi{constructor(t,e,i,r,s,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=c,this.documentState=d}static newInvalidDocument(t){return new vi(t,0,At.min(),At.min(),At.min(),u0.empty(),0)}static newFoundDocument(t,e,i,r){return new vi(t,1,e,At.min(),i,r,0)}static newNoDocument(t,e){return new vi(t,2,e,At.min(),At.min(),u0.empty(),0)}static newUnknownDocument(t,e){return new vi(t,3,e,At.min(),At.min(),u0.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=u0.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=u0.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof vi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new vi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Z5{constructor(t,e){this.position=t,this.inclusive=e}}function iP(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?st.comparator(st.fromName(c.referenceValue),e.key):U5(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function rP(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!L1(n.position[e],t.position[e]))return!1;return!0}class F2{constructor(t,e="asc"){this.field=t,this.dir=e}}function s1e(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class sP{}class pn extends sP{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new o1e(t,e,i):"array-contains"===e?new c1e(t,i):"in"===e?new hP(t,i):"not-in"===e?new u1e(t,i):"array-contains-any"===e?new h1e(t,i):new pn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new a1e(t,i):new l1e(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(U5(e,this.value)):null!==e&&B5(this.value)===B5(e)&&this.matchesComparison(U5(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Bn extends sP{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new Bn(t,e)}matches(t){return B2(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(e=>e.isInequality());return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function B2(n){return"and"===n.op}function KT(n){return"or"===n.op}function YT(n){return oP(n)&&B2(n)}function oP(n){for(const t of n.filters)if(t instanceof Bn)return!1;return!0}function JT(n){if(n instanceof pn)return n.field.canonicalString()+n.op.toString()+H2(n.value);if(YT(n))return n.filters.map(t=>JT(t)).join(",");{const t=n.filters.map(e=>JT(e)).join(",");return`${n.op}(${t})`}}function aP(n,t){return n instanceof pn?(e=n,(i=t)instanceof pn&&e.op===i.op&&e.field.isEqual(i.field)&&L1(e.value,i.value)):n instanceof Bn?function(e,i){return i instanceof Bn&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,s,c)=>r&&aP(s,i.filters[c]),!0)}(n,t):void vt();var e,i}function lP(n,t){const e=n.filters.concat(t);return Bn.create(e,n.op)}function cP(n){return n instanceof pn?`${(t=n).field.canonicalString()} ${t.op} ${H2(t.value)}`:n instanceof Bn?function(t){return t.op.toString()+" {"+t.getFilters().map(cP).join(" ,")+"}"}(n):"Filter";var t}class o1e extends pn{constructor(t,e,i){super(t,e,i),this.key=st.fromName(i.referenceValue)}matches(t){const e=st.comparator(t.key,this.key);return this.matchesComparison(e)}}class a1e extends pn{constructor(t,e){super(t,"in",e),this.keys=uP(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class l1e extends pn{constructor(t,e){super(t,"not-in",e),this.keys=uP(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function uP(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>st.fromName(i.referenceValue))}class c1e extends pn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return R3(e)&&k3(e.arrayValue,this.value)}}class hP extends pn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&k3(this.value.arrayValue,e)}}class u1e extends pn{constructor(t,e){super(t,"not-in",e)}matches(t){if(k3(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!k3(this.value.arrayValue,e)}}class h1e extends pn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!R3(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>k3(this.value.arrayValue,i))}}class d1e{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.dt=null}}function QT(n,t=null,e=[],i=[],r=null,s=null,c=null){return new d1e(n,t,e,i,r,s,c)}function Ch(n){const t=ot(n);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>JT(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),S3(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>H2(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>H2(i)).join(",")),t.dt=e}return t.dt}function L3(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!s1e(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!aP(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!rP(n.startAt,t.startAt)&&rP(n.endAt,t.endAt)}function m_(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function w_(n,t){return n.filters.filter(e=>e instanceof pn&&e.field.isEqual(t))}function dP(n,t,e){let i=g_,r=!0;for(const s of w_(n,t)){let c=g_,d=!0;switch(s.op){case"<":case"<=":c=i1e(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=g_}eP({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];eP({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function fP(n,t,e){let i=F5,r=!0;for(const s of w_(n,t)){let c=F5,d=!0;switch(s.op){case">=":case">":c=r1e(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=F5}tP({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];tP({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class cc{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=g,this.wt=null,this._t=null}}function gP(n,t,e,i,r,s,c,d){return new cc(n,t,e,i,r,s,c,d)}function U2(n){return new cc(n)}function pP(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function XT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function __(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function eE(n){return null!==n.collectionGroup}function Mh(n){const t=ot(n);if(null===t.wt){t.wt=[];const e=__(t),i=XT(t);if(null!==e&&null===i)e.isKeyField()||t.wt.push(new F2(e)),t.wt.push(new F2(Ui.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new F2(Ui.keyField(),s))}}}return t.wt}function G0(n){const t=ot(n);if(!t._t)if("F"===t.limitType)t._t=QT(t.path,t.collectionGroup,Mh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Mh(t))e.push(new F2(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Z5(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Z5(t.startAt.position,t.startAt.inclusive):null;t._t=QT(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function tE(n,t){t.getFirstInequalityField(),__(n);const e=n.filters.concat([t]);return new cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function b_(n,t,e){return new cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function O3(n,t){return L3(G0(n),G0(t))&&n.limitType===t.limitType}function vP(n){return`${Ch(G0(n))}|lt:${n.limitType}`}function nE(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>cP(i)).join(", ")}]`),S3(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>H2(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>H2(i)).join(",")),`Target(${e})`}(G0(n))}; limitType=${n.limitType})`}function P3(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):st.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of Mh(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=iP(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,Mh(e),i)||e.endAt&&!function(r,s,c){const d=iP(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,Mh(e),i)));var e,i}function mP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wP(n){return(t,e)=>{let i=!1;for(const r of Mh(n)){const s=f1e(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function f1e(n,t,e){const i=n.field.isKeyField()?st.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),g=c.data.field(r);return null!==d&&null!==g?U5(d,g):vt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return vt()}}class uc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){O5(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return qO(this.inner)}size(){return this.innerSize}}const g1e=new ri(st.comparator);function ws(){return g1e}const _P=new ri(st.comparator);function H3(...n){let t=_P;for(const e of n)t=t.insert(e.key,e);return t}function bP(n){let t=_P;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function O1(){return F3()}function yP(){return F3()}function F3(){return new uc(n=>n.toString(),(n,t)=>n.isEqual(t))}const p1e=new ri(st.comparator),v1e=new pi(st.comparator);function Jt(...n){let t=v1e;for(const e of n)t=t.add(e);return t}const m1e=new pi(Ut);function iE(){return m1e}function CP(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z3(t)?"-0":t}}function MP(n){return{integerValue:""+n}}function xP(n,t){return HO(t)?MP(t):CP(n,t)}class y_{constructor(){this._=void 0}}function w1e(n,t,e){return n instanceof Z2?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&d_(r)&&(r=f_(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof xh?DP(n,t):n instanceof Ah?TP(n,t):function(i,r){const s=AP(i,r),c=EP(s)+EP(i.gt);return WT(s)&&WT(i.gt)?MP(c):CP(i.serializer,c)}(n,t)}function _1e(n,t,e){return n instanceof xh?DP(n,t):n instanceof Ah?TP(n,t):e}function AP(n,t){return n instanceof j2?WT(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Z2 extends y_{}class xh extends y_{constructor(t){super(),this.elements=t}}function DP(n,t){const e=IP(t);for(const i of n.elements)e.some(r=>L1(r,i))||e.push(i);return{arrayValue:{values:e}}}class Ah extends y_{constructor(t){super(),this.elements=t}}function TP(n,t){let e=IP(t);for(const i of n.elements)e=e.filter(r=>!L1(r,i));return{arrayValue:{values:e}}}class j2 extends y_{constructor(t,e){super(),this.serializer=t,this.gt=e}}function EP(n){return Zi(n.integerValue||n.doubleValue)}function IP(n){return R3(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class B3{constructor(t,e){this.field=t,this.transform=e}}class y1e{constructor(t,e){this.version=t,this.transformResults=e}}class Ti{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ti}static exists(t){return new Ti(void 0,t)}static updateTime(t){return new Ti(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function C_(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class M_{}function SP(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new $2(n.key,Ti.none()):new G2(n.key,n.data,Ti.none());{const e=n.data,i=u0.empty();let r=new pi(Ui.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new hc(n.key,i,new ms(r.toArray()),Ti.none())}}function C1e(n,t,e){n instanceof G2?function(i,r,s){const c=i.value.clone(),d=kP(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof hc?function(i,r,s){if(!C_(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=kP(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(NP(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function U3(n,t,e,i){return n instanceof G2?function(r,s,c,d){if(!C_(r.precondition,s))return c;const g=r.value.clone(),w=RP(r.fieldTransforms,d,s);return g.setAll(w),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof hc?function(r,s,c,d){if(!C_(r.precondition,s))return c;const g=RP(r.fieldTransforms,d,s),w=s.data;return w.setAll(NP(r)),w.setAll(g),s.convertToFoundDocument(s.version,w).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(y=>y.field))}(n,t,e,i):(c=e,C_(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function M1e(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=AP(i.transform,r||null);null!=s&&(null===e&&(e=u0.empty()),e.set(i.field,s))}return e||null}function zP(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&O2(e,i,(r,s)=>function b1e(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof xh&&i instanceof xh||e instanceof Ah&&i instanceof Ah?O2(e.elements,i.elements,L1):e instanceof j2&&i instanceof j2?L1(e.gt,i.gt):e instanceof Z2&&i instanceof Z2);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class G2 extends M_{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class hc extends M_{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NP(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function kP(n,t,e){const i=new Map;xt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,_1e(c,d,e[r]))}return i}function RP(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,w1e(s,c,t))}return i}class $2 extends M_{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rE extends M_{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sE{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&C1e(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=U3(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=U3(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=yP();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const g=SP(c,d);null!==g&&i.set(r.key,g),c.isValidDocument()||c.convertToNoDocument(At.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Jt())}isEqual(t){return this.batchId===t.batchId&&O2(this.mutations,t.mutations,(e,i)=>zP(e,i))&&O2(this.baseMutations,t.baseMutations,(e,i)=>zP(e,i))}}class oE{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){xt(t.mutations.length===i.length);let r=p1e;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new oE(t,e,i,r)}}class aE{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class A1e{constructor(t,e){this.count=t,this.unchangedNames=e}}var gr,Cn;function VP(n){switch(n){default:return vt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function LP(n){if(void 0===n)return er("GRPC error has no .code"),pe.UNKNOWN;switch(n){case gr.OK:return pe.OK;case gr.CANCELLED:return pe.CANCELLED;case gr.UNKNOWN:return pe.UNKNOWN;case gr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case gr.INTERNAL:return pe.INTERNAL;case gr.UNAVAILABLE:return pe.UNAVAILABLE;case gr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case gr.NOT_FOUND:return pe.NOT_FOUND;case gr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case gr.ABORTED:return pe.ABORTED;case gr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case gr.DATA_LOSS:return pe.DATA_LOSS;default:return vt()}}(Cn=gr||(gr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class lE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return x_}static getOrCreateInstance(){return null===x_&&(x_=new lE),x_}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let x_=null;function OP(){return new TextEncoder}const D1e=new V2([4294967295,4294967295],0);function PP(n){const t=OP().encode(n),e=new _ae;return e.update(t),new Uint8Array(e.digest())}function HP(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new V2([e,i],0),new V2([r,s],0)]}class cE{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Z3(`Invalid padding: ${e}`);if(i<0)throw new Z3(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new Z3(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new Z3(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=V2.fromNumber(this.It)}Et(t,e,i){let r=t.add(e.multiply(V2.fromNumber(i)));return 1===r.compare(D1e)&&(r=new V2([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=PP(t),[i,r]=HP(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);if(!this.At(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),c=new cE(s,r,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(0===this.It)return;const e=PP(t),[i,r]=HP(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);this.Rt(c)}}Rt(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class Z3 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class j3{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,G3.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new j3(At.min(),r,new ri(Ut),ws(),Jt())}}class G3{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new G3(i,e,Jt(),Jt(),Jt())}}class A_{constructor(t,e,i,r){this.Pt=t,this.removedTargetIds=e,this.key=i,this.bt=r}}class FP{constructor(t,e){this.targetId=t,this.Vt=e}}class BP{constructor(t,e,i=Ar.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class UP{constructor(){this.St=0,this.Dt=jP(),this.Ct=Ar.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=Jt(),e=Jt(),i=Jt();return this.Dt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:vt()}}),new G3(this.Ct,this.xt,t,e,i)}Ft(){this.Nt=!1,this.Dt=jP()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class T1e{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=ws(),this.zt=ZP(),this.Wt=new ri(Ut)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,e=>{const i=this.Zt(e);switch(t.state){case 0:this.te(e)&&i.$t(t.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(t.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(e);break;case 3:this.te(e)&&(i.Kt(),i.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),i.$t(t.resumeToken));break;default:vt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach((i,r)=>{this.te(r)&&e(r)})}ne(t){var e;const i=t.targetId,r=t.Vt.count,s=this.se(i);if(s){const c=s.target;if(m_(c))if(0===r){const d=new st(c.path);this.Yt(i,d,vi.newNoDocument(d,At.min()))}else xt(1===r);else{const d=this.ie(i);if(d!==r){const g=this.re(t,d);0!==g&&(this.ee(i),this.Wt=this.Wt.insert(i,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=lE.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(w,y,A){var I,N,Z,J,te,xe;const ke={localCacheCount:y,existenceFilterCount:A.count},He=A.unchangedNames;return He&&(ke.bloomFilter={applied:0===w,hashCount:null!==(I=He?.hashCount)&&void 0!==I?I:0,bitmapLength:null!==(J=null===(Z=null===(N=He?.bits)||void 0===N?void 0:N.bitmap)||void 0===Z?void 0:Z.length)&&void 0!==J?J:0,padding:null!==(xe=null===(te=He?.bits)||void 0===te?void 0:te.padding)&&void 0!==xe?xe:0}),ke}(g,d,t.Vt))}}}}re(t,e){const{unchangedNames:i,count:r}=t.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:c=0},hashCount:d=0}=i;let g,w;try{g=lc(s).toUint8Array()}catch(y){if(y instanceof KO)return Oo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw y}try{w=new cE(g,c,d)}catch(y){return Oo(y instanceof Z3?"BloomFilter error: ":"Applying bloom filter failed: ",y),1}return 0===w.It?1:r!==e-this.oe(t.targetId,w)?2:0}oe(t,e){const i=this.Gt.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const c=this.Gt.ue(),d=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.vt(d)||(this.Yt(t,s,null),r++)}),r}ce(t){const e=new Map;this.Qt.forEach((s,c)=>{const d=this.se(c);if(d){if(s.current&&m_(d.target)){const g=new st(d.target.path);null!==this.jt.get(g)||this.ae(c,g)||this.Yt(c,g,vi.newNoDocument(g,t))}s.Mt&&(e.set(c,s.Ot()),s.Ft())}});let i=Jt();this.zt.forEach((s,c)=>{let d=!0;c.forEachWhile(g=>{const w=this.se(g);return!w||"TargetPurposeLimboResolution"===w.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.jt.forEach((s,c)=>c.setReadTime(t));const r=new j3(t,e,this.Wt,this.jt,i);return this.jt=ws(),this.zt=ZP(),this.Wt=new ri(Ut),r}Jt(t,e){if(!this.te(t))return;const i=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,i),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,i){if(!this.te(t))return;const r=this.Zt(t);this.ae(t,e)?r.Bt(e,1):r.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),i&&(this.jt=this.jt.insert(e,i))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new UP,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new pi(Ut),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||Ze("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new UP),this.Gt.getRemoteKeysForTarget(t).forEach(e=>{this.Yt(t,e,null)})}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function ZP(){return new ri(st.comparator)}function jP(){return new ri(st.comparator)}const E1e={asc:"ASCENDING",desc:"DESCENDING"},I1e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S1e={and:"AND",or:"OR"};class z1e{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function uE(n,t){return n.useProto3Json||S3(t)?t:{value:t}}function q2(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function GP(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function N1e(n,t){return q2(n,t.toTimestamp())}function tr(n){return xt(!!n),At.fromTimestamp(function(t){const e=P5(t);return new Di(e.seconds,e.nanos)}(n))}function hE(n,t){return(e=n,new yn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function $P(n){const t=yn.fromString(n);return xt(tH(t)),t}function $3(n,t){return hE(n.databaseId,t.path)}function P1(n,t){const e=$P(t);if(e.get(1)!==n.databaseId.projectId)throw new Ve(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ve(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new st(WP(e))}function dE(n,t){return hE(n.databaseId,t)}function qP(n){const t=$P(n);return 4===t.length?yn.emptyPath():WP(t)}function q3(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WP(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function KP(n,t,e){return{name:$3(n,t),fields:e.value.mapValue.fields}}function YP(n,t,e){const i=P1(n,t.name),r=tr(t.updateTime),s=t.createTime?tr(t.createTime):At.min(),c=new u0({mapValue:{fields:t.fields}}),d=vi.newFoundDocument(i,r,s,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function W3(n,t){let e;if(t instanceof G2)e={update:KP(n,t.key,t.value)};else if(t instanceof $2)e={delete:$3(n,t.key)};else if(t instanceof hc)e={update:KP(n,t.key,t.data),updateMask:F1e(t.fieldMask)};else{if(!(t instanceof rE))return vt();e={verify:$3(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof Z2)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xh)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ah)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof j2)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw vt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:N1e(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:vt()),e;var r}function fE(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Ti.updateTime(tr(r.updateTime)):void 0!==r.exists?Ti.exists(r.exists):Ti.none():Ti.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),d=new Z2):"appendMissingElements"in c?d=new xh(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Ah(c.removeAllFromArray.values||[]):"increment"in c?d=new j2(s,c.increment):vt();const g=Ui.fromServerFormat(c.fieldPath);return new B3(g,d)}(n,r)):[];var r;if(t.update){const r=P1(n,t.update.name),s=new u0({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new ms((t.updateMask.fieldPaths||[]).map(w=>Ui.fromServerFormat(w)));return new hc(r,s,c,e,i)}return new G2(r,s,e,i)}if(t.delete){const r=P1(n,t.delete);return new $2(r,e)}if(t.verify){const r=P1(n,t.verify);return new rE(r,e)}return vt()}function JP(n,t){return{documents:[dE(n,t.path)]}}function gE(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=dE(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=dE(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(g){if(0!==g.length)return eH(Bn.create(g,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const s=function(g){if(0!==g.length)return g.map(w=>{return{field:j5((y=w).field),direction:O1e(y.dir)};var y})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=uE(n,t.limit);var d,g;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(g=t.endAt).inclusive,values:g.position}),e}function QP(n){let t=qP(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){xt(1===i);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let s=[];e.where&&(s=function(y){const A=XP(y);return A instanceof Bn&&YT(A)?A.getFilters():[A]}(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(y=>{return new F2(W2((A=y).field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let d=null;e.limit&&(d=function(y){let A;return A="object"==typeof y?y.value:y,S3(A)?null:A}(e.limit));let g=null;var y;e.startAt&&(g=new Z5((y=e.startAt).values||[],!!y.before));let w=null;return e.endAt&&(w=function(y){return new Z5(y.values||[],!y.before)}(e.endAt)),gP(t,r,c,s,d,"F",g,w)}function XP(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=W2(t.unaryFilter.field);return pn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=W2(t.unaryFilter.field);return pn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=W2(t.unaryFilter.field);return pn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=W2(t.unaryFilter.field);return pn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(n):void 0!==n.fieldFilter?pn.create(W2((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Bn.create(t.compositeFilter.filters.map(e=>XP(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vt()}}(t.compositeFilter.op))}(n):vt();var t}function O1e(n){return E1e[n]}function P1e(n){return I1e[n]}function H1e(n){return S1e[n]}function j5(n){return{fieldPath:n.canonicalString()}}function W2(n){return Ui.fromServerFormat(n.fieldPath)}function eH(n){return n instanceof pn?function(t){if("=="===t.op){if(QO(t.value))return{unaryFilter:{field:j5(t.field),op:"IS_NAN"}};if(JO(t.value))return{unaryFilter:{field:j5(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(QO(t.value))return{unaryFilter:{field:j5(t.field),op:"IS_NOT_NAN"}};if(JO(t.value))return{unaryFilter:{field:j5(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:j5(t.field),op:P1e(t.op),value:t.value}}}(n):n instanceof Bn?function(t){const e=t.getFilters().map(i=>eH(i));return 1===e.length?e[0]:{compositeFilter:{op:H1e(t.op),filters:e}}}(n):vt()}function F1e(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function tH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class dc{constructor(t,e,i,r,s=At.min(),c=At.min(),d=Ar.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new dc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class nH{constructor(t){this.fe=t}}function iH(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:D_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:$3(r=n.fe,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:q2(r,s.version.toTimestamp()),createTime:q2(r,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Dh(t.version)};else{if(!t.isUnknownDocument())return vt();i.unknownDocument={path:e.path.toArray(),version:Dh(t.version)}}var r,s;return i}function D_(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Dh(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Th(n){const t=new Di(n.seconds,n.nanoseconds);return At.fromTimestamp(t)}function Eh(n,t){const e=(t.baseMutations||[]).map(s=>fE(n.fe,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>fE(n.fe,s)),r=Di.fromMillis(t.localWriteTimeMs);return new sE(t.batchId,r,e,i)}function K3(n){const t=Th(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Th(n.lastLimboFreeSnapshotVersion):At.min();let i;var r;return void 0!==n.query.documents?(xt(1===(r=n.query).documents.length),i=G0(U2(qP(r.documents[0])))):i=G0(QP(n.query)),new dc(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Ar.fromBase64String(n.resumeToken))}function rH(n,t){const e=Dh(t.snapshotVersion),i=Dh(t.lastLimboFreeSnapshotVersion);let r;r=m_(t.target)?JP(n.fe,t.target):gE(n.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ch(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function pE(n){const t=QP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?b_(t,t.limit,"L"):t}function vE(n,t){return new aE(t.largestBatchId,fE(n.fe,t.overlayMutation))}function sH(n,t){const e=t.path.lastSegment();return[n,M0(t.path.popLast()),e]}function oH(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Dh(i.readTime),documentKey:M0(i.documentKey.path),largestBatchId:i.largestBatchId}}class U1e{getBundleMetadata(t,e){return aH(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Th(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return aH(t).put({bundleId:(i=e).id,createTime:Dh(tr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return lH(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:pE(r.bundledQuery),readTime:Th(r.readTime)};var r})}saveNamedQuery(t,e){return lH(t).put({name:(i=e).name,readTime:Dh(tr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function aH(n){return $r(n,"bundles")}function lH(n){return $r(n,"namedQueries")}class T_{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){return new T_(t,e.uid||"")}getOverlay(t,e){return Y3(t).get(sH(this.userId,e)).next(i=>i?vE(this.serializer,i):null)}getOverlays(t,e){const i=O1();return ue.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new aE(e,c);r.push(this.we(t,d))}),ue.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(M0(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(Y3(t).J("collectionPathOverlayIndex",d))}),ue.waitFor(s)}getOverlaysForCollection(t,e,i){const r=O1(),s=M0(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Y3(t).j("collectionPathOverlayIndex",c).next(d=>{for(const g of d){const w=vE(this.serializer,g);r.set(w.getKey(),w)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=O1();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Y3(t).X({index:"collectionGroupOverlayIndex",range:d},(g,w,y)=>{const A=vE(this.serializer,w);s.size()<r||A.largestBatchId===c?(s.set(A.getKey(),A),c=A.largestBatchId):y.done()}).next(()=>s)}we(t,e){return Y3(t).put(function(i,r,s){const[c,d,g]=sH(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:W3(i.fe,s.mutation)}}(this.serializer,this.userId,e))}}function Y3(n){return $r(n,"documentOverlays")}class Ih{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(Zi(t.integerValue));else if("doubleValue"in t){const i=Zi(t.doubleValue);isNaN(i)?this.ye(e,13):(this.ye(e,15),z3(i)?e.pe(0):e.pe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ye(e,20),"string"==typeof i?e.Ie(i):(e.Ie(`${i.seconds||""}`),e.pe(i.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(lc(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ye(e,45),e.pe(i.latitude||0),e.pe(i.longitude||0)}else"mapValue"in t?XO(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):vt()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const i=t.fields||{};this.ye(e,55);for(const r of Object.keys(i))this.Te(r,e),this.me(i[r],e)}Pe(t,e){const i=t.values||[];this.ye(e,50);for(const r of i)this.me(r,e)}ve(t,e){this.ye(e,37),st.fromName(t).path.forEach(i=>{this.ye(e,60),this.be(i,e)})}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function Z1e(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function cH(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=Z1e(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Ih.Ve=new Ih;class j1e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.De(i.value),i=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ne(i.value),i=e.next();this.ke()}Me(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=e.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=e.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(t){const e=this.Fe(t),i=cH(e);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Le(t){const e=this.Fe(t),i=cH(e);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class G1e{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class $1e{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class J3{constructor(){this.je=new j1e,this.ze=new G1e(this.je),this.We=new $1e(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Sh{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Sh(this.indexId,this.documentKey,this.arrayValue,i)}}function G5(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=uH(n.arrayValue,t.arrayValue),0!==e?e:(e=uH(n.directionalValue,t.directionalValue),0!==e?e:st.comparator(n.documentKey,t.documentKey)))}function uH(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class q1e{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const i=e;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(t){xt(t.collectionGroup===this.collectionId);const e=UT(t);if(void 0!==e&&!this.en(e))return!1;const i=_h(t);let r=0,s=0;for(;r<i.length&&this.en(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ze){const c=i[r];if(!this.nn(this.Ze,c)||!this.sn(this.Ye[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ye.length||!this.sn(this.Ye[s++],c))return!1}return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function hH(n){var t,e;if(xt(n instanceof pn||n instanceof Bn),n instanceof pn){if(n instanceof hP){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>pn.create(n.field,"==",s)))||[];return Bn.create(r,"or")}return n}const i=n.filters.map(r=>hH(r));return Bn.create(i,n.op)}function W1e(n){if(0===n.getFilters().length)return[];const t=_E(hH(n));return xt(dH(t)),mE(t)||wE(t)?[t]:t.getFilters()}function mE(n){return n instanceof pn}function wE(n){return n instanceof Bn&&YT(n)}function dH(n){return mE(n)||wE(n)||function(t){if(t instanceof Bn&&KT(t)){for(const e of t.getFilters())if(!mE(e)&&!wE(e))return!1;return!0}return!1}(n)}function _E(n){if(xt(n instanceof pn||n instanceof Bn),n instanceof pn)return n;if(1===n.filters.length)return _E(n.filters[0]);const t=n.filters.map(i=>_E(i));let e=Bn.create(t,n.op);return e=E_(e),dH(e)?e:(xt(e instanceof Bn),xt(B2(e)),xt(e.filters.length>1),e.filters.reduce((i,r)=>bE(i,r)))}function bE(n,t){let e;return xt(n instanceof pn||n instanceof Bn),xt(t instanceof pn||t instanceof Bn),e=n instanceof pn?t instanceof pn?Bn.create([n,t],"and"):fH(n,t):t instanceof pn?fH(t,n):function(i,r){if(xt(i.filters.length>0&&r.filters.length>0),B2(i)&&B2(r))return lP(i,r.getFilters());const s=KT(i)?i:r,c=KT(i)?r:i,d=s.filters.map(g=>bE(g,c));return Bn.create(d,"or")}(n,t),E_(e)}function fH(n,t){if(B2(t))return lP(t,n.getFilters());{const e=t.filters.map(i=>bE(n,i));return Bn.create(e,"or")}}function E_(n){if(xt(n instanceof pn||n instanceof Bn),n instanceof pn)return n;const t=n.getFilters();if(1===t.length)return E_(t[0]);if(oP(n))return n;const e=t.map(r=>E_(r)),i=[];return e.forEach(r=>{r instanceof pn?i.push(r):r instanceof Bn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Bn.create(i,n.op)}class K1e{constructor(){this.rn=new yE}addToCollectionParentIndex(t,e){return this.rn.add(e),ue.resolve()}getCollectionParents(t,e){return ue.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return ue.resolve()}deleteFieldIndex(t,e){return ue.resolve()}getDocumentsMatchingTarget(t,e){return ue.resolve(null)}getIndexType(t,e){return ue.resolve(0)}getFieldIndexes(t,e){return ue.resolve([])}getNextCollectionGroupToUpdate(t){return ue.resolve(null)}getMinOffset(t,e){return ue.resolve(Qs.min())}getMinOffsetFromCollectionGroup(t,e){return ue.resolve(Qs.min())}updateCollectionGroup(t,e,i){return ue.resolve()}updateIndexEntries(t,e){return ue.resolve()}}class yE{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new pi(yn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new pi(yn.comparator)).toArray()}}const I_=new Uint8Array(0);class Y1e{constructor(t,e){this.user=t,this.databaseId=e,this.on=new yE,this.un=new uc(i=>Ch(i),(i,r)=>L3(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:i,parent:M0(r)};return gH(t).put(s)}return ue.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[kO(e),""],!1,!0);return gH(t).j(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(V1(c.parent))}return i})}addFieldIndex(t,e){const i=S_(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=X3(t);return s.next(d=>{c.put(oH(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=S_(t),r=X3(t),s=Q3(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Q3(t);let r=!0;const s=new Map;return ue.forEach(this.cn(e),c=>this.an(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=Jt();const d=[];return ue.forEach(s,(g,w)=>{var y;Ze("IndexedDbIndexManager",`Using index ${y=g,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(He=>`${He.fieldPath}:${He.kind}`).join(",")}`} to execute ${Ch(e)}`);const A=function(He,Be){const tt=UT(Be);if(void 0===tt)return null;for(const at of w_(He,tt.fieldPath))switch(at.op){case"array-contains-any":return at.value.arrayValue.values||[];case"array-contains":return[at.value]}return null}(w,g),I=function(He,Be){const tt=new Map;for(const at of _h(Be))for(const Ft of w_(He,at.fieldPath))switch(Ft.op){case"==":case"in":tt.set(at.fieldPath.canonicalString(),Ft.value);break;case"not-in":case"!=":return tt.set(at.fieldPath.canonicalString(),Ft.value),Array.from(tt.values())}return null}(w,g),N=function(He,Be){const tt=[];let at=!0;for(const Ft of _h(Be)){const Qt=0===Ft.kind?dP(He,Ft.fieldPath,He.startAt):fP(He,Ft.fieldPath,He.startAt);tt.push(Qt.value),at&&(at=Qt.inclusive)}return new Z5(tt,at)}(w,g),Z=function(He,Be){const tt=[];let at=!0;for(const Ft of _h(Be)){const Qt=0===Ft.kind?fP(He,Ft.fieldPath,He.endAt):dP(He,Ft.fieldPath,He.endAt);tt.push(Qt.value),at&&(at=Qt.inclusive)}return new Z5(tt,at)}(w,g),J=this.hn(g,w,N),te=this.hn(g,w,Z),xe=this.ln(g,w,I),ke=this.fn(g.indexId,A,J,N.inclusive,te,Z.inclusive,xe);return ue.forEach(ke,He=>i.H(He,e.limit).next(Be=>{Be.forEach(tt=>{const at=st.fromSegments(tt.documentKey);c.has(at)||(c=c.add(at),d.push(at))})}))}).next(()=>d)}return ue.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:W1e(Bn.create(t.filters,"and")).map(i=>QT(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}fn(t,e,i,r,s,c,d){const g=(null!=e?e.length:1)*Math.max(i.length,s.length),w=g/(null!=e?e.length:1),y=[];for(let A=0;A<g;++A){const I=e?this.dn(e[A/w]):I_,N=this.wn(t,I,i[A%w],r),Z=this._n(t,I,s[A%w],c),J=d.map(te=>this.wn(t,I,te,!0));y.push(...this.createRange(N,Z,J))}return y}wn(t,e,i,r){const s=new Sh(t,st.empty(),e,i);return r?s:s.Je()}_n(t,e,i,r){const s=new Sh(t,st.empty(),e,i);return r?s.Je():s}an(t,e){const i=new q1e(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.tn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;const r=this.cn(e);return ue.forEach(r,s=>this.an(t,s).next(c=>{c?0!==i&&c.fields.length<function(d){let g=new pi(Ui.comparator),w=!1;for(const y of d.filters)for(const A of y.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:g=g.add(A.field));for(const y of d.orderBy)y.field.isKeyField()||(g=g.add(y.field));return g.size+(w?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}mn(t,e){const i=new J3;for(const r of _h(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.He(r.kind);Ih.Ve._e(s,c)}return i.Qe()}dn(t){const e=new J3;return Ih.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const i=new J3;return Ih.Ve._e(yh(this.databaseId,e),i.He(function(r){const s=_h(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Qe()}ln(t,e,i){if(null===i)return[];let r=[];r.push(new J3);let s=0;for(const c of _h(t)){const d=i[s++];for(const g of r)if(this.yn(e,c.fieldPath)&&R3(d))r=this.pn(r,c,d);else{const w=g.He(c.kind);Ih.Ve._e(d,w)}}return this.In(r)}hn(t,e,i){return this.ln(t,e,i.position)}In(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Qe();return e}pn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const g=new J3;g.seed(d.Qe()),Ih.Ve._e(c,g.He(e.kind)),s.push(g)}return s}yn(t,e){return!!t.filters.find(i=>i instanceof pn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=S_(t),r=X3(t);return(e?i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.j()).next(s=>{const c=[];return ue.forEach(s,d=>r.get([d.indexId,this.uid]).next(g=>{c.push(function(w,y){const A=y?new E3(y.sequenceNumber,new Qs(Th(y.readTime),new st(V1(y.documentKey)),y.largestBatchId)):E3.empty(),I=w.fields.map(([N,Z])=>new l_(Ui.fromServerFormat(N),Z));return new a_(w.indexId,w.collectionGroup,I,A)}(d,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Ut(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=S_(t),s=X3(t);return this.Tn(t).next(c=>r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>ue.forEach(d,g=>s.put(oH(g.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return ue.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?ue.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ue.forEach(d,g=>this.En(t,r,g).next(w=>{const y=this.An(s,g);return w.isEqual(y)?ue.resolve():this.vn(t,s,g,w,y)}))))})}Rn(t,e,i,r){return Q3(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,i,r){return Q3(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,e.key),e.key.path.toArray()])}En(t,e,i){const r=Q3(t);let s=new pi(G5);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,e)])},(c,d)=>{s=s.add(new Sh(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}An(t,e){let i=new pi(G5);const r=this.mn(e,t);if(null==r)return i;const s=UT(e);if(null!=s){const c=t.data.field(s.fieldPath);if(R3(c))for(const d of c.arrayValue.values||[])i=i.add(new Sh(e.indexId,t.key,this.dn(d),r))}else i=i.add(new Sh(e.indexId,t.key,I_,r));return i}vn(t,e,i,r,s){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,g,w,y,A){const I=d.getIterator(),N=g.getIterator();let Z=P2(I),J=P2(N);for(;Z||J;){let te=!1,xe=!1;if(Z&&J){const ke=w(Z,J);ke<0?xe=!0:ke>0&&(te=!0)}else null!=Z?xe=!0:te=!0;te?(y(J),J=P2(N)):xe?(A(Z),Z=P2(I)):(Z=P2(I),J=P2(N))}}(r,s,G5,d=>{c.push(this.Rn(t,e,i,d))},d=>{c.push(this.Pn(t,e,i,d))}),ue.waitFor(c)}Tn(t){let e=1;return X3(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>G5(c,d)).filter((c,d,g)=>!d||0!==G5(c,g[d-1]));const r=[];r.push(t);for(const c of i){const d=G5(c,t),g=G5(c,e);if(0===d)r[0]=t.Je();else if(d>0&&g<0)r.push(c),r.push(c.Je());else if(g>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2){if(this.bn(r[c],r[c+1]))return[];s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,I_,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,I_,[]]))}return s}bn(t,e){return G5(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(pH)}getMinOffset(t,e){return ue.mapArray(this.cn(e),i=>this.an(t,i).next(r=>r||vt())).next(pH)}}function gH(n){return $r(n,"collectionParents")}function Q3(n){return $r(n,"indexEntries")}function S_(n){return $r(n,"indexConfiguration")}function X3(n){return $r(n,"indexState")}function pH(n){xt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;ZT(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Qs(t.readTime,t.documentKey,e)}const vH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class x0{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new x0(t,x0.DEFAULT_COLLECTION_PERCENTILE,x0.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mH(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const g=i.X({range:c},(y,A,I)=>(d++,I.delete()));s.push(g.next(()=>{xt(1===d)}));const w=[];for(const y of e.mutations){const A=UO(t,y.key.path,e.batchId);s.push(r.delete(A)),w.push(y.key)}return ue.waitFor(s).next(()=>w)}function z_(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw vt();t=n.noDocument}return JSON.stringify(t).length}x0.DEFAULT_COLLECTION_PERCENTILE=10,x0.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,x0.DEFAULT=new x0(41943040,x0.DEFAULT_COLLECTION_PERCENTILE,x0.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),x0.DISABLED=new x0(-1,0,0);class N_{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(t,e,i,r){xt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new N_(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $5(t).X({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=K2(t),c=$5(t);return c.add({}).next(d=>{xt("number"==typeof d);const g=new sE(d,e,i,r),w=function(I,N,Z){const J=Z.baseMutations.map(xe=>W3(I.fe,xe)),te=Z.mutations.map(xe=>W3(I.fe,xe));return{userId:N,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:J,mutations:te}}(this.serializer,this.userId,g),y=[];let A=new pi((I,N)=>Ut(I.canonicalString(),N.canonicalString()));for(const I of r){const N=UO(this.userId,I.key.path,d);A=A.add(I.key.path.popLast()),y.push(c.put(w)),y.push(s.put(N,Oae))}return A.forEach(I=>{y.push(this.indexManager.addToCollectionParentIndex(t,I))}),t.addOnCommittedListener(()=>{this.Vn[d]=g.keys()}),ue.waitFor(y).next(()=>g)})}lookupMutationBatch(t,e){return $5(t).get(e).next(i=>i?(xt(i.userId===this.userId),Eh(this.serializer,i)):null)}Sn(t,e){return this.Vn[e]?ue.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Vn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return $5(t).X({index:"userMutationsIndex",range:r},(c,d,g)=>{d.userId===this.userId&&(xt(d.batchId>=i),s=Eh(this.serializer,d)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return $5(t).X({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $5(t).j("userMutationsIndex",e).next(i=>i.map(r=>Eh(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=u_(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return K2(t).X({range:r},(c,d,g)=>{const[w,y,A]=c,I=V1(y);if(w===this.userId&&e.path.isEqual(I))return $5(t).get(A).next(N=>{if(!N)throw vt();xt(N.userId===this.userId),s.push(Eh(this.serializer,N))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new pi(Ut);const r=[];return e.forEach(s=>{const c=u_(this.userId,s.path),d=IDBKeyRange.lowerBound(c),g=K2(t).X({range:d},(w,y,A)=>{const[I,N,Z]=w,J=V1(N);I===this.userId&&s.path.isEqual(J)?i=i.add(Z):A.done()});r.push(g)}),ue.waitFor(r).next(()=>this.Dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=u_(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new pi(Ut);return K2(t).X({range:c},(g,w,y)=>{const[A,I,N]=g,Z=V1(I);A===this.userId&&i.isPrefixOf(Z)?Z.length===r&&(d=d.add(N)):y.done()}).next(()=>this.Dn(t,d))}Dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push($5(t).get(s).next(c=>{if(null===c)throw vt();xt(c.userId===this.userId),i.push(Eh(this.serializer,c))}))}),ue.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return mH(t.ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Cn(e.batchId)}),ue.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ue.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return K2(t).X({range:i},(s,c,d)=>{if(s[0]===this.userId){const g=V1(s[1]);r.push(g)}else d.done()}).next(()=>{xt(0===r.length)})})}containsKey(t,e){return wH(t,this.userId,e)}xn(t){return _H(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wH(n,t,e){const i=u_(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return K2(n).X({range:s,Y:!0},(d,g,w)=>{const[y,A,I]=d;y===t&&A===r&&(c=!0),w.done()}).next(()=>c)}function $5(n){return $r(n,"mutations")}function K2(n){return $r(n,"documentMutations")}function _H(n){return $r(n,"mutationQueues")}class zh{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new zh(0)}static Mn(){return new zh(-1)}}class J1e{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next(e=>{const i=new zh(e.highestTargetId);return e.highestTargetId=i.next(),this.On(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.$n(t).next(e=>At.fromTimestamp(new Di(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.$n(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.$n(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.On(t,r)))}addTargetData(t,e){return this.Fn(t,e).next(()=>this.$n(t).next(i=>(i.targetCount+=1,this.Bn(e,i),this.On(t,i))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Y2(t).delete(e.targetId)).next(()=>this.$n(t)).next(i=>(xt(i.targetCount>0),i.targetCount-=1,this.On(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Y2(t).X((c,d)=>{const g=K3(d);g.sequenceNumber<=e&&null===i.get(g.targetId)&&(r++,s.push(this.removeTargetData(t,g)))}).next(()=>ue.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Y2(t).X((i,r)=>{const s=K3(r);e(s)})}$n(t){return bH(t).get("targetGlobalKey").next(e=>(xt(null!==e),e))}On(t,e){return bH(t).put("targetGlobalKey",e)}Fn(t,e){return Y2(t).put(rH(this.serializer,e))}Bn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.$n(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Ch(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Y2(t).X({range:r,index:"queryTargetsIndex"},(c,d,g)=>{const w=K3(d);L3(e,w.target)&&(s=w,g.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=q5(t);return e.forEach(c=>{const d=M0(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),ue.waitFor(r)}removeMatchingKeys(t,e,i){const r=q5(t);return ue.forEach(e,s=>{const c=M0(s.path);return ue.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=q5(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=q5(t);let s=Jt();return r.X({range:i,Y:!0},(c,d,g)=>{const w=V1(c[1]),y=new st(w);s=s.add(y)}).next(()=>s)}containsKey(t,e){const i=M0(e.path),r=IDBKeyRange.bound([i],[kO(i)],!1,!0);let s=0;return q5(t).X({index:"documentTargetsIndex",Y:!0,range:r},([c,d],g,w)=>{0!==c&&(s++,w.done())}).next(()=>s>0)}le(t,e){return Y2(t).get(e).next(i=>i?K3(i):null)}}function Y2(n){return $r(n,"targets")}function bH(n){return $r(n,"targetGlobal")}function q5(n){return $r(n,"targetDocuments")}function yH([n,t],[e,i]){const r=Ut(n,e);return 0===r?Ut(t,i):r}class Q1e{constructor(t){this.Ln=t,this.buffer=new pi(yH),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();yH(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class CH{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){var e=this;Ze("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,ie.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){L5(i)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield V5(i)}yield e.Qn(3e5)}))}}class X1e{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ue.resolve(Xs.ct);const i=new Q1e(e);return this.jn.forEachTarget(t,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(t,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(vH)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vH):this.Hn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let i,r,s,c,d,g,w;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),r=this.params.maximumSequenceNumbersToCollect):r=A,c=Date.now(),this.nthSequenceNumber(t,r))).next(A=>(i=A,d=Date.now(),this.removeTargets(t,i,e))).next(A=>(s=A,g=Date.now(),this.removeOrphanedDocuments(t,i))).next(A=>(w=Date.now(),FT()<=Ba.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-y}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(g-d)+`ms\n\tRemoved ${A} documents in `+(w-g)+`ms\nTotal Duration: ${w-y}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:A})))}}class ele{constructor(t,e){this.db=t,this.garbageCollector=function MH(n,t){return new X1e(n,t)}(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Jn(t){let e=0;return this.Wn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,(i,r)=>e(r))}addReference(t,e,i){return k_(t,i)}removeReference(t,e,i){return k_(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return k_(t,e)}Xn(t,e){return function(i,r){let s=!1;return _H(i).Z(c=>wH(i,c,r).next(d=>(d&&(s=!0),ue.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(t,(c,d)=>{if(d<=e){const g=this.Xn(t,c).next(w=>{if(!w)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,At.min()),q5(t).delete([0,M0(c.path)])))});r.push(g)}}).next(()=>ue.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return k_(t,e)}Yn(t,e){const i=q5(t);let r,s=Xs.ct;return i.X({index:"documentTargetsIndex"},([c,d],{path:g,sequenceNumber:w})=>{0===c?(s!==Xs.ct&&e(new st(V1(r)),s),s=w,r=g):s=Xs.ct}).next(()=>{s!==Xs.ct&&e(new st(V1(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function k_(n,t){return q5(n).put((i=n.currentSequenceNumber,{targetId:0,path:M0(t.path),sequenceNumber:i}));var i}class xH{constructor(){this.changes=new uc(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,vi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ue.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class tle{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Nh(t).put(i)}removeEntry(t,e,i){return Nh(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],D_(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Zn(t,i)))}getEntry(t,e){let i=vi.newInvalidDocument(e);return Nh(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(e4(e))},(r,s)=>{i=this.ts(e,s)}).next(()=>i)}es(t,e){let i={size:0,document:vi.newInvalidDocument(e)};return Nh(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(e4(e))},(r,s)=>{i={document:this.ts(e,s),size:z_(s)}}).next(()=>i)}getEntries(t,e){let i=ws();return this.ns(t,e,(r,s)=>{const c=this.ts(r,s);i=i.insert(r,c)}).next(()=>i)}ss(t,e){let i=ws(),r=new ri(st.comparator);return this.ns(t,e,(s,c)=>{const d=this.ts(s,c);i=i.insert(s,d),r=r.insert(s,z_(c))}).next(()=>({documents:i,rs:r}))}ns(t,e,i){if(e.isEmpty())return ue.resolve();let r=new pi(EH);e.forEach(g=>r=r.add(g));const s=IDBKeyRange.bound(e4(r.first()),e4(r.last())),c=r.getIterator();let d=c.getNext();return Nh(t).X({index:"documentKeyIndex",range:s},(g,w,y)=>{const A=st.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;d&&EH(d,A)<0;)i(d,null),d=c.getNext();d&&d.isEqual(A)&&(i(d,w),d=c.hasNext()?c.getNext():null),d?y.G(e4(d)):y.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const s=e.path,c=[s.popLast().toArray(),s.lastSegment(),D_(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nh(t).j(IDBKeyRange.bound(c,d,!0)).next(g=>{let w=ws();for(const y of g){const A=this.ts(st.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);A.isFoundDocument()&&(P3(e,A)||r.has(A.key))&&(w=w.insert(A.key,A))}return w})}getAllFromCollectionGroup(t,e,i,r){let s=ws();const c=TH(e,i),d=TH(e,Qs.max());return Nh(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(g,w,y)=>{const A=this.ts(st.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);s=s.insert(A.key,A),s.size===r&&y.done()}).next(()=>s)}newChangeBuffer(t){return new nle(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return DH(t).get("remoteDocumentGlobalKey").next(e=>(xt(!!e),e))}Zn(t,e){return DH(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const i=function B1e(n,t){let e;if(t.document)e=YP(n.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=st.fromSegments(t.noDocument.path),r=Th(t.noDocument.readTime);e=vi.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return vt();{const i=st.fromSegments(t.unknownDocument.path),r=Th(t.unknownDocument.version);e=vi.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Di(i[0],i[1]);return At.fromTimestamp(r)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(At.min()))return i}return vi.newInvalidDocument(t)}}function AH(n){return new tle(n)}class nle extends xH{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new uc(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new pi((s,c)=>Ut(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.us.get(s);if(e.push(this.os.removeEntry(t,s,d.readTime)),c.isValidDocument()){const g=iH(this.os.serializer,c);r=r.add(s.path.popLast()),i+=z_(g)-d.size,e.push(this.os.addEntry(t,s,g))}else if(i-=d.size,this.trackRemovals){const g=iH(this.os.serializer,c.convertToNoDocument(At.min()));e.push(this.os.addEntry(t,s,g))}}),r.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.os.updateMetadata(t,i)),ue.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next(i=>(this.us.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.os.ss(t,e).next(({documents:i,rs:r})=>(r.forEach((s,c)=>{this.us.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function DH(n){return $r(n,"remoteDocumentGlobal")}function Nh(n){return $r(n,"remoteDocumentsV14")}function e4(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function TH(n,t){const e=t.documentKey.path.toArray();return[n,D_(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function EH(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Ut(e[s],i[s]),r)return r;return r=Ut(e.length,i.length),r||(r=Ut(e[e.length-2],i[i.length-2]),r||Ut(e[e.length-1],i[i.length-1]))}class ile{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class IH{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&U3(i.mutation,r,ms.empty(),Di.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Jt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Jt()){const r=O1();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=H3();return s.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=O1();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Jt()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=ws();const c=F3(),d=F3();return e.forEach((g,w)=>{const y=i.get(w.key);r.has(w.key)&&(void 0===y||y.mutation instanceof hc)?s=s.insert(w.key,w):void 0!==y?(c.set(w.key,y.mutation.getFieldMask()),U3(y.mutation,w,y.mutation.getFieldMask(),Di.now())):c.set(w.key,ms.empty())}),this.recalculateAndSaveOverlays(t,s).next(g=>(g.forEach((w,y)=>c.set(w,y)),e.forEach((w,y)=>{var A;return d.set(w,new ile(y,null!==(A=c.get(w))&&void 0!==A?A:null))}),d))}recalculateAndSaveOverlays(t,e){const i=F3();let r=new ri((c,d)=>c-d),s=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(g=>{const w=e.get(g);if(null===w)return;let y=i.get(g)||ms.empty();y=d.applyToLocalView(w,y),i.set(g,y);const A=(r.get(d.batchId)||Jt()).add(g);r=r.insert(d.batchId,A)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),w=g.key,y=g.value,A=yP();y.forEach(I=>{if(!s.has(I)){const N=SP(e.get(I),i.get(I));null!==N&&A.set(I,N),s=s.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(t,w,A))}return ue.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return st.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):eE(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):ue.resolve(O1());let d=-1,g=s;return c.next(w=>ue.forEach(w,(y,A)=>(d<A.largestBatchId&&(d=A.largestBatchId),s.get(y)?ue.resolve():this.remoteDocumentCache.getEntry(t,y).next(I=>{g=g.insert(y,I)}))).next(()=>this.populateOverlays(t,w,s)).next(()=>this.computeViews(t,g,w,Jt())).next(y=>({batchId:d,changes:bP(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new st(e)).next(i=>{let r=H3();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=H3();return this.indexManager.getCollectionParents(t,r).next(c=>ue.forEach(c,d=>{const g=(w=e,y=d.child(r),new cc(y,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,y;return this.getDocumentsMatchingCollectionQuery(t,g,i).next(w=>{w.forEach((y,A)=>{s=s.insert(y,A)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(s=>{r.forEach((d,g)=>{const w=g.getKey();null===s.get(w)&&(s=s.insert(w,vi.newInvalidDocument(w)))});let c=H3();return s.forEach((d,g)=>{const w=r.get(d);void 0!==w&&U3(w.mutation,g,ms.empty(),Di.now()),P3(e,g)&&(c=c.insert(d,g))}),c})}}class rle{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return ue.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var i;return this.cs.set(e.id,{id:(i=e).id,version:i.version,createTime:tr(i.createTime)}),ue.resolve()}getNamedQuery(t,e){return ue.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,{name:(i=e).name,query:pE(i.bundledQuery),readTime:tr(i.readTime)}),ue.resolve();var i}}class sle{constructor(){this.overlays=new ri(st.comparator),this.ls=new Map}getOverlay(t,e){return ue.resolve(this.overlays.get(e))}getOverlays(t,e){const i=O1();return ue.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.we(t,e,s)}),ue.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),ue.resolve()}getOverlaysForCollection(t,e,i){const r=O1(),s=e.length+1,c=new st(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,w=g.getKey();if(!e.isPrefixOf(w.path))break;w.path.length===s&&g.largestBatchId>i&&r.set(g.getKey(),g)}return ue.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new ri((w,y)=>w-y);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===e&&w.largestBatchId>i){let y=s.get(w.largestBatchId);null===y&&(y=O1(),s=s.insert(w.largestBatchId,y)),y.set(w.getKey(),w)}}const d=O1(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((w,y)=>d.set(w,y)),!(d.size()>=r)););return ue.resolve(d)}we(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new aE(e,i));let s=this.ls.get(e);void 0===s&&(s=Jt(),this.ls.set(e,s)),this.ls.set(e,s.add(i.key))}}class CE{constructor(){this.fs=new pi(qr.ds),this.ws=new pi(qr._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const i=new qr(t,e);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.ys(new qr(t,e))}ps(t,e){t.forEach(i=>this.removeReference(i,e))}Is(t){const e=new st(new yn([])),i=new qr(e,t),r=new qr(e,t+1),s=[];return this.ws.forEachInRange([i,r],c=>{this.ys(c),s.push(c.key)}),s}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new st(new yn([])),i=new qr(e,t),r=new qr(e,t+1);let s=Jt();return this.ws.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new qr(t,0),i=this.fs.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class qr{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return st.comparator(t.key,e.key)||Ut(t.As,e.As)}static _s(t,e){return Ut(t.As,e.As)||st.comparator(t.key,e.key)}}class ole{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new pi(qr.ds)}checkEmpty(t){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.vs;this.vs++;const c=new sE(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.Rs=this.Rs.add(new qr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(t,e){return ue.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.bs(e+1),s=r<0?0:r;return ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new qr(e,0),r=new qr(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],c=>{const d=this.Ps(c.As);s.push(d)}),ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new pi(Ut);return e.forEach(r=>{const s=new qr(r,0),c=new qr(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,c],d=>{i=i.add(d.As)})}),ue.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;st.isDocumentKey(s)||(s=s.child(""));const c=new qr(new st(s),0);let d=new pi(Ut);return this.Rs.forEachWhile(g=>{const w=g.key.path;return!!i.isPrefixOf(w)&&(w.length===r&&(d=d.add(g.As)),!0)},c),ue.resolve(this.Vs(d))}Vs(t){const e=[];return t.forEach(i=>{const r=this.Ps(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){xt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return ue.forEach(e.mutations,r=>{const s=new qr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Rs=i})}Cn(t){}containsKey(t,e){const i=new qr(e,0),r=this.Rs.firstAfterOrEqual(i);return ue.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ue.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class ale{constructor(t){this.Ds=t,this.docs=new ri(st.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Ds(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ue.resolve(i?i.document.mutableCopy():vi.newInvalidDocument(e))}getEntries(t,e){let i=ws();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():vi.newInvalidDocument(r))}),ue.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=ws();const c=e.path,d=new st(c.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:w,value:{document:y}}=g.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||ZT(VO(y),i)<=0||(r.has(y.key)||P3(e,y))&&(s=s.insert(y.key,y.mutableCopy()))}return ue.resolve(s)}getAllFromCollectionGroup(t,e,i,r){vt()}Cs(t,e){return ue.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new lle(this)}getSize(t){return ue.resolve(this.size)}}class lle extends xH{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.os.addEntry(t,r)):this.os.removeEntry(i)}),ue.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class cle{constructor(t){this.persistence=t,this.xs=new uc(e=>Ch(e),L3),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Ns=0,this.ks=new CE,this.targetCount=0,this.Ms=zh.kn()}forEachTarget(t,e){return this.xs.forEach((i,r)=>e(r)),ue.resolve()}getLastRemoteSnapshotVersion(t){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ue.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ns&&(this.Ns=e),ue.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new zh(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,ue.resolve()}updateTargetData(t,e){return this.Fn(e),ue.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,ue.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.xs.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.xs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),ue.waitFor(s).next(()=>r)}getTargetCount(t){return ue.resolve(this.targetCount)}getTargetData(t,e){const i=this.xs.get(e)||null;return ue.resolve(i)}addMatchingKeys(t,e,i){return this.ks.gs(e,i),ue.resolve()}removeMatchingKeys(t,e,i){this.ks.ps(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),ue.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),ue.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ks.Es(e);return ue.resolve(i)}containsKey(t,e){return ue.resolve(this.ks.containsKey(e))}}class ME{constructor(t,e){this.$s={},this.overlays={},this.Os=new Xs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new cle(this),this.indexManager=new K1e,this.remoteDocumentCache=new ale(i=>this.referenceDelegate.Ls(i)),this.serializer=new nH(e),this.qs=new rle(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new sle,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.$s[t.toKey()];return i||(i=new ole(e,this.referenceDelegate),this.$s[t.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,i){Ze("MemoryPersistence","Starting transaction:",t);const r=new ule(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(t,e){return ue.or(Object.values(this.$s).map(i=>()=>i.containsKey(t,e)))}}class ule extends OO{constructor(t){super(),this.currentSequenceNumber=t}}class R_{constructor(t){this.persistence=t,this.Qs=new CE,this.js=null}static zs(t){return new R_(t)}get Ws(){if(this.js)return this.js;throw vt()}addReference(t,e,i){return this.Qs.addReference(i,e),this.Ws.delete(i.toString()),ue.resolve()}removeReference(t,e,i){return this.Qs.removeReference(i,e),this.Ws.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),ue.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ws,i=>{const r=st.fromPath(i);return this.Hs(t,r).next(s=>{s||e.removeEntry(r,At.min())})}).next(()=>(this.js=null,e.apply(t)))}updateLimboDocument(t,e){return this.Hs(t,e).next(i=>{i?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(t){return 0}Hs(t,e){return ue.or([()=>ue.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class hle{constructor(t){this.serializer=t}O(t,e,i,r){const s=new c_("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BO,{unique:!0}),d.createObjectStore("documentMutations"),SH(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=ue.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),SH(t)),c=c.next(()=>function(d){const g=d.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",w)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,g){return g.store("mutations").j().next(w=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BO,{unique:!0});const y=g.store("mutations"),A=w.map(I=>y.put(I));return ue.waitFor(A)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Ys(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(s)))),i<7&&r>=7&&(c=c.next(()=>this.Zs(s))),i<8&&r>=8&&(c=c.next(()=>this.ti(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.ei(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:Kae});g.createIndex("collectionPathOverlayIndex",Yae,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",Jae,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:Pae});g.createIndex("documentKeyIndex",Hae),g.createIndex("collectionGroupIndex",Fae)}(t)).next(()=>this.ni(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.si(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Gae}).createIndex("sequenceNumberIndex",$ae,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:qae}).createIndex("documentKeyIndex",Wae,{unique:!1})}(t))),c}Xs(t){let e=0;return t.store("remoteDocuments").X((i,r)=>{e+=z_(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.j().next(r=>ue.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",c).next(d=>ue.forEach(d,g=>{xt(g.userId===s.userId);const w=Eh(this.serializer,g);return mH(t,s.userId,w).next(()=>{})}))}))}Zs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((c,d)=>{const g=new yn(c),w=[0,M0(g)];s.push(e.get(w).next(y=>y?ue.resolve():e.put({targetId:0,path:M0(g),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ue.waitFor(s))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:jae});const i=e.store("collectionParents"),r=new yE,s=c=>{if(r.add(c)){const d=c.lastSegment(),g=c.popLast();return i.put({collectionId:d,parent:M0(g)})}};return e.store("remoteDocuments").X({Y:!0},(c,d)=>{const g=new yn(c);return s(g.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([c,d,g],w)=>{const y=V1(d);return s(y.popLast())}))}ei(t){const e=t.store("targets");return e.X((i,r)=>{const s=K3(r),c=rH(this.serializer,s);return e.put(c)})}ni(t,e){const i=e.store("remoteDocuments"),r=[];return i.X((s,c)=>{const d=e.store("remoteDocumentsV14"),g=(w=c,w.document?new st(yn.fromString(w.document.name).popFirst(5)):w.noDocument?st.fromSegments(w.noDocument.path):w.unknownDocument?st.fromSegments(w.unknownDocument.path):vt()).path.toArray();var w;const y={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(y))}).next(()=>ue.waitFor(r))}si(t,e){const i=e.store("mutations"),r=AH(this.serializer),s=new ME(R_.zs,this.serializer.fe);return i.j().next(c=>{const d=new Map;return c.forEach(g=>{var w;let y=null!==(w=d.get(g.userId))&&void 0!==w?w:Jt();Eh(this.serializer,g).keys().forEach(A=>y=y.add(A)),d.set(g.userId,y)}),ue.forEach(d,(g,w)=>{const y=new Gr(w),A=T_.de(this.serializer,y),I=s.getIndexManager(y),N=N_.de(y,this.serializer,I,s.referenceDelegate);return new IH(r,N,A,I).recalculateAndSaveOverlaysForDocumentKeys(new $T(e,Xs.ct),g).next()})})}}function SH(n){n.createObjectStore("targetDocuments",{keyPath:Uae}).createIndex("documentTargetsIndex",Zae,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Bae,{unique:!0}),n.createObjectStore("targetGlobal")}const xE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AE{constructor(t,e,i,r,s,c,d,g,w,y,A=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ii=s,this.window=c,this.document=d,this.ri=w,this.oi=y,this.ui=A,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=I=>Promise.resolve(),!AE.D())throw new Ve(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ele(this,r),this.di=e+"main",this.serializer=new nH(g),this.wi=new Ga(this.di,this.ui,new hle(this.serializer)),this.Bs=new J1e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AH(this.serializer),this.qs=new U1e,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===y&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(pe.FAILED_PRECONDITION,xE);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Bs.getHighestSequenceNumber(t))}).then(t=>{this.Os=new Xs(t,this.ri)}).then(()=>{this.Fs=!0}).catch(t=>(this.wi&&this.wi.close(),Promise.reject(t)))}Ii(t){var e=this;return this.fi=function(){var i=(0,ie.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B(function(){var e=(0,ie.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((0,ie.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>L_(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(t).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(t)).next(e=>this.isPrimary&&!e?this.Ai(t).next(()=>!1):!!e&&this.vi(t).next(()=>!0))).catch(t=>{if(L5(t))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ii.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Ti(t){return t4(t).get("owner").next(e=>ue.resolve(this.Ri(e)))}Pi(t){return L_(t).delete(this.clientId)}bi(){var t=this;return(0,ie.Z)(function*(){if(t.isPrimary&&!t.Vi(t.li,18e5)){t.li=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=$r(i,"clientMetadata");return r.j().next(s=>{const c=t.Si(s,18e5),d=s.filter(g=>-1===c.indexOf(g));return ue.forEach(d,g=>r.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(t._i)for(const i of e)t._i.removeItem(t.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?ue.resolve(!0):t4(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new Ve(pe.FAILED_PRECONDITION,xE);return!1}}return!(!this.networkEnabled||!this.inForeground)||L_(t).j().next(i=>void 0===this.Si(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ze("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ie.Z)(function*(){t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),yield t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new $T(e,Xs.ct);return t.Ai(i).next(()=>t.Pi(i))}),t.wi.close(),t.Mi()})()}Si(t,e){return t.filter(i=>this.Vi(i.updateTimeMs,e)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>L_(t).j().next(e=>this.Si(e,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(t,e){return N_.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Y1e(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return T_.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,i){Ze("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.ui)?Xae:14===c?GO:13===c?jO:12===c?Qae:11===c?ZO:void vt();var c;let d;return this.wi.runTransaction(t,r,s,g=>(d=new $T(g,this.Os?this.Os.next():Xs.ct),"readwrite-primary"===e?this.Ti(d).next(w=>!!w||this.Ei(d)).next(w=>{if(!w)throw er(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ve(pe.FAILED_PRECONDITION,LO);return i(d)}).next(w=>this.vi(d).next(()=>w)):this.Oi(d).next(()=>i(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}Oi(t){return t4(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ve(pe.FAILED_PRECONDITION,xE)})}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return t4(t).put("owner",e)}static D(){return Ga.D()}Ai(t){const e=t4(t);return e.get("owner").next(i=>this.Ri(i)?(Ze("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ue.resolve())}Vi(t,e){const i=Date.now();return!(t<i-e||t>i&&(er(`Detected an update time that is in the future: ${t} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,H.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const i=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return Ze("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return er("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){er("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function t4(n){return $r(n,"owner")}function L_(n){return $r(n,"clientMetadata")}function DE(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class TE{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Fi=i,this.Bi=r}static Li(t,e){let i=Jt(),r=Jt();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new TE(t,e.fromCache,i,r)}}class zH{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ki(t,e).next(s=>s||this.Gi(t,e,r,i)).next(s=>s||this.Qi(t,e))}Ki(t,e){if(pP(e))return ue.resolve(null);let i=G0(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=b_(e,null,"F"),i=G0(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=Jt(...s);return this.Ui.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(g=>{const w=this.ji(e,d);return this.zi(e,w,c,g.readTime)?this.Ki(t,b_(e,null,"F")):this.Wi(t,w,e,g)}))})))}Gi(t,e,i,r){return pP(e)||r.isEqual(At.min())?this.Qi(t,e):this.Ui.getDocuments(t,i).next(s=>{const c=this.ji(e,s);return this.zi(e,c,i,r)?this.Qi(t,e):(FT()<=Ba.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nE(e)),this.Wi(t,c,e,RO(r,-1)))})}ji(t,e){let i=new pi(wP(t));return e.forEach((r,s)=>{P3(t,s)&&(i=i.add(s))}),i}zi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(t,e){return FT()<=Ba.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",nE(e)),this.Ui.getDocumentsMatchingQuery(t,e,Qs.min())}Wi(t,e,i,r){return this.Ui.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class dle{constructor(t,e,i,r){this.persistence=t,this.Hi=e,this.serializer=r,this.Ji=new ri(Ut),this.Yi=new uc(s=>Ch(s),L3),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new IH(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ji))}}function NH(n,t,e,i){return new dle(n,t,e,i)}function kH(n,t){return EE.apply(this,arguments)}function EE(){return EE=(0,ie.Z)(function*(n,t){const e=ot(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.tr(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let g=Jt();for(const w of r){c.push(w.batchId);for(const y of w.mutations)g=g.add(y.key)}for(const w of s){d.push(w.batchId);for(const y of w.mutations)g=g.add(y.key)}return e.localDocuments.getDocuments(i,g).next(w=>({er:w,removedBatchIds:c,addedBatchIds:d}))})})}),EE.apply(this,arguments)}function fle(n,t){const e=ot(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(c,d,g,w){const y=g.batch,A=y.keys();let I=ue.resolve();return A.forEach(N=>{I=I.next(()=>w.getEntry(d,N)).next(Z=>{const J=g.docVersions.get(N);xt(null!==J),Z.version.compareTo(J)<0&&(y.applyToRemoteDocument(Z,g),Z.isValidDocument()&&(Z.setReadTime(g.commitVersion),w.addEntry(Z)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=Jt();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(d=d.add(c.batch.mutations[g].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function RH(n){const t=ot(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function gle(n,t){const e=ot(n),i=t.snapshotVersion;let r=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Zi.newChangeBuffer({trackRemovals:!0});r=e.Ji;const d=[];t.targetChanges.forEach((y,A)=>{const I=r.get(A);if(!I)return;d.push(e.Bs.removeMatchingKeys(s,y.removedDocuments,A).next(()=>e.Bs.addMatchingKeys(s,y.addedDocuments,A)));let N=I.withSequenceNumber(s.currentSequenceNumber);var Z,J,te;null!==t.targetMismatches.get(A)?N=N.withResumeToken(Ar.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):y.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(y.resumeToken,i)),r=r.insert(A,N),J=N,te=y,(0===(Z=I).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&d.push(e.Bs.updateTargetData(s,N))});let g=ws(),w=Jt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(VH(s,c,t.documentUpdates).next(y=>{g=y.nr,w=y.sr})),!i.isEqual(At.min())){const y=e.Bs.getLastRemoteSnapshotVersion(s).next(A=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(y)}return ue.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,g,w)).next(()=>g)}).then(s=>(e.Ji=r,s))}function VH(n,t,e){let i=Jt(),r=Jt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=ws();return e.forEach((d,g)=>{const w=s.get(d);g.isFoundDocument()!==w.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(At.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!w.isValidDocument()||g.version.compareTo(w.version)>0||0===g.version.compareTo(w.version)&&w.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):Ze("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",g.version)}),{nr:c,sr:r}})}function ple(n,t){const e=ot(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function J2(n,t){const e=ot(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Bs.getTargetData(i,t).next(s=>s?(r=s,ue.resolve(r)):e.Bs.allocateTargetId(i).next(c=>(r=new dc(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(i.targetId,i),e.Yi.set(t,i.targetId)),i})}function Q2(n,t,e){return IE.apply(this,arguments)}function IE(){return IE=(0,ie.Z)(function*(n,t,e){const i=ot(n),r=i.Ji.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!L5(c))throw c;Ze("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}),IE.apply(this,arguments)}function O_(n,t,e){const i=ot(n);let r=At.min(),s=Jt();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,g,w){const y=ot(d),A=y.Yi.get(w);return void 0!==A?ue.resolve(y.Ji.get(A)):y.Bs.getTargetData(g,w)}(i,c,G0(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(c,d.targetId).next(g=>{s=g})}).next(()=>i.Hi.getDocumentsMatchingQuery(c,t,e?r:At.min(),e?s:Jt())).next(d=>(PH(i,mP(t),d),{documents:d,ir:s})))}function LH(n,t){const e=ot(n),i=ot(e.Bs),r=e.Ji.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.le(s,t).next(c=>c?c.target:null))}function OH(n,t){const e=ot(n),i=e.Xi.get(t)||At.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Zi.getAllFromCollectionGroup(r,t,RO(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(PH(e,t,r),r))}function PH(n,t,e){let i=n.Xi.get(t)||At.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(t,i)}function SE(){return SE=(0,ie.Z)(function*(n,t,e,i){const r=ot(n);let s=Jt(),c=ws();for(const w of e){const y=t.rr(w.metadata.name);w.document&&(s=s.add(y));const A=t.ur(w);A.setReadTime(t.cr(w.metadata.readTime)),c=c.insert(y,A)}const d=r.Zi.newChangeBuffer({trackRemovals:!0}),g=yield J2(r,(w=i,G0(U2(yn.fromString(`__bundle__/docs/${w}`)))));var w;return r.persistence.runTransaction("Apply bundle documents","readwrite",w=>VH(w,d,c).next(y=>(d.apply(w),y)).next(y=>r.Bs.removeMatchingKeysForTargetId(w,g.targetId).next(()=>r.Bs.addMatchingKeys(w,s,g.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(w,y.nr,y.sr)).next(()=>y.nr)))}),SE.apply(this,arguments)}function mle(n,t){return zE.apply(this,arguments)}function zE(){return zE=(0,ie.Z)(function*(n,t,e=Jt()){const i=yield J2(n,G0(pE(t.bundledQuery))),r=ot(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=tr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.qs.saveNamedQuery(s,t);const d=i.withResumeToken(Ar.EMPTY_BYTE_STRING,c);return r.Ji=r.Ji.insert(d.targetId,d),r.Bs.updateTargetData(s,d).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,e,i.targetId)).next(()=>r.qs.saveNamedQuery(s,t))})}),zE.apply(this,arguments)}function HH(n,t){return`firestore_clients_${n}_${t}`}function FH(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function NE(n,t){return`firestore_targets_${n}_${t}`}class P_{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static ar(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ve(r.error.code,r.error.message))),c?new P_(t,e,r.state,s):(er("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class n4{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static ar(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ve(i.error.code,i.error.message))),s?new n4(t,i.state,r):(er("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class H_{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=iE();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=HO(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new H_(t,s):(er("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class kE{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new kE(e.clientId,e.onlineState):(er("SharedClientState",`Failed to parse online state: ${t}`),null)}}class RE{constructor(){this.activeTargetIds=iE()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class VE{constructor(t,e,i,r,s){this.window=t,this.ii=e,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ri(Ut),this.started=!1,this.yr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=HH(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new RE),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ie.Z)(function*(){const e=yield t.syncEngine.$i();for(const r of e){if(r===t.wr)continue;const s=t.getItem(HH(t.persistenceKey,r));if(s){const c=H_.ar(r,s);c&&(t.gr=t.gr.insert(c.clientId,c))}}t.Pr();const i=t.storage.getItem(t.vr);if(i){const r=t.br(i);r&&t.Vr(r)}for(const r of t.yr)t.mr(r);t.yr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,i){this.Dr(t,e,i),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(NE(this.persistenceKey,t));if(i){const r=n4.ar(t,i);r&&(e=r.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(NE(this.persistenceKey,t))}updateQueryState(t,e,i){this.kr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Cr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ze("SharedClientState","READ",t,e),e}setItem(t,e){Ze("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ze("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ze("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ie.Z)(function*(){if(e.started){if(null!==i.key)if(e.Tr.test(i.key)){if(null==i.newValue){const r=e.Or(i.key);return e.Fr(r,null)}{const r=e.Br(i.key,i.newValue);if(r)return e.Fr(r.clientId,r)}}else if(e.Er.test(i.key)){if(null!==i.newValue){const r=e.Lr(i.key,i.newValue);if(r)return e.qr(r)}}else if(e.Ar.test(i.key)){if(null!==i.newValue){const r=e.Ur(i.key,i.newValue);if(r)return e.Kr(r)}}else if(i.key===e.vr){if(null!==i.newValue){const r=e.br(i.newValue);if(r)return e.Vr(r)}}else if(i.key===e.Ir){const r=function(s){let c=Xs.ct;if(null!=s)try{const d=JSON.parse(s);xt("number"==typeof d),c=d}catch(d){er("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==Xs.ct&&e.sequenceNumberHandler(r)}else if(i.key===e.Rr){const r=e.Gr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,i){const r=new P_(this.currentUser,t,e,i),s=FH(this.persistenceKey,this.currentUser,t);this.setItem(s,r.hr())}Cr(t){const e=FH(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:t}))}kr(t,e,i){const r=NE(this.persistenceKey,t),s=new n4(t,e,i);this.setItem(r,s.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const i=this.Or(t);return H_.ar(i,e)}Lr(t,e){const i=this.Er.exec(t),r=Number(i[1]);return P_.ar(new Gr(void 0!==i[2]?i[2]:null),r,e)}Ur(t,e){const i=this.Ar.exec(t),r=Number(i[1]);return n4.ar(r,e)}br(t){return kE.ar(t)}Gr(t){return JSON.parse(t)}qr(t){var e=this;return(0,ie.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.jr(t.batchId,t.state,t.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const i=e?this.gr.insert(t,e):this.gr.remove(t),r=this.Sr(this.gr),s=this.Sr(i),c=[],d=[];return s.forEach(g=>{r.has(g)||c.push(g)}),r.forEach(g=>{s.has(g)||d.push(g)}),this.syncEngine.Wr(c,d).then(()=>{this.gr=i})}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=iE();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class BH{constructor(){this.Hr=new RE,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,i){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new RE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class wle{Yr(t){}shutdown(){}}class UH{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let F_=null;function LE(){return null===F_?F_=268435456+Math.round(2147483648*Math.random()):F_++,"0x"+F_.toString(16)}const _le={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ble{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const A0="WebChannelConnection";class yle extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.mo=(t.ssl?"https":"http")+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,i,r,s){const c=LE(),d=this.To(t,e);Ze("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);const g={};return this.Eo(g,r,s),this.Ao(t,d,g,i).then(w=>(Ze("RestConnection",`Received RPC '${t}' ${c}: `,w),w),w=>{throw Oo("RestConnection",`RPC '${t}' ${c} failed with error: `,w,"url: ",d,"request:",i),w})}vo(t,e,i,r,s,c){return this.Io(t,e,i,r,s)}Eo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+L2,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}To(t,e){return`${this.mo}/v1/${e}:${_le[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,i,r){const s=LE();return new Promise((c,d)=>{const g=new wae;g.setWithCredentials(!0),g.listenOnce(pae.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case HT.NO_ERROR:const y=g.getResponseJson();Ze(A0,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(y)),c(y);break;case HT.TIMEOUT:Ze(A0,`RPC '${t}' ${s} timed out`),d(new Ve(pe.DEADLINE_EXCEEDED,"Request time out"));break;case HT.HTTP_ERROR:const A=g.getStatus();if(Ze(A0,`RPC '${t}' ${s} failed with status:`,A,"response text:",g.getResponseText()),A>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const N=I?.error;if(N&&N.status&&N.message){const Z=function(J){const te=J.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(te)>=0?te:pe.UNKNOWN}(N.status);d(new Ve(Z,N.message))}else d(new Ve(pe.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Ve(pe.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{Ze(A0,`RPC '${t}' ${s} completed.`)}});const w=JSON.stringify(r);Ze(A0,`RPC '${t}' ${s} sending request:`,r),g.send(e,"POST",w,i,15)})}Ro(t,e,i){const r=LE(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=fae(),d=gae(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(g.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(g.xmlHttpFactory=new mae({})),this.Eo(g.initMessageHeaders,e,i),g.encodeInitMessageHeaders=!0;const y=s.join("");Ze(A0,`Creating RPC '${t}' stream ${r}: ${y}`,g);const A=c.createWebChannel(y,g);let I=!1,N=!1;const Z=new ble({ro:te=>{N?Ze(A0,`Not sending because RPC '${t}' stream ${r} is closed:`,te):(I||(Ze(A0,`Opening RPC '${t}' stream ${r} transport.`),A.open(),I=!0),Ze(A0,`RPC '${t}' stream ${r} sending:`,te),A.send(te))},oo:()=>A.close()}),J=(te,xe,ke)=>{te.listen(xe,He=>{try{ke(He)}catch(Be){setTimeout(()=>{throw Be},0)}})};return J(A,o_.EventType.OPEN,()=>{N||Ze(A0,`RPC '${t}' stream ${r} transport opened.`)}),J(A,o_.EventType.CLOSE,()=>{N||(N=!0,Ze(A0,`RPC '${t}' stream ${r} transport closed`),Z.wo())}),J(A,o_.EventType.ERROR,te=>{N||(N=!0,Oo(A0,`RPC '${t}' stream ${r} transport errored:`,te),Z.wo(new Ve(pe.UNAVAILABLE,"The operation could not be completed")))}),J(A,o_.EventType.MESSAGE,te=>{var xe;if(!N){const ke=te.data[0];xt(!!ke);const He=ke,Be=He.error||(null===(xe=He[0])||void 0===xe?void 0:xe.error);if(Be){Ze(A0,`RPC '${t}' stream ${r} received error:`,Be);const tt=Be.status;let at=function(Qt){const li=gr[Qt];if(void 0!==li)return LP(li)}(tt),Ft=Be.message;void 0===at&&(at=pe.INTERNAL,Ft="Unknown error status: "+tt+" with message "+Be.message),N=!0,Z.wo(new Ve(at,Ft)),A.close()}else Ze(A0,`RPC '${t}' stream ${r} received:`,ke),Z._o(ke)}}),J(d,vae.STAT_EVENT,te=>{te.stat===EO.PROXY?Ze(A0,`RPC '${t}' stream ${r} detected buffering proxy`):te.stat===EO.NOPROXY&&Ze(A0,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function ZH(){return typeof window<"u"?window:null}function B_(){return typeof document<"u"?document:null}function i4(n){return new z1e(n,!0)}class OE{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ii=t,this.timerId=e,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,e-i);r>0&&Ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class jH{constructor(t,e,i,r,s,c,d,g){this.ii=t,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new OE(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var t=this;return(0,ie.Z)(function*(){t.Uo()&&(yield t.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}zo(){var t=this;return(0,ie.Z)(function*(){if(t.Ko())return t.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(t,e){var i=this;return(0,ie.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==t?i.qo.reset():e&&e.code===pe.RESOURCE_EXHAUSTED?(er(e.toString()),er("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):e&&e.code===pe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.ao(e)})()}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===e&&this.Zo(i,r)},i=>{t(()=>{const r=new Ve(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(t,e){const i=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var t=this;this.state=5,this.qo.No((0,ie.Z)(function*(){t.state=0,t.start()}))}tu(t){return Ze("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget(()=>this.Fo===t?e():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cle extends jH{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function R1e(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(g=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:vt(),r=t.targetChange.targetIds||[],s=function(g,w){return g.useProto3Json?(xt(void 0===w||"string"==typeof w),Ar.fromBase64String(w||"")):(xt(void 0===w||w instanceof Uint8Array),Ar.fromUint8Array(w||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(g){const w=void 0===g.code?pe.UNKNOWN:LP(g.code);return new Ve(w,g.message||"")}(c);e=new BP(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=P1(n,i.document.name),s=tr(i.document.updateTime),c=i.document.createTime?tr(i.document.createTime):At.min(),d=new u0({mapValue:{fields:i.document.fields}}),g=vi.newFoundDocument(r,s,c,d);e=new A_(i.targetIds||[],i.removedTargetIds||[],g.key,g)}else if("documentDelete"in t){const i=t.documentDelete,r=P1(n,i.document),s=i.readTime?tr(i.readTime):At.min(),c=vi.newNoDocument(r,s);e=new A_([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=P1(n,i.document);e=new A_([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return vt();{const i=t.filter,{count:r=0,unchangedNames:s}=i,c=new A1e(r,s);e=new FP(i.targetId,c)}}var g;return e}(this.serializer,t),i=function(r){if(!("targetChange"in r))return At.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?tr(s.readTime):At.min()}(t);return this.listener.nu(e,i)}su(t){const e={};e.database=q3(this.serializer),e.addTarget=function(r,s){let c;const d=s.target;if(c=m_(d)?{documents:JP(r,d)}:{query:gE(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=GP(r,s.resumeToken);const g=uE(r,s.expectedCount);null!==g&&(c.expectedCount=g)}else if(s.snapshotVersion.compareTo(At.min())>0){c.readTime=q2(r,s.snapshotVersion.toTimestamp());const g=uE(r,s.expectedCount);null!==g&&(c.expectedCount=g)}return c}(this.serializer,t);const i=function L1e(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Wo(e)}iu(t){const e={};e.database=q3(this.serializer),e.removeTarget=t,this.Wo(e)}}class Mle extends jH{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(xt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function V1e(n,t){return n&&n.length>0?(xt(void 0!==t),n.map(e=>function(i,r){let s=tr(i.updateTime?i.updateTime:r);return s.isEqual(At.min())&&(s=tr(r)),new y1e(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=tr(t.commitTime);return this.listener.cu(i,e)}return xt(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=q3(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>W3(this.serializer,i))};this.Wo(e)}}class xle extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Ve(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ve(pe.UNKNOWN,r.toString())})}vo(t,e,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.vo(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(pe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Dle{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(er(e),this.mu=!1):Ze("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Tle{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{i.enqueueAndForget((0,ie.Z)(function*(){var g;W5(c)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ie.Z)(function*(w){const y=ot(w);y.vu.add(4),yield X2(y),y.bu.set("Unknown"),y.vu.delete(4),yield r4(y)}),function(w){return g.apply(this,arguments)})(c))}))}),this.bu=new Dle(i,r)}}function r4(n){return HE.apply(this,arguments)}function HE(){return HE=(0,ie.Z)(function*(n){if(W5(n))for(const t of n.Ru)yield t(!0)}),HE.apply(this,arguments)}function X2(n){return FE.apply(this,arguments)}function FE(){return FE=(0,ie.Z)(function*(n){for(const t of n.Ru)yield t(!1)}),FE.apply(this,arguments)}function U_(n,t){const e=ot(n);e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),ZE(e)?UE(e):tf(e).Ko()&&BE(e,t))}function s4(n,t){const e=ot(n),i=tf(e);e.Au.delete(t),i.Ko()&&GH(e,t),0===e.Au.size&&(i.Ko()?i.jo():W5(e)&&e.bu.set("Unknown"))}function BE(n,t){if(n.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}tf(n).su(t)}function GH(n,t){n.Vu.qt(t),tf(n).iu(t)}function UE(n){n.Vu=new T1e({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),le:t=>n.Au.get(t)||null,ue:()=>n.datastore.serializer.databaseId}),tf(n).start(),n.bu.gu()}function ZE(n){return W5(n)&&!tf(n).Uo()&&n.Au.size>0}function W5(n){return 0===ot(n).vu.size}function $H(n){n.Vu=void 0}function Ele(n){return jE.apply(this,arguments)}function jE(){return jE=(0,ie.Z)(function*(n){n.Au.forEach((t,e)=>{BE(n,t)})}),jE.apply(this,arguments)}function Ile(n,t){return GE.apply(this,arguments)}function GE(){return GE=(0,ie.Z)(function*(n,t){$H(n),ZE(n)?(n.bu.Iu(t),UE(n)):n.bu.set("Unknown")}),GE.apply(this,arguments)}function Sle(n,t,e){return $E.apply(this,arguments)}function $E(){return $E=(0,ie.Z)(function*(n,t,e){if(n.bu.set("Online"),t instanceof BP&&2===t.state&&t.cause)try{yield(i=(0,ie.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.Au.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.Au.delete(d),r.Vu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){Ze("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Z_(n,i)}else if(t instanceof A_?n.Vu.Ht(t):t instanceof FP?n.Vu.ne(t):n.Vu.Xt(t),!e.isEqual(At.min()))try{const i=yield RH(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.Vu.ce(s);return c.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const w=r.Au.get(g);w&&r.Au.set(g,w.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach((d,g)=>{const w=r.Au.get(d);if(!w)return;r.Au.set(d,w.withResumeToken(Ar.EMPTY_BYTE_STRING,w.snapshotVersion)),GH(r,d);const y=new dc(w.target,d,g,w.sequenceNumber);BE(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){Ze("RemoteStore","Failed to raise snapshot:",i),yield Z_(n,i)}var i}),$E.apply(this,arguments)}function Z_(n,t,e){return qE.apply(this,arguments)}function qE(){return qE=(0,ie.Z)(function*(n,t,e){if(!L5(t))throw t;n.vu.add(1),yield X2(n),n.bu.set("Offline"),e||(e=()=>RH(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield e(),n.vu.delete(1),yield r4(n)}))}),qE.apply(this,arguments)}function qH(n,t){return t().catch(e=>Z_(n,e,t))}function ef(n){return WE.apply(this,arguments)}function WE(){return WE=(0,ie.Z)(function*(n){const t=ot(n),e=K5(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;zle(t);)try{const r=yield ple(t.localStore,i);if(null===r){0===t.Eu.length&&e.jo();break}i=r.batchId,Nle(t,r)}catch(r){yield Z_(t,r)}WH(t)&&KH(t)}),WE.apply(this,arguments)}function zle(n){return W5(n)&&n.Eu.length<10}function Nle(n,t){n.Eu.push(t);const e=K5(n);e.Ko()&&e.ou&&e.uu(t.mutations)}function WH(n){return W5(n)&&!K5(n).Uo()&&n.Eu.length>0}function KH(n){K5(n).start()}function kle(n){return KE.apply(this,arguments)}function KE(){return KE=(0,ie.Z)(function*(n){K5(n).hu()}),KE.apply(this,arguments)}function Rle(n){return YE.apply(this,arguments)}function YE(){return YE=(0,ie.Z)(function*(n){const t=K5(n);for(const e of n.Eu)t.uu(e.mutations)}),YE.apply(this,arguments)}function Vle(n,t,e){return JE.apply(this,arguments)}function JE(){return JE=(0,ie.Z)(function*(n,t,e){const i=n.Eu.shift(),r=oE.from(i,t,e);yield qH(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ef(n)}),JE.apply(this,arguments)}function Lle(n,t){return QE.apply(this,arguments)}function QE(){return QE=(0,ie.Z)(function*(n,t){var e;t&&K5(n).ou&&(yield(e=(0,ie.Z)(function*(i,r){if(VP(s=r.code)&&s!==pe.ABORTED){const c=i.Eu.shift();K5(i).Qo(),yield qH(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield ef(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),WH(n)&&KH(n)}),QE.apply(this,arguments)}function YH(n,t){return XE.apply(this,arguments)}function XE(){return XE=(0,ie.Z)(function*(n,t){const e=ot(n);e.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const i=W5(e);e.vu.add(3),yield X2(e),i&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),yield r4(e)}),XE.apply(this,arguments)}function eI(n,t){return tI.apply(this,arguments)}function tI(){return tI=(0,ie.Z)(function*(n,t){const e=ot(n);t?(e.vu.delete(2),yield r4(e)):t||(e.vu.add(2),yield X2(e),e.bu.set("Unknown"))}),tI.apply(this,arguments)}function tf(n){return n.Su||(n.Su=function(t,e,i){const r=ot(t);return r.fu(),new Cle(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:Ele.bind(null,n),ao:Ile.bind(null,n),nu:Sle.bind(null,n)}),n.Ru.push(function(){var t=(0,ie.Z)(function*(e){e?(n.Su.Qo(),ZE(n)?UE(n):n.bu.set("Unknown")):(yield n.Su.stop(),$H(n))});return function(e){return t.apply(this,arguments)}}())),n.Su}function K5(n){return n.Du||(n.Du=function(t,e,i){const r=ot(t);return r.fu(),new Mle(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:kle.bind(null,n),ao:Lle.bind(null,n),au:Rle.bind(null,n),cu:Vle.bind(null,n)}),n.Ru.push(function(){var t=(0,ie.Z)(function*(e){e?(n.Du.Qo(),yield ef(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Du}class nI{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new nI(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nf(n,t){if(er("AsyncQueue",`${t}: ${n}`),L5(n))return new Ve(pe.UNAVAILABLE,`${t}: ${n}`);throw n}class rf{constructor(t){this.comparator=t?(e,i)=>t(e,i)||st.comparator(e.key,i.key):(e,i)=>st.comparator(e.key,i.key),this.keyedMap=H3(),this.sortedSet=new ri(this.comparator)}static emptySet(t){return new rf(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof rf)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new rf;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class JH{constructor(){this.Cu=new ri(st.comparator)}track(t){const e=t.doc.key,i=this.Cu.get(e);i?0!==t.type&&3===i.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==i.type?this.Cu=this.Cu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Cu=this.Cu.remove(e):1===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):vt():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal((e,i)=>{t.push(i)}),t}}class sf{constructor(t,e,i,r,s,c,d,g,w){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=w}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new sf(t,e,rf.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&O3(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class Ole{constructor(){this.Nu=void 0,this.listeners=[]}}class Ple{constructor(){this.queries=new uc(t=>vP(t),O3),this.onlineState="Unknown",this.ku=new Set}}function iI(n,t){return rI.apply(this,arguments)}function rI(){return rI=(0,ie.Z)(function*(n,t){const e=ot(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new Ole),r)try{s.Nu=yield e.onListen(i)}catch(c){const d=nf(c,`Initialization of query '${nE(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Mu(e.onlineState),s.Nu&&t.$u(s.Nu)&&aI(e)}),rI.apply(this,arguments)}function sI(n,t){return oI.apply(this,arguments)}function oI(){return oI=(0,ie.Z)(function*(n,t){const e=ot(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),oI.apply(this,arguments)}function Hle(n,t){const e=ot(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.$u(r)&&(i=!0);c.Nu=r}}i&&aI(e)}function Fle(n,t,e){const i=ot(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function aI(n){n.ku.forEach(t=>{t.next()})}class lI{constructor(t,e,i){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new sf(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){return!t.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(t){t=sf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class Ble{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class QH{constructor(t){this.serializer=t}rr(t){return P1(this.serializer,t)}ur(t){return t.metadata.exists?YP(this.serializer,t.document,!1):vi.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return tr(t)}}class Ule{constructor(t,e,i){this.ju=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XH(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const i=yn.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,i=new QH(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||Jt()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,ie.Z)(function*(){const e=yield function vle(n,t,e,i){return SE.apply(this,arguments)}(t.localStore,new QH(t.serializer),t.documents,t.ju.id),i=t.Wu(t.documents);for(const r of t.queries)yield mle(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:e}})()}}function XH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eF{constructor(t){this.key=t}}class tF{constructor(t){this.key=t}}class nF{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Jt(),this.mutatedKeys=Jt(),this.tc=wP(t),this.ec=new rf(this.tc)}get nc(){return this.Yu}sc(t,e){const i=e?e.ic:new JH,r=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const g="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,w="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((y,A)=>{const I=r.get(y),N=P3(this.query,A)?A:null,Z=!!I&&this.mutatedKeys.has(I.key),J=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let te=!1;I&&N?I.data.isEqual(N.data)?Z!==J&&(i.track({type:3,doc:N}),te=!0):this.rc(I,N)||(i.track({type:2,doc:N}),te=!0,(g&&this.tc(N,g)>0||w&&this.tc(N,w)<0)&&(d=!0)):!I&&N?(i.track({type:0,doc:N}),te=!0):I&&!N&&(i.track({type:1,doc:I}),te=!0,(g||w)&&(d=!0)),te&&(N?(c=c.add(N),s=J?s.add(y):s.delete(y)):(c=c.delete(y),s=s.delete(y)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const y="F"===this.query.limitType?c.last():c.first();c=c.delete(y.key),s=s.delete(y.key),i.track({type:1,doc:y})}return{ec:c,ic:i,zi:d,mutatedKeys:s}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const s=t.ic.xu();s.sort((w,y)=>function(A,I){const N=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return N(A)-N(I)}(w.type,y.type)||this.tc(w.doc,y.doc)),this.oc(i);const c=e?this.uc():[],d=0===this.Zu.size&&this.current?1:0,g=d!==this.Xu;return this.Xu=d,0!==s.length||g?{snapshot:new sf(this.query,t.ec,r,s,t.mutatedKeys,0===d,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new JH,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=Jt(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const e=[];return t.forEach(i=>{this.Zu.has(i)||e.push(new tF(i))}),this.Zu.forEach(i=>{t.has(i)||e.push(new eF(i))}),e}hc(t){this.Yu=t.ir,this.Zu=Jt();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return sf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Zle{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class jle{constructor(t){this.key=t,this.fc=!1}}class Gle{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new uc(d=>vP(d),O3),this._c=new Map,this.mc=new Set,this.gc=new ri(st.comparator),this.yc=new Map,this.Ic=new CE,this.Tc={},this.Ec=new Map,this.Ac=zh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function $le(n,t){return cI.apply(this,arguments)}function cI(){return cI=(0,ie.Z)(function*(n,t){const e=NI(n);let i,r;const s=e.wc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const c=yield J2(e.localStore,G0(t)),d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield uI(e,t,i,"current"===d,c.resumeToken),e.isPrimaryClient&&U_(e.remoteStore,c)}return r}),cI.apply(this,arguments)}function uI(n,t,e,i,r){return hI.apply(this,arguments)}function hI(){return hI=(0,ie.Z)(function*(n,t,e,i,r){n.Rc=(A,I,N)=>{return(Z=(0,ie.Z)(function*(J,te,xe,ke){let He=te.view.sc(xe);He.zi&&(He=yield O_(J.localStore,te.query,!1).then(({documents:at})=>te.view.sc(at,He)));const Be=ke&&ke.targetChanges.get(te.targetId),tt=te.view.applyChanges(He,J.isPrimaryClient,Be);return yI(J,te.targetId,tt.cc),tt.snapshot}),function(J,te,xe,ke){return Z.apply(this,arguments)})(n,A,I,N);var Z};const s=yield O_(n.localStore,t,!0),c=new nF(t,s.ir),d=c.sc(s.documents),g=G3.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),w=c.applyChanges(d,n.isPrimaryClient,g);yI(n,e,w.cc);const y=new Zle(t,e,c);return n.wc.set(t,y),n._c.has(e)?n._c.get(e).push(t):n._c.set(e,[t]),w.snapshot}),hI.apply(this,arguments)}function qle(n,t){return dI.apply(this,arguments)}function dI(){return dI=(0,ie.Z)(function*(n,t){const e=ot(n),i=e.wc.get(t),r=e._c.get(i.targetId);if(r.length>1)return e._c.set(i.targetId,r.filter(s=>!O3(s,t))),void e.wc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Q2(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),s4(e.remoteStore,i.targetId),af(e,i.targetId)}).catch(V5))):(af(e,i.targetId),yield Q2(e.localStore,i.targetId,!0))}),dI.apply(this,arguments)}function fI(){return fI=(0,ie.Z)(function*(n,t,e){const i=kI(n);try{const r=yield function(s,c){const d=ot(s),g=Di.now(),w=c.reduce((I,N)=>I.add(N.key),Jt());let y,A;return d.persistence.runTransaction("Locally write mutations","readwrite",I=>{let N=ws(),Z=Jt();return d.Zi.getEntries(I,w).next(J=>{N=J,N.forEach((te,xe)=>{xe.isValidDocument()||(Z=Z.add(te))})}).next(()=>d.localDocuments.getOverlayedDocuments(I,N)).next(J=>{y=J;const te=[];for(const xe of c){const ke=M1e(xe,y.get(xe.key).overlayedDocument);null!=ke&&te.push(new hc(xe.key,ke,nP(ke.value.mapValue),Ti.exists(!0)))}return d.mutationQueue.addMutationBatch(I,g,te,c)}).next(J=>{A=J;const te=J.applyToLocalDocumentSet(y,Z);return d.documentOverlayCache.saveOverlays(I,J.batchId,te)})}).then(()=>({batchId:A.batchId,changes:bP(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let g=s.Tc[s.currentUser.toKey()];g||(g=new ri(Ut)),g=g.insert(c,d),s.Tc[s.currentUser.toKey()]=g}(i,r.batchId,e),yield fc(i,r.changes),yield ef(i.remoteStore)}catch(r){const s=nf(r,"Failed to persist write");e.reject(s)}}),fI.apply(this,arguments)}function iF(n,t){return gI.apply(this,arguments)}function gI(){return gI=(0,ie.Z)(function*(n,t){const e=ot(n);try{const i=yield gle(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.yc.get(s);c&&(xt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.fc=!0:r.modifiedDocuments.size>0?xt(c.fc):r.removedDocuments.size>0&&(xt(c.fc),c.fc=!1))}),yield fc(e,i,t)}catch(i){yield V5(i)}}),gI.apply(this,arguments)}function rF(n,t,e){const i=ot(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.wc.forEach((s,c)=>{const d=c.view.Mu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=ot(s);d.onlineState=c;let g=!1;d.queries.forEach((w,y)=>{for(const A of y.listeners)A.Mu(c)&&(g=!0)}),g&&aI(d)}(i.eventManager,t),r.length&&i.dc.nu(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Kle(n,t,e){return pI.apply(this,arguments)}function pI(){return pI=(0,ie.Z)(function*(n,t,e){const i=ot(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.yc.get(t),s=r&&r.key;if(s){let c=new ri(st.comparator);c=c.insert(s,vi.newNoDocument(s,At.min()));const d=Jt().add(s),g=new j3(At.min(),new Map,new ri(Ut),c,d);yield iF(i,g),i.gc=i.gc.remove(s),i.yc.delete(t),CI(i)}else yield Q2(i.localStore,t,!1).then(()=>af(i,t,e)).catch(V5)}),pI.apply(this,arguments)}function Yle(n,t){return vI.apply(this,arguments)}function vI(){return vI=(0,ie.Z)(function*(n,t){const e=ot(n),i=t.batch.batchId;try{const r=yield fle(e.localStore,t);bI(e,i,null),_I(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield fc(e,r)}catch(r){yield V5(r)}}),vI.apply(this,arguments)}function Jle(n,t,e){return mI.apply(this,arguments)}function mI(){return mI=(0,ie.Z)(function*(n,t,e){const i=ot(n);try{const r=yield function(s,c){const d=ot(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return d.mutationQueue.lookupMutationBatch(g,c).next(y=>(xt(null!==y),w=y.keys(),d.mutationQueue.removeMutationBatch(g,y))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,w,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w)).next(()=>d.localDocuments.getDocuments(g,w))})}(i.localStore,t);bI(i,t,e),_I(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield fc(i,r)}catch(r){yield V5(r)}}),mI.apply(this,arguments)}function wI(){return wI=(0,ie.Z)(function*(n,t){const e=ot(n);W5(e.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=ot(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Ec.get(i)||[];r.push(t),e.Ec.set(i,r)}catch(i){const r=nf(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),wI.apply(this,arguments)}function _I(n,t){(n.Ec.get(t)||[]).forEach(e=>{e.resolve()}),n.Ec.delete(t)}function bI(n,t,e){const i=ot(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function af(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n._c.get(t))n.wc.delete(i),e&&n.dc.Pc(i,e);n._c.delete(t),n.isPrimaryClient&&n.Ic.Is(t).forEach(i=>{n.Ic.containsKey(i)||sF(n,i)})}function sF(n,t){n.mc.delete(t.path.canonicalString());const e=n.gc.get(t);null!==e&&(s4(n.remoteStore,e),n.gc=n.gc.remove(t),n.yc.delete(e),CI(n))}function yI(n,t,e){for(const i of e)i instanceof eF?(n.Ic.addReference(i.key,t),Xle(n,i)):i instanceof tF?(Ze("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,t),n.Ic.containsKey(i.key)||sF(n,i.key)):vt()}function Xle(n,t){const e=t.key,i=e.path.canonicalString();n.gc.get(e)||n.mc.has(i)||(Ze("SyncEngine","New document in limbo: "+e),n.mc.add(i),CI(n))}function CI(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const t=n.mc.values().next().value;n.mc.delete(t);const e=new st(yn.fromString(t)),i=n.Ac.next();n.yc.set(i,new jle(e)),n.gc=n.gc.insert(e,i),U_(n.remoteStore,new dc(G0(U2(e.path)),i,"TargetPurposeLimboResolution",Xs.ct))}}function fc(n,t,e){return MI.apply(this,arguments)}function MI(){return MI=(0,ie.Z)(function*(n,t,e){const i=ot(n),r=[],s=[],c=[];var d;i.wc.isEmpty()||(i.wc.forEach((d,g)=>{c.push(i.Rc(g,t,e).then(w=>{if((w||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(g.targetId,w?.fromCache?"not-current":"current"),w){r.push(w);const y=TE.Li(g.targetId,w);s.push(y)}}))}),yield Promise.all(c),i.dc.nu(r),yield(d=(0,ie.Z)(function*(g,w){const y=ot(g);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ue.forEach(w,I=>ue.forEach(I.Fi,N=>y.persistence.referenceDelegate.addReference(A,I.targetId,N)).next(()=>ue.forEach(I.Bi,N=>y.persistence.referenceDelegate.removeReference(A,I.targetId,N)))))}catch(A){if(!L5(A))throw A;Ze("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const I=A.targetId;if(!A.fromCache){const N=y.Ji.get(I),J=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);y.Ji=y.Ji.insert(I,J)}}}),function(g,w){return d.apply(this,arguments)})(i.localStore,s))}),MI.apply(this,arguments)}function ece(n,t){return xI.apply(this,arguments)}function xI(){return xI=(0,ie.Z)(function*(n,t){const e=ot(n);if(!e.currentUser.isEqual(t)){Ze("SyncEngine","User change. New user:",t.toKey());const i=yield kH(e.localStore,t);e.currentUser=t,(r=e).Ec.forEach(c=>{c.forEach(d=>{d.reject(new Ve(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield fc(e,i.er)}var r}),xI.apply(this,arguments)}function tce(n,t){const e=ot(n),i=e.yc.get(t);if(i&&i.fc)return Jt().add(i.key);{let r=Jt();const s=e._c.get(t);if(!s)return r;for(const c of s){const d=e.wc.get(c);r=r.unionWith(d.view.nc)}return r}}function nce(n,t){return AI.apply(this,arguments)}function AI(){return AI=(0,ie.Z)(function*(n,t){const e=ot(n),i=yield O_(e.localStore,t.query,!0),r=t.view.hc(i);return e.isPrimaryClient&&yI(e,t.targetId,r.cc),r}),AI.apply(this,arguments)}function ice(n,t){return DI.apply(this,arguments)}function DI(){return DI=(0,ie.Z)(function*(n,t){const e=ot(n);return OH(e.localStore,t).then(i=>fc(e,i))}),DI.apply(this,arguments)}function rce(n,t,e,i){return TI.apply(this,arguments)}function TI(){return TI=(0,ie.Z)(function*(n,t,e,i){const r=ot(n),s=yield function(c,d){const g=ot(c),w=ot(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",y=>w.Sn(y,d).next(A=>A?g.localDocuments.getDocuments(y,A):ue.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield ef(r.remoteStore):"acknowledged"===e||"rejected"===e?(bI(r,t,i||null),_I(r,t),d=t,ot(ot(r.localStore).mutationQueue).Cn(d)):vt(),yield fc(r,s)):Ze("SyncEngine","Cannot apply mutation batch with id: "+t)}),TI.apply(this,arguments)}function EI(){return EI=(0,ie.Z)(function*(n,t){const e=ot(n);if(NI(e),kI(e),!0===t&&!0!==e.vc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield oF(e,i.toArray());e.vc=!0,yield eI(e.remoteStore,!0);for(const s of r)U_(e.remoteStore,s)}else if(!1===t&&!1!==e.vc){const i=[];let r=Promise.resolve();e._c.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(af(e,c),Q2(e.localStore,c,!0))),s4(e.remoteStore,c)}),yield r,yield oF(e,i),function(s){const c=ot(s);c.yc.forEach((d,g)=>{s4(c.remoteStore,g)}),c.Ic.Ts(),c.yc=new Map,c.gc=new ri(st.comparator)}(e),e.vc=!1,yield eI(e.remoteStore,!1)}}),EI.apply(this,arguments)}function oF(n,t,e){return II.apply(this,arguments)}function II(){return II=(0,ie.Z)(function*(n,t,e){const i=ot(n),r=[],s=[];for(const c of t){let d;const g=i._c.get(c);if(g&&0!==g.length){d=yield J2(i.localStore,G0(g[0]));for(const w of g){const y=i.wc.get(w),A=yield nce(i,y);A.snapshot&&s.push(A.snapshot)}}else{const w=yield LH(i.localStore,c);d=yield J2(i.localStore,w),yield uI(i,aF(w),c,!1,d.resumeToken)}r.push(d)}return i.dc.nu(s),r}),II.apply(this,arguments)}function aF(n){return gP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function oce(n){const t=ot(n);return ot(ot(t.localStore).persistence).$i()}function ace(n,t,e,i){return SI.apply(this,arguments)}function SI(){return SI=(0,ie.Z)(function*(n,t,e,i){const r=ot(n);if(r.vc)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield OH(r.localStore,mP(s[0])),d=j3.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Ar.EMPTY_BYTE_STRING);yield fc(r,c,d);break}case"rejected":yield Q2(r.localStore,t,!0),af(r,t,i);break;default:vt()}}),SI.apply(this,arguments)}function lce(n,t,e){return zI.apply(this,arguments)}function zI(){return zI=(0,ie.Z)(function*(n,t,e){const i=NI(n);if(i.vc){for(const r of t){if(i._c.has(r)){Ze("SyncEngine","Adding an already active target "+r);continue}const s=yield LH(i.localStore,r),c=yield J2(i.localStore,s);yield uI(i,aF(s),c.targetId,!1,c.resumeToken),U_(i.remoteStore,c)}for(const r of e)i._c.has(r)&&(yield Q2(i.localStore,r,!1).then(()=>{s4(i.remoteStore,r),af(i,r)}).catch(V5))}}),zI.apply(this,arguments)}function NI(n){const t=ot(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=iF.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tce.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kle.bind(null,t),t.dc.nu=Hle.bind(null,t.eventManager),t.dc.Pc=Fle.bind(null,t.eventManager),t}function kI(n){const t=ot(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yle.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jle.bind(null,t),t}class o4{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ie.Z)(function*(){e.serializer=i4(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return NH(this.persistence,new zH,t.initialUser,this.serializer)}createPersistence(t){return new ME(R_.zs,this.serializer)}createSharedClientState(t){return new BH}terminate(){var t=this;return(0,ie.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class RI extends o4{constructor(t,e,i){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,ie.Z)(function*(){yield e().call(i,t),yield i.Vc.initialize(i,t),yield kI(i.Vc.syncEngine),yield ef(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return NH(this.persistence,new zH,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new CH(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new Vae(e,this.persistence);return new Rae(t.asyncQueue,i)}createPersistence(t){const e=DE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?x0.withCacheSize(this.cacheSizeBytes):x0.DEFAULT;return new AE(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,ZH(),B_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new BH}}class lF extends RI{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,ie.Z)(function*(){yield e().call(i,t);const r=i.Vc.syncEngine;i.sharedClientState instanceof VE&&(i.sharedClientState.syncEngine={jr:rce.bind(null,r),zr:ace.bind(null,r),Wr:lce.bind(null,r),$i:oce.bind(null,r),Qr:ice.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,ie.Z)(function*(c){yield function sce(n,t){return EI.apply(this,arguments)}(i.Vc.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=ZH();if(!VE.D(e))throw new Ve(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=DE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new VE(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class lf{initialize(t,e){var i=this;return(0,ie.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>rF(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=ece.bind(null,i.syncEngine),yield eI(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Ple}createDatastore(t){const e=i4(t.databaseInfo.databaseId),i=new yle(t.databaseInfo);return new xle(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>rF(this.syncEngine,d,0),c=UH.D()?new UH:new wle,new Tle(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,g,w){const y=new Gle(i,r,s,c,d,g);return w&&(y.vc=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ie.Z)(function*(e){const i=ot(e);Ze("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield X2(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function cF(n,t=10240){let e=0;return{read:()=>(0,ie.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class j_{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):er("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class hce{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new xr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var t=this;return(0,ie.Z)(function*(){return t.metadata.promise})()}bc(){var t=this;return(0,ie.Z)(function*(){return yield t.getMetadata(),t.Nc()})()}Nc(){var t=this;return(0,ie.Z)(function*(){const e=yield t.kc();if(null===e)return null;const i=t.xc.decode(e),r=Number(i);isNaN(r)&&t.Mc(`length string (${i}) is not valid number`);const s=yield t.$c(r);return new Ble(JSON.parse(s),e.length+r)})()}Oc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}kc(){var t=this;return(0,ie.Z)(function*(){for(;t.Oc()<0&&!(yield t.Fc()););if(0===t.buffer.length)return null;const e=t.Oc();e<0&&t.Mc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}$c(t){var e=this;return(0,ie.Z)(function*(){for(;e.buffer.length<t;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const i=e.xc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}Fc(){var t=this;return(0,ie.Z)(function*(){const e=yield t.Cc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class dce{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ve(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ie.Z)(function*(s,c){const d=ot(s),g=q3(d.serializer)+"/documents",w={documents:c.map(N=>$3(d.serializer,N))},y=yield d.vo("BatchGetDocuments",g,w,c.length),A=new Map;y.forEach(N=>{const Z=function k1e(n,t){return"found"in t?function(e,i){xt(!!i.found);const r=P1(e,i.found.name),s=tr(i.found.updateTime),c=i.found.createTime?tr(i.found.createTime):At.min(),d=new u0({mapValue:{fields:i.found.fields}});return vi.newFoundDocument(r,s,c,d)}(n,t):"missing"in t?function(e,i){xt(!!i.missing),xt(!!i.readTime);const r=P1(e,i.missing),s=tr(i.readTime);return vi.newNoDocument(r,s)}(n,t):vt()}(d.serializer,N);A.set(Z.key.toString(),Z)});const I=[];return c.forEach(N=>{const Z=A.get(N.toString());xt(!!Z),I.push(Z)}),I}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new $2(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=st.fromPath(r);t.mutations.push(new rE(s,t.precondition(s)))}),yield(i=(0,ie.Z)(function*(r,s){const c=ot(r),d=q3(c.serializer)+"/documents",g={writes:s.map(w=>W3(c.serializer,w))};yield c.Io("Commit",d,g)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw vt();e=At.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ve(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(At.min())?Ti.exists(!1):Ti.updateTime(e):Ti.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(At.min()))throw new Ve(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ti.updateTime(e)}return Ti.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class fce{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new OE(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var t=this;this.qo.No((0,ie.Z)(function*(){const e=new dce(t.datastore),i=t.qc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Uc(s)}))}).catch(r=>{t.Uc(r)})}))}qc(t){try{const e=this.updateFunction(t);return!S3(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!VP(e)}return!1}}class gce{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Gr.UNAUTHENTICATED,this.clientId=NO.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,ie.Z)(function*(d){Ze("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(Ze("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,ie.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=nf(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function G_(n,t){return VI.apply(this,arguments)}function VI(){return VI=(0,ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,ie.Z)(function*(s){i.isEqual(s)||(yield kH(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),VI.apply(this,arguments)}function LI(n,t){return OI.apply(this,arguments)}function OI(){return OI=(0,ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield PI(n);Ze("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>YH(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>YH(t.remoteStore,s)),n._onlineComponents=t}),OI.apply(this,arguments)}function uF(n){return"FirebaseError"===n.name?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function PI(n){return HI.apply(this,arguments)}function HI(){return HI=(0,ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield G_(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!uF(e))throw e;Oo("Error using user provided cache. Falling back to memory cache: "+e),yield G_(n,new o4)}}else Ze("FirestoreClient","Using default OfflineComponentProvider"),yield G_(n,new o4);return n._offlineComponents}),HI.apply(this,arguments)}function $_(n){return FI.apply(this,arguments)}function FI(){return FI=(0,ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield LI(n,n._uninitializedComponentsProvider._online)):(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield LI(n,new lf))),n._onlineComponents}),FI.apply(this,arguments)}function hF(n){return PI(n).then(t=>t.persistence)}function q_(n){return PI(n).then(t=>t.localStore)}function dF(n){return $_(n).then(t=>t.remoteStore)}function BI(n){return $_(n).then(t=>t.syncEngine)}function cf(n){return UI.apply(this,arguments)}function UI(){return UI=(0,ie.Z)(function*(n){const t=yield $_(n),e=t.eventManager;return e.onListen=$le.bind(null,t.syncEngine),e.onUnlisten=qle.bind(null,t.syncEngine),e}),UI.apply(this,arguments)}function gF(n,t,e={}){const i=new xr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(r,s,c,d,g){const w=new j_({next:A=>{s.enqueueAndForget(()=>sI(r,y));const I=A.docs.has(c);!I&&A.fromCache?g.reject(new Ve(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&A.fromCache&&d&&"server"===d.source?g.reject(new Ve(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),y=new lI(U2(c.path),w,{includeMetadataChanges:!0,Ku:!0});return iI(r,y)}(yield cf(n),n.asyncQueue,t,e,i)})),i.promise}function pF(n,t,e={}){const i=new xr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(r,s,c,d,g){const w=new j_({next:A=>{s.enqueueAndForget(()=>sI(r,y)),A.fromCache&&"server"===d.source?g.reject(new Ve(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),y=new lI(c,w,{includeMetadataChanges:!0,Ku:!0});return iI(r,y)}(yield cf(n),n.asyncQueue,t,e,i)})),i.promise}function vF(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const mF=new Map;function ZI(n,t,e){if(!e)throw new Ve(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function wF(n,t,e,i){if(!0===t&&!0===i)throw new Ve(pe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function _F(n){if(!st.isDocumentKey(n))throw new Ve(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bF(n){if(st.isDocumentKey(n))throw new Ve(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function W_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":vt()}function vn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ve(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=W_(n);throw new Ve(pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function yF(n,t){if(t<=0)throw new Ve(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class CF{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ve(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ve(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wF("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vF(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Ve(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ve(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ve(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class a4{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ve(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CF(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new Cae;switch(e.type){case"firstParty":return new Dae(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ve(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=mF.get(t);e&&(Ze("ComponentProvider","Removing Datastore"),mF.delete(t),e.terminate())}(this),Promise.resolve()}}class mi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new H1(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new mi(this.firestore,t,this._key)}}class h0{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new h0(this.firestore,t,this._query)}}class H1 extends h0{constructor(t,e,i){super(t,e,U2(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new mi(this.firestore,null,new st(t))}withConverter(t){return new H1(this.firestore,t,this._path)}}function xF(n,t,...e){if(n=(0,H.m9)(n),ZI("collection","path",t),n instanceof a4){const i=yn.fromString(t,...e);return bF(i),new H1(n,null,i)}{if(!(n instanceof mi||n instanceof H1))throw new Ve(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yn.fromString(t,...e));return bF(i),new H1(n.firestore,null,i)}}function K_(n,t,...e){if(n=(0,H.m9)(n),1===arguments.length&&(t=NO.A()),ZI("doc","path",t),n instanceof a4){const i=yn.fromString(t,...e);return _F(i),new mi(n,null,new st(i))}{if(!(n instanceof mi||n instanceof H1))throw new Ve(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yn.fromString(t,...e));return _F(i),new mi(n.firestore,n instanceof H1?n.converter:null,new st(i))}}function AF(n,t){return n=(0,H.m9)(n),t=(0,H.m9)(t),(n instanceof mi||n instanceof H1)&&(t instanceof mi||t instanceof H1)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function jI(n,t){return n=(0,H.m9)(n),t=(0,H.m9)(t),n instanceof h0&&t instanceof h0&&n.firestore===t.firestore&&O3(n._query,t._query)&&n.converter===t.converter}class xce{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new OE(this,"async_queue_retry"),this.Xc=()=>{const e=B_();e&&Ze("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const t=B_();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=B_();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new xr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}ea(){var t=this;return(0,ie.Z)(function*(){if(0!==t.Qc.length){try{yield t.Qc[0](),t.Qc.shift(),t.qo.reset()}catch(e){if(!L5(e))throw e;Ze("AsyncQueue","Operation failed with retryable error: "+e)}t.Qc.length>0&&t.qo.No(()=>t.ea())}})()}ta(t){const e=this.Gc.then(()=>(this.Hc=!0,t().catch(i=>{throw this.Wc=i,this.Hc=!1,er("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=e,e}enqueueAfterDelay(t,e,i){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const r=nI.createAndSchedule(this,t,e,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&vt()}verifyOperationInProgress(){}sa(){var t=this;return(0,ie.Z)(function*(){let e;do{e=t.Gc,yield e}while(e!==t.Gc)})()}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function GI(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Ace{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class wi extends a4{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new xce,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||DF(this),this._firestoreClient.terminate()}}function nr(n){return n._firestoreClient||DF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DF(n){var t,e,i;const r=n._freezeSettings(),s=(d=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new n1e(n._databaseId,d,n._persistenceKey,(w=r).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,vF(w.experimentalLongPollingOptions),w.useFetchStreams));var d,w;n._firestoreClient=new gce(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(e=r.cache)||void 0===e?void 0:e._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function TF(n,t,e){const i=new xr;return n.asyncQueue.enqueue((0,ie.Z)(function*(){try{yield G_(n,e),yield LI(n,t),i.resolve()}catch(r){const s=r;if(!uF(s))throw s;Oo("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function EF(n){if(n._initialized||n._terminated)throw new Ve(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class F1{constructor(t){this._byteString=t}static fromBase64String(t){try{return new F1(Ar.fromBase64String(t))}catch(e){throw new Ve(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new F1(Ar.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class gc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ve(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ui(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class kh{constructor(t){this._methodName=t}}class Y_{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ve(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ve(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ut(this._lat,t._lat)||Ut(this._long,t._long)}}const Lce=/^__.*__$/;class Oce{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new hc(t,this.data,this.fieldMask,e,this.fieldTransforms):new G2(t,this.data,e,this.fieldTransforms)}}class IF{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new hc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function SF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class J_{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new J_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.fa(t),r}da(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.ua(),r}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return e9(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(SF(this.ca)&&Lce.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class Pce{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||i4(t)}ya(t,e,i,r=!1){return new J_({ca:t,methodName:e,ga:i,path:Ui.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rh(n){const t=n._freezeSettings(),e=i4(n._databaseId);return new Pce(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Q_(n,t,e,i,r,s={}){const c=n.ya(s.merge||s.mergeFields?2:0,t,e,r);KI("Data must be an object, but it was:",c,i);const d=kF(i,c);let g,w;if(s.merge)g=new ms(c.fieldMask),w=c.fieldTransforms;else if(s.mergeFields){const y=[];for(const A of s.mergeFields){const I=u4(t,A,e);if(!c.contains(I))throw new Ve(pe.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);VF(y,I)||y.push(I)}g=new ms(y),w=c.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,w=c.fieldTransforms;return new Oce(new u0(d),g,w)}class c4 extends kh{_toFieldTransform(t){if(2!==t.ca)throw t._a(1===t.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof c4}}function zF(n,t,e){return new J_({ca:3,ga:t.settings.ga,methodName:n._methodName,la:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $I extends kh{_toFieldTransform(t){return new B3(t.path,new Z2)}isEqual(t){return t instanceof $I}}class Hce extends kh{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=zF(this,t,!0),i=this.pa.map(s=>Vh(s,e)),r=new xh(i);return new B3(t.path,r)}isEqual(t){return this===t}}class Fce extends kh{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=zF(this,t,!0),i=this.pa.map(s=>Vh(s,e)),r=new Ah(i);return new B3(t.path,r)}isEqual(t){return this===t}}class Bce extends kh{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new j2(t.serializer,xP(t.serializer,this.Ia));return new B3(t.path,e)}isEqual(t){return this===t}}function qI(n,t,e,i){const r=n.ya(1,t,e);KI("Data must be an object, but it was:",r,i);const s=[],c=u0.empty();O5(i,(g,w)=>{const y=X_(t,g,e);w=(0,H.m9)(w);const A=r.da(y);if(w instanceof c4)s.push(y);else{const I=Vh(w,A);null!=I&&(s.push(y),c.set(y,I))}});const d=new ms(s);return new IF(c,d,r.fieldTransforms)}function WI(n,t,e,i,r,s){const c=n.ya(1,t,e),d=[u4(t,i,e)],g=[r];if(s.length%2!=0)throw new Ve(pe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)d.push(u4(t,s[I])),g.push(s[I+1]);const w=[],y=u0.empty();for(let I=d.length-1;I>=0;--I)if(!VF(w,d[I])){const N=d[I];let Z=g[I];Z=(0,H.m9)(Z);const J=c.da(N);if(Z instanceof c4)w.push(N);else{const te=Vh(Z,J);null!=te&&(w.push(N),y.set(N,te))}}const A=new ms(w);return new IF(y,A,c.fieldTransforms)}function NF(n,t,e,i=!1){return Vh(e,n.ya(i?4:3,t))}function Vh(n,t){if(RF(n=(0,H.m9)(n)))return KI("Unsupported field value:",t,n),kF(n,t);if(n instanceof kh)return function(e,i){if(!SF(i.ca))throw i._a(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Vh(c,i.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,H.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xP(i.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Di.fromDate(e);return{timestampValue:q2(i.serializer,r)}}if(e instanceof Di){const r=new Di(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:q2(i.serializer,r)}}if(e instanceof Y_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof F1)return{bytesValue:GP(i.serializer,e._byteString)};if(e instanceof mi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:hE(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i._a(`Unsupported field value: ${W_(e)}`)}(n,t)}function kF(n,t){const e={};return qO(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):O5(n,(i,r)=>{const s=Vh(r,t.ha(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function RF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Di||n instanceof Y_||n instanceof F1||n instanceof mi||n instanceof kh)}function KI(n,t,e){if(!RF(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=W_(e);throw t._a("an object"===i?n+" a custom object":n+" "+i)}var i}function u4(n,t,e){if((t=(0,H.m9)(t))instanceof gc)return t._internalPath;if("string"==typeof t)return X_(n,t);throw e9("Field path arguments must be of type string or ",n,!1,void 0,e)}const Uce=new RegExp("[~\\*/\\[\\]]");function X_(n,t,e){if(t.search(Uce)>=0)throw e9(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new gc(...t.split("."))._internalPath}catch{throw e9(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function e9(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(s||c)&&(g+=" (found",s&&(g+=` in field ${i}`),c&&(g+=` in document ${r}`),g+=")"),new Ve(pe.INVALID_ARGUMENT,d+n+g)}function VF(n,t){return n.some(e=>e.isEqual(t))}class h4{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Zce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(t9("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Zce extends h4{data(){return super.data()}}function t9(n,t){return"string"==typeof t?X_(n,t):t instanceof gc?t._internalPath:t._delegate._internalPath}function LF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YI{}class d4 extends YI{}function Y5(n,t,...e){let i=[];t instanceof YI&&i.push(t),i=i.concat(e),function(r){const s=r.filter(d=>d instanceof uf).length,c=r.filter(d=>d instanceof f4).length;if(s>1||s>0&&c>0)throw new Ve(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class f4 extends d4{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new f4(t,e,i)}_apply(t){const e=this._parse(t);return FF(t._query,e),new h0(t.firestore,t.converter,tE(t._query,e))}_parse(t){const e=Rh(t.firestore);return function(r,s,c,d,g,w,y){let A;if(g.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ve(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){HF(y,w);const I=[];for(const N of y)I.push(PF(d,r,N));A={arrayValue:{values:I}}}else A=PF(d,r,y)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||HF(y,w),A=NF(c,"where",y,"in"===w||"not-in"===w);return pn.create(g,w,A)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class uf extends YI{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new uf(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:Bn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let s=i;const c=r.getFlattenedFilters();for(const d of c)FF(s,d),s=tE(s,d)}(t._query,e),new h0(t.firestore,t.converter,tE(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class JI extends d4{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new JI(t,e)}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ve(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ve(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new F2(r,s);return function(d,g){if(null===XT(d)){const w=__(d);null!==w&&BF(0,w,g.field)}}(i,c),c}(t._query,this._field,this._direction);return new h0(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new cc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class n9 extends d4{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new n9(t,e,i)}_apply(t){return new h0(t.firestore,t.converter,b_(t._query,this._limit,this._limitType))}}class i9 extends d4{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new i9(t,e,i)}_apply(t){const e=OF(t,this.type,this._docOrFields,this._inclusive);return new h0(t.firestore,t.converter,(r=e,new cc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class r9 extends d4{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new r9(t,e,i)}_apply(t){const e=OF(t,this.type,this._docOrFields,this._inclusive);return new h0(t.firestore,t.converter,(r=e,new cc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function OF(n,t,e,i){if(e[0]=(0,H.m9)(e[0]),e[0]instanceof h4)return function(r,s,c,d,g){if(!d)throw new Ve(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const y of Mh(r))if(y.field.isKeyField())w.push(yh(s,d.key));else{const A=d.data.field(y.field);if(d_(A))throw new Ve(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const I=y.field.canonicalString();throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}w.push(A)}return new Z5(w,g)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Rh(n.firestore);return function(s,c,d,g,w,y){const A=s.explicitOrderBy;if(w.length>A.length)throw new Ve(pe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let N=0;N<w.length;N++){const Z=w[N];if(A[N].field.isKeyField()){if("string"!=typeof Z)throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Z}`);if(!eE(s)&&-1!==Z.indexOf("/"))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Z}' contains a slash.`);const J=s.path.child(yn.fromString(Z));if(!st.isDocumentKey(J))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const te=new st(J);I.push(yh(c,te))}else{const J=NF(d,g,Z);I.push(J)}}return new Z5(I,y)}(n._query,n.firestore._databaseId,r,t,e,i)}}function PF(n,t,e){if("string"==typeof(e=(0,H.m9)(e))){if(""===e)throw new Ve(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eE(t)&&-1!==e.indexOf("/"))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(yn.fromString(e));if(!st.isDocumentKey(i))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return yh(n,new st(i))}if(e instanceof mi)return yh(n,e._key);throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${W_(e)}.`)}function HF(n,t){if(!Array.isArray(n)||0===n.length)throw new Ve(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FF(n,t){if(t.isInequality()){const i=__(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=XT(n);null!==s&&BF(0,r,s)}const e=function(i,r){for(const s of i)for(const c of s.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Ve(pe.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function BF(n,t,e){if(!e.isEqual(t))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class QI{convertValue(t,e="none"){switch(B5(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw vt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return O5(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Y_(Zi(t.latitude),Zi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=f_(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(N3(t));default:return null}}convertTimestamp(t){const e=P5(t);return new Di(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=yn.fromString(t);xt(tH(i));const r=new H5(i.get(1),i.get(3)),s=new st(i.popFirst(5));return r.isEqual(e)||er(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function s9(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class Qce extends QI{constructor(t){super(),this.firestore=t}convertBytes(t){return new F1(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new mi(this.firestore,null,e)}}class Lh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pc extends h4{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new g4(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(t9("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class g4 extends pc{data(t={}){return super.data(t)}}class J5{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Lh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new g4(this._firestore,this._userDataWriter,i.key,i,new Lh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ve(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new g4(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new g4(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,w=-1;return 0!==c.type&&(g=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),w=s.indexOf(c.doc.key)),{type:e5e(c.type),doc:d,oldIndex:g,newIndex:w}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function e5e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function ZF(n,t){return n instanceof pc&&t instanceof pc?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof J5&&t instanceof J5&&n._firestore===t._firestore&&jI(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class Q5 extends QI{constructor(t){super(),this.firestore=t}convertBytes(t){return new F1(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new mi(this.firestore,null,e)}}function jF(n,t,e){n=vn(n,mi);const i=vn(n.firestore,wi),r=s9(n.converter,t,e);return hf(i,[Q_(Rh(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Ti.none())])}function GF(n,t,e,...i){n=vn(n,mi);const r=vn(n.firestore,wi),s=Rh(r);let c;return c="string"==typeof(t=(0,H.m9)(t))||t instanceof gc?WI(s,"updateDoc",n._key,t,e,i):qI(s,"updateDoc",n._key,t),hf(r,[c.toMutation(n._key,Ti.exists(!0))])}function $F(n,...t){var e,i,r;n=(0,H.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||GI(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(GI(t[c])){const A=t[c];t[c]=null===(e=A.next)||void 0===e?void 0:e.bind(A),t[c+1]=null===(i=A.error)||void 0===i?void 0:i.bind(A),t[c+2]=null===(r=A.complete)||void 0===r?void 0:r.bind(A)}let g,w,y;if(n instanceof mi)w=vn(n.firestore,wi),y=U2(n._key.path),g={next:A=>{t[c]&&t[c](XI(w,n,A))},error:t[c+1],complete:t[c+2]};else{const A=vn(n,h0);w=vn(A.firestore,wi),y=A._query;const I=new Q5(w);g={next:N=>{t[c]&&t[c](new J5(w,I,A,N))},error:t[c+1],complete:t[c+2]},LF(n._query)}return function(A,I,N,Z){const J=new j_(Z),te=new lI(I,J,N);return A.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return iI(yield cf(A),te)})),()=>{J.Dc(),A.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return sI(yield cf(A),te)}))}}(nr(w),y,d,g)}function hf(n,t){return function(e,i){const r=new xr;return e.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function Wle(n,t,e){return fI.apply(this,arguments)}(yield BI(e),i,r)})),r.promise}(nr(n),t)}function XI(n,t,e){const i=e.docs.get(t._key),r=new Q5(n);return new pc(n,r,t._key,i,new Lh(e.hasPendingWrites,e.fromCache),t.converter)}const w5e={maxAttempts:5};class qF{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Rh(t)}set(t,e,i){this._verifyNotCommitted();const r=X5(t,this._firestore),s=s9(r.converter,e,i),c=Q_(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Ti.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=X5(t,this._firestore);let c;return c="string"==typeof(e=(0,H.m9)(e))||e instanceof gc?WI(this._dataReader,"WriteBatch.update",s._key,e,i,r):qI(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Ti.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=X5(t,this._firestore);return this._mutations=this._mutations.concat(new $2(e._key,Ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function X5(n,t){if((n=(0,H.m9)(n)).firestore!==t)throw new Ve(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class _5e extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Rh(t)}get(t){const e=X5(t,this._firestore),i=new Qce(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return vt();const s=r[0];if(s.isFoundDocument())return new h4(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new h4(this._firestore,i,e._key,null,e.converter);throw vt()})}set(t,e,i){const r=X5(t,this._firestore),s=s9(r.converter,e,i),c=Q_(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=X5(t,this._firestore);let c;return c="string"==typeof(e=(0,H.m9)(e))||e instanceof gc?WI(this._dataReader,"Transaction.update",s._key,e,i,r):qI(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=X5(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=X5(t,this._firestore),i=new Q5(this._firestore);return super.get(t).then(r=>new pc(this._firestore,i,e._key,r._document,new Lh(!1,!1),e.converter))}}function eS(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function KF(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function YF(){if(!function e1e(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){L2=Z0.SDK_VERSION,(0,Z0._registerComponent)(new Ua.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new wi(new xae(e.getProvider("auth-internal")),new Tae(e.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new H5(d.options.projectId,g)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,Z0.registerVersion)(IO,"3.12.0",n),(0,Z0.registerVersion)(IO,"3.12.0","esm2017")}();class p4{constructor(t){this._delegate=t}static fromBase64String(t){return YF(),new p4(F1.fromBase64String(t))}static fromUint8Array(t){return KF(),new p4(F1.fromUint8Array(t))}toBase64(){return YF(),this._delegate.toBase64()}toUint8Array(){return KF(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tS(n){return function E5e(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class I5e{enableIndexedDbPersistence(t,e){return function Tce(n,t){EF(n=vn(n,wi));const e=nr(n);if(e._uninitializedComponentsProvider)throw new Ve(pe.FAILED_PRECONDITION,"SDK cache is already specified.");Oo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new lf;return TF(e,r,new RI(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Ece(n){EF(n=vn(n,wi));const t=nr(n);if(t._uninitializedComponentsProvider)throw new Ve(pe.FAILED_PRECONDITION,"SDK cache is already specified.");Oo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new lf;return TF(t,i,new lF(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function Ice(n){if(n._initialized&&!n._terminated)throw new Ve(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{yield(e=(0,ie.Z)(function*(i){if(!Ga.D())return Promise.resolve();const r=i+"main";yield Ga.delete(r)}),function(i){return e.apply(this,arguments)})(DE(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class JF{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof H5||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Oo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function MF(n,t,e,i={}){var r;const s=(n=vn(n,a4))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Oo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Gr.MOCK_USER;else{c=(0,H.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new Ve(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Gr(g)}n._authCredentials=new Mae(new SO(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function zce(n){return function pce(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const t=yield hF(n),e=yield dF(n);return t.setNetworkEnabled(!0),function(i){const r=ot(i);return r.vu.delete(0),r4(r)}(e)}))}(nr(n=vn(n,wi)))}(this._delegate)}disableNetwork(){return function Nce(n){return function vce(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const t=yield hF(n),e=yield dF(n);return t.setNetworkEnabled(!1),(i=(0,ie.Z)(function*(r){const s=ot(r);s.vu.add(0),yield X2(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(nr(n=vn(n,wi)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,wF("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Sce(n){return function(t){const e=new xr;return t.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function Qle(n,t){return wI.apply(this,arguments)}(yield BI(t),e)})),e.promise}(nr(n=vn(n,wi)))}(this._delegate)}onSnapshotsInSync(t){return function c5e(n,t){return function _ce(n,t){const e=new j_(t);return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return i=yield cf(n),r=e,ot(i).ku.add(r),void r.next();var i,r})),()=>{e.Dc(),n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return i=yield cf(n),r=e,void ot(i).ku.delete(r);var i,r}))}}(nr(n=vn(n,wi)),GI(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new df(this,xF(this._delegate,t))}catch(e){throw $0(e,"collection()","Firestore.collection()")}}doc(t){try{return new Po(this,K_(this._delegate,t))}catch(e){throw $0(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new q0(this,function Mce(n,t){if(n=vn(n,a4),ZI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ve(pe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new h0(n,null,(e=t,new cc(yn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw $0(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function b5e(n,t,e){n=vn(n,wi);const i=Object.assign(Object.assign({},w5e),e);return function(r){if(r.maxAttempts<1)throw new Ve(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const d=new xr;return r.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){const g=yield function fF(n){return $_(n).then(t=>t.datastore)}(r);new fce(r.asyncQueue,g,c,s,d).run()})),d.promise}(nr(n),r=>t(new _5e(n,r)),i)}(this._delegate,e=>t(new QF(this,e)))}batch(){return nr(this._delegate),new XF(new qF(this._delegate,t=>hf(this._delegate,t)))}loadBundle(t){return function kce(n,t){const e=nr(n=vn(n,wi)),i=new Ace;return function bce(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?OP().encode(s):s,g=function(g,w){if(g instanceof Uint8Array)return cF(g,w);if(g instanceof ArrayBuffer)return cF(new Uint8Array(g),w);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new hce(g,c);var g}(e,i4(t));n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){!function cce(n,t,e){const i=ot(n);var r;(r=(0,ie.Z)(function*(s,c,d){try{const g=yield c.getMetadata();if(yield function(I,N){const Z=ot(I),J=tr(N.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",te=>Z.qs.getBundleMetadata(te,N.id)).then(te=>!!te&&te.createTime.compareTo(J)>=0)}(s.localStore,g))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(I=g).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);d._updateProgress(XH(g));const w=new Ule(g,s.localStore,c.serializer);let y=yield c.bc();for(;y;){const I=yield w.zu(y);I&&d._updateProgress(I),y=yield c.bc()}const A=yield w.complete();return yield fc(s,A.Ju,void 0),yield function(I,N){const Z=ot(I);return Z.persistence.runTransaction("Save bundle","readwrite",J=>Z.qs.saveBundleMetadata(J,N))}(s.localStore,g),d._completeWith(A.progress),Promise.resolve(A.Hu)}catch(g){return Oo("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var I}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield BI(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function Rce(n,t){return function yce(n,t){return n.asyncQueue.enqueue((0,ie.Z)(function*(){return function(e,i){const r=ot(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield q_(n),t)}))}(nr(n=vn(n,wi)),t).then(e=>e?new h0(n,null,e.query):null)}(this._delegate,t).then(e=>e?new q0(this,e):null)}}class o9 extends QI{constructor(t){super(),this.firestore=t}convertBytes(t){return new p4(new F1(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Po.forKey(e,this.firestore,null)}}class QF{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new o9(t)}get(t){const e=Ph(t);return this._delegate.get(e).then(i=>new v4(this._firestore,new pc(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Ph(t);return i?(eS("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Ph(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Ph(t);return this._delegate.delete(e),this}}class XF{constructor(t){this._delegate=t}set(t,e,i){const r=Ph(t);return i?(eS("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Ph(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Ph(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Oh{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new g4(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new m4(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Oh.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Oh(t,new o9(t),e),r.set(e,s)),s}}Oh.INSTANCES=new WeakMap;class Po{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new o9(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Po(e,new mi(e._delegate,i,new st(t)))}static forKey(t,e,i){return new Po(e,new mi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new df(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new df(this.firestore,xF(this._delegate,t))}catch(e){throw $0(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,H.m9)(t))instanceof mi&&AF(this._delegate,t)}set(t,e){e=eS("DocumentReference.set",e);try{return e?jF(this._delegate,t,e):jF(this._delegate,t)}catch(i){throw $0(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?GF(this._delegate,t):GF(this._delegate,t,e,...i)}catch(r){throw $0(r,"updateDoc()","DocumentReference.update()")}}delete(){return function a5e(n){return hf(vn(n.firestore,wi),[new $2(n._key,Ti.none())])}(this._delegate)}onSnapshot(...t){const e=eB(t),i=tB(t,r=>new v4(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return $F(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function n5e(n){n=vn(n,mi);const t=vn(n.firestore,wi),e=nr(t),i=new Q5(t);return function mce(n,t){const e=new xr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(i=(0,ie.Z)(function*(r,s,c){try{const d=yield function(g,w){const y=ot(g);return y.persistence.runTransaction("read document","readonly",A=>y.localDocuments.getDocument(A,w))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ve(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=nf(d,`Failed to get document '${s} from cache`);c.reject(g)}}),function(r,s,c){return i.apply(this,arguments)})(yield q_(n),t,e);var i})),e.promise}(e,n._key).then(r=>new pc(t,i,n._key,r,new Lh(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function i5e(n){n=vn(n,mi);const t=vn(n.firestore,wi);return gF(nr(t),n._key,{source:"server"}).then(e=>XI(t,n,e))}(this._delegate):function t5e(n){n=vn(n,mi);const t=vn(n.firestore,wi);return gF(nr(t),n._key).then(e=>XI(t,n,e))}(this._delegate),e.then(i=>new v4(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Po(this.firestore,this._delegate.withConverter(t?Oh.getInstance(this.firestore,t):null))}}function $0(n,t,e){return n.message=n.message.replace(t,e),n}function eB(n){for(const t of n)if("object"==typeof t&&!tS(t))return t;return{}}function tB(n,t){var e,i;let r;return r=tS(n[0])?n[0]:tS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class v4{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Po(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return ZF(this._delegate,t._delegate)}}class m4 extends v4{data(t){const e=this._delegate.data(t);return function yae(n,t){n||vt()}(void 0!==e),e}}class q0{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new o9(t)}where(t,e,i){try{return new q0(this.firestore,Y5(this._delegate,function jce(n,t,e){const i=t,r=t9("where",n);return f4._create(r,i,e)}(t,e,i)))}catch(r){throw $0(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new q0(this.firestore,Y5(this._delegate,function Gce(n,t="asc"){const e=t,i=t9("orderBy",n);return JI._create(i,e)}(t,e)))}catch(i){throw $0(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new q0(this.firestore,Y5(this._delegate,function $ce(n){return yF("limit",n),n9._create("limit",n,"F")}(t)))}catch(e){throw $0(e,"limit()","Query.limit()")}}limitToLast(t){try{return new q0(this.firestore,Y5(this._delegate,function qce(n){return yF("limitToLast",n),n9._create("limitToLast",n,"L")}(t)))}catch(e){throw $0(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new q0(this.firestore,Y5(this._delegate,function Wce(...n){return i9._create("startAt",n,!0)}(...t)))}catch(e){throw $0(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new q0(this.firestore,Y5(this._delegate,function Kce(...n){return i9._create("startAfter",n,!1)}(...t)))}catch(e){throw $0(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new q0(this.firestore,Y5(this._delegate,function Yce(...n){return r9._create("endBefore",n,!1)}(...t)))}catch(e){throw $0(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new q0(this.firestore,Y5(this._delegate,function Jce(...n){return r9._create("endAt",n,!0)}(...t)))}catch(e){throw $0(e,"endAt()","Query.endAt()")}}isEqual(t){return jI(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function s5e(n){n=vn(n,h0);const t=vn(n.firestore,wi),e=nr(t),i=new Q5(t);return function wce(n,t){const e=new xr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(i=(0,ie.Z)(function*(r,s,c){try{const d=yield O_(r,s,!0),g=new nF(s,d.ir),w=g.sc(d.documents),y=g.applyChanges(w,!1);c.resolve(y.snapshot)}catch(d){const g=nf(d,`Failed to execute query '${s} against cache`);c.reject(g)}}),function(r,s,c){return i.apply(this,arguments)})(yield q_(n),t,e);var i})),e.promise}(e,n._query).then(r=>new J5(t,i,n,r))}(this._delegate):"server"===t?.source?function o5e(n){n=vn(n,h0);const t=vn(n.firestore,wi),e=nr(t),i=new Q5(t);return pF(e,n._query,{source:"server"}).then(r=>new J5(t,i,n,r))}(this._delegate):function r5e(n){n=vn(n,h0);const t=vn(n.firestore,wi),e=nr(t),i=new Q5(t);return LF(n._query),pF(e,n._query).then(r=>new J5(t,i,n,r))}(this._delegate),e.then(i=>new nS(this.firestore,new J5(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=eB(t),i=tB(t,r=>new nS(this.firestore,new J5(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return $F(this._delegate,e,i)}withConverter(t){return new q0(this.firestore,this._delegate.withConverter(t?Oh.getInstance(this.firestore,t):null))}}class z5e{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new m4(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nS{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new q0(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new m4(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new z5e(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new m4(this._firestore,i))})}isEqual(t){return ZF(this._delegate,t._delegate)}}class df extends q0{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Po(this.firestore,t):null}doc(t){try{return new Po(this.firestore,void 0===t?K_(this._delegate):K_(this._delegate,t))}catch(e){throw $0(e,"doc()","CollectionReference.doc()")}}add(t){return function l5e(n,t){const e=vn(n.firestore,wi),i=K_(n),r=s9(n.converter,t);return hf(e,[Q_(Rh(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ti.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Po(this.firestore,e))}isEqual(t){return AF(this._delegate,t._delegate)}withConverter(t){return new df(this.firestore,this._delegate.withConverter(t?Oh.getInstance(this.firestore,t):null))}}function Ph(n){return vn(n,mi)}class iS{constructor(...t){this._delegate=new gc(...t)}static documentId(){return new iS(Ui.keyField().canonicalString())}isEqual(t){return(t=(0,H.m9)(t))instanceof gc&&this._delegate._internalPath.isEqual(t._internalPath)}}class Hh{constructor(t){this._delegate=t}static serverTimestamp(){const t=function C5e(){return new $I("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Hh(t)}static delete(){const t=function y5e(){return new c4("deleteField")}();return t._methodName="FieldValue.delete",new Hh(t)}static arrayUnion(...t){const e=function M5e(...n){return new Hce("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Hh(e)}static arrayRemove(...t){const e=function x5e(...n){return new Fce("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Hh(e)}static increment(t){const e=function A5e(n){return new Bce("increment",n)}(t);return e._methodName="FieldValue.increment",new Hh(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const N5e={Firestore:JF,GeoPoint:Y_,Timestamp:Di,Blob:p4,Transaction:QF,WriteBatch:XF,DocumentReference:Po,DocumentSnapshot:v4,Query:q0,QueryDocumentSnapshot:m4,QuerySnapshot:nS,CollectionReference:df,FieldPath:iS,FieldValue:Hh,setLogLevel:function S5e(n){!function bae(n){R5.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function R5e(n){(function k5e(n,t){n.INTERNAL.registerComponent(new Ua.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},N5e)))})(n,(t,e)=>new JF(t,e,new I5e)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(KD.Z);var a9=F(6451),l9=F(5363),V5e=F(6063);class L5e extends Fi.x{constructor(t=1/0,e=1/0,i=V5e.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let g=1;g<i.length&&i[g]<=c;g+=2)d=g;d&&i.splice(0,d+1)}}}var rS=F(3099);function nB(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,rS.B)({connector:()=>new L5e(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function iB(n,t){return(0,Zs.m)(t)?Ri(()=>n,t):Ri(()=>n)}var sS=F(9468);F(259);const aS=new Map,sB={activated:!1,tokenObservers:[]},B5e={initialized:!1,enabled:!1};function ji(n){return aS.get(n)||Object.assign({},sB)}function u9(){return B5e}class q5e{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ie.Z)(function*(){e.stop();try{e.pending=new H.BH,yield function W5e(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new H.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const d0=new H.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function cS(n){if(!ji(n).activated)throw d0.create("use-before-activation",{appName:n.name})}function f9(n,t){return hS.apply(this,arguments)}function hS(){return hS=(0,ie.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const A=yield r.getHeartbeatsHeader();A&&(i["X-Firebase-Client"]=A)}const s={method:"POST",body:JSON.stringify(t),headers:i};let c,d;try{c=yield fetch(n,s)}catch(A){throw d0.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==c.status)throw d0.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(A){throw d0.create("fetch-parse-error",{originalErrorMessage:A?.message})}const g=d.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw d0.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const w=1e3*Number(g[1]),y=Date.now();return{token:d.token,expireTimeMillis:y+w,issuedAtTimeMillis:y}}),hS.apply(this,arguments)}function aB(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const w4="firebase-app-check-store";let g9=null;function cB(){return g9||(g9=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(d0.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(w4,{keyPath:"compositeKey"})}}catch(e){t(d0.create("storage-open",{originalErrorMessage:e?.message}))}}),g9)}function dS(){return dS=(0,ie.Z)(function*(n,t){const i=(yield cB()).transaction(w4,"readwrite"),s=i.objectStore(w4).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=g=>{c()},i.onerror=g=>{var w;d(d0.create("storage-set",{originalErrorMessage:null===(w=g.target.error)||void 0===w?void 0:w.message}))}})}),dS.apply(this,arguments)}const _4=new Ba.Yd("@firebase/app-check");function pS(n,t){return(0,H.hl)()?function tue(n,t){return function uB(n,t){return dS.apply(this,arguments)}(function dB(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{_4.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function mS(){return u9().enabled}function wS(){return _S.apply(this,arguments)}function _S(){return _S=(0,ie.Z)(function*(){const n=u9();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),_S.apply(this,arguments)}const aue={error:"UNKNOWN_ERROR"};function lue(n){return H.US.encodeString(JSON.stringify(n),!1)}function p9(n){return bS.apply(this,arguments)}function bS(){return bS=(0,ie.Z)(function*(n,t=!1){const e=n.app;cS(e);const i=ji(e);let s,r=i.token;if(r&&!ff(r)&&(i.token=void 0,r=void 0),!r){const g=yield i.cachedTokenPromise;g&&(ff(g)?r=g:yield pS(e,void 0))}if(!t&&r&&ff(r))return{token:r.token};let d,c=!1;if(mS()){i.exchangeTokenPromise||(i.exchangeTokenPromise=f9(aB(e,yield wS()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const g=yield i.exchangeTokenPromise;return yield pS(e,g),i.token=g,{token:g.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield ji(e).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?_4.warn(g.message):_4.error(g),s=g}return r?s?d=ff(r)?{token:r.token,internalError:s}:pB(s):(d={token:r.token},i.token=r,yield pS(e,r)):d=pB(s),c&&gB(e,d),d}),bS.apply(this,arguments)}function MS(n,t){const e=ji(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function fB(n){const{app:t}=n,e=ji(t);let i=e.tokenRefresher;i||(i=function uue(n){const{app:t}=n;return new q5e((0,ie.Z)(function*(){let i;if(i=ji(t).token?yield p9(n,!0):yield p9(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=ji(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function gB(n,t){const e=ji(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function ff(n){return n.expireTimeMillis-Date.now()>0}function pB(n){return{token:lue(aue),error:n}}class hue{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ji(this.app);for(const e of t)MS(this.app,e.next);return Promise.resolve()}}const MB="app-check-internal";!function Aue(){(0,Z0._registerComponent)(new Ua.wA("app-check",n=>function due(n,t){return new hue(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(MB).initialize()})),(0,Z0._registerComponent)(new Ua.wA(MB,n=>function fue(n){return{getToken:t=>p9(n,t),addTokenListener:t=>function CS(n,t,e,i){const{app:r}=n,s=ji(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&ff(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),fB(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>fB(n))}(n,"INTERNAL",t),removeTokenListener:t=>MS(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Z0.registerVersion)("@firebase/app-check","0.7.0")}();class b4{constructor(){return(0,Sn.vb)("app-check")}}typeof window<"u"&&window;var m9=F(9260);const ES=new o.OlP("angularfire2.auth.use-emulator"),IS=new o.OlP("angularfire2.auth.settings"),SS=new o.OlP("angularfire2.auth.tenant-id"),zS=new o.OlP("angularfire2.auth.langugage-code"),NS=new o.OlP("angularfire2.auth.use-device-language"),kS=new o.OlP("angularfire.auth.persistence"),RS=(n,t,e,i,r,s,c,d)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=t.runOutsideAngular(()=>n.auth());if(e&&g.useEmulator(...e),i&&(g.tenantId=i),g.languageCode=r,s&&g.useDeviceLanguage(),c)for(const[w,y]of Object.entries(c))g.settings[w]=y;return d&&g.setPersistence(d),g},[e,i,r,s,c,d]);let eu=(()=>{class n{constructor(e,i,r,s,c,d,g,w,y,A,I,N){const Z=new Fi.x,J=pt(void 0).pipe((0,l9.Q)(c.outsideAngular),Ri(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,ht.U)(()=>(0,Mr.on)(e,s,i)),(0,ht.U)(te=>RS(te,s,d,w,y,A,g,I)),nB({bufferSize:1,refCount:!1}));if(es(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{J.pipe(tc()).subscribe();const xe=J.pipe(Ri(Be=>Be.getRedirectResult().then(tt=>tt,()=>null)),Sn.iC,nB({bufferSize:1,refCount:!1})),ke=J.pipe(Ri(Be=>new Rn.y(tt=>({unsubscribe:s.runOutsideAngular(()=>Be.onAuthStateChanged(at=>tt.next(at),at=>tt.error(at),()=>tt.complete()))})))),He=J.pipe(Ri(Be=>new Rn.y(tt=>({unsubscribe:s.runOutsideAngular(()=>Be.onIdTokenChanged(at=>tt.next(at),at=>tt.error(at),()=>tt.complete()))}))));this.authState=xe.pipe(iB(ke),(0,sS.R)(c.outsideAngular),(0,l9.Q)(c.insideAngular)),this.user=xe.pipe(iB(He),(0,sS.R)(c.outsideAngular),(0,l9.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ri(Be=>Be?(0,gn.D)(Be.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Ri(Be=>Be?(0,gn.D)(Be.getIdTokenResult()):pt(null))),this.credential=(0,a9.T)(xe,Z,this.authState.pipe(Hn(Be=>!Be))).pipe((0,ht.U)(Be=>Be?.user?Be:null),(0,sS.R)(c.outsideAngular),(0,l9.Q)(c.insideAngular))}return(0,Mr.pX)(this,J,s,{spy:{apply:(te,xe,ke)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&ke.then(He=>Z.next(He))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Mr.Dh),o.LFG(Mr.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Sn.HU),o.LFG(ES,8),o.LFG(IS,8),o.LFG(SS,8),o.LFG(zS,8),o.LFG(NS,8),o.LFG(kS,8),o.LFG(b4,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zue=(()=>{class n{constructor(){m9.Z.registerVersion("angularfire",Sn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[eu]}),n})();function AB(n,t){return function Nue(n,t=o3.z){return new Rn.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function VS(n,t){return AB(n,t).pipe((0,ht.U)(e=>({payload:e,type:"query"})))}function w9(n,t){return VS(n,t).pipe(ch(void 0),WD(),(0,ht.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const g=r.find(y=>y.doc.ref.isEqual(c.ref)),w=e?.payload.docs.find(y=>y.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function DB(n,t,e){return w9(n,e).pipe(uh((i,r)=>function Rue(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function Vue(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return LS(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return LS(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return LS(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),a3(),(0,ht.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function LS(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function TB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class EB{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=w9(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ht.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(ch(void 0),WD(),Hn(([i,r])=>r.length>0||!i),(0,ht.U)(([i,r])=>r),Sn.iC)}auditTrail(t){return this.stateChanges(t).pipe(uh((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=TB(t);return DB(this.query,e,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(t={}){return VS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Sn.iC)}get(t){return(0,gn.D)(this.query.get(t)).pipe(Sn.iC)}add(t){return this.ref.add(t)}doc(t){return new IB(this.ref.doc(t),this.afs)}}class IB{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=NB(i,e);return new EB(r,s,this.afs)}snapshotChanges(){return function kue(n,t){return AB(n,t).pipe(ch(void 0),WD(),(0,ht.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,gn.D)(this.ref.get(t)).pipe(Sn.iC)}}class Lue{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?w9(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Hn(e=>e.length>0),Sn.iC):w9(this.query,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}auditTrail(t){return this.stateChanges(t).pipe(uh((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=TB(t);return DB(this.query,e,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(t={}){return VS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Sn.iC)}get(t){return(0,gn.D)(this.query.get(t)).pipe(Sn.iC)}}const SB=new o.OlP("angularfire2.enableFirestorePersistence"),zB=new o.OlP("angularfire2.firestore.persistenceSettings"),Oue=new o.OlP("angularfire2.firestore.settings"),Pue=new o.OlP("angularfire2.firestore.use-emulator");function NB(n,t=(e=>e)){return{query:t(n),ref:n}}let kB=(()=>{class n{constructor(e,i,r,s,c,d,g,w,y,A,I,N,Z,J,te,xe,ke){this.schedulers=g;const He=(0,Mr.on)(e,d,i),Be=y;A&&RS(He,d,I,Z,J,te,N,xe),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${He.name}.firestore`,"AngularFirestore",He.name,()=>{const tt=d.runOutsideAngular(()=>He.firestore());if(s&&tt.settings(s),Be&&tt.useEmulator(...Be),r&&!es(c)){const at=()=>{try{return(0,gn.D)(tt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ft){return typeof console<"u"&&console.warn(Ft),pt(!1)}};return[tt,d.runOutsideAngular(at)]}return[tt,pt(!1)]},[s,Be,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=NB(r,i),d=this.schedulers.ngZone.run(()=>s);return new EB(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new Lue(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new IB(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Mr.Dh),o.LFG(Mr.xv,8),o.LFG(SB,8),o.LFG(Oue,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Sn.HU),o.LFG(zB,8),o.LFG(Pue,8),o.LFG(eu,8),o.LFG(ES,8),o.LFG(IS,8),o.LFG(SS,8),o.LFG(zS,8),o.LFG(NS,8),o.LFG(kS,8),o.LFG(b4,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Hue=(()=>{class n{constructor(){m9.Z.registerVersion("angularfire",Sn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:SB,useValue:!0},{provide:zB,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[kB]}),n})();var _9=F(5032);function b9(...n){const t=(0,R0.jO)(n);return(0,Hi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let g=0;g<r;g++)(0,lr.Xf)(n[g]).subscribe((0,In.x)(i,w=>{s[g]=w,!d&&!c[g]&&(c[g]=!0,(d=c.every(y2.y))&&(c=null))},_9.Z));e.subscribe((0,In.x)(i,g=>{if(d){const w=[g,...s];i.next(t?t(...w):w)}}))})}const RB="@firebase/database";let OS="";function LB(n){OS=n}class Bue{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,H.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,H.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Uue{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,H.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const OB=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Bue(t)}}catch{}return new Uue},Fh=OB("localStorage"),PS=OB("sessionStorage"),gf=new Ba.Yd("@firebase/database"),PB=function(){let n=1;return function(){return n++}}(),HB=function(n){const t=(0,H.dS)(n),e=new H.gQ;e.update(t);const i=e.digest();return H.US.encodeByteArray(i)},y4=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=y4.apply(null,i):t+="object"==typeof i?(0,H.Wl)(i):i,t+=" "}return t};let Bh=null,FB=!0;const BB=function(n,t){(0,H.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(gf.logLevel=Ba.in.VERBOSE,Bh=gf.log.bind(gf),t&&PS.set("logging_enabled",!0)):"function"==typeof n?Bh=n:(Bh=null,PS.remove("logging_enabled"))},Wr=function(...n){if(!0===FB&&(FB=!1,null===Bh&&!0===PS.get("logging_enabled")&&BB(!0)),Bh){const t=y4.apply(null,n);Bh(t)}},C4=function(n){return function(...t){Wr(n,...t)}},HS=function(...n){const t="FIREBASE INTERNAL ERROR: "+y4(...n);gf.error(t)},B1=function(...n){const t=`FIREBASE FATAL ERROR: ${y4(...n)}`;throw gf.error(t),new Error(t)},D0=function(...n){const t="FIREBASE WARNING: "+y4(...n);gf.warn(t)},y9=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},tu="[MIN_NAME]",vc="[MAX_NAME]",Uh=function(n,t){if(n===t)return 0;if(n===tu||t===vc)return-1;if(t===tu||n===vc)return 1;{const e=jB(n),i=jB(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Gue=function(n,t){return n===t?0:n<t?-1:1},M4=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,H.Wl)(t))},FS=function(n){if("object"!=typeof n||null===n)return(0,H.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,H.Wl)(t[i]),e+=":",e+=FS(n[t[i]]);return e+="}",e},UB=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Kr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const ZB=function(n){(0,H.hu)(!y9(n),"Invalid JSON number");const i=1023;let r,s,c,d,g;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(g=52;g;g-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)w.push(s%2?1:0),s=Math.floor(s/2);w.push(r?1:0),w.reverse();const y=w.join("");let A="";for(g=0;g<64;g+=8){let I=parseInt(y.substr(g,8),2).toString(16);1===I.length&&(I="0"+I),A+=I}return A.toLowerCase()},Kue=new RegExp("^-?(0*)\\d{1,10}$"),jB=function(n){if(Kue.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},pf=function(n){try{n()}catch(t){setTimeout(()=>{throw D0("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},x4=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Xue{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){D0(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ehe{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Wr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',D0(t)}}let A4=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QB="websocket",XB="long_polling";class US{constructor(t,e,i,r,s=!1,c="",d=!1,g=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fh.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Fh.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function eU(n,t,e){let i;if((0,H.hu)("string"==typeof t,"typeof type must == string"),(0,H.hu)("object"==typeof e,"typeof params must == object"),t===QB)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==XB)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function the(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Kr(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class nhe{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,H.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,H.p$)(this.counters_)}}const ZS={},jS={};function GS(n){const t=n.toString();return ZS[t]||(ZS[t]=new nhe),ZS[t]}class rhe{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&pf(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class nu{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C4(t),this.stats_=GS(e),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),eU(e,XB,g))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new rhe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,H.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $S((...s)=>{const[c,d,g,w,y]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&KB.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nu.forceAllow_=!0}static forceDisallow(){nu.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!nu.forceAllow_&&(nu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,H.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,H.h$)(e),r=UB(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,H.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class $S{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=PB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=$S.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Wr("frame writing exception"),d.stack&&Wr(d.stack),Wr(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Wr("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,H.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Wr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let M9=null;typeof MozWebSocket<"u"?M9=MozWebSocket:typeof WebSocket<"u"&&(M9=WebSocket);let vf=(()=>{class n{constructor(e,i,r,s,c,d,g){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C4(this.connId),this.stats_=GS(i),this.connURL=n.connectionURL_(i,d,g,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,H.Yr)()&&typeof location<"u"&&location.hostname&&KB.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),eU(e,QB,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fh.set("previous_websocket_failure",!0);try{let r;if((0,H.Yr)()){r={headers:{"User-Agent":`Firebase/5/${OS}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new M9(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==M9&&!n.forceDisallow_}static previouslyFailed(){return Fh.isInMemoryStorage||!0===Fh.get("previous_websocket_failure")}markConnectionHealthy(){Fh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,H.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,H.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=UB(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),aU=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nu,vf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=vf&&vf.isAvailable();let r=i&&!vf.previouslyFailed();if(e.webSocketOnly&&(i||D0("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[vf];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class gU{constructor(t,e,i,r,s,c,d,g,w,y){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=g,this.onKill_=w,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C4("c:"+this.id+":"),this.transportManager_=new aU(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=x4(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=M4("t",t),i=M4("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=M4("t",t),i=M4("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=M4("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?HS("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):HS("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&D0("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),x4(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):x4(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pU{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class vU{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,H.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,H.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class x9 extends vU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new x9}getInitialEvent(t){return(0,H.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Ln{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function zn(){return new Ln("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function iu(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Ln(n.pieces_,t)}function WS(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function D4(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function _U(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Ln(t,0)}function Ei(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Ln)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Ln(e,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function W0(n,t){const e=on(n),i=on(t);if(null===e)return t;if(e===i)return W0(Yn(n),Yn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Dhe(n,t){const e=D4(n,0),i=D4(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Uh(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function KS(n,t){if(iu(n)!==iu(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ho(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(iu(n)>iu(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class The{constructor(t,e){this.errorPrefix_=e,this.parts_=D4(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,H.ug)(this.parts_[i]);bU(this)}}function bU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Zh(n))}function Zh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class YS extends vU{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new YS}getInitialEvent(t){return(0,H.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const T4=1e3;let D9,jh=(()=>{class n extends pU{constructor(e,i,r,s,c,d,g,w){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=C4("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=T4,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");YS.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&x9.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,H.Wl)(c)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new H.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const g=d.d;"ok"===d.s?i.resolve(g):i.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,g=>{const w=g.d,y=g.s;n.warnOnListenWarnings_(w,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",g),"ok"!==y&&this.removeListen_(r,s),e.onComplete&&e.onComplete(y,w))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,H.r3)(e,"w")){const r=(0,H.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();D0(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,H.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,H.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,H.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):HS("Unrecognized action received from server: "+(0,H.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=T4,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=T4,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=T4),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,ie.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let g=!1,w=null;const y=function(){w?w.close():(g=!0,s())};e.realtime_={close:y,sendRequest:function(N){(0,H.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(N)}};const I=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[N,Z]=yield Promise.all([e.authTokenProvider_.getToken(I),e.appCheckTokenProvider_.getToken(I)]);g?Wr("getToken() completed but was canceled"):(Wr("getToken() completed. Creating connection."),e.authToken_=N&&N.accessToken,e.appCheckToken_=Z&&Z.token,w=new gU(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,J=>{D0(J+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(N){e.log_("Failed to get token: "+N),g||(e.repoInfo_.nodeAdmin&&D0(N),y())}}})()}interrupt(e){Wr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=T4,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>FS(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Ln(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Wr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Wr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,H.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+OS.replace(/\./g,"-")]=1,(0,H.uI)()?e["framework.cordova"]=1:(0,H.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=x9.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new hn(t,e)}}class A9{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new hn(tu,t),r=new hn(tu,e);return 0!==this.compare(i,r)}minPost(){return hn.MIN}}class MU extends A9{static get __EMPTY_NODE(){return D9}static set __EMPTY_NODE(t){D9=t}compare(t,e){return Uh(t.name,e.name)}isDefinedOn(t){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return hn.MIN}maxPost(){return new hn(vc,D9)}makePost(t,e){return(0,H.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new hn(t,D9)}toString(){return".key"}}const U1=new MU;class T9{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let QS,$a=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??_s.EMPTY_NODE,this.right=c??_s.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _s.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return _s.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class _s{constructor(t,e=_s.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new _s(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,$a.BLACK,null,null))}remove(t){return new _s(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,$a.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new T9(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new T9(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new T9(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new T9(this.root_,null,this.comparator_,!0,t)}}function Vhe(n,t){return Uh(n.name,t.name)}function JS(n,t){return Uh(n,t)}_s.EMPTY_NODE=new class Rhe{copy(t,e,i,r,s){return this}insert(t,e,i){return new $a(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xU=function(n){return"number"==typeof n?"number:"+ZB(n):"string:"+n},AU=function(n){if(n.isLeafNode()){const t=n.val();(0,H.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,H.r3)(t,".sv"),"Priority must be a string or number.")}else(0,H.hu)(n===QS||n.isEmpty(),"priority of unexpected type.");(0,H.hu)(n===QS||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let DU,TU,EU,mf=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AU(this.priorityNode_)}static set __childrenNodeConstructor(e){DU=e}static get __childrenNodeConstructor(){return DU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return an(e)?this:".priority"===on(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=on(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,H.hu)(".priority"!==r||1===iu(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+xU(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?ZB(this.value_):this.value_,this.lazyHash_=HB(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,H.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,H.hu)(s>=0,"Unknown leaf type: "+i),(0,H.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const si=new class Hhe extends A9{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Uh(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(vc,new mf("[PRIORITY-POST]",EU))}makePost(t,e){const i=TU(t);return new hn(e,new mf("[PRIORITY-POST]",i))}toString(){return".priority"}},Fhe=Math.log(2);class Bhe{constructor(t){this.count=parseInt(Math.log(t+1)/Fhe,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const E9=function(n,t,e,i){n.sort(t);const r=function(g,w){const y=w-g;let A,I;if(0===y)return null;if(1===y)return A=n[g],I=e?e(A):A,new $a(I,A.node,$a.BLACK,null,null);{const N=parseInt(y/2,10)+g,Z=r(g,N),J=r(N+1,w);return A=n[N],I=e?e(A):A,new $a(I,A.node,$a.BLACK,Z,J)}},d=function(g){let w=null,y=null,A=n.length;const I=function(Z,J){const te=A-Z,xe=A;A-=Z;const ke=r(te+1,xe),He=n[te],Be=e?e(He):He;N(new $a(Be,He.node,J,null,ke))},N=function(Z){w?(w.left=Z,w=Z):(y=Z,w=Z)};for(let Z=0;Z<g.count;++Z){const J=g.nextBitIsOne(),te=Math.pow(2,g.count-(Z+1));J?I(te,$a.BLACK):(I(te,$a.BLACK),I(te,$a.RED))}return y}(new Bhe(n.length));return new _s(i||t,d)};let XS;const wf={};class mc{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,H.hu)(wf&&si,"ChildrenNode.ts has not been loaded"),XS=XS||new mc({".priority":wf},{".priority":si}),XS}get(t){const e=(0,H.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof _s?e:null}hasIndex(t){return(0,H.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,H.hu)(t!==U1,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(hn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?E9(i,t.getCompare()):wf;const g=t.toString(),w=Object.assign({},this.indexSet_);w[g]=t;const y=Object.assign({},this.indexes_);return y[g]=d,new mc(y,w)}addToIndexes(t,e){const i=(0,H.UI)(this.indexes_,(r,s)=>{const c=(0,H.DV)(this.indexSet_,s);if((0,H.hu)(c,"Missing index implementation for "+s),r===wf){if(c.isDefinedOn(t.node)){const d=[],g=e.getIterator(hn.Wrap);let w=g.getNext();for(;w;)w.name!==t.name&&d.push(w),w=g.getNext();return d.push(t),E9(d,c.getCompare())}return wf}{const d=e.get(t.name);let g=r;return d&&(g=g.remove(new hn(t.name,d))),g.insert(t,t.node)}});return new mc(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,H.UI)(this.indexes_,r=>{if(r===wf)return r;{const s=e.get(t.name);return s?r.remove(new hn(t.name,s)):r}});return new mc(i,this.indexSet_)}}let E4,qt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&AU(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return E4||(E4=new n(new _s(JS),null,mc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||E4}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?E4:i}}getChild(e){const i=on(e);return null===i?this:this.getImmediateChild(i).getChild(Yn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,H.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new hn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?E4:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=on(e);if(null===r)return i;{(0,H.hu)(".priority"!==on(e)||1===iu(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Yn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(si,(d,g)=>{i[d]=g.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const g in i)d[g]=i[g];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+xU(this.getPriority().val())+":"),this.forEachChild(si,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":HB(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new hn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new hn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new hn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,hn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,hn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===I4?-1:0}withIndex(e){if(e===U1||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===U1||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(si),s=i.getIterator(si);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===U1?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const I4=new class Uhe extends qt{constructor(){super(new _s(JS),qt.EMPTY_NODE,mc.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return qt.EMPTY_NODE}isEmpty(){return!1}};function Vi(n,t=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,H.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new mf(n,Vi(t));if(n instanceof Array){let e=qt.EMPTY_NODE;return Kr(n,(i,r)=>{if((0,H.r3)(n,i)&&"."!==i.substring(0,1)){const s=Vi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Vi(t))}{const e=[];let i=!1;if(Kr(n,(c,d)=>{if("."!==c.substring(0,1)){const g=Vi(d);g.isEmpty()||(i=i||!g.getPriority().isEmpty(),e.push(new hn(c,g)))}}),0===e.length)return qt.EMPTY_NODE;const s=E9(e,Vhe,c=>c.name,JS);if(i){const c=E9(e,si.getCompare());return new qt(s,Vi(t),new mc({".priority":c},{".priority":si}))}return new qt(s,Vi(t),mc.Default)}}Object.defineProperties(hn,{MIN:{value:new hn(tu,qt.EMPTY_NODE)},MAX:{value:new hn(vc,I4)}}),MU.__EMPTY_NODE=qt.EMPTY_NODE,mf.__childrenNodeConstructor=qt,function Lhe(n){QS=n}(I4),function Phe(n){EU=n}(I4),function Ohe(n){TU=n}(Vi);class ez extends A9{constructor(t){super(),this.indexPath_=t,(0,H.hu)(!an(t)&&".priority"!==on(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Uh(t.name,e.name):s}makePost(t,e){const i=Vi(t),r=qt.EMPTY_NODE.updateChild(this.indexPath_,i);return new hn(e,r)}maxPost(){const t=qt.EMPTY_NODE.updateChild(this.indexPath_,I4);return new hn(vc,t)}toString(){return D4(this.indexPath_,0).join("/")}}const tz=new class jhe extends A9{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Uh(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(t,e){const i=Vi(t);return new hn(e,i)}toString(){return".value"}};function IU(n){return{type:"value",snapshotNode:n}}function _f(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function S4(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function z4(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class nz{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,H.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(S4(e,d)):(0,H.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(_f(e,i)):c.trackChildChange(z4(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(si,(r,s)=>{e.hasChild(r)||i.trackChildChange(S4(r,s))}),e.isLeafNode()||e.forEachChild(si,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(z4(r,s,c))}else i.trackChildChange(_f(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?qt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class N4{constructor(t){this.indexedFilter_=new nz(t.getIndex()),this.index_=t.getIndex(),this.startPost_=N4.getStartPost_(t),this.endPost_=N4.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,c){return this.matches(new hn(e,i))||(i=qt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=qt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(qt.EMPTY_NODE);const s=this;return e.forEachChild(si,(c,d)=>{s.matches(new hn(c,d))||(r=r.updateImmediateChild(c,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class $he{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new N4(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new hn(e,i))||(i=qt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=qt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),c++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(qt.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let c=0;for(;s.hasNext();){const d=s.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:r=r.updateImmediateChild(d.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const A=this.index_.getCompare();c=(I,N)=>A(N,I)}else c=this.index_.getCompare();const d=t;(0,H.hu)(d.numChildren()===this.limit_,"");const g=new hn(e,i),w=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),y=this.rangedFilter_.matches(g);if(d.hasChild(e)){const A=d.getImmediateChild(e);let I=r.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=I&&(I.name===e||d.hasChild(I.name));)I=r.getChildAfterChild(this.index_,I,this.reverse_);const N=null==I?1:c(I,g);if(y&&!i.isEmpty()&&N>=0)return s?.trackChildChange(z4(e,i,A)),d.updateImmediateChild(e,i);{s?.trackChildChange(S4(e,A));const J=d.updateImmediateChild(e,qt.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(s?.trackChildChange(_f(I.name,I.node)),J.updateImmediateChild(I.name,I.node)):J}}return i.isEmpty()?t:y&&c(w,g)>=0?(null!=s&&(s.trackChildChange(S4(w.name,w.node)),s.trackChildChange(_f(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(w.name,qt.EMPTY_NODE)):t}}class I9{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=si}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===si}copy(){const t=new I9;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function iz(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function rz(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function S9(n,t){const e=n.copy();return e.index_=t,e}function SU(n){const t={};if(n.isDefault())return t;let e;if(n.index_===si?e="$priority":n.index_===tz?e="$value":n.index_===U1?e="$key":((0,H.hu)(n.index_ instanceof ez,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,H.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,H.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,H.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,H.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,H.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function zU(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==si&&(t.i=n.index_.toString()),t}class z9 extends pU{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=C4("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,H.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=z9.getListenId_(t,i),d={};this.listens_[c]=d;const g=SU(t._queryParams);this.restRequest_(s+".json",g,(w,y)=>{let A=y;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(s,A,!1,i),(0,H.DV)(this.listens_,c)===d){let I;I=w?401===w?"permission_denied":"rest_error:"+w:"ok",r(I,null)}})}unlisten(t,e){const i=z9.getListenId_(t,e);delete this.listens_[i]}get(t){const e=SU(t._queryParams),i=t._path.toString(),r=new H.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,H.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,H.cI)(d.responseText)}catch{D0("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,g)}else 401!==d.status&&404!==d.status&&D0("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class Qhe{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function N9(){return{value:null,children:new Map}}function bf(n,t,e){if(an(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=on(t);n.children.has(i)||n.children.set(i,N9()),bf(n.children.get(i),t=Yn(t),e)}}function sz(n,t){if(an(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(si,(i,r)=>{bf(n,new Ln(i),r)}),sz(n,t)}}if(n.children.size>0){const e=on(t);return t=Yn(t),n.children.has(e)&&sz(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function oz(n,t,e){null!==n.value?e(t,n.value):function Xhe(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{oz(r,new Ln(t.toString()+"/"+i),e)})}class ede{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Kr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class ide{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ede(t);const i=1e4+2e4*Math.random();x4(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Kr(t,(r,s)=>{s>0&&(0,H.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),x4(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fo||(Fo={})),Fo))();function cz(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class k9{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Fo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(an(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ln(t));return new k9(zn(),e,this.revert)}}return(0,H.hu)(on(this.path)===t,"operationForChild called for unrelated child."),new k9(Yn(this.path),this.affectedTree,this.revert)}}class k4{constructor(t,e){this.source=t,this.path=e,this.type=Fo.LISTEN_COMPLETE}operationForChild(t){return an(this.path)?new k4(this.source,zn()):new k4(this.source,Yn(this.path))}}class Gh{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Fo.OVERWRITE}operationForChild(t){return an(this.path)?new Gh(this.source,zn(),this.snap.getImmediateChild(t)):new Gh(this.source,Yn(this.path),this.snap)}}class yf{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Fo.MERGE}operationForChild(t){if(an(this.path)){const e=this.children.subtree(new Ln(t));return e.isEmpty()?null:e.value?new Gh(this.source,zn(),e.value):new yf(this.source,zn(),e)}return(0,H.hu)(on(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new yf(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ru{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(an(t))return this.isFullyInitialized()&&!this.filtered_;const e=on(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class rde{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function R4(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,g)=>function ade(n,t,e){if(null==t.childName||null==e.childName)throw(0,H.g5)("Should only compare child_ events.");const i=new hn(t.childName,t.snapshotNode),r=new hn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,g)),c.forEach(d=>{const g=function ode(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(w=>{w.respondsTo(d.type)&&t.push(w.createEvent(g,n.query_))})})}function R9(n,t){return{eventCache:n,serverCache:t}}function V4(n,t,e,i){return R9(new ru(t,e,i),n.serverCache)}function kU(n,t,e,i){return R9(n.eventCache,new ru(t,e,i))}function V9(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function $h(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let uz;class oi{constructor(t,e=(()=>(uz||(uz=new _s(Gue)),uz))()){this.value=t,this.children=e}static fromObject(t){let e=new oi(null);return Kr(t,(i,r)=>{e=e.set(new Ln(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:zn(),value:this.value};if(an(t))return null;{const i=on(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Yn(t),e);return null!=s?{path:Ei(new Ln(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(an(t))return this;{const e=on(t),i=this.children.get(e);return null!==i?i.subtree(Yn(t)):new oi(null)}}set(t,e){if(an(t))return new oi(e,this.children);{const i=on(t),s=(this.children.get(i)||new oi(null)).set(Yn(t),e),c=this.children.insert(i,s);return new oi(this.value,c)}}remove(t){if(an(t))return this.children.isEmpty()?new oi(null):new oi(null,this.children);{const e=on(t),i=this.children.get(e);if(i){const r=i.remove(Yn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new oi(null):new oi(this.value,s)}return this}}get(t){if(an(t))return this.value;{const e=on(t),i=this.children.get(e);return i?i.get(Yn(t)):null}}setTree(t,e){if(an(t))return e;{const i=on(t),s=(this.children.get(i)||new oi(null)).setTree(Yn(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new oi(this.value,c)}}fold(t){return this.fold_(zn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ei(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,zn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(an(t))return null;{const s=on(t),c=this.children.get(s);return c?c.findOnPath_(Yn(t),Ei(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,zn(),e)}foreachOnPath_(t,e,i){if(an(t))return this;{this.value&&i(e,this.value);const r=on(t),s=this.children.get(r);return s?s.foreachOnPath_(Yn(t),Ei(e,r),i):new oi(null)}}foreach(t){this.foreach_(zn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Ei(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class qa{constructor(t){this.writeTree_=t}static empty(){return new qa(new oi(null))}}function L4(n,t,e){if(an(t))return new qa(new oi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=W0(r,t);return s=s.updateChild(c,e),new qa(n.writeTree_.set(r,s))}{const r=new oi(e),s=n.writeTree_.setTree(t,r);return new qa(s)}}}function hz(n,t,e){let i=n;return Kr(e,(r,s)=>{i=L4(i,Ei(t,r),s)}),i}function RU(n,t){if(an(t))return qa.empty();{const e=n.writeTree_.setTree(t,new oi(null));return new qa(e)}}function dz(n,t){return null!=qh(n,t)}function qh(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(W0(e.path,t)):null}function VU(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(si,(i,r)=>{t.push(new hn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new hn(i,r.value))}),t}function su(n,t){if(an(t))return n;{const e=qh(n,t);return new qa(null!=e?new oi(e):n.writeTree_.subtree(t))}}function fz(n){return n.writeTree_.isEmpty()}function Cf(n,t){return LU(zn(),n.writeTree_,t)}function LU(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,H.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=LU(Ei(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Ei(n,".priority"),i)),e}}function L9(n,t){return BU(t,n)}function fde(n,t){if(n.snap)return Ho(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ho(Ei(n.path,e),t))return!0;return!1}function pde(n){return n.visible}function OU(n,t,e){let i=qa.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)Ho(e,c)?(d=W0(e,c),i=L4(i,d,s.snap)):Ho(c,e)&&(d=W0(c,e),i=L4(i,zn(),s.snap.getChild(d)));else{if(!s.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(Ho(e,c))d=W0(e,c),i=hz(i,d,s.children);else if(Ho(c,e))if(d=W0(c,e),an(d))i=hz(i,zn(),s.children);else{const g=(0,H.DV)(s.children,on(d));if(g){const w=g.getChild(Yn(d));i=L4(i,zn(),w)}}}}}return i}function PU(n,t,e,i,r){if(i||r){const s=su(n.visibleWrites,t);return!r&&fz(s)?e:r||null!=e||dz(s,zn())?Cf(OU(n.allWrites,function(w){return(w.visible||r)&&(!i||!~i.indexOf(w.writeId))&&(Ho(w.path,t)||Ho(t,w.path))},t),e||qt.EMPTY_NODE):null}{const s=qh(n.visibleWrites,t);if(null!=s)return s;{const c=su(n.visibleWrites,t);return fz(c)?e:null!=e||dz(c,zn())?Cf(c,e||qt.EMPTY_NODE):null}}}function O9(n,t,e,i){return PU(n.writeTree,n.treePath,t,e,i)}function gz(n,t){return function vde(n,t,e){let i=qt.EMPTY_NODE;const r=qh(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(si,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=su(n.visibleWrites,t);return e.forEachChild(si,(c,d)=>{const g=Cf(su(s,new Ln(c)),d);i=i.updateImmediateChild(c,g)}),VU(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return VU(su(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function HU(n,t,e,i){return function mde(n,t,e,i,r){(0,H.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ei(t,e);if(dz(n.visibleWrites,s))return null;{const c=su(n.visibleWrites,s);return fz(c)?r.getChild(e):Cf(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function P9(n,t){return function _de(n,t){return qh(n.visibleWrites,t)}(n.writeTree,Ei(n.treePath,t))}function pz(n,t,e){return function wde(n,t,e,i){const r=Ei(t,e),s=qh(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Cf(su(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function FU(n,t){return BU(Ei(n.treePath,t),n.writeTree)}function BU(n,t){return{treePath:n,writeTree:t}}class Mde{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,H.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,z4(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,S4(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,_f(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,H.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,z4(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const UU=new class xde{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class vz{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new ru(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pz(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$h(this.viewCache_),s=function Cde(n,t,e,i,r,s){return function bde(n,t,e,i,r,s,c){let d;const g=su(n.visibleWrites,t),w=qh(g,zn());if(null!=w)d=w;else{if(null==e)return[];d=Cf(g,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const y=[],A=c.getCompare(),I=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let N=I.getNext();for(;N&&y.length<r;)0!==A(N,i)&&y.push(N),N=I.getNext();return y}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function ZU(n,t,e,i,r,s){const c=t.eventCache;if(null!=P9(i,e))return t;{let d,g;if(an(e))if((0,H.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const w=$h(t),A=gz(i,w instanceof qt?w:qt.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),A,s)}else{const w=O9(i,$h(t));d=n.filter.updateFullNode(t.eventCache.getNode(),w,s)}else{const w=on(e);if(".priority"===w){(0,H.hu)(1===iu(e),"Can't have a priority with additional path components");const y=c.getNode();g=t.serverCache.getNode();const A=HU(i,e,y,g);d=null!=A?n.filter.updatePriority(y,A):c.getNode()}else{const y=Yn(e);let A;if(c.isCompleteForChild(w)){g=t.serverCache.getNode();const I=HU(i,e,c.getNode(),g);A=null!=I?c.getNode().getImmediateChild(w).updateChild(y,I):c.getNode().getImmediateChild(w)}else A=pz(i,w,t.serverCache);d=null!=A?n.filter.updateChild(c.getNode(),w,A,y,r,s):c.getNode()}}return V4(t,d,c.isFullyInitialized()||an(e),n.filter.filtersNodes())}}function H9(n,t,e,i,r,s,c,d){const g=t.serverCache;let w;const y=c?n.filter:n.filter.getIndexedFilter();if(an(e))w=y.updateFullNode(g.getNode(),i,null);else if(y.filtersNodes()&&!g.isFiltered()){const N=g.getNode().updateChild(e,i);w=y.updateFullNode(g.getNode(),N,null)}else{const N=on(e);if(!g.isCompleteForPath(e)&&iu(e)>1)return t;const Z=Yn(e),te=g.getNode().getImmediateChild(N).updateChild(Z,i);w=".priority"===N?y.updatePriority(g.getNode(),te):y.updateChild(g.getNode(),N,te,Z,UU,null)}const A=kU(t,w,g.isFullyInitialized()||an(e),y.filtersNodes());return ZU(n,A,e,r,new vz(r,A,s),d)}function mz(n,t,e,i,r,s,c){const d=t.eventCache;let g,w;const y=new vz(r,t,s);if(an(e))w=n.filter.updateFullNode(t.eventCache.getNode(),i,c),g=V4(t,w,!0,n.filter.filtersNodes());else{const A=on(e);if(".priority"===A)w=n.filter.updatePriority(t.eventCache.getNode(),i),g=V4(t,w,d.isFullyInitialized(),d.isFiltered());else{const I=Yn(e),N=d.getNode().getImmediateChild(A);let Z;if(an(I))Z=i;else{const J=y.getCompleteChild(A);Z=null!=J?".priority"===WS(I)&&J.getChild(_U(I)).isEmpty()?J:J.updateChild(I,i):qt.EMPTY_NODE}g=N.equals(Z)?t:V4(t,n.filter.updateChild(d.getNode(),A,Z,I,y,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function jU(n,t){return n.eventCache.isCompleteForChild(t)}function GU(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function wz(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let w,g=t;w=an(e)?i:new oi(null).setTree(e,i);const y=t.serverCache.getNode();return w.children.inorderTraversal((A,I)=>{if(y.hasChild(A)){const Z=GU(0,t.serverCache.getNode().getImmediateChild(A),I);g=H9(n,g,new Ln(A),Z,r,s,c,d)}}),w.children.inorderTraversal((A,I)=>{const N=!t.serverCache.isCompleteForChild(A)&&null===I.value;if(!y.hasChild(A)&&!N){const J=GU(0,t.serverCache.getNode().getImmediateChild(A),I);g=H9(n,g,new Ln(A),J,r,s,c,d)}}),g}class kde{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new nz(i.getIndex()),s=function qhe(n){return n.loadsAllData()?new nz(n.getIndex()):n.hasLimit()?new $he(n):new N4(n)}(i);this.processor_=function Ade(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,g=r.updateFullNode(qt.EMPTY_NODE,c.getNode(),null),w=s.updateFullNode(qt.EMPTY_NODE,d.getNode(),null),y=new ru(g,c.isFullyInitialized(),r.filtersNodes()),A=new ru(w,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=R9(A,y),this.eventGenerator_=new rde(this.query_)}get query(){return this.query_}}function Lde(n,t){const e=$h(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!an(t)&&!e.getImmediateChild(on(t)).isEmpty())?e.getChild(t):null}function $U(n){return 0===n.eventRegistrations_.length}function qU(n,t,e){const i=[];if(e){(0,H.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function WU(n,t,e,i){t.type===Fo.MERGE&&null!==t.source.queryId&&((0,H.hu)($h(n.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(V9(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Tde(n,t,e,i,r){const s=new Mde;let c,d;if(e.type===Fo.OVERWRITE){const w=e;w.source.fromUser?c=mz(n,t,w.path,w.snap,i,r,s):((0,H.hu)(w.source.fromServer,"Unknown source."),d=w.source.tagged||t.serverCache.isFiltered()&&!an(w.path),c=H9(n,t,w.path,w.snap,i,r,d,s))}else if(e.type===Fo.MERGE){const w=e;w.source.fromUser?c=function Ide(n,t,e,i,r,s,c){let d=t;return i.foreach((g,w)=>{const y=Ei(e,g);jU(t,on(y))&&(d=mz(n,d,y,w,r,s,c))}),i.foreach((g,w)=>{const y=Ei(e,g);jU(t,on(y))||(d=mz(n,d,y,w,r,s,c))}),d}(n,t,w.path,w.children,i,r,s):((0,H.hu)(w.source.fromServer,"Unknown source."),d=w.source.tagged||t.serverCache.isFiltered(),c=wz(n,t,w.path,w.children,i,r,d,s))}else if(e.type===Fo.ACK_USER_WRITE){const w=e;c=w.revert?function Nde(n,t,e,i,r,s){let c;if(null!=P9(i,e))return t;{const d=new vz(i,t,r),g=t.eventCache.getNode();let w;if(an(e)||".priority"===on(e)){let y;if(t.serverCache.isFullyInitialized())y=O9(i,$h(t));else{const A=t.serverCache.getNode();(0,H.hu)(A instanceof qt,"serverChildren would be complete if leaf node"),y=gz(i,A)}w=n.filter.updateFullNode(g,y,s)}else{const y=on(e);let A=pz(i,y,t.serverCache);null==A&&t.serverCache.isCompleteForChild(y)&&(A=g.getImmediateChild(y)),w=null!=A?n.filter.updateChild(g,y,A,Yn(e),d,s):t.eventCache.getNode().hasChild(y)?n.filter.updateChild(g,y,qt.EMPTY_NODE,Yn(e),d,s):g,w.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=O9(i,$h(t)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=P9(i,zn()),V4(t,w,c,n.filter.filtersNodes())}}(n,t,w.path,i,r,s):function Sde(n,t,e,i,r,s,c){if(null!=P9(r,e))return t;const d=t.serverCache.isFiltered(),g=t.serverCache;if(null!=i.value){if(an(e)&&g.isFullyInitialized()||g.isCompleteForPath(e))return H9(n,t,e,g.getNode().getChild(e),r,s,d,c);if(an(e)){let w=new oi(null);return g.getNode().forEachChild(U1,(y,A)=>{w=w.set(new Ln(y),A)}),wz(n,t,e,w,r,s,d,c)}return t}{let w=new oi(null);return i.foreach((y,A)=>{const I=Ei(e,y);g.isCompleteForPath(I)&&(w=w.set(y,g.getNode().getChild(I)))}),wz(n,t,e,w,r,s,d,c)}}(n,t,w.path,w.affectedTree,i,r,s)}else{if(e.type!==Fo.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+e.type);c=function zde(n,t,e,i,r){const s=t.serverCache;return ZU(n,kU(t,s.getNode(),s.isFullyInitialized()||an(e),s.isFiltered()),e,i,UU,r)}(n,t,e.path,i,s)}const g=s.getChanges();return function Ede(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=V9(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(IU(V9(t)))}}(t,c,g),{viewCache:c,changes:g}}(n.processor_,r,t,e,i);return function Dde(n,t){(0,H.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,H.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,KU(n,s.changes,s.viewCache.eventCache.getNode(),null)}function KU(n,t,e,i){return function sde(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function Ghe(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),R4(n,r,"child_removed",t,i,e),R4(n,r,"child_added",t,i,e),R4(n,r,"child_moved",s,i,e),R4(n,r,"child_changed",t,i,e),R4(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let F9,U9;class YU{constructor(){this.views=new Map}}function _z(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,H.hu)(null!=s,"SyncTree gave us an op for an invalid query."),WU(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(WU(c,t,e,i));return s}}function JU(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=O9(e,r?i:null),g=!1;d?g=!0:i instanceof qt?(d=gz(e,i),g=!1):(d=qt.EMPTY_NODE,g=!1);const w=R9(new ru(d,g,!1),new ru(i,r,!1));return new kde(t,w)}return c}function QU(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function ou(n,t){let e=null;for(const i of n.views.values())e=e||Lde(i,t);return e}function XU(n,t){return t._queryParams.loadsAllData()?B9(n):n.views.get(t._queryIdentifier)}function eZ(n,t){return null!=XU(n,t)}function au(n){return null!=B9(n)}function B9(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let $de=1;class tZ{constructor(t){this.listenProvider_=t,this.syncPointTree_=new oi(null),this.pendingWriteTree_=function yde(){return{visibleWrites:qa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bz(n,t,e,i,r){return function cde(n,t,e,i,r){(0,H.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=L4(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Mf(n,new Gh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function lu(n,t,e=!1){const i=function hde(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function dde(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,H.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&fde(d,i.path)?r=!1:Ho(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function gde(n){n.visibleWrites=OU(n.allWrites,pde,zn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=RU(n.visibleWrites,i.path):Kr(i.children,g=>{n.visibleWrites=RU(n.visibleWrites,Ei(i.path,g))}),!0))}(n.pendingWriteTree_,t)){let s=new oi(null);return null!=i.snap?s=s.set(zn(),!0):Kr(i.children,c=>{s=s.set(new Ln(c),!0)}),Mf(n,new k9(i.path,s,e))}return[]}function O4(n,t,e){return Mf(n,new Gh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Z9(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||eZ(c,t))){const g=function Zde(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=au(n);if("default"===r)for(const[g,w]of n.views.entries())c=c.concat(qU(w,e,i)),$U(w)&&(n.views.delete(g),w.query._queryParams.loadsAllData()||s.push(w.query));else{const g=n.views.get(r);g&&(c=c.concat(qU(g,e,i)),$U(g)&&(n.views.delete(r),g.query._queryParams.loadsAllData()||s.push(g.query)))}return d&&!au(n)&&s.push(new(function Fde(){return(0,H.hu)(F9,"Reference.ts has not been loaded"),F9}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function Bde(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const w=g.removed;if(d=g.events,!r){const y=-1!==w.findIndex(I=>I._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(s,(I,N)=>au(N));if(y&&!A){const I=n.syncPointTree_.subtree(s);if(!I.isEmpty()){const N=function Xde(n){return n.fold((t,e,i)=>{if(e&&au(e))return[B9(e)];{let r=[];return e&&(r=QU(e)),Kr(i,(s,c)=>{r=r.concat(c)}),r}})}(I);for(let Z=0;Z<N.length;++Z){const J=N[Z],te=J.query,xe=sZ(n,J);n.listenProvider_.startListening(H4(te),P4(n,te),xe.hashFn,xe.onComplete)}}}!A&&w.length>0&&!i&&(y?n.listenProvider_.stopListening(H4(t),null):w.forEach(I=>{const N=n.queryToTagMap.get(G9(I));n.listenProvider_.stopListening(H4(I),N)}))}!function e2e(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=G9(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,w)}return d}function nZ(n,t,e,i){const r=Cz(n,i);if(null!=r){const s=Mz(r),c=s.path,d=s.queryId,g=W0(c,t);return xz(n,c,new Gh(cz(d),g,e))}return[]}function yz(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(I,N)=>{const Z=W0(I,r);s=s||ou(N,Z),c=c||au(N)});let g,d=n.syncPointTree_.get(r);d?(c=c||au(d),s=s||ou(d,zn())):(d=new YU,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?g=!0:(g=!1,s=qt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,Z)=>{const J=ou(Z,zn());J&&(s=s.updateImmediateChild(N,J))}));const w=eZ(d,t);if(!w&&!t._queryParams.loadsAllData()){const I=G9(t);(0,H.hu)(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const N=function t2e(){return $de++}();n.queryToTagMap.set(I,N),n.tagToQueryMap.set(N,I)}let A=function Ude(n,t,e,i,r,s){const c=JU(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function Ode(n,t){n.eventRegistrations_.push(t)}(c,e),function Pde(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(si,(s,c)=>{i.push(_f(s,c))}),e.isFullyInitialized()&&i.push(IU(e.getNode())),KU(n,i,e.getNode(),t)}(c,e)}(d,t,e,L9(n.pendingWriteTree_,r),s,g);if(!w&&!c&&!i){const I=XU(d,t);A=A.concat(function n2e(n,t,e){const i=t._path,r=P4(n,t),s=sZ(n,e),c=n.listenProvider_.startListening(H4(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,H.hu)(!au(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((w,y,A)=>{if(!an(w)&&y&&au(y))return[B9(y).query];{let I=[];return y&&(I=I.concat(QU(y).map(N=>N.query))),Kr(A,(N,Z)=>{I=I.concat(Z)}),I}});for(let w=0;w<g.length;++w){const y=g[w];n.listenProvider_.stopListening(H4(y),P4(n,y))}}return c}(n,t,I))}return A}function j9(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const w=ou(d,W0(c,t));if(w)return w});return PU(r,t,s,e,!0)}function Mf(n,t){return iZ(t,n.syncPointTree_,null,L9(n.pendingWriteTree_,zn()))}function iZ(n,t,e,i){if(an(n.path))return rZ(n,t,e,i);{const r=t.get(zn());null==e&&null!=r&&(e=ou(r,zn()));let s=[];const c=on(n.path),d=n.operationForChild(c),g=t.children.get(c);if(g&&d){const w=e?e.getImmediateChild(c):null,y=FU(i,c);s=s.concat(iZ(d,g,w,y))}return r&&(s=s.concat(_z(r,n,i,e))),s}}function rZ(n,t,e,i){const r=t.get(zn());null==e&&null!=r&&(e=ou(r,zn()));let s=[];return t.children.inorderTraversal((c,d)=>{const g=e?e.getImmediateChild(c):null,w=FU(i,c),y=n.operationForChild(c);y&&(s=s.concat(rZ(y,d,g,w)))}),r&&(s=s.concat(_z(r,n,i,e))),s}function sZ(n,t){const e=t.query,i=P4(n,e);return{hashFn:()=>(function Rde(n){return n.viewCache_.serverCache.getNode()}(t)||qt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Yde(n,t,e){const i=Cz(n,e);if(i){const r=Mz(i),s=r.path,c=r.queryId,d=W0(s,t);return xz(n,s,new k4(cz(c),d))}return[]}(n,e._path,i):function Kde(n,t){return Mf(n,new k4({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function Wue(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return Z9(n,e,null,s)}}}}function P4(n,t){const e=G9(t);return n.queryToTagMap.get(e)}function G9(n){return n._path.toString()+"$"+n._queryIdentifier}function Cz(n,t){return n.tagToQueryMap.get(t)}function Mz(n){const t=n.indexOf("$");return(0,H.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Ln(n.substr(0,t))}}function xz(n,t,e){const i=n.syncPointTree_.get(t);return(0,H.hu)(i,"Missing sync point for query tag that we're tracking"),_z(i,e,L9(n.pendingWriteTree_,t),null)}function H4(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Gde(){return(0,H.hu)(U9,"Reference.ts has not been loaded"),U9}())(n._repo,n._path):n}class Az{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Az(e)}node(){return this.node_}}class Dz{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Ei(this.path_,t);return new Dz(this.syncTree_,e)}node(){return j9(this.syncTree_,this.path_)}}const oZ=function(n,t,e){return n&&"object"==typeof n?((0,H.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?r2e(n[".sv"],t,e):"object"==typeof n[".sv"]?s2e(n[".sv"],t):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},r2e=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,H.hu)(!1,"Unexpected server value: "+n)},s2e=function(n,t,e){n.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,H.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,H.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},aZ=function(n,t,e,i){return Ez(t,new Dz(e,n),i)},Tz=function(n,t,e){return Ez(n,new Az(t),e)};function Ez(n,t,e){const i=n.getPriority().val(),r=oZ(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=oZ(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new mf(d,Vi(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new mf(r))),c.forEachChild(si,(d,g)=>{const w=Ez(g,t.getImmediateChild(d),e);w!==g&&(s=s.updateImmediateChild(d,w))}),s}}class Iz{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function $9(n,t){let e=t instanceof Ln?t:new Ln(t),i=n,r=on(e);for(;null!==r;){const s=(0,H.DV)(i.node.children,r)||{children:{},childCount:0};i=new Iz(r,i,s),e=Yn(e),r=on(e)}return i}function Wh(n){return n.node.value}function Sz(n,t){n.node.value=t,zz(n)}function lZ(n){return n.node.childCount>0}function q9(n,t){Kr(n.node.children,(e,i)=>{t(new Iz(e,n,i))})}function cZ(n,t,e,i){e&&!i&&t(n),q9(n,r=>{cZ(r,t,!0,i)}),e&&i&&t(n)}function F4(n){return new Ln(null===n.parent?n.name:F4(n.parent)+"/"+n.name)}function zz(n){null!==n.parent&&function l2e(n,t,e){const i=function o2e(n){return void 0===Wh(n)&&!lZ(n)}(e),r=(0,H.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,zz(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,zz(n))}(n.parent,n.name,n)}const c2e=/[\[\].#$\/\u0000-\u001F\u007F]/,u2e=/[\[\].#$\u0000-\u001F\u007F]/,Nz=10485760,W9=function(n){return"string"==typeof n&&0!==n.length&&!c2e.test(n)},uZ=function(n){return"string"==typeof n&&0!==n.length&&!u2e.test(n)},B4=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!y9(n)||n&&"object"==typeof n&&(0,H.r3)(n,".sv")},Z1=function(n,t,e,i){i&&void 0===t||U4((0,H.gK)(n,"value"),t,e)},U4=function(n,t,e){const i=e instanceof Ln?new The(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Zh(i));if("function"==typeof t)throw new Error(n+"contains a function "+Zh(i)+" with contents = "+t.toString());if(y9(t))throw new Error(n+"contains "+t.toString()+" "+Zh(i));if("string"==typeof t&&t.length>Nz/3&&(0,H.ug)(t)>Nz)throw new Error(n+"contains a string greater than "+Nz+" utf8 bytes "+Zh(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(Kr(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!W9(c)))throw new Error(n+" contains an invalid key ("+c+") "+Zh(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ehe(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,H.ug)(t),bU(n)})(i,c),U4(n,d,i),function Ihe(n){const t=n.parts_.pop();n.byteLength_-=(0,H.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Zh(i)+" in addition to actual children.")}},hZ=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,H.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Kr(t,(c,d)=>{const g=new Ln(c);if(U4(r,d,Ei(e,g)),".priority"===WS(g)&&!B4(d))throw new Error(r+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=D4(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!W9(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Dhe);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Ho(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},kz=function(n,t,e){if(!e||void 0!==t){if(y9(t))throw new Error((0,H.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!B4(t))throw new Error((0,H.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Z4=function(n,t,e,i){if(!(i&&void 0===e||W9(e)))throw new Error((0,H.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},j4=function(n,t,e,i){if(!(i&&void 0===e||uZ(e)))throw new Error((0,H.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Bo=function(n,t){if(".info"===on(t))throw new Error(n+" failed = Can't modify data under /.info/")},dZ=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!W9(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),uZ(n)}(e))throw new Error((0,H.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class g2e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function K9(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!KS(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function fZ(n,t,e){K9(n,e),gZ(n,i=>KS(i,t))}function eo(n,t,e){K9(n,e),gZ(n,i=>Ho(i,t)||Ho(t,i))}function gZ(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(p2e(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function p2e(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Bh&&Wr("event: "+e.toString()),pf(i)}}}const pZ="repo_interrupt";class m2e{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g2e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=N9(),this.transactionQueueTree_=new Iz,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vZ(n){const e=n.infoData_.getNode(new Ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function G4(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:vZ(n)})}function mZ(n,t,e,i,r){n.dataUpdateCount++;const s=new Ln(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const g=(0,H.UI)(e,w=>Vi(w));c=function Jde(n,t,e,i){const r=Cz(n,i);if(r){const s=Mz(r),c=s.path,d=s.queryId,g=W0(c,t),w=oi.fromObject(e);return xz(n,c,new yf(cz(d),g,w))}return[]}(n.serverSyncTree_,s,g,r)}else{const g=Vi(e);c=nZ(n.serverSyncTree_,s,g,r)}else if(i){const g=(0,H.UI)(e,w=>Vi(w));c=function Wde(n,t,e){const i=oi.fromObject(e);return Mf(n,new yf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,g)}else{const g=Vi(e);c=O4(n.serverSyncTree_,s,g)}let d=s;c.length>0&&(d=Af(n,s)),eo(n.eventQueue_,d,c)}function wZ(n,t){Rz(n,"connected",t),!1===t&&function C2e(n){xf(n,"onDisconnectEvents");const t=G4(n),e=N9();oz(n.onDisconnect_,zn(),(r,s)=>{const c=aZ(r,s,n.serverSyncTree_,t);bf(e,r,c)});let i=[];oz(e,zn(),(r,s)=>{i=i.concat(O4(n.serverSyncTree_,r,s));const c=Pz(n,r);Af(n,c)}),n.onDisconnect_=N9(),eo(n.eventQueue_,zn(),i)}(n)}function Rz(n,t,e){const i=new Ln("/.info/"+t),r=Vi(e);n.infoData_.updateSnapshot(i,r);const s=O4(n.infoSyncTree_,i,r);eo(n.eventQueue_,i,s)}function Y9(n){return n.nextWriteId_++}function Vz(n,t,e,i,r){xf(n,"set",{path:t.toString(),value:e,priority:i});const s=G4(n),c=Vi(e,i),d=j9(n.serverSyncTree_,t),g=Tz(c,d,s),w=Y9(n),y=bz(n.serverSyncTree_,t,g,w,!0);K9(n.eventQueue_,y),n.server_.put(t.toString(),c.val(!0),(I,N)=>{const Z="ok"===I;Z||D0("set at "+t+" failed: "+I);const J=lu(n.serverSyncTree_,w,!Z);eo(n.eventQueue_,t,J),cu(0,r,I,N)});const A=Pz(n,t);Af(n,A),eo(n.eventQueue_,A,[])}function M2e(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&sz(n.onDisconnect_,t),cu(0,e,i,r)})}function _Z(n,t,e,i){const r=Vi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&bf(n.onDisconnect_,t,r),cu(0,i,s,c)})}function Lz(n,t,e){let i;i=".info"===on(t._path)?Z9(n.infoSyncTree_,t,e):Z9(n.serverSyncTree_,t,e),fZ(n.eventQueue_,t._path,i)}function bZ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(pZ)}function xf(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Wr(e,...t)}function cu(n,t,e,i){t&&pf(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function Oz(n,t,e){return j9(n.serverSyncTree_,t,e)||qt.EMPTY_NODE}function J9(n,t=n.transactionQueueTree_){if(t||Q9(n,t),Wh(t)){const e=CZ(n,t);(0,H.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function I2e(n,t,e){const i=e.map(w=>w.currentWriteId),r=Oz(n,t,i);let s=r;const c=r.hash();for(let w=0;w<e.length;w++){const y=e[w];(0,H.hu)(0===y.status,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const A=W0(t,y.path);s=s.updateChild(A,y.currentOutputSnapshotRaw)}const d=s.val(!0),g=t;n.server_.put(g.toString(),d,w=>{xf(n,"transaction put response",{path:g.toString(),status:w});let y=[];if("ok"===w){const A=[];for(let I=0;I<e.length;I++)e[I].status=2,y=y.concat(lu(n.serverSyncTree_,e[I].currentWriteId)),e[I].onComplete&&A.push(()=>e[I].onComplete(null,!0,e[I].currentOutputSnapshotResolved)),e[I].unwatcher();Q9(n,$9(n.transactionQueueTree_,t)),J9(n,n.transactionQueueTree_),eo(n.eventQueue_,t,y);for(let I=0;I<A.length;I++)pf(A[I])}else{if("datastale"===w)for(let A=0;A<e.length;A++)e[A].status=3===e[A].status?4:0;else{D0("transaction at "+g.toString()+" failed: "+w);for(let A=0;A<e.length;A++)e[A].status=4,e[A].abortReason=w}Af(n,t)}},c)}(n,F4(t),e)}else lZ(t)&&q9(t,e=>{J9(n,e)})}function Af(n,t){const e=yZ(n,t),i=F4(e);return function S2e(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const g=t[d],w=W0(e,g.path);let A,y=!1;if((0,H.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)y=!0,A=g.abortReason,r=r.concat(lu(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)y=!0,A="maxretry",r=r.concat(lu(n.serverSyncTree_,g.currentWriteId,!0));else{const I=Oz(n,g.path,c);g.currentInputSnapshot=I;const N=t[d].update(I.val());if(void 0!==N){U4("transaction failed: Data returned ",N,g.path);let Z=Vi(N);"object"==typeof N&&null!=N&&(0,H.r3)(N,".priority")||(Z=Z.updatePriority(I.getPriority()));const te=g.currentWriteId,xe=G4(n),ke=Tz(Z,I,xe);g.currentOutputSnapshotRaw=Z,g.currentOutputSnapshotResolved=ke,g.currentWriteId=Y9(n),c.splice(c.indexOf(te),1),r=r.concat(bz(n.serverSyncTree_,g.path,ke,g.currentWriteId,g.applyLocally)),r=r.concat(lu(n.serverSyncTree_,te,!0))}else y=!0,A="nodata",r=r.concat(lu(n.serverSyncTree_,g.currentWriteId,!0))}eo(n.eventQueue_,e,r),r=[],y&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===A?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(A),!1,null)))}Q9(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)pf(i[d]);J9(n,n.transactionQueueTree_)}(n,CZ(n,e),i),i}function yZ(n,t){let e,i=n.transactionQueueTree_;for(e=on(t);null!==e&&void 0===Wh(i);)i=$9(i,e),e=on(t=Yn(t));return i}function CZ(n,t){const e=[];return MZ(n,t,e),e.sort((i,r)=>i.order-r.order),e}function MZ(n,t,e){const i=Wh(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);q9(t,r=>{MZ(n,r,e)})}function Q9(n,t){const e=Wh(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,Sz(t,e.length>0?e:void 0)}q9(t,i=>{Q9(n,i)})}function Pz(n,t){const e=F4(yZ(n,t)),i=$9(n.transactionQueueTree_,t);return function a2e(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{Hz(n,r)}),Hz(n,i),cZ(i,r=>{Hz(n,r)}),e}function Hz(n,t){const e=Wh(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,H.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,H.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(lu(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Sz(t,void 0):e.length=s+1,eo(n.eventQueue_,F4(t),r);for(let c=0;c<i.length;c++)pf(i[c])}}const Fz=function(n,t){const e=k2e(n),i=e.namespace;return"firebase.com"===e.domain&&B1(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&B1("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&D0("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new US(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Ln(e.pathString)}},k2e=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",g=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(d=n.substring(0,w-1),n=n.substring(w+2));let y=n.indexOf("/");-1===y&&(y=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),t=n.substring(0,Math.min(y,A)),y<A&&(r=function z2e(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(y,A)));const I=function N2e(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):D0(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,A)));w=t.indexOf(":"),w>=0?(c="https"===d||"wss"===d,g=parseInt(t.substring(w+1),10)):w=t.length;const N=t.slice(0,w);if("localhost"===N.toLowerCase())e="localhost";else if(N.split(".").length<=2)e=N;else{const Z=t.indexOf(".");i=t.substring(0,Z).toLowerCase(),e=t.substring(Z+1),s=i}"ns"in I&&(s=I.ns)}return{host:t,port:g,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}},xZ="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",R2e=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=xZ.charAt(e%64),e=Math.floor(e/64);(0,H.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=xZ.charAt(t[r]);return(0,H.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class AZ{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Wl)(this.snapshot.exportVal())}}class DZ{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Bz{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class TZ{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new H.BH;return M2e(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Bo("OnDisconnect.remove",this._path);const t=new H.BH;return _Z(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Bo("OnDisconnect.set",this._path),Z1("OnDisconnect.set",t,this._path,!1);const e=new H.BH;return _Z(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Bo("OnDisconnect.setWithPriority",this._path),Z1("OnDisconnect.setWithPriority",t,this._path,!1),kz("OnDisconnect.setWithPriority",e,!1);const i=new H.BH;return function x2e(n,t,e,i,r){const s=Vi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&bf(n.onDisconnect_,t,s),cu(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Bo("OnDisconnect.update",this._path),hZ("OnDisconnect.update",t,this._path,!1);const e=new H.BH;return function A2e(n,t,e,i){if((0,H.xb)(e))return Wr("onDisconnect().update() called with empty data.  Don't do anything."),void cu(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&Kr(e,(c,d)=>{const g=Vi(d);bf(n.onDisconnect_,Ei(t,c),g)}),cu(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class bs{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return an(this._path)?null:WS(this._path)}get ref(){return new Uo(this._repo,this._path)}get _queryIdentifier(){const t=zU(this._queryParams),e=FS(t);return"{}"===e?"default":e}get _queryObject(){return zU(this._queryParams)}isEqual(t){if(!((t=(0,H.m9)(t))instanceof bs))return!1;const e=this._repo===t._repo,i=KS(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ahe(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function X9(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function uu(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===U1){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==tu)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==vc)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===si){if(null!=t&&!B4(t)||null!=e&&!B4(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,H.hu)(n.getIndex()instanceof ez||n.getIndex()===tz,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eb(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Uo extends bs{constructor(t,e){super(t,e,new I9,!1)}get parent(){const t=_U(this._path);return null===t?null:new Uo(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Kh{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Ln(t),i=Yh(this.ref,t);return new Kh(this._node.getChild(e),i,si)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Kh(r,Yh(this.ref,i),si)))}hasChild(t){const e=new Ln(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function EZ(n,t){return(n=(0,H.m9)(n))._checkNotDeleted("ref"),void 0!==t?Yh(n._root,t):n._root}function IZ(n,t){(n=(0,H.m9)(n))._checkNotDeleted("refFromURL");const e=Fz(t,n._repo.repoInfo_.nodeAdmin);dZ("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&B1("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),EZ(n,e.path.toString())}function Yh(n,t){return null===on((n=(0,H.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),j4("child","path",e,!1)):j4("child","path",t,!1),new Uo(n._repo,Ei(n._path,t));var e}function Uz(n,t){n=(0,H.m9)(n),Bo("set",n._path),Z1("set",t,n._path,!1);const e=new H.BH;return Vz(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function H2e(n,t){hZ("update",t,n._path,!1);const e=new H.BH;return function y2e(n,t,e,i){xf(n,"update",{path:t.toString(),value:e});let r=!0;const s=G4(n),c={};if(Kr(e,(d,g)=>{r=!1,c[d]=aZ(Ei(t,d),Vi(g),n.serverSyncTree_,s)}),r)Wr("update() called with empty data.  Don't do anything."),cu(0,i,"ok",void 0);else{const d=Y9(n),g=function qde(n,t,e,i){!function ude(n,t,e,i){(0,H.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=hz(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=oi.fromObject(e);return Mf(n,new yf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);K9(n.eventQueue_,g),n.server_.merge(t.toString(),e,(w,y)=>{const A="ok"===w;A||D0("update at "+t+" failed: "+w);const I=lu(n.serverSyncTree_,d,!A),N=I.length>0?Af(n,t):t;eo(n.eventQueue_,N,I),cu(0,i,w,y)}),Kr(e,w=>{const y=Pz(n,Ei(t,w));Af(n,y)}),eo(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function F2e(n){n=(0,H.m9)(n);const t=new Bz(()=>{}),e=new $4(t);return function b2e(n,t,e){const i=function Qde(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(w,y)=>{const A=W0(w,e);i=i||ou(y,A)});let r=n.syncPointTree_.get(e);r?i=i||ou(r,zn()):(r=new YU,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new ru(i,!0,!1):null;return function Vde(n){return V9(n.viewCache_)}(JU(r,t,L9(n.pendingWriteTree_,t._path),s?c.getNode():qt.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Vi(r).withIndex(t._queryParams.getIndex());let c;if(yz(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=O4(n.serverSyncTree_,t._path,s);else{const d=P4(n.serverSyncTree_,t);c=nZ(n.serverSyncTree_,t._path,s,d)}return eo(n.eventQueue_,t._path,c),Z9(n.serverSyncTree_,t,e,null,!0),s},r=>(xf(n,"get for query "+(0,H.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Kh(i,new Uo(n._repo,n._path),n._queryParams.getIndex()))}class $4{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new AZ("value",this,new Kh(t.snapshotNode,new Uo(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new DZ(this,t,e):null}matches(t){return t instanceof $4&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tb{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new DZ(this,t,e):null}createEvent(t,e){(0,H.hu)(null!=t.childName,"Child events should have a childName.");const i=Yh(new Uo(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new AZ(t.type,this,new Kh(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof tb&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function q4(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const g=e,w=(y,A)=>{Lz(n._repo,n,d),g(y,A)};w.userCallback=e.userCallback,w.context=e.context,e=w}const c=new Bz(e,s||void 0),d="value"===t?new $4(c):new tb(t,c);return function D2e(n,t,e){let i;i=".info"===on(t._path)?yz(n.infoSyncTree_,t,e):yz(n.serverSyncTree_,t,e),fZ(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>Lz(n._repo,n,d)}function Zz(n,t,e,i){return q4(n,"value",t,e,i)}function SZ(n,t,e,i){return q4(n,"child_added",t,e,i)}function zZ(n,t,e,i){return q4(n,"child_changed",t,e,i)}function NZ(n,t,e,i){return q4(n,"child_moved",t,e,i)}function kZ(n,t,e,i){return q4(n,"child_removed",t,e,i)}function RZ(n,t,e){let i=null;const r=e?new Bz(e):null;"value"===t?i=new $4(r):t&&(i=new tb(t,r)),Lz(n._repo,n,i)}class Wa{}class VZ extends Wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Z1("endAt",this._value,t._path,!0);const e=rz(t._queryParams,this._value,this._key);if(eb(e),uu(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bs(t._repo,t._path,e,t._orderByCalled)}}class U2e extends Wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Z1("endBefore",this._value,t._path,!1);const e=function Jhe(n,t,e){let i;return i=rz(n,t,n.index_===U1||e?e:tu),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(eb(e),uu(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bs(t._repo,t._path,e,t._orderByCalled)}}class LZ extends Wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Z1("startAt",this._value,t._path,!0);const e=iz(t._queryParams,this._value,this._key);if(eb(e),uu(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bs(t._repo,t._path,e,t._orderByCalled)}}class G2e extends Wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Z1("startAfter",this._value,t._path,!1);const e=function Yhe(n,t,e){let i;return i=iz(n,t,n.index_===U1||e?e:vc),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(eb(e),uu(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bs(t._repo,t._path,e,t._orderByCalled)}}class q2e extends Wa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bs(t._repo,t._path,function Whe(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class K2e extends Wa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bs(t._repo,t._path,function Khe(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class J2e extends Wa{constructor(t){super(),this._path=t}_apply(t){X9(t,"orderByChild");const e=new Ln(this._path);if(an(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new ez(e),r=S9(t._queryParams,i);return uu(r),new bs(t._repo,t._path,r,!0)}}class X2e extends Wa{_apply(t){X9(t,"orderByKey");const e=S9(t._queryParams,U1);return uu(e),new bs(t._repo,t._path,e,!0)}}class tfe extends Wa{_apply(t){X9(t,"orderByPriority");const e=S9(t._queryParams,si);return uu(e),new bs(t._repo,t._path,e,!0)}}class ife extends Wa{_apply(t){X9(t,"orderByValue");const e=S9(t._queryParams,tz);return uu(e),new bs(t._repo,t._path,e,!0)}}class sfe extends Wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Z1("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new VZ(this._value,this._key)._apply(new LZ(this._value,this._key)._apply(t))}}function Ka(n,...t){let e=(0,H.m9)(n);for(const i of t)e=i._apply(e);return e}(function Hde(n){(0,H.hu)(!F9,"__referenceConstructor has already been defined"),F9=n})(Uo),function jde(n){(0,H.hu)(!U9,"__referenceConstructor has already been defined"),U9=n}(Uo);const jz={};function PZ(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||B1("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,w,c=Fz(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(g=!0,s=`http://${w}?ns=${d.namespace}`,c=Fz(s,r),d=c.repoInfo):g=!c.repoInfo.secure;const y=r&&g?new A4(A4.OWNER):new ehe(n.name,n.options,t);dZ("Invalid Firebase Database URL",c),an(c.path)||B1("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function ufe(n,t,e,i){let r=jz[t.name];r||(r={},jz[t.name]=r);let s=r[n.toURLString()];return s&&B1("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new m2e(n,false,e,i),r[n.toURLString()]=s,s}(d,n,y,new Xue(n.name,e));return new dfe(A,n)}class dfe{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function w2e(n,t,e){if(n.stats_=GS(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new z9(n.repoInfo_,(i,r,s,c)=>{mZ(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wZ(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new jh(n.repoInfo_,t,(i,r,s,c)=>{mZ(n,i,r,s,c)},i=>{wZ(n,i)},i=>{!function _2e(n,t){Kr(t,(e,i)=>{Rz(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function ihe(n,t){const e=n.toString();return jS[e]||(jS[e]=t()),jS[e]}(n.repoInfo_,()=>new ide(n.stats_,n.server_)),n.infoData_=new Qhe,n.infoSyncTree_=new tZ({startListening:(i,r,s,c)=>{let d=[];const g=n.infoData_.getNode(i._path);return g.isEmpty()||(d=O4(n.infoSyncTree_,i._path,g),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Rz(n,"connected",!1),n.serverSyncTree_=new tZ({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,g)=>{const w=c(d,g);eo(n.eventQueue_,i._path,w)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Uo(this._repo,zn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function cfe(n,t){const e=jz[t];(!e||e[n.key]!==n)&&B1(`Database ${t}(${n.repoInfo_}) has already been deleted.`),bZ(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&B1("Cannot call "+t+" on a deleted database.")}}function HZ(){aU.IS_TRANSPORT_INITIALIZED&&D0("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ffe(){HZ(),nu.forceDisallow()}function gfe(){HZ(),vf.forceDisallow(),nu.forceAllow()}function mfe(n,t){BB(n,t)}const _fe={".sv":"timestamp"};class Cfe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}jh.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},jh.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function wfe(n){LB(Z0.SDK_VERSION),(0,Z0._registerComponent)(new Ua.wA("database",(t,{instanceIdentifier:e})=>PZ(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Z0.registerVersion)(RB,"0.14.4",n),(0,Z0.registerVersion)(RB,"0.14.4","esm2017")}();const Dfe=new Ba.Yd("@firebase/database-compat"),BZ=function(n){Dfe.warn("FIREBASE WARNING: "+n)};class Ife{constructor(t){this._delegate=t}cancel(t){(0,H.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,H.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,H.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,H.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,H.Dv)("OnDisconnect.set",1,2,arguments.length),(0,H.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,H.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,H.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,H.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,BZ("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,H.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class Sfe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,H.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class hu{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,H.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,H.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,H.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,H.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,H.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),j4("DataSnapshot.child","path",t,!1),new hu(this._database,this._delegate.child(t))}hasChild(t){return(0,H.Dv)("DataSnapshot.hasChild",1,1,arguments.length),j4("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,H.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,H.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,H.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new hu(this._database,e)))}hasChildren(){return(0,H.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,H.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,H.Dv)("DataSnapshot.ref",0,0,arguments.length),new to(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class f0{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,H.Dv)("Query.on",2,4,arguments.length),(0,H.Wj)("Query.on","callback",e,!1);const c=f0.getCancelAndContextArgs_("Query.on",i,r),d=(w,y)=>{e.call(c.context,new hu(this.database,w),y)};d.userCallback=e,d.context=c.context;const g=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return Zz(this._delegate,d,g),e;case"child_added":return SZ(this._delegate,d,g),e;case"child_removed":return kZ(this._delegate,d,g),e;case"child_changed":return zZ(this._delegate,d,g),e;case"child_moved":return NZ(this._delegate,d,g),e;default:throw new Error((0,H.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,H.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,H.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,H.Wj)("Query.off","callback",e,!0),(0,H.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,RZ(this._delegate,t,r)}else RZ(this._delegate,t)}get(){return F2e(this._delegate).then(t=>new hu(this.database,t))}once(t,e,i,r){(0,H.Dv)("Query.once",1,4,arguments.length),(0,H.Wj)("Query.once","callback",e,!0);const s=f0.getCancelAndContextArgs_("Query.once",i,r),c=new H.BH,d=(w,y)=>{const A=new hu(this.database,w);e&&e.call(s.context,A,y),c.resolve(A)};d.userCallback=e,d.context=s.context;const g=w=>{s.cancel&&s.cancel.call(s.context,w),c.reject(w)};switch(t){case"value":Zz(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":SZ(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":kZ(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":zZ(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":NZ(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,H.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,H.Dv)("Query.limitToFirst",1,1,arguments.length),new f0(this.database,Ka(this._delegate,function W2e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new q2e(n)}(t)))}limitToLast(t){return(0,H.Dv)("Query.limitToLast",1,1,arguments.length),new f0(this.database,Ka(this._delegate,function Y2e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new K2e(n)}(t)))}orderByChild(t){return(0,H.Dv)("Query.orderByChild",1,1,arguments.length),new f0(this.database,Ka(this._delegate,function Q2e(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return j4("orderByChild","path",n,!1),new J2e(n)}(t)))}orderByKey(){return(0,H.Dv)("Query.orderByKey",0,0,arguments.length),new f0(this.database,Ka(this._delegate,function efe(){return new X2e}()))}orderByPriority(){return(0,H.Dv)("Query.orderByPriority",0,0,arguments.length),new f0(this.database,Ka(this._delegate,function nfe(){return new tfe}()))}orderByValue(){return(0,H.Dv)("Query.orderByValue",0,0,arguments.length),new f0(this.database,Ka(this._delegate,function rfe(){return new ife}()))}startAt(t=null,e){return(0,H.Dv)("Query.startAt",0,2,arguments.length),new f0(this.database,Ka(this._delegate,function j2e(n=null,t){return Z4("startAt","key",t,!0),new LZ(n,t)}(t,e)))}startAfter(t=null,e){return(0,H.Dv)("Query.startAfter",0,2,arguments.length),new f0(this.database,Ka(this._delegate,function $2e(n,t){return Z4("startAfter","key",t,!0),new G2e(n,t)}(t,e)))}endAt(t=null,e){return(0,H.Dv)("Query.endAt",0,2,arguments.length),new f0(this.database,Ka(this._delegate,function B2e(n,t){return Z4("endAt","key",t,!0),new VZ(n,t)}(t,e)))}endBefore(t=null,e){return(0,H.Dv)("Query.endBefore",0,2,arguments.length),new f0(this.database,Ka(this._delegate,function Z2e(n,t){return Z4("endBefore","key",t,!0),new U2e(n,t)}(t,e)))}equalTo(t,e){return(0,H.Dv)("Query.equalTo",1,2,arguments.length),new f0(this.database,Ka(this._delegate,function ofe(n,t){return Z4("equalTo","key",t,!0),new sfe(n,t)}(t,e)))}toString(){return(0,H.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,H.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,H.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof f0))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,H.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,H.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,H.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new to(this.database,new Uo(this._delegate._repo,this._delegate._path))}}class to extends f0{constructor(t,e){super(t,new bs(e._repo,e._path,new I9,!1)),this.database=t,this._delegate=e}getKey(){return(0,H.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,H.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new to(this.database,Yh(this._delegate,t))}getParent(){(0,H.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new to(this.database,t):null}getRoot(){return(0,H.Dv)("Reference.root",0,0,arguments.length),new to(this.database,this._delegate.root)}set(t,e){(0,H.Dv)("Reference.set",1,2,arguments.length),(0,H.Wj)("Reference.set","onComplete",e,!0);const i=Uz(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,H.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,BZ("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Bo("Reference.update",this._delegate._path),(0,H.Wj)("Reference.update","onComplete",e,!0);const i=H2e(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,H.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,H.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function P2e(n,t,e){if(Bo("setWithPriority",n._path),Z1("setWithPriority",t,n._path,!1),kz("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new H.BH;return Vz(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,H.Dv)("Reference.remove",0,1,arguments.length),(0,H.Wj)("Reference.remove","onComplete",t,!0);const e=function L2e(n){return Bo("remove",n._path),Uz(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,H.Dv)("Reference.transaction",1,3,arguments.length),(0,H.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,H.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,H.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Mfe(n,t,e){var i;if(n=(0,H.m9)(n),Bo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new H.BH,d=Zz(n,()=>{});return function E2e(n,t,e,i,r,s){xf(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:PB(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Oz(n,t,void 0);c.currentInputSnapshot=d;const g=c.update(d.val());if(void 0===g)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{U4("transaction failed: Data returned ",g,c.path),c.status=0;const w=$9(n.transactionQueueTree_,t),y=Wh(w)||[];let A;y.push(c),Sz(w,y),"object"==typeof g&&null!==g&&(0,H.r3)(g,".priority")?(A=(0,H.DV)(g,".priority"),(0,H.hu)(B4(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(j9(n.serverSyncTree_,t)||qt.EMPTY_NODE).getPriority().val();const I=G4(n),N=Vi(g,A),Z=Tz(N,d,I);c.currentOutputSnapshotRaw=N,c.currentOutputSnapshotResolved=Z,c.currentWriteId=Y9(n);const J=bz(n.serverSyncTree_,t,Z,c.currentWriteId,c.applyLocally);eo(n.eventQueue_,t,J),J9(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(g,w,y)=>{let A=null;g?s.reject(g):(A=new Kh(y,new Uo(n._repo,n._path),si),s.resolve(new Cfe(w,A)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new Sfe(s.committed,new hu(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,H.Dv)("Reference.setPriority",1,2,arguments.length),(0,H.Wj)("Reference.setPriority","onComplete",e,!0);const i=function O2e(n,t){n=(0,H.m9)(n),Bo("setPriority",n._path),kz("setPriority",t,!1);const e=new H.BH;return Vz(n._repo,Ei(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,H.Dv)("Reference.push",0,2,arguments.length),(0,H.Wj)("Reference.push","onComplete",e,!0);const i=function V2e(n,t){n=(0,H.m9)(n),Bo("push",n._path),Z1("push",t,n._path,!0);const e=vZ(n._repo),i=R2e(e),r=Yh(n,i),s=Yh(n,i);let c;return c=null!=t?Uz(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new to(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new to(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Bo("Reference.onDisconnect",this._delegate._path),new Ife(new TZ(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class W4{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ffe,forceLongPolling:gfe}}useEmulator(t,e,i={}){!function FZ(n,t,e,i={}){(n=(0,H.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&B1("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&B1('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new A4(A4.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,H.Sg)(i.mockUserToken,n.app.options.projectId);s=new A4(c)}!function lfe(n,t,e,i){n.repoInfo_=new US(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,H.Dv)("database.ref",0,1,arguments.length),t instanceof to){const e=IZ(this._delegate,t.toString());return new to(this,e)}{const e=EZ(this._delegate,t);return new to(this,e)}}refFromURL(t){(0,H.Dv)("database.refFromURL",1,1,arguments.length);const i=IZ(this._delegate,t);return new to(this,i)}goOffline(){return(0,H.Dv)("database.goOffline",0,0,arguments.length),function pfe(n){(n=(0,H.m9)(n))._checkNotDeleted("goOffline"),bZ(n._repo)}(this._delegate)}goOnline(){return(0,H.Dv)("database.goOnline",0,0,arguments.length),function vfe(n){(n=(0,H.m9)(n))._checkNotDeleted("goOnline"),function T2e(n){n.persistentConnection_&&n.persistentConnection_.resume(pZ)}(n._repo)}(this._delegate)}}W4.ServerValue={TIMESTAMP:function bfe(){return _fe}(),increment:n=>function yfe(n){return{".sv":{increment:n}}}(n)};var Nfe=Object.freeze({__proto__:null,initStandalone:function zfe({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){LB(e);const c=new Ua.zt("auth-internal",new Ua.H0("database-standalone"));return c.setComponent(new Ua.wA("auth-internal",()=>i,"PRIVATE")),{instance:new W4(PZ(n,c,void 0,t,s),n),namespace:r}}});const kfe=W4.ServerValue;function UZ(n){return null==n}function ZZ(n){return"function"==typeof n.set}function jZ(n,t){return ZZ(t)?t:n.ref(t)}function GZ(n,t){if(function Vfe(n){return"string"==typeof n}(n))return t.stringCase();if(ZZ(n))return t.firebaseCase();if(function Lfe(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function K4(n,t,e="on",i=o3.z){return new Rn.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,ht.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,rS.B)())}function $Z(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function Hfe(n,t){const{payload:e,prevKey:i,key:r}=t,s=$Z(n,r),c=function Pfe(n,t){if(UZ(t))return 0;{const e=$Z(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(g=>{const w={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,w],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(g=>g.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function qZ(n){return(UZ(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function WZ(n,t,e){return function Ofe(n,t,e){return K4(n,"value","once",e).pipe(Ri(i=>{const r=[pt(i)];return t.forEach(s=>r.push(K4(n,s,"on",e))),(0,a9.T)(...r).pipe(uh(Hfe,[]))}),a3())}(n,t=qZ(t),e)}function KZ(n,t,e){const i=(t=qZ(t)).map(r=>K4(n,r,"on",e));return(0,a9.T)(...i)}function YZ(n,t){return function(i,r){return GZ(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function Zfe(n){return function(e){return e?GZ(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function JZ(n,t){return function(){return K4(n,"value","on",t)}}!function Rfe(n){n.INTERNAL.registerComponent(new Ua.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new W4(r,i)},"PUBLIC").setServiceProps({Reference:to,Query:f0,Database:W4,DataSnapshot:hu,enableLogging:mfe,INTERNAL:Nfe,ServerValue:kfe}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(KD.Z);const $fe=new o.OlP("angularfire2.realtimeDatabaseURL"),qfe=new o.OlP("angularfire2.database.use-emulator");let Jh=(()=>{class n{constructor(e,i,r,s,c,d,g,w,y,A,I,N,Z,J,te){this.schedulers=d;const xe=g,ke=(0,Mr.on)(e,c,i);w&&RS(ke,c,y,I,N,Z,A,J),this.database=(0,Mr.cc)(`${ke.name}.database.${r}`,"AngularFireDatabase",ke.name,()=>{const He=c.runOutsideAngular(()=>ke.database(r||void 0));return xe&&He.useEmulator(...xe),He},[xe])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>jZ(this.database,e));let s=r;return i&&(s=i(r)),function jfe(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:YZ(i,"update"),set:YZ(i,"set"),push:r=>i.push(r),remove:Zfe(i),snapshotChanges:r=>WZ(n,r,e).pipe(Sn.iC),stateChanges:r=>KZ(n,r,e).pipe(Sn.iC),auditTrail:r=>function Ffe(n,t,e){return function Ufe(n,t,e){return function Bfe(n,t){return K4(n,"value","on",t).pipe((0,ht.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(b9(t),(0,ht.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(g=>g.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function Fue(n){return(0,Hi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,In.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ht.U)(r=>r.actions))}(n,KZ(n,t).pipe(uh((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Sn.iC),valueChanges:(r,s)=>WZ(n,r,e).pipe((0,ht.U)(d=>d.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),Sn.iC)}}(s,this)}object(e){return function Gfe(n,t){return{query:n,snapshotChanges:()=>JZ(n,t.schedulers.outsideAngular)().pipe(Sn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>JZ(n,t.schedulers.outsideAngular)().pipe(Sn.iC,(0,ht.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>jZ(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Mr.Dh),o.LFG(Mr.xv,8),o.LFG($fe,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Sn.HU),o.LFG(qfe,8),o.LFG(eu,8),o.LFG(ES,8),o.LFG(IS,8),o.LFG(SS,8),o.LFG(zS,8),o.LFG(NS,8),o.LFG(kS,8),o.LFG(b4,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Wfe=(()=>{class n{constructor(){m9.Z.registerVersion("angularfire",Sn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Jh]}),n})(),K0=(()=>{class n{constructor(e,i,r,s,c){this.afs=e,this.afAuth=i,this.router=r,this.ngZone=s,this.db=c,this.loaded=!1,this.afAuth.authState.subscribe(d=>{if(d){this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"));let g={uid:d.uid,email:d.email,displayName:d.displayName,photoURL:d.photoURL,emailVerified:d.emailVerified};this.user=g,this.GetUser(g)}else localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user"))})}get userLoaded(){const e=JSON.parse(localStorage.getItem("user"));return console.log(e),!1!==this.loaded}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return console.log(this.constructor.name+".GoogleAuth()"),this.afAuth.signInWithPopup(new foe.V).then(e=>{this.afAuth.authState.subscribe(i=>{i&&this.router.navigate(["dashboard"])})})}SignIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["dashboard"])})}).catch(r=>{window.alert(r.message)})}SignUp(e,i){return this.afAuth.createUserWithEmailAndPassword(e,i).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}SetUserData(e){return console.log("AuthService.SetUserData()"),this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}GetUser(e){console.log("AuthService.GetUser()"),this.db.list("users",r=>r.orderByChild("uid").equalTo(e.uid)).valueChanges().subscribe(r=>{let s=!1;r.forEach(function(){var c=(0,ie.Z)(function*(d){if(d.email==e.email)return console.log("found user"),e.prefs=d.prefs,e.settings=d.settings,e.loaded=!0,s=!0,e});return function(d){return c.apply(this,arguments)}}()),s||this.createUserDB(),this.loaded=!0})}createUserDB(){var e=this;return(0,ie.Z)(function*(){console.log("AuthService.createUserDB()");let i=e.user.uid,r=e.user;r.prefs=new cL,r.prefs.showAs="poster",r.settings=new lL,r.stats=new goe,console.log(r),e.db.list("users").set(i,r)})()}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(kB),o.LFG(eu),o.LFG(gi),o.LFG(o.R0b),o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ya=(()=>{class n{constructor(e,i,r,s,c){this.authService=e,this.db=i,this.tmdb=r,this.http=s,this.afAuth=c,this.listsLoading=!0,this.moviesLoading=!0,this.$lists=new Rn.y,this.trendingMovies=[],this.topRatedMovies=[],this.popularMovies=[],this.trendingMoviesLoading=!0,this.topRatedMoviesLoading=!0,this.popularMoviesLoading=!0,this.aLists=[],this.aMovies=[],this.cLists=[],this.cMovies=[],this.debug=!1,this.timer={start:Date.now(),stop:null,time:null},console.log("MovieService()");let d=JSON.parse(localStorage.getItem("user"));this.user=d,new Promise(A=>{this.afAuth.authState.subscribe(I=>{A(I),this.debug&&console.log("resolve user"),this.user.uid=I.uid,this.user.email=I.email})}).then(A=>{y()});let w=doe;for(let A=0;A<w.length;A++);let y=()=>{console.log("Preload");for(let A=0;A<20;A++){let N=new Fa({});this.popularMovies.push(N)}for(let A=0;A<20;A++){let N=new Fa({});this.trendingMovies.push(N)}for(let A=0;A<20;A++){let N=new Fa({});this.topRatedMovies.push(N)}};this.timer.stop=Date.now(),this.timer.time=(this.timer.stop-this.timer.start)/1e3,this.debug&&console.log(this.timer)}copyData(e,i,r){var s=this;return(0,ie.Z)(function*(){let c=yield new Promise(d=>{try{s.db.list(e).valueChanges().subscribe(g=>d(g))}catch(g){console.log(g)}});console.log(c);for(const d of c)s.db.list(e+"_"+r).update(d.title.toString(),d)})()}loadHomeMovies(){var e=this;this.loadMoviesTmdb("popular").then(function(){var i=(0,ie.Z)(function*(r){e.popularMovies=r,e.popularMoviesLoading=!1;let s=0;for(const c of r)s+=c.ticker.time});return function(r){return i.apply(this,arguments)}}()),this.loadMoviesTmdb("trending").then(function(){var i=(0,ie.Z)(function*(r){e.trendingMovies=r,e.trendingMoviesLoading=!1});return function(r){return i.apply(this,arguments)}}()),this.loadMoviesTmdb("toprated").then(function(){var i=(0,ie.Z)(function*(r){e.topRatedMovies=r,e.topRatedMoviesLoading=!1});return function(r){return i.apply(this,arguments)}}())}loadMoviesTmdb(e){var i=this;return(0,ie.Z)(function*(){let s,r=1,c=[],d=function(){var g=(0,ie.Z)(function*(){let w,y=[];s="popular"==e?yield i.tmdb.getPopularTmdb(r):"trending"==e?yield i.tmdb.getTrendingMovies(r):"toprated"==e?yield i.tmdb.getTopRatedTmdb(r):null,w=s.results;for(const I of w){let Z,J,N=new Fa(I);i.authService.user&&i.authService.user.settings&&(Z=i.authService.user.settings.ageRating),Z&&(J=yield N.checkRating(Z)),J&&(yield N.init(),yield N.preload(),y.push(N)),i.debug&&console.log("show: "+J+", age: "+Z)}return y});return function(){return g.apply(this,arguments)}}();for(c=yield d();c.length<20&&r<s.total_pages;){r++;let g=yield d();for(let w of g)c.push(w)}return i.debug&&console.log("Found movies: "+c.length),c})()}loadUserMovies(){var e=this;return this.lists=this.db.list("lists_"+this.user.uid,i=>i.orderByChild("title")),this.lists.valueChanges().subscribe(i=>{i.forEach(function(){var r=(0,ie.Z)(function*(s){s.movies=[],"Saved"==s.title&&(s.show=!0,e.cLists.push(s)),e.aLists.push(s)});return function(s){return r.apply(this,arguments)}}())}),this.movies=this.db.list("movies_"+this.user.uid,i=>i.orderByChild("title")),this.movies.valueChanges().subscribe(function(){var i=(0,ie.Z)(function*(r){e.aMovies=[],e.debug&&console.log(r.length);for(const s of r){let c=new Fa(s);e.aMovies.push(c);for(const d of e.aLists)s.lists.includes(d.title)&&d.movies.push(c)}e.cMovies=e.aMovies,e.moviesLoading=!1;for(const s of e.aMovies)s.preload();for(const s of e.aMovies){let c,d;e.authService.user&&e.authService.user.settings&&(c=e.authService.user.settings.ageRating),c&&(d=yield s.checkRating(c)),d&&s.init(),console.log("show: "+d+", age: "+c)}e.debug&&console.log("<ALL LISTS>"),e.debug&&console.log(e.aLists),e.debug&&console.log("<ALL MOVIES>"),e.debug&&console.log(e.aMovies)});return function(r){return i.apply(this,arguments)}}()),!0}loadMovies(){let e=new Promise(i=>{this.db.list("movies_"+this.user.uid,r=>r.orderByChild("title")).valueChanges().subscribe(r=>i(r))});return console.log("obj"),console.log(e),e}loadLists(){let e=new Promise(i=>{this.db.list("lists_"+this.user.uid,r=>r.orderByChild("title")).valueChanges().subscribe(r=>i(r))});return console.log("obj"),console.log(e),e}findItemByName(e){return console.log("name: "+e),new Promise(r=>{this.db.list("movies_"+this.user.uid,s=>s.orderByChild("name").equalTo(e)).valueChanges().subscribe(s=>r(s))})}getItemById(e){return console.log(this.user),this.db.list("movies_"+this.user.uid,i=>i.orderByChild("id").equalTo(e))}findItem(e){return new Promise(r=>{this.db.list("movies_"+this.user.uid,s=>s.orderByChild("name").equalTo(e)).valueChanges().subscribe(s=>r(s))})}setItem(e){var i=this;return(0,ie.Z)(function*(){let r;console.log("setItem"),console.log(e.id),console.log(e),r={id:e.id,saved:!0},null==e.favorite&&(e.favorite=!1),console.log(typeof e.vote),yield i.db.list("movies_"+i.user.uid).update(e.id.toString(),e)})()}addItem(e){var i=this;return(0,ie.Z)(function*(){let r,s=yield i.findItem(e.id);return console.log("returnedItem"),console.log(s),s.length>0?(console.log("FOUND ITEM!!!"),r=400):(console.log("ITEM NOT FOUND!!!"),r=200,i.db.list("movies_"+i.user.uid).update(e.id,e),console.log("Item added")),r})()}deleteItem(e){var i=this;return(0,ie.Z)(function*(){i.db.list("movies_"+i.user.uid).remove(e.id.toString())})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(K0),o.LFG(Jh),o.LFG(Ys),o.LFG(Rd),o.LFG(eu))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Kfe=F(1144);const Yfe=["addListener","removeListener"],Jfe=["addEventListener","removeEventListener"],Qfe=["on","off"];function Y0(n,t,e,i){if((0,Zs.m)(e)&&(i=e,e=void 0),i)return Y0(n,t,e).pipe(yo(i));const[r,s]=function tge(n){return(0,Zs.m)(n.addEventListener)&&(0,Zs.m)(n.removeEventListener)}(n)?Jfe.map(c=>d=>n[c](t,d,e)):function Xfe(n){return(0,Zs.m)(n.addListener)&&(0,Zs.m)(n.removeListener)}(n)?Yfe.map(QZ(n,t)):function ege(n){return(0,Zs.m)(n.on)&&(0,Zs.m)(n.off)}(n)?Qfe.map(QZ(n,t)):[];if(!r&&(0,Kfe.z)(n))return(0,Qi.z)(c=>Y0(c,t,e))((0,lr.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Rn.y(c=>{const d=(...g)=>c.next(1<g.length?g:g[0]);return r(d),()=>s(d)})}function QZ(n,t){return e=>i=>n[e](t,i)}var nge=F(3532);function Gz(n=0,t,e=o3.P){let i=-1;return null!=t&&((0,nge.K)(t)?e=t:i=t),new Rn.y(r=>{let s=function ige(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:rge}=Array;function XZ(n){return 1===n.length&&rge(n[0])?n[0]:n}function ej(...n){return 1===(n=XZ(n)).length?(0,lr.Xf)(n[0]):new Rn.y(function sge(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push((0,lr.Xf)(n[i]).subscribe((0,In.x)(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}(n))}const tj=new Rn.y(_9.Z);function nb(...n){const t=(0,R0.jO)(n),e=XZ(n);return e.length?new Rn.y(i=>{let r=e.map(()=>[]),s=e.map(()=>!1);i.add(()=>{r=s=null});for(let c=0;!i.closed&&c<e.length;c++)(0,lr.Xf)(e[c]).subscribe((0,In.x)(i,d=>{if(r[c].push(d),r.every(g=>g.length)){const g=r.map(w=>w.shift());i.next(t?t(...g):g),r.some((w,y)=>!w.length&&s[y])&&i.complete()}},()=>{s[c]=!0,!r[c].length&&i.complete()}));return()=>{r=s=null}}):ec.E}function Dr(n){return(0,Hi.e)((t,e)=>{(0,lr.Xf)(n).subscribe((0,In.x)(e,()=>e.complete(),_9.Z)),!e.closed&&t.subscribe(e)})}function nj(n,t){return t?e=>jp(t.pipe(Ur(1),function age(){return(0,Hi.e)((n,t)=>{n.subscribe((0,In.x)(t,_9.Z))})}()),e.pipe(nj(n))):(0,Qi.z)((e,i)=>n(e,i).pipe(Ur(1),tV(e)))}function ij(n,t=o3.z){const e=Gz(n,t);return nj(()=>e)}var cge={left:"right",right:"left",bottom:"top",top:"bottom"};function ib(n){return n.replace(/left|right|bottom|top/g,function(t){return cge[t]})}function j1(n){return n.split("-")[0]}var uge={start:"end",end:"start"};function rj(n){return n.replace(/start|end/g,function(t){return uge[t]})}var no="top",Ja="bottom",Qa="right",io="left",$z="auto",Y4=[no,Ja,Qa,io],Df="start",J4="end",sj="viewport",Q4="popper",oj=Y4.reduce(function(n,t){return n.concat([t+"-"+Df,t+"-"+J4])},[]),aj=[].concat(Y4,[$z]).reduce(function(n,t){return n.concat([t,t+"-"+Df,t+"-"+J4])},[]),Cge=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Zo(n){if(null==n)return window;if("[object Window]"!==n.toString()){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Qh(n){return n instanceof Zo(n).Element||n instanceof Element}function jo(n){return n instanceof Zo(n).HTMLElement||n instanceof HTMLElement}function qz(n){return!(typeof ShadowRoot>"u")&&(n instanceof Zo(n).ShadowRoot||n instanceof ShadowRoot)}function du(n){return((Qh(n)?n.ownerDocument:n.document)||window.document).documentElement}var Xh=Math.max,rb=Math.min,Tf=Math.round;function Wz(){var n=navigator.userAgentData;return null!=n&&n.brands?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function lj(){return!/^((?!chrome|android).)*safari/i.test(Wz())}function Ef(n,t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=n.getBoundingClientRect(),r=1,s=1;t&&jo(n)&&(r=n.offsetWidth>0&&Tf(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Tf(i.height)/n.offsetHeight||1);var d=(Qh(n)?Zo(n):window).visualViewport,g=!lj()&&e,w=(i.left+(g&&d?d.offsetLeft:0))/r,y=(i.top+(g&&d?d.offsetTop:0))/s,A=i.width/r,I=i.height/s;return{width:A,height:I,top:y,right:w+A,bottom:y+I,left:w,x:w,y}}function Kz(n){var t=Zo(n);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Yz(n){return Ef(du(n)).left+Kz(n).scrollLeft}function wc(n){return Zo(n).getComputedStyle(n)}function G1(n){return n?(n.nodeName||"").toLowerCase():null}function sb(n){return"html"===G1(n)?n:n.assignedSlot||n.parentNode||(qz(n)?n.host:null)||du(n)}function Jz(n){var t=wc(n);return/auto|scroll|overlay|hidden/.test(t.overflow+t.overflowY+t.overflowX)}function cj(n){return["html","body","#document"].indexOf(G1(n))>=0?n.ownerDocument.body:jo(n)&&Jz(n)?n:cj(sb(n))}function X4(n,t){var e;void 0===t&&(t=[]);var i=cj(n),r=i===(null==(e=n.ownerDocument)?void 0:e.body),s=Zo(i),c=r?[s].concat(s.visualViewport||[],Jz(i)?i:[]):i,d=t.concat(c);return r?d:d.concat(X4(sb(c)))}function Age(n){return["table","td","th"].indexOf(G1(n))>=0}function uj(n){return jo(n)&&"fixed"!==wc(n).position?n.offsetParent:null}function ev(n){for(var t=Zo(n),e=uj(n);e&&Age(e)&&"static"===wc(e).position;)e=uj(e);return e&&("html"===G1(e)||"body"===G1(e)&&"static"===wc(e).position)?t:e||function Dge(n){var t=/firefox/i.test(Wz());if(/Trident/i.test(Wz())&&jo(n)&&"fixed"===wc(n).position)return null;var r=sb(n);for(qz(r)&&(r=r.host);jo(r)&&["html","body"].indexOf(G1(r))<0;){var s=wc(r);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return r;r=r.parentNode}return null}(n)||t}function hj(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&qz(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Qz(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function dj(n,t,e){return t===sj?Qz(function Mge(n,t){var e=Zo(n),i=du(n),r=e.visualViewport,s=i.clientWidth,c=i.clientHeight,d=0,g=0;if(r){s=r.width,c=r.height;var w=lj();(w||!w&&"fixed"===t)&&(d=r.offsetLeft,g=r.offsetTop)}return{width:s,height:c,x:d+Yz(n),y:g}}(n,e)):Qh(t)?function Tge(n,t){var e=Ef(n,!1,"fixed"===t);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}(t,e):Qz(function xge(n){var t,e=du(n),i=Kz(n),r=null==(t=n.ownerDocument)?void 0:t.body,s=Xh(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=Xh(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),d=-i.scrollLeft+Yz(n),g=-i.scrollTop;return"rtl"===wc(r||e).direction&&(d+=Xh(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:c,x:d,y:g}}(du(n)))}function If(n){return n.split("-")[1]}function Xz(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function fj(n){var g,t=n.reference,e=n.element,i=n.placement,r=i?j1(i):null,s=i?If(i):null,c=t.x+t.width/2-e.width/2,d=t.y+t.height/2-e.height/2;switch(r){case no:g={x:c,y:t.y-e.height};break;case Ja:g={x:c,y:t.y+t.height};break;case Qa:g={x:t.x+t.width,y:d};break;case io:g={x:t.x-e.width,y:d};break;default:g={x:t.x,y:t.y}}var w=r?Xz(r):null;if(null!=w){var y="y"===w?"height":"width";switch(s){case Df:g[w]=g[w]-(t[y]/2-e[y]/2);break;case J4:g[w]=g[w]+(t[y]/2-e[y]/2)}}return g}function pj(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function vj(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}function eN(n,t){void 0===t&&(t={});var i=t.placement,r=void 0===i?n.placement:i,s=t.strategy,c=void 0===s?n.strategy:s,d=t.boundary,g=void 0===d?"clippingParents":d,w=t.rootBoundary,y=void 0===w?sj:w,A=t.elementContext,I=void 0===A?Q4:A,N=t.altBoundary,Z=void 0!==N&&N,J=t.padding,te=void 0===J?0:J,xe=pj("number"!=typeof te?te:vj(te,Y4)),He=n.rects.popper,Be=n.elements[Z?I===Q4?"reference":Q4:I],tt=function Ige(n,t,e,i){var r="clippingParents"===t?function Ege(n){var t=X4(sb(n)),i=["absolute","fixed"].indexOf(wc(n).position)>=0&&jo(n)?ev(n):n;return Qh(i)?t.filter(function(r){return Qh(r)&&hj(r,i)&&"body"!==G1(r)}):[]}(n):[].concat(t),s=[].concat(r,[e]),d=s.reduce(function(g,w){var y=dj(n,w,i);return g.top=Xh(y.top,g.top),g.right=rb(y.right,g.right),g.bottom=rb(y.bottom,g.bottom),g.left=Xh(y.left,g.left),g},dj(n,s[0],i));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}(Qh(Be)?Be:Be.contextElement||du(n.elements.popper),g,y,c),at=Ef(n.elements.reference),Ft=fj({reference:at,element:He,strategy:"absolute",placement:r}),Qt=Qz(Object.assign({},He,Ft)),li=I===Q4?Qt:at,Tr={top:tt.top-li.top+xe.top,bottom:li.bottom-tt.bottom+xe.bottom,left:tt.left-li.left+xe.left,right:li.right-tt.right+xe.right},ir=n.modifiersData.offset;if(I===Q4&&ir){var t1=ir[r];Object.keys(Tr).forEach(function(X0){var ad=[Qa,Ja].indexOf(X0)>=0?1:-1,ld=[no,Ja].indexOf(X0)>=0?"y":"x";Tr[X0]+=t1[ld]*ad})}return Tr}const kge={name:"flip",enabled:!0,phase:"main",fn:function Nge(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var r=e.mainAxis,s=void 0===r||r,c=e.altAxis,d=void 0===c||c,g=e.fallbackPlacements,w=e.padding,y=e.boundary,A=e.rootBoundary,I=e.altBoundary,N=e.flipVariations,Z=void 0===N||N,J=e.allowedAutoPlacements,te=t.options.placement,xe=j1(te),He=g||(xe!==te&&Z?function zge(n){if(j1(n)===$z)return[];var t=ib(n);return[rj(n),t,rj(t)]}(te):[ib(te)]),Be=[te].concat(He).reduce(function(Lf,pu){return Lf.concat(j1(pu)===$z?function Sge(n,t){void 0===t&&(t={});var r=t.boundary,s=t.rootBoundary,c=t.padding,d=t.flipVariations,g=t.allowedAutoPlacements,w=void 0===g?aj:g,y=If(t.placement),A=y?d?oj:oj.filter(function(Z){return If(Z)===y}):Y4,I=A.filter(function(Z){return w.indexOf(Z)>=0});0===I.length&&(I=A);var N=I.reduce(function(Z,J){return Z[J]=eN(n,{placement:J,boundary:r,rootBoundary:s,padding:c})[j1(J)],Z},{});return Object.keys(N).sort(function(Z,J){return N[Z]-N[J]})}(t,{placement:pu,boundary:y,rootBoundary:A,padding:w,flipVariations:Z,allowedAutoPlacements:J}):pu)},[]),tt=t.rects.reference,at=t.rects.popper,Ft=new Map,Qt=!0,li=Be[0],Tr=0;Tr<Be.length;Tr++){var ir=Be[Tr],t1=j1(ir),X0=If(ir)===Df,ad=[no,Ja].indexOf(t1)>=0,ld=ad?"width":"height",so=eN(t,{placement:ir,boundary:y,rootBoundary:A,altBoundary:I,padding:w}),n1=ad?X0?Qa:io:X0?Ja:no;tt[ld]>at[ld]&&(n1=ib(n1));var xb=ib(n1),cd=[];if(s&&cd.push(so[t1]<=0),d&&cd.push(so[n1]<=0,so[xb]<=0),cd.every(function(Lf){return Lf})){li=ir,Qt=!1;break}Ft.set(ir,cd)}if(Qt)for(var RN=function(pu){var fv=Be.find(function(Tb){var ud=Ft.get(Tb);if(ud)return ud.slice(0,pu).every(function(VN){return VN})});if(fv)return li=fv,"break"},dv=Z?3:1;dv>0&&"break"!==RN(dv);dv--);t.placement!==li&&(t.modifiersData[i]._skip=!0,t.placement=li,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function tv(n,t,e){return Xh(n,rb(t,e))}function tN(n){var t=Ef(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}const Oge={name:"preventOverflow",enabled:!0,phase:"main",fn:function Lge(n){var t=n.state,e=n.options,i=n.name,r=e.mainAxis,s=void 0===r||r,c=e.altAxis,d=void 0!==c&&c,I=e.tether,N=void 0===I||I,Z=e.tetherOffset,J=void 0===Z?0:Z,te=eN(t,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),xe=j1(t.placement),ke=If(t.placement),He=!ke,Be=Xz(xe),tt=function Rge(n){return"x"===n?"y":"x"}(Be),at=t.modifiersData.popperOffsets,Ft=t.rects.reference,Qt=t.rects.popper,li="function"==typeof J?J(Object.assign({},t.rects,{placement:t.placement})):J,Tr="number"==typeof li?{mainAxis:li,altAxis:li}:Object.assign({mainAxis:0,altAxis:0},li),ir=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,t1={x:0,y:0};if(at){if(s){var X0,ad="y"===Be?no:io,ld="y"===Be?Ja:Qa,so="y"===Be?"height":"width",n1=at[Be],xb=n1+te[ad],cd=n1-te[ld],Ab=N?-Qt[so]/2:0,RN=ke===Df?Ft[so]:Qt[so],dv=ke===Df?-Qt[so]:-Ft[so],Db=t.elements.arrow,Lf=N&&Db?tN(Db):{width:0,height:0},pu=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},fv=pu[ad],Tb=pu[ld],ud=tv(0,Ft[so],Lf[so]),VN=He?Ft[so]/2-Ab-ud-fv-Tr.mainAxis:RN-ud-fv-Tr.mainAxis,S7e=He?-Ft[so]/2+Ab+ud+Tb+Tr.mainAxis:dv+ud+Tb+Tr.mainAxis,LN=t.elements.arrow&&ev(t.elements.arrow),a$=null!=(X0=ir?.[Be])?X0:0,k7e=n1+S7e-a$,l$=tv(N?rb(xb,n1+VN-a$-(LN?"y"===Be?LN.clientTop||0:LN.clientLeft||0:0)):xb,n1,N?Xh(cd,k7e):cd);at[Be]=l$,t1[Be]=l$-n1}if(d){var c$,hd=at[tt],Eb="y"===tt?"height":"width",u$=hd+te["x"===Be?no:io],h$=hd-te["x"===Be?Ja:Qa],ON=-1!==[no,io].indexOf(xe),d$=null!=(c$=ir?.[tt])?c$:0,f$=ON?u$:hd-Ft[Eb]-Qt[Eb]-d$+Tr.altAxis,g$=ON?hd+Ft[Eb]+Qt[Eb]-d$-Tr.altAxis:h$,p$=N&&ON?function Vge(n,t,e){var i=tv(n,t,e);return i>e?e:i}(f$,hd,g$):tv(N?f$:u$,hd,N?g$:h$);at[tt]=p$,t1[tt]=p$-hd}t.modifiersData[i]=t1}},requiresIfExists:["offset"]},Bge={name:"arrow",enabled:!0,phase:"main",fn:function Hge(n){var t,e=n.state,i=n.name,r=n.options,s=e.elements.arrow,c=e.modifiersData.popperOffsets,d=j1(e.placement),g=Xz(d),y=[io,Qa].indexOf(d)>=0?"height":"width";if(s&&c){var A=function(t,e){return pj("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:vj(t,Y4))}(r.padding,e),I=tN(s),N="y"===g?no:io,Z="y"===g?Ja:Qa,J=e.rects.reference[y]+e.rects.reference[g]-c[g]-e.rects.popper[y],te=c[g]-e.rects.reference[g],xe=ev(s),ke=xe?"y"===g?xe.clientHeight||0:xe.clientWidth||0:0,at=ke/2-I[y]/2+(J/2-te/2),Ft=tv(A[N],at,ke-I[y]-A[Z]);e.modifiersData[i]=((t={})[g]=Ft,t.centerOffset=Ft-at,t)}},effect:function Fge(n){var t=n.state,i=n.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=t.elements.popper.querySelector(r))||!hj(t.elements.popper,r)||(t.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Gge(n,t,e){void 0===e&&(e=!1);var i=jo(t),r=jo(t)&&function jge(n){var t=n.getBoundingClientRect(),e=Tf(t.width)/n.offsetWidth||1,i=Tf(t.height)/n.offsetHeight||1;return 1!==e||1!==i}(t),s=du(t),c=Ef(n,r,e),d={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(i||!i&&!e)&&(("body"!==G1(t)||Jz(s))&&(d=function Zge(n){return n!==Zo(n)&&jo(n)?function Uge(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):Kz(n)}(t)),jo(t)?((g=Ef(t,!0)).x+=t.clientLeft,g.y+=t.clientTop):s&&(g.x=Yz(s))),{x:c.left+d.scrollLeft-g.x,y:c.top+d.scrollTop-g.y,width:c.width,height:c.height}}function $ge(n){var t=new Map,e=new Set,i=[];function r(s){e.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(d){if(!e.has(d)){var g=t.get(d);g&&r(g)}}),i.push(s)}return n.forEach(function(s){t.set(s.name,s)}),n.forEach(function(s){e.has(s.name)||r(s)}),i}function Wge(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}var mj={placement:"bottom",modifiers:[],strategy:"absolute"};function wj(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function Yge(n){void 0===n&&(n={});var e=n.defaultModifiers,i=void 0===e?[]:e,r=n.defaultOptions,s=void 0===r?mj:r;return function(d,g,w){void 0===w&&(w=s);var y={placement:"bottom",orderedModifiers:[],options:Object.assign({},mj,s),modifiersData:{},elements:{reference:d,popper:g},attributes:{},styles:{}},A=[],I=!1,N={state:y,setOptions:function(xe){var ke="function"==typeof xe?xe(y.options):xe;J(),y.options=Object.assign({},s,y.options,ke),y.scrollParents={reference:Qh(d)?X4(d):d.contextElement?X4(d.contextElement):[],popper:X4(g)};var He=function qge(n){var t=$ge(n);return Cge.reduce(function(e,i){return e.concat(t.filter(function(r){return r.phase===i}))},[])}(function Kge(n){var t=n.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(i,y.options.modifiers)));return y.orderedModifiers=He.filter(function(ir){return ir.enabled}),function Z(){y.orderedModifiers.forEach(function(te){var ke=te.options,Be=te.effect;if("function"==typeof Be){var tt=Be({state:y,name:te.name,instance:N,options:void 0===ke?{}:ke});A.push(tt||function(){})}})}(),N.update()},forceUpdate:function(){if(!I){var xe=y.elements,ke=xe.reference,He=xe.popper;if(wj(ke,He)){y.rects={reference:Gge(ke,ev(He),"fixed"===y.options.strategy),popper:tN(He)},y.reset=!1,y.placement=y.options.placement,y.orderedModifiers.forEach(function(ir){return y.modifiersData[ir.name]=Object.assign({},ir.data)});for(var tt=0;tt<y.orderedModifiers.length;tt++)if(!0!==y.reset){var at=y.orderedModifiers[tt],Ft=at.fn,Qt=at.options;"function"==typeof Ft&&(y=Ft({state:y,options:void 0===Qt?{}:Qt,name:at.name,instance:N})||y)}else y.reset=!1,tt=-1}}},update:Wge(function(){return new Promise(function(te){N.forceUpdate(),te(y)})}),destroy:function(){J(),I=!0}};if(!wj(d,g))return N;function J(){A.forEach(function(te){return te()}),A=[]}return N.setOptions(w).then(function(te){!I&&w.onFirstUpdate&&w.onFirstUpdate(te)}),N}}var ob={passive:!0};const Qge={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Jge(n){var t=n.state,e=n.instance,i=n.options,r=i.scroll,s=void 0===r||r,c=i.resize,d=void 0===c||c,g=Zo(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&w.forEach(function(y){y.addEventListener("scroll",e.update,ob)}),d&&g.addEventListener("resize",e.update,ob),function(){s&&w.forEach(function(y){y.removeEventListener("scroll",e.update,ob)}),d&&g.removeEventListener("resize",e.update,ob)}},data:{}},epe={name:"popperOffsets",enabled:!0,phase:"read",fn:function Xge(n){var t=n.state;t.modifiersData[n.name]=fj({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var tpe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _j(n){var t,e=n.popper,i=n.popperRect,r=n.placement,s=n.variation,c=n.offsets,d=n.position,g=n.gpuAcceleration,w=n.adaptive,y=n.roundOffsets,A=n.isFixed,I=c.x,N=void 0===I?0:I,Z=c.y,J=void 0===Z?0:Z,te="function"==typeof y?y({x:N,y:J}):{x:N,y:J};N=te.x,J=te.y;var xe=c.hasOwnProperty("x"),ke=c.hasOwnProperty("y"),He=io,Be=no,tt=window;if(w){var at=ev(e),Ft="clientHeight",Qt="clientWidth";at===Zo(e)&&"static"!==wc(at=du(e)).position&&"absolute"===d&&(Ft="scrollHeight",Qt="scrollWidth"),(r===no||(r===io||r===Qa)&&s===J4)&&(Be=Ja,J-=(A&&at===tt&&tt.visualViewport?tt.visualViewport.height:at[Ft])-i.height,J*=g?1:-1),r!==io&&(r!==no&&r!==Ja||s!==J4)||(He=Qa,N-=(A&&at===tt&&tt.visualViewport?tt.visualViewport.width:at[Qt])-i.width,N*=g?1:-1)}var X0,ir=Object.assign({position:d},w&&tpe),t1=!0===y?function npe(n){var e=n.y,r=window.devicePixelRatio||1;return{x:Tf(n.x*r)/r||0,y:Tf(e*r)/r||0}}({x:N,y:J}):{x:N,y:J};return N=t1.x,J=t1.y,Object.assign({},ir,g?((X0={})[Be]=ke?"0":"",X0[He]=xe?"0":"",X0.transform=(tt.devicePixelRatio||1)<=1?"translate("+N+"px, "+J+"px)":"translate3d("+N+"px, "+J+"px, 0)",X0):((t={})[Be]=ke?J+"px":"",t[He]=xe?N+"px":"",t.transform="",t))}const rpe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function ipe(n){var t=n.state,e=n.options,i=e.gpuAcceleration,r=void 0===i||i,s=e.adaptive,c=void 0===s||s,d=e.roundOffsets,g=void 0===d||d,y={placement:j1(t.placement),variation:If(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,_j(Object.assign({},y,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:g})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,_j(Object.assign({},y,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:g})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ape=[Qge,epe,rpe,{name:"applyStyles",enabled:!0,phase:"write",fn:function spe(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!jo(s)||!G1(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(c){var d=r[c];!1===d?s.removeAttribute(c):s.setAttribute(c,!0===d?"":d)}))})},effect:function ope(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},d=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]).reduce(function(g,w){return g[w]="",g},{});!jo(r)||!G1(r)||(Object.assign(r.style,d),Object.keys(s).forEach(function(g){r.removeAttribute(g)}))})}},requires:["computeStyles"]}],lpe=Yge({defaultModifiers:ape});const hpe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function upe(n){var t=n.state,i=n.name,r=n.options.offset,s=void 0===r?[0,0]:r,c=aj.reduce(function(y,A){return y[A]=function cpe(n,t,e){var i=j1(n),r=[io,no].indexOf(i)>=0?-1:1,s="function"==typeof e?e(Object.assign({},t,{placement:n})):e,c=s[0],d=s[1];return c=c||0,d=(d||0)*r,[io,Qa].indexOf(i)>=0?{x:d,y:c}:{x:c,y:d}}(A,t.rects,s),y},{}),d=c[t.placement],w=d.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=d.x,t.modifiersData.popperOffsets.y+=w),t.modifiersData[i]=c}},bj=["*"];function _pe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return c.focus(),o.KtG(c.select(s.id,c.NgbSlideEventSource.INDICATOR))}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw();o.ekj("active",e.id===i.activeId),o.uIk("aria-labelledby","slide-"+e.id)("aria-controls","slide-"+e.id)("aria-selected",e.id===i.activeId)}}function bpe(n,t){}function ype(n,t){if(1&n&&(o.TgZ(0,"div",7)(1,"span",8),o.SDv(2,9),o.qZA(),o.YNc(3,bpe,0,0,"ng-template",10),o.qZA()),2&n){const e=t.$implicit,i=t.index,r=t.count;o.Q6J("id","slide-"+e.id),o.xp6(2),o.pQV(i+1)(r),o.QtT(2),o.xp6(1),o.Q6J("ngTemplateOutlet",e.tplRef)}}function Cpe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.arrowLeft())}),o._UZ(1,"span",12),o.TgZ(2,"span",8),o.SDv(3,13),o.qZA()()}}function Mpe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.arrowRight())}),o._UZ(1,"span",15),o.TgZ(2,"span",8),o.SDv(3,16),o.qZA()()}}const Lpe=["dialog"];function g3e(n,t){if(1&n&&o._uU(0),2&n){const e=o.oxw(2);o.Oqu(e.title)}}function p3e(n,t){}function v3e(n,t){if(1&n&&(o.TgZ(0,"h3",3),o.YNc(1,g3e,1,1,"ng-template",null,4,o.W1O),o.YNc(3,p3e,0,0,"ng-template",5),o.qZA()),2&n){const e=o.MAs(2),i=o.oxw();o.xp6(3),o.Q6J("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function m3e(n,t){1&n&&o._uU(0),2&n&&o.Oqu(100===t.fill?"\u2605":"\u2606")}function w3e(n,t){}function _3e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",2),o._uU(1),o.qZA(),o.TgZ(2,"span",3),o.NdJ("mouseenter",function(){const s=o.CHM(e).index,c=o.oxw();return o.KtG(c.enter(s+1))})("click",function(){const s=o.CHM(e).index,c=o.oxw();return o.KtG(c.handleClick(s+1))}),o.YNc(3,w3e,0,0,"ng-template",4),o.qZA()}if(2&n){const e=t.index,i=o.oxw(),r=o.MAs(1);o.xp6(1),o.hij("(",e<i.nextRate?"*":" ",")"),o.xp6(1),o.Udp("cursor",i.isInteractive()?"pointer":"default"),o.xp6(1),o.Q6J("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||r)("ngTemplateOutletContext",i.contexts[e])}}function iN(n,t,e=0){return Math.max(Math.min(n,t),e)}function rN(n){return"string"==typeof n}function ed(n){return null!=n}function Sf(n){return(n||document.body).getBoundingClientRect()}const Cj={animation:!0,transitionTimerDelayMs:5},N3e=()=>{},{transitionTimerDelayMs:k3e}=Cj,nv=new Map,T0=(n,t,e,i)=>{let r=i.context||{};const s=nv.get(t);if(s)switch(i.runningTransition){case"continue":return ec.E;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),nv.delete(t)}const c=e(t,i.animation,r)||N3e;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>c()),pt(void 0).pipe(function S3e(n){return t=>new Rn.y(e=>t.subscribe({next:c=>n.run(()=>e.next(c)),error:c=>n.run(()=>e.error(c)),complete:()=>n.run(()=>e.complete())}))}(n));const d=new Fi.x,g=new Fi.x,w=d.pipe(function oge(...n){return t=>jp(t,pt(...n))}(!0));nv.set(t,{transition$:d,complete:()=>{g.next(),g.complete()},context:r});const y=function z3e(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const A=Y0(t,"transitionend").pipe(Dr(w),Hn(({target:N})=>N===t));ej(Gz(y+k3e).pipe(Dr(w)),A,g).pipe(Dr(w)).subscribe(()=>{nv.delete(t),n.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()},oN=(n,t,e)=>{let{direction:i,maxHeight:r}=e;const{classList:s}=n;function c(){s.add("collapse"),"show"===i?s.add("show"):s.remove("show")}if(t)return r||(r=function V3e(n){if(typeof navigator>"u")return"0px";const{classList:t}=n,e=t.contains("show");e||t.add("show"),n.style.height="";const i=n.getBoundingClientRect().height+"px";return e||t.remove("show"),i}(n),e.maxHeight=r,n.style.height="show"!==i?r:"0px",s.remove("collapse"),s.remove("collapsing"),s.remove("show"),Sf(n),s.add("collapsing")),n.style.height="show"===i?r:"0px",()=>{c(),s.remove("collapsing"),n.style.height=""};c()};let zf=(()=>{class n{constructor(){this.animation=Cj.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),Ej=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})();var fu=(()=>(function(n){n.START="start",n.END="end"}(fu||(fu={})),fu))();const Ij=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),iv=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},lb=n=>{iv(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},H3e=(n,t,{direction:e})=>{const{classList:i}=n;return t?(Ij(n)?iv(i):(i.add("carousel-item-"+(e===fu.START?"next":"prev")),Sf(n),i.add("carousel-item-"+e)),()=>{lb(i),i.add("active")}):(iv(i),lb(i),void i.add("active"))},F3e=(n,t,{direction:e})=>{const{classList:i}=n;return t?(Ij(n)?iv(i):i.add("carousel-item-"+e),()=>{lb(i),i.remove("active")}):(iv(i),lb(i),void i.remove("active"))};let B3e=(()=>{class n{constructor(e){this._ngbConfig=e,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zf))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U3e=0,cN=(()=>{class n{constructor(e){this.tplRef=e,this.id="ngb-slide-"+U3e++,this.slid=new o.vpe}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"}}),n})(),Sj=(()=>{class n{constructor(e,i,r,s,c){this._platformId=i,this._ngZone=r,this._cd=s,this._container=c,this.NgbSlideEventSource=td,this._destroy$=new Fi.x,this._interval$=new Br(0),this._mouseHover$=new Br(!1),this._focused$=new Br(!1),this._pauseOnHover$=new Br(!1),this._pauseOnFocus$=new Br(!1),this._pause$=new Br(!1),this._wrap$=new Br(!1),this.slide=new o.vpe,this.slid=new o.vpe,this._transitionIds=null,this.animation=e.animation,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.pauseOnFocus=e.pauseOnFocus,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(e){this._pauseOnFocus$.next(e)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(e){this._mouseHover$.next(e)}get mouseHover(){return this._mouseHover$.value}set focused(e){this._focused$.next(e)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(td.ARROW_LEFT)}arrowRight(){this.focus(),this.next(td.ARROW_RIGHT)}ngAfterContentInit(){(function _u(n){return n===a1})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=lw([this.slide.pipe((0,ht.U)(i=>i.current),ch(this.activeId)),this._wrap$,this.slides.changes.pipe(ch(null))]).pipe((0,ht.U)(([i,r])=>{const s=this.slides.toArray(),c=this._getSlideIdxById(i);return r?s.length>1:c<s.length-1}),a3());lw([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,e]).pipe((0,ht.U)(([i,r,s,c,d,g,w])=>i||r&&s||c&&d||!w?0:g),a3(),Ri(i=>i>0?Gz(i,i):tj),Dr(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(td.TIMER)))}),this.slides.changes.pipe(Dr(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(e=>(n=>{nv.get(n)?.complete()})(this._getSlideElement(e))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(Ur(1)).subscribe(()=>{for(const{id:e}of this.slides){const i=this._getSlideElement(e);e===this.activeId?i.classList.add("active"):i.classList.remove("active")}})})}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const e=this._getSlideElement(this.activeId);e&&e.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(e,i){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),i)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),fu.END,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),fu.START,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(e,i,r){const s=this._transitionIds;if(s&&(s[0]!==e||s[1]!==this.activeId))return;let c=this._getSlideById(e);if(c&&c.id!==this.activeId){this._transitionIds=[this.activeId,e],this.slide.emit({prev:this.activeId,current:c.id,direction:i,paused:this._pause$.value,source:r});const d={animation:this.animation,runningTransition:"stop",context:{direction:i}},g=[],w=this._getSlideById(this.activeId);if(w){const N=T0(this._ngZone,this._getSlideElement(w.id),F3e,d);N.subscribe(()=>{w.slid.emit({isShown:!1,direction:i,source:r})}),g.push(N)}const y=this.activeId;this.activeId=c.id;const A=this._getSlideById(this.activeId),I=T0(this._ngZone,this._getSlideElement(c.id),H3e,d);I.subscribe(()=>{A?.slid.emit({isShown:!0,direction:i,source:r})}),g.push(I),nb(...g).pipe(Ur(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:y,current:c.id,direction:i,paused:this._pause$.value,source:r})})}this._cd.markForCheck()}_getSlideEventDirection(e,i){return this._getSlideIdxById(e)>this._getSlideIdxById(i)?fu.END:fu.START}_getSlideById(e){return this.slides.find(i=>i.id===e)||null}_getSlideIdxById(e){const i=this._getSlideById(e);return null!=i?this.slides.toArray().indexOf(i):-1}_getNextSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return r===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[r+1].id}_getPrevSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return 0===r?this.wrap?i[i.length-1].id:i[0].id:i[r-1].id}_getSlideElement(e){return this._container.nativeElement.querySelector(`#slide-${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(B3e),o.Y36(o.Lbi),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,cN,4),2&e){let s;o.iGM(s=o.CRH())&&(i.slides=s)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(e,i){1&e&&o.NdJ("keydown.arrowLeft",function(){return i.keyboard&&i.arrowLeft()})("keydown.arrowRight",function(){return i.keyboard&&i.arrowRight()})("mouseenter",function(){return i.mouseHover=!0})("mouseleave",function(){return i.mouseHover=!1})("focusin",function(){return i.focused=!0})("focusout",function(){return i.focused=!1}),2&e&&(o.uIk("aria-activedescendant","slide-"+i.activeId),o.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],decls:6,vars:6,consts:function(){let t,e,i;return t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous:Previous`,i=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],t,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],i]},template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,_pe,1,5,"button",1),o.qZA(),o.TgZ(2,"div",2),o.YNc(3,ype,4,4,"div",3),o.qZA(),o.YNc(4,Cpe,4,0,"button",4),o.YNc(5,Mpe,4,0,"button",5)),2&e&&(o.ekj("visually-hidden",!i.showNavigationIndicators),o.xp6(1),o.Q6J("ngForOf",i.slides),o.xp6(2),o.Q6J("ngForOf",i.slides),o.xp6(1),o.Q6J("ngIf",i.showNavigationArrows),o.xp6(1),o.Q6J("ngIf",i.showNavigationArrows))},dependencies:[hi,cn,p0],encapsulation:2,changeDetection:0}),n})();var td=(()=>(function(n){n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator"}(td||(td={})),td))();let zj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),Z3e=(()=>{class n{constructor(e){this._ngbConfig=e}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zf))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),j3e=(()=>{class n{constructor(e,i,r){this._element=e,this._zone=r,this.collapsed=!1,this.ngbCollapseChange=new o.vpe,this.shown=new o.vpe,this.hidden=new o.vpe,this.animation=i.animation}ngOnInit(){this._runTransition(this.collapsed,!1)}ngOnChanges({collapsed:e}){e.firstChange||this._runTransitionWithEvents(this.collapsed,this.animation)}toggle(e=this.collapsed){this.collapsed=!e,this.ngbCollapseChange.next(this.collapsed),this._runTransitionWithEvents(this.collapsed,this.animation)}_runTransition(e,i){return T0(this._zone,this._element.nativeElement,oN,{animation:i,runningTransition:"stop",context:{direction:e?"hide":"show"}})}_runTransitionWithEvents(e,i){this._runTransition(e,i).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Z3e),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbCollapse",""]],inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"]},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],features:[o.TTD]}),n})(),Nj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var _i=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(_i||(_i={})),_i))();const cb=(n,t)=>!!t&&t.some(e=>e.contains(n)),kj=(n,t)=>!t||null!=function I3e(n,t){return!t||typeof n.closest>"u"?null:n.closest(t)}(n,t),J3e=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function Rj(n,t,e,i,r,s,c,d){e&&n.runOutsideAngular((n=>J3e?()=>setTimeout(()=>n(),100):n)(()=>{const w=Y0(t,"keydown").pipe(Dr(r),Hn(I=>I.which===_i.Escape),(0,Cr.b)(I=>I.preventDefault())),y=Y0(t,"mousedown").pipe((0,ht.U)(I=>{const N=I.target;return 2!==I.button&&!cb(N,c)&&("inside"===e?cb(N,s)&&kj(N,d):"outside"===e?!cb(N,s):kj(N,d)||!cb(N,s))}),Dr(r)),A=Y0(t,"mouseup").pipe(b9(y),Hn(([I,N])=>N),ij(0),Dr(r));ej([w.pipe((0,ht.U)(I=>0)),A.pipe((0,ht.U)(I=>1))]).subscribe(I=>n.run(()=>i(I)))}))}const Vj=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Lj(n){const t=Array.from(n.querySelectorAll(Vj)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}const e4e=/\s+/,t4e=/  +/gi,n4e=/^start/,i4e=/^end/,r4e=/-(top|left)$/,s4e=/-(bottom|right)$/,a4e=/^left/,l4e=/^right/,c4e=/^start/,u4e=/^end/;function Oj({placement:n,baseClass:t}){let e=Array.isArray(n)?n:n.split(e4e),r=e.findIndex(g=>"auto"===g);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(g){null==e.find(w=>-1!==w.search("^"+g))&&e.splice(r++,1,g)});const s=e.map(g=>function o4e(n){return n.replace(n4e,"left").replace(i4e,"right").replace(r4e,"-start").replace(s4e,"-end")}(g));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:g}){const w=new RegExp(t+"(-[a-z]+)*","gi"),y=g.elements.popper,A=g.placement;let I=y.className;I=I.replace(w,""),I+=` ${function h4e(n,t){let[e,i]=t.split("-");const r=e.replace(a4e,"start").replace(l4e,"end");let s=[r];if(i){let c=i;("left"===e||"right"===e)&&(c=c.replace(c4e,"top").replace(u4e,"bottom")),s.push(`${r}-${c}`)}return n&&(s=s.map(c=>`${n}-${c}`)),s.join(" ")}(t,A)}`,I=I.trim().replace(t4e," "),y.className=I}},kge,Oge,Bge,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Pj(n){return n}function Hj(){let n=null;return{createPopper(t){if(!n){let i=(t.updatePopperOptions||Pj)(Oj(t));n=lpe(t.hostElement,t.targetElement,i)}},update(){n&&n.update()},setOptions(t){if(n){let i=(t.updatePopperOptions||Pj)(Oj(t));n.setOptions(i)}},destroy(){n&&(n.destroy(),n=null)}}}function Fj(n){return t=>(t.modifiers.push(hpe,{name:"offset",options:{offset:()=>n}}),t)}new Date(1882,10,12),new Date(2174,10,25);let $j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr,Pb]}),n})(),b4e=(()=>{class n{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),gN=(()=>{class n{constructor(e,i){this.elementRef=e,this._renderer=i,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(e,i){2&e&&(o.Ikx("tabIndex",i.disabled?-1:0),o.ekj("disabled",i.disabled))},inputs:{disabled:"disabled"}}),n})(),pN=(()=>{class n{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(o.Y36((0,o.Gpc)(()=>ov)),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,gN,4),2&e){let s;o.iGM(s=o.CRH())&&(i.menuItems=s)}},hostVars:4,hostBindings:function(e,i){1&e&&o.NdJ("keydown.ArrowUp",function(s){return i.dropdown.onKeyDown(s)})("keydown.ArrowDown",function(s){return i.dropdown.onKeyDown(s)})("keydown.Home",function(s){return i.dropdown.onKeyDown(s)})("keydown.End",function(s){return i.dropdown.onKeyDown(s)})("keydown.Enter",function(s){return i.dropdown.onKeyDown(s)})("keydown.Space",function(s){return i.dropdown.onKeyDown(s)})("keydown.Tab",function(s){return i.dropdown.onKeyDown(s)})("keydown.Shift.Tab",function(s){return i.dropdown.onKeyDown(s)}),2&e&&o.ekj("dropdown-menu",!0)("show",i.dropdown.isOpen())}}),n})(),fb=(()=>{class n{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(o.Y36((0,o.Gpc)(()=>ov)),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("aria-expanded",i.dropdown.isOpen())}}),n})(),qj=(()=>{class n extends fb{constructor(e,i){super(e,i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36((0,o.Gpc)(()=>ov)),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(s){return i.dropdown.onKeyDown(s)})("keydown.ArrowDown",function(s){return i.dropdown.onKeyDown(s)})("keydown.Home",function(s){return i.dropdown.onKeyDown(s)})("keydown.End",function(s){return i.dropdown.onKeyDown(s)})("keydown.Tab",function(s){return i.dropdown.onKeyDown(s)})("keydown.Shift.Tab",function(s){return i.dropdown.onKeyDown(s)}),2&e&&o.uIk("aria-expanded",i.dropdown.isOpen())},features:[o._Bn([{provide:fb,useExisting:(0,o.Gpc)(()=>n)}]),o.qOj]}),n})(),ov=(()=>{class n{constructor(e,i,r,s,c,d,g){this._changeDetector=e,this._document=r,this._ngZone=s,this._elementRef=c,this._renderer=d,this._destroyCloseHandlers$=new Fi.x,this._bodyContainer=null,this._positioning=Hj(),this._open=!1,this.openChange=new o.vpe,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=g?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe(Ur(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}e.autoClose&&this._open&&(this.autoClose=e.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:Fj([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),Rj(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let s=-1,c=null;const d=this._isEventFromToggle(e);if(!d&&r.length&&r.forEach((g,w)=>{g.contains(e.target)&&(c=g),g===this._document.activeElement&&(s=w)}),i!==_i.Space&&i!==_i.Enter){if(i!==_i.Tab){if(d||c){if(this.open(),r.length){switch(i){case _i.ArrowDown:s=Math.min(s+1,r.length-1);break;case _i.ArrowUp:if(this._isDropup()&&-1===s){s=r.length-1;break}s=Math.max(s-1,0);break;case _i.Home:s=0;break;case _i.End:s=r.length-1}r[s].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const g=this._menu.nativeElement.querySelectorAll(Vj);e.shiftKey&&e.target===g[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===g[g.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Y0(e.target,"focusout").pipe(Ur(1)).subscribe(({relatedTarget:g})=>{this._elementRef.nativeElement.contains(g)||this.close()})}}else c&&(!0===this.autoClose||"inside"===this.autoClose)&&Y0(c,"click").pipe(Ur(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,s=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(s,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(s,"z-index","1055"),i.appendChild(s,r),i.appendChild(this._document.body,s)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,s=this._elementRef.nativeElement;r.removeClass(s,"dropup"),r.removeClass(s,"dropdown");const{nativeElement:c}=i;"static"===this.display?(i.placement=null,r.setAttribute(c,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(c,"data-bs-popper"));const d=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(s,d);const g=this._bodyContainer;g&&(r.removeClass(g,"dropup"),r.removeClass(g,"dropdown"),r.addClass(g,d))}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36(b4e),o.Y36(ve),o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(fN,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,pN,5),o.Suo(r,fb,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._menu=s.first),o.iGM(s=o.CRH())&&(i._anchor=s.first)}},hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[o.TTD]}),n})(),Wj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class rd{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}class y4e{constructor(t,e,i,r,s,c){this._componentType=t,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=s,this._applicationRef=c,this._windowRef=null,this._contentRef=null}open(t,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,s=this._ngZone.onStable.pipe(Ur(1),(0,Qi.z)(()=>T0(this._ngZone,r,({classList:c})=>c.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(t=!1){return this._windowRef?T0(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:t,runningTransition:"stop"}).pipe((0,Cr.b)(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):pt(void 0)}_getContentRef(t,e){if(t){if(t instanceof o.Rgc){const i=t.createEmbeddedView(e);return this._applicationRef.attachView(i),new rd([i.rootNodes],i)}return new rd([[this._renderer.createText(`${t}`)]])}return new rd([])}}let C4e=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Ur(1)).subscribe(()=>{T0(this._zone,this._el.nativeElement,(e,i)=>{i&&Sf(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return T0(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(o.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),o.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class Kj{close(t){}dismiss(t){}}class M4e{constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Fi.x,this._dismissed=new Fi.x,this._hidden=new Fi.x,t.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Dr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Dr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function yj(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():pt(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),nb(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var av=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(av||(av={})),av))();let x4e=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new Fi.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new o.vpe,this.shown=new Fi.x,this.hidden=new Fi.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":rN(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Ur(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},c=nb(T0(this._zone,e,()=>e.classList.remove("show"),i),T0(this._zone,this._dialogEl.nativeElement,()=>{},i));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const e={animation:this.animation,runningTransition:"continue"};nb(T0(this._zone,this._elRef.nativeElement,(s,c)=>{c&&Sf(s),s.classList.add("show")},e),T0(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Y0(e,"keydown").pipe(Dr(this._closed$),Hn(r=>r.which===_i.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(av.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Y0(this._dialogEl.nativeElement,"mousedown").pipe(Dr(this._closed$),(0,Cr.b)(()=>i=!1),Ri(()=>Y0(e,"mouseup").pipe(Dr(this._closed$),Ur(1))),Hn(({target:r})=>e===r)).subscribe(()=>{i=!0}),Y0(e,"click").pipe(Dr(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(av.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=Lj(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&T0(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ve),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&o.Gf(Lpe,7),2&e){let r;o.iGM(r=o.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),o.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),o.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:bj,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0,1)(2,"div",2),o.Hsn(3),o.qZA()()),2&e&&o.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),A4e=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:c}=r;if(e>0){const d=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${d+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=c),r.overflow=s}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D4e=(()=>{class n{constructor(e,i,r,s,c,d){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=s,this._rendererFactory=c,this._ngZone=d,this._activeWindowCmptHasChanged=new Fi.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new o.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const g=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Y0(t,"focusin").pipe(Dr(e),(0,ht.U)(s=>s.target));Y0(t,"keydown").pipe(Dr(e),Hn(s=>s.which===_i.Tab),b9(r)).subscribe(([s,c])=>{const[d,g]=Lj(t);(c===d||c===t)&&s.shiftKey&&(g.focus(),s.preventDefault()),c===g&&!s.shiftKey&&(d.focus(),s.preventDefault())}),i&&Y0(t,"click").pipe(Dr(e),b9(r),(0,ht.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,g.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(g.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const s=r.container instanceof HTMLElement?r.container:ed(r.container)?this._document.querySelector(r.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const d=new Kj,g=this._getContentRef(r.injector||e,i,d,r);let w=!1!==r.backdrop?this._attachBackdrop(s):void 0,y=this._attachWindowComponent(s,g.nodes),A=new M4e(y,g,w,r.beforeDismiss);return this._registerModalRef(A),this._registerWindowCmpt(y),A.hidden.pipe(Ur(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=I=>{A.close(I)},d.dismiss=I=>{A.dismiss(I)},this._applyWindowOptions(y.instance,r),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),w&&w.instance&&(this._applyBackdropOptions(w.instance,r),w.changeDetectorRef.detectChanges()),y.changeDetectorRef.detectChanges(),A}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=(0,o.LMc)(C4e,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=(0,o.LMc)(x4e,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{ed(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{ed(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,s){return i?i instanceof o.Rgc?this._createFromTemplateRef(i,r):rN(i)?this._createFromString(i):this._createFromComponent(e,i,r,s):new rd([])}_createFromTemplateRef(e,i){const s=e.createEmbeddedView({$implicit:i,close(c){i.close(c)},dismiss(c){i.dismiss(c)}});return this._applicationRef.attachView(s),new rd([s.rootNodes],s)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new rd([[i]])}_createFromComponent(e,i,r,s){const c=o.zs3.create({providers:[{provide:Kj,useValue:r}],parent:e}),d=(0,o.LMc)(i,{environmentInjector:this._applicationRef.injector,elementInjector:c}),g=d.location.nativeElement;return s.scrollable&&g.classList.add("component-host-scrollable"),this._applicationRef.attachView(d.hostView),new rd([[g]],d.hostView,d)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.z2F),o.LFG(o.zs3),o.LFG(ve),o.LFG(A4e),o.LFG(o.FYo),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T4e=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zf))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vN=(()=>{class n{constructor(e,i,r){this._injector=e,this._modalStack=i,this._config=r}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(D4e),o.LFG(T4e))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[vN]}),n})(),eG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),lG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})();class k4e{constructor(t,e){this.open=t,this.close=e,e||(this.close=t)}isManual(){return"manual"===this.open||"manual"===this.close}}const R4e={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},cG=n=>n>0?ij(n):t=>t;let H4e=(()=>{class n{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zf))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F4e=0,B4e=(()=>{class n{isTitleTemplate(){return this.title instanceof o.Rgc}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(o.Ikx("id",i.id),o.Tol("popover"+(i.popoverClass?" "+i.popoverClass:"")),o.ekj("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:bj,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.F$t(),o._UZ(0,"div",0),o.YNc(1,v3e,4,2,"h3",1),o.TgZ(2,"div",2),o.Hsn(3),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.title))},dependencies:[cn,p0],encapsulation:2,changeDetection:0}),n})(),uG=(()=>{class n{constructor(e,i,r,s,c,d,g,w,y){this._elementRef=e,this._renderer=i,this._ngZone=d,this._document=g,this._changeDetector=w,this.shown=new o.vpe,this.hidden=new o.vpe,this._ngbPopoverWindowId="ngb-popover-"+F4e++,this._windowRef=null,this._positioning=Hj(),this.animation=c.animation,this.autoClose=c.autoClose,this.placement=c.placement,this.triggers=c.triggers,this.container=c.container,this.disablePopover=c.disablePopover,this.popoverClass=c.popoverClass,this.openDelay=c.openDelay,this.closeDelay=c.closeDelay,this._popupService=new y4e(B4e,r,s,i,this._ngZone,y)}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",e),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:Fj([0,8])}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),Rj(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(e=this.animation){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(e).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function P4e(n,t,e,i,r,s,c=0,d=0){const g=function V4e(n,t=R4e){const e=(n||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(s=>s.split(":")).map(s=>{let c=t[s[0]]||s;return new k4e(c[0],c[1])}),r=i.filter(s=>s.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===g.length&&g[0].isManual())return()=>{};const w=function L4e(n,t,e,i){return new Rn.y(r=>{const s=[],c=()=>r.next(!0),d=()=>r.next(!1),g=()=>r.next(!i());return e.forEach(w=>{w.open===w.close?s.push(n.listen(t,w.open,g)):s.push(n.listen(t,w.open,c),n.listen(t,w.close,d))}),()=>{s.forEach(w=>w())}})}(n,t,g,i).pipe(function O4e(n,t,e){return i=>{let r=null;const s=i.pipe((0,ht.U)(g=>({open:g})),Hn(g=>{const w=e();return w===g.open||r&&r.open!==w?(r&&r.open!==g.open&&(r=null),!1):(r=g,!0)}),(0,rS.B)()),c=s.pipe(Hn(g=>g.open),cG(n)),d=s.pipe(Hn(g=>!g.open),cG(t));return(0,a9.T)(c,d).pipe(Hn(g=>g===r&&(r=null,g.open!==e())),(0,ht.U)(g=>g.open))}}(c,d,i)).subscribe(y=>y?r():s());return()=>w.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:s}){s&&this.isOpen()&&(this._windowRef.instance.popoverClass=s.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.zs3),o.Y36(o.s_b),o.Y36(H4e),o.Y36(o.R0b),o.Y36(ve),o.Y36(o.sBO),o.Y36(o.z2F))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[o.TTD]}),n})(),hG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),dG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),U4e=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Z4e=(()=>{class n{constructor(e,i){this._changeDetectorRef=i,this.contexts=[],this.disabled=!1,this.hover=new o.vpe,this.leave=new o.vpe,this.rateChange=new o.vpe(!0),this.onChange=r=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case _i.ArrowDown:case _i.ArrowLeft:this.update(this.rate-1);break;case _i.ArrowUp:case _i.ArrowRight:this.update(this.rate+1);break;case _i.Home:this.update(0);break;case _i.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate),e.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,i=!0){const r=iN(e,this.max,0);this.isInteractive()&&this.rate!==r&&(this.rate=r,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((i,r)=>i.fill=Math.round(100*iN(e-r,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(e,i)=>({fill:0,index:i}))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(U4e),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,o.Rgc,5),2&e){let s;o.iGM(s=o.CRH())&&(i.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,i){1&e&&o.NdJ("blur",function(){return i.handleBlur()})("keydown",function(s){return i.handleKeyDown(s)})("mouseleave",function(){return i.reset()}),2&e&&(o.Ikx("tabindex",i.disabled?-1:0),o.uIk("aria-valuemax",i.max)("aria-valuenow",i.nextRate)("aria-valuetext",i.ariaValueText())("aria-disabled",!!i.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[o._Bn([{provide:ur,useExisting:(0,o.Gpc)(()=>n),multi:!0}]),o.TTD],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.YNc(0,m3e,1,1,"ng-template",null,0,o.W1O),o.YNc(2,_3e,4,5,"ng-template",1)),2&e&&(o.xp6(2),o.Q6J("ngForOf",i.contexts))},dependencies:[hi,p0],encapsulation:2,changeDetection:0}),n})(),fG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),gG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),pG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),vG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();new o.OlP("live announcer delay",{providedIn:"root",factory:function $4e(){return 100}});let mG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wr]}),n})(),wG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const q4e=[Tj,Ej,zj,Nj,$j,Wj,Yj,eG,wG,lG,hG,dG,fG,gG,pG,vG,mG];let W4e=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[q4e,Tj,Ej,zj,Nj,$j,Wj,Yj,eG,wG,lG,hG,dG,fG,gG,pG,vG,mG]}),n})();function K4e(n,t){if(1&n&&(o.TgZ(0,"div",2),o._UZ(1,"div",3),o.TgZ(2,"h6",4),o._uU(3),o.qZA()()),2&n){const e=o.oxw();o.xp6(3),o.hij(" LOADING MOVIES (",e.ms.popularMovies.length,")")}}function Y4e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",16),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw(2).$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function J4e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",17),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw(2).$implicit;o.MGl("routerLink","/movie/",e.id,""),o.Q6J("src",e.base_url+"original"+e.backdrop_path,o.LSH)}}function Q4e(n,t){if(1&n&&(o.TgZ(0,"div",18)(1,"h3"),o._uU(2),o.qZA(),o.TgZ(3,"p",19),o._uU(4),o.qZA()()),2&n){const e=o.oxw(2).$implicit;o.xp6(2),o.Oqu(e.title),o.xp6(2),o.Oqu(e.overview)}}function X4e(n,t){if(1&n&&(o.TgZ(0,"div",12),o.YNc(1,Y4e,1,1,"img",13),o.YNc(2,J4e,1,2,"img",14),o.qZA(),o.YNc(3,Q4e,5,2,"div",15)),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",e.backdrop_loading),o.xp6(1),o.Q6J("ngIf",!e.backdrop_loading),o.xp6(1),o.Q6J("ngIf",!e.backdrop_loading)}}function eve(n,t){1&n&&o.YNc(0,X4e,4,3,"ng-template",11)}function tve(n,t){1&n&&o._UZ(0,"img",23)}function nve(n,t){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,tve,1,0,"img",22),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",e.poster_loading)}}function ive(n,t){1&n&&o._UZ(0,"img",23)}function rve(n,t){if(1&n&&o._UZ(0,"img",25),2&n){const e=o.oxw(2).$implicit;o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function sve(n,t){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,ive,1,0,"img",22),o.YNc(2,rve,1,1,"img",24),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function ove(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",20),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.ms.cMovie=s)}),o.YNc(1,nve,2,1,"div",21),o.YNc(2,sve,3,2,"div",21),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(1),o.Q6J("ngIf",!e.loading)}}function ave(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"h4",5),o._uU(2,"Popular movies"),o.qZA(),o._UZ(3,"div",6),o.TgZ(4,"div",7)(5,"ngb-carousel"),o.YNc(6,eve,1,0,null,8),o.ALo(7,"slice"),o.qZA()(),o._UZ(8,"div",6),o.TgZ(9,"div",9),o.YNc(10,ove,3,3,"div",10),o.ALo(11,"slice"),o.qZA()()),2&n){const e=o.oxw();o.xp6(6),o.Q6J("ngForOf",o.Dn7(7,2,e.ms.popularMovies,0,5)),o.xp6(4),o.Q6J("ngForOf",o.Dn7(11,6,e.ms.popularMovies,5,17))}}function lve(n,t){if(1&n&&(o.TgZ(0,"div",2),o._UZ(1,"div",3),o.TgZ(2,"h6",4),o._uU(3),o.qZA()()),2&n){const e=o.oxw();o.xp6(3),o.hij(" LOADING MOVIES (",e.ms.trendingMovies.length,")")}}function cve(n,t){1&n&&o._UZ(0,"img",23)}function uve(n,t){if(1&n&&o._UZ(0,"img",25),2&n){const e=o.oxw().$implicit;o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function hve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",27),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.ms.cMovie=s)}),o.YNc(1,cve,1,0,"img",22),o.YNc(2,uve,1,1,"img",24),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function dve(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"h4",5),o._uU(2,"Trending movies"),o.qZA(),o.YNc(3,hve,3,3,"div",26),o.ALo(4,"slice"),o.qZA()),2&n){const e=o.oxw();o.xp6(3),o.Q6J("ngForOf",o.Dn7(4,1,e.ms.trendingMovies,0,4))}}function fve(n,t){if(1&n&&(o.TgZ(0,"div",2),o._UZ(1,"div",3),o.TgZ(2,"h6",4),o._uU(3),o.qZA()()),2&n){const e=o.oxw();o.xp6(3),o.hij(" LOADING MOVIES (",e.ms.topRatedMovies.length,")")}}function gve(n,t){1&n&&o._UZ(0,"img",23)}function pve(n,t){if(1&n&&o._UZ(0,"img",25),2&n){const e=o.oxw().$implicit;o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function vve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",29),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.ms.cMovie=s)}),o.YNc(1,gve,1,0,"img",22),o.YNc(2,pve,1,1,"img",24),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function mve(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"h4",5),o._uU(2,"Top rated movies"),o.qZA(),o.YNc(3,vve,3,3,"div",28),o.ALo(4,"slice"),o.qZA()),2&n){const e=o.oxw();o.xp6(3),o.Q6J("ngForOf",o.Dn7(4,1,e.ms.topRatedMovies,0,20))}}let _G=(()=>{class n{constructor(e,i,r,s,c){this.hs=e,this.ms=i,this.tmdb=r,this.afAuth=s,this.authService=c,this.title="Home",this.debug=!0}ngOnInit(){console.log(this.authService.userLoaded),this.ms.loadHomeMovies()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(coe),o.Y36(Ya),o.Y36(Ys),o.Y36(eu),o.Y36(K0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["home-component"]],decls:7,vars:6,consts:[[1,"container-fluid"],["class","row mb-4",4,"ngIf"],[1,"row","mb-4"],[1,"col-w100","p-4","m-4"],[1,"col-auto","mx-auto","align-middle"],[1,"col-12"],[1,"d-none","d-sm-none","d-md-none","d-lg-none","d-xl-none"],[1,"col-12","col-sm-12","col-md-8","col-lg-8","m-auto"],[4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-4","col-lg-4","m-auto"],["class","col-4 col-sm-3 col-md-3 col-lg-3 btn p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],["ngbSlide",""],[1,"picsum-img-wrapper"],["class","btn img-fluid rounded p-0 m-0","src","https://via.placeholder.com/1280x720?text=LOADING","alt","",3,"routerLink","click",4,"ngIf"],["class","btn img-fluid rounded p-0 m-0","alt","",3,"src","routerLink","click",4,"ngIf"],["class","carousel-caption",4,"ngIf"],["src","https://via.placeholder.com/1280x720?text=LOADING","alt","",1,"btn","img-fluid","rounded","p-0","m-0",3,"routerLink","click"],["alt","",1,"btn","img-fluid","rounded","p-0","m-0",3,"src","routerLink","click"],[1,"carousel-caption"],[1,"d-none","d-sm-none","d-md-none","d-lg-none","d-xl-block"],[1,"col-4","col-sm-3","col-md-3","col-lg-3","btn","p-0","m-0",3,"routerLink","click"],[4,"ngIf"],["class","img-fluid rounded p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING","alt","",4,"ngIf"],["src","https://via.placeholder.com/200x300?text=LOADING","alt","",1,"img-fluid","rounded","p-0","m-0"],["class","img-fluid rounded p-0 m-0","alt","",3,"src",4,"ngIf"],["alt","",1,"img-fluid","rounded","p-0","m-0",3,"src"],["class","col-6 col-sm-3 btn p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"col-6","col-sm-3","btn","p-0","m-0",3,"routerLink","click"],["class","col-4 col-sm-3 col-md-2 col-lg-2 btn p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"col-4","col-sm-3","col-md-2","col-lg-2","btn","p-0","m-0",3,"routerLink","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,K4e,4,1,"div",1),o.YNc(2,ave,12,10,"div",1),o.YNc(3,lve,4,1,"div",1),o.YNc(4,dve,5,5,"div",1),o.YNc(5,fve,4,1,"div",1),o.YNc(6,mve,5,5,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",!i.ms.popularMovies),o.xp6(1),o.Q6J("ngIf",i.ms.popularMovies),o.xp6(1),o.Q6J("ngIf",!i.ms.trendingMovies),o.xp6(1),o.Q6J("ngIf",i.ms.trendingMovies),o.xp6(1),o.Q6J("ngIf",!i.ms.topRatedMovies),o.xp6(1),o.Q6J("ngIf",i.ms.topRatedMovies))},dependencies:[z1,Sj,cN,hi,cn,Qo],encapsulation:2}),n})(),gb=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wve{constructor(t){this.options=[],this.show=!1,this.disabled=!1,this.active=!1,this.genres=[],this.keywords=[],this.votes=[],this.runtimes=[],this.providers=[],this.favorite=!1,this.watch=!1,this.min=0,this.max=10,this.debug=!1,this.show=!0,this.id=t.id,this.type=t.type,this.ms=t.ms,this.filterIsAdd=t.filterIsAdd,this.add(),this.debug&&console.log(this)}reset(){this.min=0,this.max=10;for(const t of this.options)t.active=!1;this.genres=[],this.keywords=[],this.votes=[],this.runtimes=[],this.providers=[],this.options=[],this.show=!1,this.active=!1,this.add()}update(){}add(){let t,e,i;("genre"==this.type||"keyword"==this.type)&&(t=this.type+"s",e=this.type+"s",i="name"),"provider"==this.type&&(t=this.type+"s",e="flatrate",i="provider_name"),this[t]=[],this.options=[];for(const c of this.ms.aMovies)if(this.isIterable(c[e]))for(const d of c[e])this[t].push(d);const r=i,s=[...new Map(this[t].map(c=>[c[r],c])).values()];this[t]=s,this.sortArrayBy(this[t],i,!1);for(const c of this[t])this.options.push(c)}sortArrayBy(t,e,i){t.sort((r,s)=>{if(r[e]<s[e]){let c=-1;return i&&(c=1),c}if(r[e]>s[e]){let c=1;return i&&(c=-1),c}return 0})}isIterable(t){return null!=t&&"function"==typeof t[Symbol.iterator]}}function _ve(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function bve(n,t){if(1&n&&(o.TgZ(0,"button",26),o.YNc(1,_ve,2,0,"div",27),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title)}}function yve(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function Cve(n,t){if(1&n&&(o.TgZ(0,"button",28),o.YNc(1,yve,2,0,"div",27),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title)}}function Mve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",23),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.addList(s))}),o.YNc(1,bve,2,1,"button",24),o.YNc(2,Cve,2,1,"button",25),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.show&&"Saved"==e.title),o.xp6(1),o.Q6J("ngIf",!e.show&&"Saved"==e.title)}}function xve(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function Ave(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.title)}}function Dve(n,t){if(1&n&&(o.TgZ(0,"button",30),o.YNc(1,xve,2,0,"div",27),o.YNc(2,Ave,2,1,"div",27),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title),o.xp6(1),o.Q6J("ngIf","Saved"!=e.title)}}function Tve(n,t){1&n&&(o.TgZ(0,"div"),o._uU(1,"All"),o.qZA())}function Eve(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.title)}}function Ive(n,t){if(1&n&&(o.TgZ(0,"button",28),o.YNc(1,Tve,2,0,"div",27),o.YNc(2,Eve,2,1,"div",27),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf","Saved"==e.title),o.xp6(1),o.Q6J("ngIf","Saved"!=e.title)}}function Sve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",23),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.addList(s))}),o.YNc(1,Dve,3,2,"button",29),o.YNc(2,Ive,3,2,"button",25),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.show&&"Saved"!=e.title),o.xp6(1),o.Q6J("ngIf",!e.show&&"Saved"!=e.title)}}function zve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",31),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.clearLists())}),o._uU(1," Clear "),o.qZA()}}function Nve(n,t){1&n&&(o.TgZ(0,"button",32),o._uU(1," Clear "),o.qZA())}function kve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",9)(1,"h4",10),o._uU(2,"Filters"),o.qZA(),o.TgZ(3,"button",11),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.KtG(s.dismiss("Cross click"))}),o.qZA()(),o.TgZ(4,"div",12)(5,"div",13)(6,"h6",14),o._uU(7," Choose lists "),o.TgZ(8,"small"),o._uU(9),o.qZA()(),o._UZ(10,"div",15),o.YNc(11,Mve,3,2,"div",16),o.YNc(12,Sve,3,2,"div",16),o.TgZ(13,"div",17),o.YNc(14,zve,2,0,"button",18),o.YNc(15,Nve,2,0,"button",19),o.qZA()()(),o.TgZ(16,"div",20)(17,"button",21),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.KtG(s.close("Save click"))}),o._uU(18,"Cancel"),o.qZA(),o.TgZ(19,"button",22),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.KtG(s.close("Save click"))}),o._uU(20," Ok "),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(9),o.hij("(",e.ms.aMovies.length,")"),o.xp6(2),o.Q6J("ngForOf",e.ms.aLists),o.xp6(1),o.Q6J("ngForOf",e.ms.aLists),o.xp6(2),o.Q6J("ngIf",e.ms.cLists.length>0&&"Saved"!=e.ms.cLists[0].title),o.xp6(1),o.Q6J("ngIf",1==e.ms.cLists.length&&"Saved"==e.ms.cLists[0].title)}}function Rve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clearAll())}),o._uU(1," Clear "),o.qZA()}}function Vve(n,t){1&n&&(o.TgZ(0,"button",34),o._uU(1," Clear "),o.qZA())}let Lve=(()=>{class n{constructor(e,i,r){this.tmdb=e,this.ms=i,this.modalService=r,this.title="Filter",this.debug=!1,this.filters=[],this.cFiltersList=[],this.cFilters=[],this.sortBy="title",this.sortReverse=!1,this.isCollapsed=!0,this.show=!0,this.showGenreFilter=!1,this.filterIsAdd=!0,this.modal=!1,this.debug&&console.log("FilterComponent()"),this.filters=this.createBaseFilters()}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-new-list"}).result.then(i=>{},i=>{})}ngOnInit(){this.ms.cMovies?this.setLocalStorage():localStorage.getItem("cMovies")}setLocalStorage(){localStorage.removeItem("cMovies"),localStorage.removeItem("cLists"),localStorage.removeItem("cFilters");let e="";for(let i=0;i<this.ms.cMovies.length;i++)e+=this.ms.cMovies[i].id,i<this.ms.cMovies.length-1&&(e+=",");localStorage.setItem("cMovies",e)}createBaseFilters(){let e=[],i=["genre","keyword","provider","runtime","vote"];for(const s of i){let c={id:"",type:s,options:[],show:!0,active:!1,filterIsAdd:!0,genres:[],keywords:[],votes:[],runtimes:[],providers:[],favorite:!1,watch:!1,min:0,max:20,ms:this.ms};c.id=this.createUniqeId(this.filters);let d=new wve(c);e.push(d)}let r={id:"",filters:e,show:!0,active:!1};return r.id=this.createUniqeId(this.cFiltersList),this.cFiltersList.push(r),e}removeFilter(e){this.debug&&console.log("removeFilter"),this.clearFilter(e);let i=this.findIndex(this.cFiltersList,e);this.cFiltersList.splice(i,1)}addFilter(){let e=this.createBaseFilters();for(const i of e);}chooseFilter(e,i){console.log("chooseFilter");let r=this.findIndex(this.cFiltersList,e);if(-1!=r){this.debug&&console.log(r);let c=this.cFiltersList[r];c.active=!0,c.activeFilter=i;for(const d of c.filters)d.active=!1;i.active=!i.active,i.update(),this.cFilter=i}-1==this.findIndex(this.cFilters,i)&&this.cFilters.push(i),this.debug&&console.log(this.cFilter)}addFilterOption(e,i){this.debug&&console.log("add option"),i.active=!i.active,console.log(e),console.log(i),this.correctFilters(),this.correctMovies()}navOptions(e,i){this.debug&&console.log(i);let r=10;"+"==i&&e.activeFilter.max<=e.activeFilter.options.length&&(e.activeFilter.min+=r,e.activeFilter.max+=r),"-"==i&&e.activeFilter.min>=0&&(e.activeFilter.min-=r,e.activeFilter.max+=r),e.activeFilter.min<0&&(e.activeFilter.min=0,e.activeFilter.max=r),e.activeFilter.max>e.activeFilter.options.length&&(e.activeFilter.max=e.activeFilter.options.length,e.activeFilter.min=e.activeFilter.options.length-r)}addList(e){if(e.show=!e.show,e.show&&"Saved"==e.title){for(const i of this.ms.aLists)i.show=!1;e.show=!0}if(e.show&&"Saved"!=e.title)for(const i of this.ms.aLists)"Saved"==i.title&&(i.show=!1);this.debug&&console.log(e),this.debug&&console.log(this.ms.cLists),this.correctLists(),this.correctMovies(),this.correctFilters()}correctFilters(){for(const e of this.cFiltersList)for(const i of e.filters)i.update()}updateFilters(){for(const e of this.cFiltersList)for(const i of e.filters)i.update()}correctLists(){this.ms.cLists=[];for(const i of this.ms.aLists)i.show&&this.ms.cLists.push(i);this.ms.cLists.length<1&&this.clearLists();let e=[...new Set(this.ms.cLists)];this.ms.cLists=e,this.sortArrayBy(this.ms.cLists,this.sortBy,this.sortReverse),this.setLocalStorage(),this.debug&&console.log("cLists"),this.debug&&console.log(this.ms.cLists)}correctMovies(){this.ms.cMovies=[];for(const w of this.ms.aMovies);for(const w of this.ms.cLists)if(w.show)for(const y of w.movies)this.ms.cMovies.push(y);this.debug&&console.log("cMovies BEFORE FILTERS"),this.debug&&console.log(this.ms.cMovies);let e=[],i=[],r=[],s=[],c=[];this.cFilters=[];for(const w of this.cFiltersList){let y=A=>{for(const I of A.activeFilter.options)I.active&&("genre"==w.activeFilter.type&&e.push(I),"keyword"==w.activeFilter.type&&i.push(I),"vote"==w.activeFilter.type&&r.push(I),"runtime"==w.activeFilter.type&&s.push(I),"provider"==w.activeFilter.type&&c.push(I))};w.activeFilter&&(this.cFilters.push(w.activeFilter),y(w))}this.debug&&console.log("ACTIVE FILTERS"),this.debug&&console.log(e),this.debug&&console.log(i),this.debug&&console.log(r),this.debug&&console.log(s),this.debug&&console.log(c);let d=[];for(const w of this.ms.cMovies)for(const y of this.cFilters){let A=[],I=[],N="";"genre"==y.type&&(A=e,I=w.genres,N="id"),"keyword"==y.type&&(A=i,I=w.keywords,N="id"),"provider"==y.type&&(A=c,I=w.flatrate,N="provider_id"),this.isIterable(I)||(I=[]);for(let Z of I)for(let J of A)J[N]==Z[N]&&d.push(w)}this.debug&&console.log("tMovies"),this.debug&&console.log(d),(e.length>0||i.length>0||r.length>0||s.length>0||c.length>0)&&d.length>0&&(this.ms.cMovies=d);let g=[...new Set(this.ms.cMovies)];this.ms.cMovies=g,this.sortArrayBy(this.ms.cMovies,this.sortBy,this.sortReverse),this.setLocalStorage(),this.debug&&console.log("cLists"),this.debug&&console.log(this.ms.cLists),this.debug&&console.log("cMovies"),this.debug&&console.log(this.ms.cMovies)}clearLists(){localStorage.removeItem("cMovies"),localStorage.removeItem("cLists"),this.ms.aLists.forEach(e=>{e.show=!1}),this.ms.aMovies.forEach(e=>{e.show=!1}),this.ms.cMovies=[],this.ms.cLists=[];for(const e of this.ms.aLists)"Saved"==e.title&&(e.show=!0,this.ms.cLists.push(e));this.correctLists(),this.correctMovies(),this.updateFilters()}clearFilters(){for(const e of this.cFiltersList){e.active=!1,e.show=!1;for(const i of e.filters){i.active=!1,i.show=!1;for(const r of i.options)r.active=!1,r.show=!1}}for(const e of this.cFilters){e.active=!1,e.show=!1;for(const i of e.options)i.active=!1,i.show=!1}for(const e of this.filters){e.active=!1,e.show=!1;for(const i of e.options)i.active=!1,i.show=!1}this.ms.cMovies=[],this.cFiltersList=[],this.cFilters=[],this.cFilter=void 0,this.createBaseFilters(),this.correctLists(),this.correctMovies(),this.updateFilters()}clearFilter(e){e.active=!1,e.activeFilter=void 0;for(const i of e.filters){i.active=!1;for(const r of i.options)r.active=!1}this.ms.cMovies=[],this.cFilter=void 0,this.correctLists(),this.correctMovies(),this.updateFilters()}clearOptions(e){localStorage.removeItem("cMovies"),localStorage.removeItem("cFilters"),localStorage.removeItem("cOptions");for(const i of e.activeFilter.options)i.active=!1;this.correctLists(),this.correctMovies(),this.updateFilters()}clearAll(){this.clearFilters(),this.clearLists(),localStorage.removeItem("cMovies"),localStorage.removeItem("cLists"),localStorage.removeItem("cFilters"),this.ms.aLists.forEach(e=>{e.show=!1}),this.ms.aMovies.forEach(e=>{e.show=!1}),this.ms.cMovies=[],this.ms.cLists=[];for(const e of this.ms.aLists)"Saved"==e.title&&(e.show=!0,this.ms.cLists.push(e));this.correctLists(),this.correctMovies(),this.updateFilters()}sortArrayBy(e,i,r){e.sort((s,c)=>{if(s[i]<c[i]){let d=-1;return r&&(d=1),d}if(s[i]>c[i]){let d=1;return r&&(d=-1),d}return 0})}isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}createUniqeId(e){let i=[];for(const c of e)i.push(c.id);let r=c=>{let d="",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",w=g.length;for(var y=0;y<c;y++)d+=g.charAt(Math.floor(Math.random()*w));return d},s=r(10);for(this.debug&&console.log(s);i.includes(s);)s=r(10),console.log(s);return s}findIndex(e,i){let r=e.map(s=>s).indexOf(i);return console.log("index: "+r),r}msg(e){this.debug&&console.log(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ys),o.Y36(Ya),o.Y36(vN))},n.\u0275cmp=o.Xpm({type:n,selectors:[["filter-component"]],decls:11,vars:2,consts:[["modal",""],[1,"position-fixed","start-0","top-0","container-fluid","m-2","my-4"],[1,"row","my-4"],[1,"col-w100","py-1","my-1"],[1,"col-0","col-md-1","col-lg-2","p-0","m-0"],[1,"col-auto","btn","btn-dark",3,"click"],[1,"col-auto","p-0","m-0","my-1","ms-1"],["type","button","class","p-0 px-2 py-1 btn btn-danger btn-sm mb-2",3,"click",4,"ngIf"],["type","button","class","p-0 px-2 py-1 btn btn-outline-secondary btn-sm mb-2","disabled","",4,"ngIf"],[1,"modal-header"],["id","modal-new-list",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","mb-4","px-3"],[1,"col-auto","mb-4","px-0"],[1,"col-w100"],["class","col-auto px-0",3,"click",4,"ngFor","ngForOf"],[1,"col-auto","border-start","ms-2"],["type","button","class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-secondary btn-sm","disabled","",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"col-auto","px-0",3,"click"],["type","button","class","btn btn-primary btn-sm me-2 mb-2","disabled","",4,"ngIf"],["type","button","class","btn btn-outline-primary btn-sm me-2 mb-2",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary","btn-sm","me-2","mb-2"],[4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm","me-2","mb-2"],["type","button","class","btn btn-primary btn-sm me-2 mb-2",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","me-2","mb-2"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["type","button","disabled","",1,"btn","btn-outline-secondary","btn-sm"],["type","button",1,"p-0","px-2","py-1","btn","btn-danger","btn-sm","mb-2",3,"click"],["type","button","disabled","",1,"p-0","px-2","py-1","btn","btn-outline-secondary","btn-sm","mb-2"]],template:function(e,i){if(1&e){const r=o.EpF();o.YNc(0,kve,21,5,"ng-template",null,0,o.W1O),o.TgZ(2,"div",1)(3,"div",2),o._UZ(4,"div",3)(5,"div",4),o.TgZ(6,"h6",5),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(1);return o.KtG(i.open(c))}),o._uU(7," Filters "),o.qZA(),o.TgZ(8,"div",6),o.YNc(9,Rve,2,0,"button",7),o.YNc(10,Vve,2,0,"button",8),o.qZA()()()}2&e&&(o.xp6(9),o.Q6J("ngIf",i.ms.cLists.length>0&&i.ms.cMovies.length>0&&"Saved"!=i.ms.cLists[0].title||i.ms.cLists.length>0&&i.ms.cMovies.length>0&&i.cFilters.length>0),o.xp6(1),o.Q6J("ngIf",i.ms.cLists.length<1&&i.ms.cMovies.length<1&&i.cFilters.length<1))},dependencies:[hi,cn],styles:["#filter[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;position:fixed;top:2rem;right:0rem;opacity:.9}.z-100[_ngcontent-%COMP%]{z-index:100}"]}),n})();function Ove(n,t){if(1&n&&(o.TgZ(0,"div",5)(1,"div",6),o._UZ(2,"div",7),o.TgZ(3,"h6",8),o._uU(4),o.qZA(),o._UZ(5,"div",9),o.TgZ(6,"div",10)(7,"div",11)(8,"span",12),o._uU(9,"Loading..."),o.qZA()()()()()),2&n){const e=o.oxw();o.xp6(4),o.hij(" Loading movies (",e.ms.aMovies.length,")")}}function Pve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",18),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function Hve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",19),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH),o.MGl("routerLink","/movie/",e.id,"")}}function Fve(n,t){if(1&n&&(o.TgZ(0,"div",22),o._UZ(1,"img",23),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2).$implicit;o.xp6(1),o.s9C("src",i.base_url+"w200"+e.logo_path,o.LSH),o.s9C("ngbPopover",e.provider_name)}}function Bve(n,t){if(1&n&&(o.TgZ(0,"div",20),o.YNc(1,Fve,2,2,"div",21),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",e.flatrate)}}function Uve(n,t){if(1&n&&(o.TgZ(0,"div",13)(1,"small",14),o._uU(2),o.qZA(),o._UZ(3,"br"),o.YNc(4,Pve,1,1,"img",15),o.YNc(5,Hve,1,2,"img",16),o.YNc(6,Bve,2,1,"div",17),o.qZA()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.title),o.xp6(2),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading),o.xp6(1),o.Q6J("ngIf",e.flatrate)}}function Zve(n,t){1&n&&o._UZ(0,"filter-component",24)}let jve=(()=>{class n{constructor(e,i,r){this.tmdb=e,this.ms=i,this.msg=r,this.title="Movies",this.debug=!1,this.showDetails=!1,this.debug&&console.log("MovieComponent()")}ngOnInit(){this.ms.cMovies.length<1&&this.ms.loadUserMovies()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ys),o.Y36(Ya),o.Y36(gb))},n.\u0275cmp=o.Xpm({type:n,selectors:[["movie-component"]],decls:5,vars:3,consts:[["class","container-fluid pb-4 mb-4",4,"ngIf"],[1,"container-fluid"],[1,"row","mb-4"],["class","col-6 col-sm-2 p-0 m-0 mb-4 text-truncate",4,"ngFor","ngForOf"],["class","position-fixed start-0 bottom-0 mx-sm-4 mb-sm-4","style","z-index: 60;",4,"ngIf"],[1,"container-fluid","pb-4","mb-4"],[1,"row","pb-4","mb-4"],[1,"col-w100","pb-4","mb-4"],[1,"col-auto","mx-auto","align-middle"],[1,"col-w100","pb-2","mb-2"],[1,"col-auto","mx-auto"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-6","col-sm-2","p-0","m-0","mb-4","text-truncate"],[1,"col","p-0","m-0"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING",3,"routerLink","click",4,"ngIf"],["class","img-fluid rounded btn p-0 m-0",3,"src","routerLink","click",4,"ngIf"],["class","row p-0 m-0",4,"ngIf"],["src","https://via.placeholder.com/200x300?text=LOADING",1,"img-fluid","rounded","btn","p-0","m-0",3,"routerLink","click"],[1,"img-fluid","rounded","btn","p-0","m-0",3,"src","routerLink","click"],[1,"row","p-0","m-0"],["class","col-2 col-sm-2 p-0 m-0",4,"ngFor","ngForOf"],[1,"col-2","col-sm-2","p-0","m-0"],[1,"img-fluid","rounded","p-0","m-0",3,"src","ngbPopover"],[1,"position-fixed","start-0","bottom-0","mx-sm-4","mb-sm-4",2,"z-index","60"]],template:function(e,i){1&e&&(o.YNc(0,Ove,10,1,"div",0),o.TgZ(1,"div",1)(2,"div",2),o.YNc(3,Uve,7,4,"div",3),o.qZA()(),o.YNc(4,Zve,1,0,"filter-component",4)),2&e&&(o.Q6J("ngIf",i.ms.moviesLoading),o.xp6(3),o.Q6J("ngForOf",i.ms.cMovies),o.xp6(1),o.Q6J("ngIf",!i.ms.moviesLoading))},dependencies:[z1,uG,hi,cn,Lve],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;color:#c8c8c8}.filled[_ngcontent-%COMP%]{color:#646464}.bad[_ngcontent-%COMP%]{color:#c8c8c8}.filled.bad[_ngcontent-%COMP%]{color:#fa6464}"]}),n})();class bN{constructor(){this.page=1,this.results=new Array,this.pages=1,this.current_page=1,this.min=0,this.max=20,this.moviesToLoad=20,this.moviesLoaded=0}navigate(t){t<1?(this.min-=20,this.max-=20):this.max+=20}}let pb=(()=>{class n{constructor(e,i,r){this.db=e,this.tmdb=i,this.authService=r,this.cLists=[],this.result=new bN,this.recommendedMovies=[],this.cMovies=[],this.cTags=[],this.cKeywords=[],this.cGenres=[],this.loadingMovies=!1,this.sortBy="popularity.desc",this.tmdbGenres=Sw,this.tmdbKeywords=Sw,this.tmdbTags=Sw,console.log("DiscoverService()")}loadMovies(){var e=this;return(0,ie.Z)(function*(){console.log(e.constructor.name+".setMovies()"),e.loadingMovies=!0;let i={sort_by:e.sortBy,with_genres:[]};for(const s of e.cGenres){for(const c of e.tmdbGenres)c.id==s.id&&(c.active=!0,i.with_genres.push(s.id));console.log("genre: "+s.name)}e.loadingMovies=!0,e.result.moviesLoaded<1&&(e.result=yield e.preSearch(i));let r=0;for(;e.result.moviesLoaded<e.result.moviesToLoad&&e.result.total_pages>e.result.page&&r<10;)r++,yield e.loadMoviesTmdb(i).then(function(){var s=(0,ie.Z)(function*(c){console.log(c);for(const d of c)e.cMovies.push(d),e.result.moviesLoaded++});return function(c){return s.apply(this,arguments)}}()),e.result.page++;e.result.movies=e.cMovies.length,e.result.pages=Math.ceil(e.cMovies.length/20),e.result.moviesToLoad=e.result.moviesLoaded+20,e.loadingMovies=!1})()}preSearch(e){var i=this;return(0,ie.Z)(function*(){e.page=i.result.page;let r,s=new bN;return r=yield i.tmdb.movieDiscoverTmdb(e),console.log("|||||DATA|||||"),console.log(r),s.results=r.results,s.total_pages=r.total_pages,s.total_results=r.total_results,s})()}loadMoviesTmdb(e){var i=this;return(0,ie.Z)(function*(){return e.page=i.result.page,yield function(){var c=(0,ie.Z)(function*(){let d,g=[];d=yield i.tmdb.movieDiscoverTmdb(e);let w=d.results;i.result.total_pages=d.total_pages,i.result.total_results=d.total_results;for(const y of w){let A=new Fa(y),I=16;i.authService.user&&(I=i.authService.user.settings.ageRating),(yield A.checkRating(I))&&(yield A.init(),yield A.preload(),g.push(A))}return g});return function(){return c.apply(this,arguments)}}()()})()}reset(){console.log(this.constructor.name+".reset()"),this.result=new bN;for(const e of this.tmdbGenres)e.active=!1;this.sortBy="popularity.desc",this.cList=void 0,this.cLists=[],this.cMovie=void 0,this.cMovies=[],this.cTag=void 0,this.cKeyword=void 0,this.cGenre=void 0,this.cTags=[],this.cKeywords=[],this.cGenres=[]}sortArrayBy(e,i,r){e.sort((s,c)=>{if(s[i]<c[i]){let d=-1;return r&&(d=1),d}if(s[i]>c[i]){let d=1;return r&&(d=-1),d}return 0})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Jh),o.LFG(Ys),o.LFG(K0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gve(n,t){1&n&&o._UZ(0,"img",23)}function $ve(n,t){if(1&n&&o._UZ(0,"img",24),2&n){const e=o.oxw().ngIf;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH)}}function qve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.saveMovie(r))}),o._uU(1," Save movie "),o.qZA()}}function Wve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",29)(1,"button",30),o._uU(2," Remove "),o.qZA(),o.TgZ(3,"div",31)(4,"button",32),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.removeMovie(r))}),o._uU(5,"Remove from all"),o.qZA(),o.TgZ(6,"button",33),o._uU(7,"Cancel"),o.qZA()()()}}function Kve(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,qve,2,0,"div",26),o.YNc(2,Wve,8,0,"div",27),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",1!=e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved)}}function Yve(n,t){1&n&&(o.TgZ(0,"div",25)(1,"a",34),o._uU(2," Sign in to save movie "),o.qZA()())}function Jve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return r.seen=!r.seen,o.KtG(s.saveSeen(r))}),o._uU(1,"Seen"),o.qZA()}}function Qve(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",36),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return r.seen=!r.seen,o.KtG(s.saveSeen(r))}),o._uU(1,"Not seen"),o.qZA()}}function Xve(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,Jve,2,0,"button",26),o.YNc(2,Qve,2,0,"button",35),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.seen),o.xp6(1),o.Q6J("ngIf",!e.seen)}}function e6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.addToFavorite(r))}),o._uU(1,"Favorite"),o.qZA()}}function t6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",36),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.addToFavorite(r))}),o._uU(1,"Favorite"),o.qZA()}}function n6e(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,e6e,2,0,"button",26),o.YNc(2,t6e,2,0,"button",35),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.favorite),o.xp6(1),o.Q6J("ngIf",!e.favorite)}}function i6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.addToWathList(r))}),o._uU(1,"On watchlist"),o.qZA()}}function r6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",36),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2).ngIf,s=o.oxw();return o.KtG(s.addToWathList(r))}),o._uU(1,"Not on watchlist"),o.qZA()}}function s6e(n,t){if(1&n&&(o.TgZ(0,"div",37),o.YNc(1,i6e,2,0,"button",26),o.YNc(2,r6e,2,0,"button",35),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.watch),o.xp6(1),o.Q6J("ngIf",!e.watch)}}function o6e(n,t){if(1&n&&(o.TgZ(0,"button",42),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("",e," ")}}function a6e(n,t){if(1&n&&(o.TgZ(0,"div",38),o.YNc(1,o6e,2,1,"button",41),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf","Saved"!=e)}}function l6e(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Oqu(e.title)}}function c6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2).ngIf,d=o.oxw();return o.KtG(d.addToMovieToList(c,s.title))}),o.YNc(1,l6e,2,1,"div",43),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(3);o.xp6(1),o.Q6J("ngIf",!i.checkIfInList(e))}}function u6e(n,t){if(1&n&&(o.TgZ(0,"div",15)(1,"div",16),o._uU(2,"In lists:"),o.qZA(),o.YNc(3,a6e,2,1,"div",18),o.TgZ(4,"div",38)(5,"div",29)(6,"button",39),o._uU(7," Add to list "),o.qZA(),o.TgZ(8,"div",31),o.YNc(9,c6e,2,1,"button",40),o.TgZ(10,"button",33)(11,"div"),o._uU(12,"New list...(W.I.P)"),o.qZA()()()()()()),2&n){const e=o.oxw().ngIf,i=o.oxw();o.xp6(3),o.Q6J("ngForOf",e.lists),o.xp6(6),o.Q6J("ngForOf",i.lists)}}function h6e(n,t){if(1&n&&(o.TgZ(0,"span",47),o._uU(1,"\u2605"),o.qZA()),2&n){const i=t.index;o.ekj("filled",100===t.fill)("bad",i<1)}}function d6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",44)(1,"ngb-rating",45,46),o.NdJ("rateChange",function(r){o.CHM(e);const s=o.oxw().ngIf;return o.KtG(s.vote=r)})("click",function(){o.CHM(e);const r=o.MAs(2),s=o.oxw().ngIf,c=o.oxw();return o.KtG(c.rateMovie(s,r))}),o.YNc(3,h6e,2,4,"ng-template"),o.qZA()()}if(2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("rate",e.vote)("max",5)}}function f6e(n,t){if(1&n&&(o.TgZ(0,"div",50),o._UZ(1,"img",51),o.TgZ(2,"div",52),o._uU(3),o.qZA()()),2&n){const e=t.$implicit,i=o.oxw(2).ngIf;o.xp6(1),o.s9C("src",i.base_url+"w200"+e.logo_path,o.LSH),o.s9C("ngbPopover",e.provider_name),o.xp6(2),o.Oqu(e.provider_name)}}function g6e(n,t){if(1&n&&(o.TgZ(0,"div",48),o.YNc(1,f6e,4,3,"div",49),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngForOf",e.flatrate)}}function p6e(n,t){1&n&&(o.TgZ(0,"div",48)(1,"div",21),o._uU(2," No Swedish providers found "),o.qZA()())}function v6e(n,t){if(1&n&&(o.TgZ(0,"div",15)(1,"div",16),o._uU(2),o.qZA()()),2&n){const e=o.oxw().ngIf;o.xp6(2),o.hij("Average rating: ",e.certifications.avg_rating," years")}}function m6e(n,t){1&n&&(o.TgZ(0,"div",15)(1,"div",16),o._uU(2,"Average rating: No rating!"),o.qZA()())}function w6e(n,t){if(1&n&&(o.TgZ(0,"div",3)(1,"div",16),o._uU(2),o.TgZ(3,"small"),o._uU(4),o.qZA()()()),2&n){const e=o.oxw().ngIf;o.xp6(2),o.hij("Average vote: ",e.vote_average," / 5 "),o.xp6(2),o.hij("(",e.vote_count," votes)")}}function _6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",38)(1,"button",53),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return c.ds.reset(),o.KtG(c.ds.cGenres[0]=s)}),o._uU(2),o.qZA()()}if(2&n){const e=t.$implicit;o.xp6(2),o.hij("",e.name," ")}}function b6e(n,t){if(1&n&&(o.TgZ(0,"div",38)(1,"button",54),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij("",e.name," ")}}function y6e(n,t){if(1&n&&(o.TgZ(0,"div",3)(1,"div",16),o._uU(2,"Keywords:"),o.qZA(),o.YNc(3,b6e,3,1,"div",18),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(3),o.Q6J("ngForOf",e.keywords)}}function C6e(n,t){1&n&&o._UZ(0,"img",58)}function M6e(n,t){if(1&n&&o._UZ(0,"img",59),2&n){const e=o.oxw().$implicit,i=o.oxw().ngIf;o.s9C("src",i.base_url+"w200"+e.file_path,o.LSH)}}function x6e(n,t){if(1&n&&(o.TgZ(0,"div",55),o.YNc(1,C6e,1,0,"img",56),o.YNc(2,M6e,1,1,"img",57),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("ngIf",e.backdrops_loading),o.xp6(1),o.Q6J("ngIf",!e.backdrops_loading)}}function A6e(n,t){if(1&n&&o._UZ(0,"img",64),2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function D6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",60)(1,"div",61),o._uU(2),o.qZA(),o.YNc(3,A6e,1,1,"img",62),o.TgZ(4,"img",63),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return o.KtG(c.similar(s))}),o.qZA()()}if(2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.title),o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.s9C("src",e.base_url+"w200"+e.poster_path,o.LSH)}}function T6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1),o._UZ(1,"div",2),o.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.close())}),o._uU(6,"X"),o.qZA()(),o.YNc(7,Gve,1,0,"img",7),o.YNc(8,$ve,1,1,"img",8),o.qZA(),o.TgZ(9,"div",9)(10,"div",3),o.YNc(11,Kve,3,2,"div",10),o.YNc(12,Yve,3,0,"div",10),o.YNc(13,Xve,3,2,"div",10),o.YNc(14,n6e,3,2,"div",10),o.YNc(15,s6e,3,2,"div",11),o.qZA(),o.YNc(16,u6e,13,2,"div",12),o.YNc(17,d6e,4,2,"div",13),o.TgZ(18,"div",3)(19,"h4"),o._uU(20),o.qZA()(),o.YNc(21,g6e,2,1,"div",14),o.YNc(22,p6e,3,0,"div",14),o.YNc(23,v6e,3,1,"div",12),o.YNc(24,m6e,3,0,"div",12),o.TgZ(25,"div",15)(26,"div",16),o._uU(27),o.qZA()(),o.YNc(28,w6e,5,2,"div",17),o.TgZ(29,"div",15)(30,"div",16),o._uU(31,"Genres:"),o.qZA(),o.YNc(32,_6e,3,1,"div",18),o.qZA(),o.TgZ(33,"div",3)(34,"div",16),o._uU(35),o.qZA()(),o.YNc(36,y6e,4,1,"div",17),o.qZA()(),o.TgZ(37,"div",19),o.YNc(38,x6e,3,2,"div",20),o.ALo(39,"slice"),o.qZA(),o.TgZ(40,"div",19)(41,"h4",21),o._uU(42,"Similar movies"),o.qZA(),o.YNc(43,D6e,5,3,"div",22),o.ALo(44,"slice"),o.qZA()()}if(2&n){const e=t.ngIf,i=o.oxw();o.xp6(7),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",e.poster_path&&!e.poster_loading),o.xp6(3),o.Q6J("ngIf",i.isLoggedIn),o.xp6(1),o.Q6J("ngIf",!i.isLoggedIn),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(1),o.Q6J("ngIf",1==e.saved),o.xp6(3),o.hij(" ",e.title," "),o.xp6(1),o.Q6J("ngIf",e.flatrate),o.xp6(1),o.Q6J("ngIf",null==e.flatrate),o.xp6(1),o.Q6J("ngIf",e.certifications),o.xp6(1),o.Q6J("ngIf",!e.certifications),o.xp6(3),o.hij("Runtime: ",e.length,""),o.xp6(1),o.Q6J("ngIf",e.vote_average),o.xp6(4),o.Q6J("ngForOf",e.genres),o.xp6(3),o.hij("Overview: ",e.overview,""),o.xp6(1),o.Q6J("ngIf",e.keywords),o.xp6(2),o.Q6J("ngForOf",o.Dn7(39,21,e.backdrops,0,6)),o.xp6(5),o.Q6J("ngForOf",o.Dn7(44,25,i.similarMovies,0,6))}}let E6e=(()=>{class n{constructor(e,i,r,s,c,d,g){this.ms=e,this.location=i,this.tmdb=r,this.ds=s,this.auth=c,this.router=d,this.msg=g,this.title="movie-detail-component",this.newItemEvent=new o.vpe,this.isLoggedIn=!1}addNewItem(e){this.newItemEvent.emit(e)}ngOnInit(){var e=this;console.log("MovieDetailComponent.ngOnInit()"),this.ms.page&&localStorage.setItem("page",this.ms.page),this.isLoggedIn=this.auth.isLoggedIn,function(){var r=(0,ie.Z)(function*(){if(!e.ms.cMovie){console.log("No cMovie!!!");let s={id:null};s.id=localStorage.getItem("cMovie"),console.log(s);let c=yield new Fa(s);yield c.preload(),yield c.init(),e.ms.cMovie=c}e.isLoggedIn&&(e.ms.cMovies.length<1&&e.ms.loadUserMovies(),console.log("cMovie is present"),yield e.loadMovie(e.ms.cMovie.id),yield e.loadLists(),yield e.checkIfSaved(),localStorage.setItem("cMovie",e.ms.cMovie.id.toString())),yield e.getSimilarMovies(e.ms.cMovie.id),window.moveTo(250,250)});return function(){return r.apply(this,arguments)}}()()}reload(){this.ngOnInit()}getSimilarMovies(e){var i=this;return(0,ie.Z)(function*(){let r=yield i.tmdb.getSimilarMoviesTmdb(e);if(console.log(r),r){i.similarMovies=[],r.forEach(s=>{i.similarMovies.push(new Fa(s))});for(const s of i.similarMovies)s.preload();for(let s=0;s<i.similarMovies.length;s++)i.similarMovies[s].init()}})()}loadMovie(e){var i=this;return(0,ie.Z)(function*(){i.ms.getItemById(e).valueChanges().subscribe(function(){var r=(0,ie.Z)(function*(s){console.log(s),s.length>0?i.ms.cMovie.setData(s[0]):(i.ms.cMovie.saved=!1,i.ms.cMovie.lists=[])});return function(s){return r.apply(this,arguments)}}())})()}loadLists(){var e=this;this.ms.lists.valueChanges().subscribe(function(){var i=(0,ie.Z)(function*(r){e.lists=r});return function(r){return i.apply(this,arguments)}}())}setItem(e){this.ms.setItem(e)}rateMovie(e,i){e.vote=i.nextRate,console.log(e.vote),console.log(i.nextRate),this.setItem({id:e.id,vote:e.vote})}addToFavorite(e){console.log(e),e.favorite=!e.favorite||!e.favorite;let i={id:e.id,saved:e.saved,title:e.title,favorite:e.favorite,watch:e.watch,seen:e.seen,vote:e.vote,lists:e.lists};console.log(i),this.ms.setItem(i)}addToWathList(e){console.log(e),e.watch=!e.watch||!e.watch;let i={id:e.id,saved:e.saved,title:e.title,favorite:e.favorite,watch:e.watch,seen:e.seen,vote:e.vote,lists:e.lists};console.log(i),this.ms.setItem(i)}saveMovie(e){this.ms.setItem({id:e.id,saved:!0,title:e.title,favorite:!1,seen:!1,vote:0,lists:["Saved"]})}saveSeen(e){this.ms.setItem({id:e.id,seen:e.seen})}addTag(e){console.log("Not in list"),this.ms.cMovie.tags.push(e);let i={id:this.ms.cMovie.id,saved:this.ms.cMovie.saved,title:this.ms.cMovie.title,favorite:this.ms.cMovie.favorite,seen:this.ms.cMovie.seen,vote:this.ms.cMovie.vote,lists:this.ms.cMovie.lists,tags:this.ms.cMovie};console.log(i),this.ms.setItem(i)}removeMovie(e){const r={...this.ms.cMovie,id:e.id,saved:!1,title:e.title,favorite:!1,seen:!1,vote:null,lists:null};this.ms.cMovie=r,this.ms.deleteItem(e)}checkIfInList(e){return!!this.ms.cMovie.lists.includes(e.title)}checkIfSaved(){console.log("MovieDetailComponent.checkIfSaved()"),this.ms.movies.valueChanges().subscribe(i=>{let r=!1;if(i.forEach(s=>{if(s.id==this.ms.cMovie.id){const c={...this.ms.cMovie,...s};this.ms.cMovie=c,r=!0}}),r)this.ms.cMovie.saved=!0;else{const c={...this.ms.cMovie,saved:!1};this.ms.cMovie=c}})}isSaved(e){return"saved"in e}addToMovieToList(e,i){if(e.lists.includes(i))console.log("In list!");else{console.log("Not in list"),e.lists.push(i);let r={id:e.id,saved:e.saved,title:e.title,favorite:e.favorite,seen:e.seen,vote:e.vote,lists:e.lists};console.log(r),this.ms.setItem(r)}}close(){if(!this.ms.page){let e=localStorage.getItem("page");this.ms.page=e.toLocaleLowerCase()}this.router.navigate([this.ms.page.toLocaleLowerCase()])}similar(e){this.ms.cMovie=e,this.router.navigate(["movie/"+e.id]),this.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ya),o.Y36(Ne),o.Y36(Ys),o.Y36(pb),o.Y36(K0),o.Y36(gi),o.Y36(gb))},n.\u0275cmp=o.Xpm({type:n,selectors:[["movie-detail-component"]],inputs:{cMovie:"cMovie"},outputs:{newItemEvent:"newItemEvent"},decls:1,vars:1,consts:[["class","container-fluid mb-4",4,"ngIf"],[1,"container-fluid","mb-4"],[1,"row","position-absolute"],[1,"row","mb-2"],[1,"col-12","col-lg-4","mb-4"],[1,"position-absolute","col-auto","p-4","p-sm-2"],[1,"btn","btn-danger","btn-lg",3,"click"],["class","img-fluid rounded","src","https://via.placeholder.com/400x600?text=LOADING","alt","Loading",4,"ngIf"],["class","img-fluid rounded","alt","Movie poster",3,"src",4,"ngIf"],[1,"col-12","col-lg-8"],["class","col-auto border-end mb-2",4,"ngIf"],["class","col-auto mb-2",4,"ngIf"],["class","row",4,"ngIf"],["class","row border-bottom mb-2 pb-2",4,"ngIf"],["class","row my-2",4,"ngIf"],[1,"row"],[1,"col-auto"],["class","row mb-2",4,"ngIf"],["class","col-auto p-0 m-0",4,"ngFor","ngForOf"],[1,"row","mb-4","pt-4","border-top"],["class","col-4 col-sm-2 m-0 p-0 pe-2 pb-2",4,"ngFor","ngForOf"],[1,"col-12"],["class","col-4 col-sm-2 m-0 p-0 pe-2",4,"ngFor","ngForOf"],["src","https://via.placeholder.com/400x600?text=LOADING","alt","Loading",1,"img-fluid","rounded"],["alt","Movie poster",1,"img-fluid","rounded",3,"src"],[1,"col-auto","border-end","mb-2"],["class","p-0 px-2 py-1 btn btn-success btn-sm",3,"click",4,"ngIf"],["ngbDropdown","","class","d-inline-block",4,"ngIf"],[1,"p-0","px-2","py-1","btn","btn-success","btn-sm",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownRemove","ngbDropdownToggle","",1,"p-0","px-2","py-1","btn","btn-danger","btn-sm"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],["ngbDropdownItem",""],["routerLink","/sign-in",1,"p-0","px-2","py-1","btn-outline-primary","btn-sm"],["class","p-0 px-2 py-1 btn btn-outline-success btn-sm",3,"click",4,"ngIf"],[1,"p-0","px-2","py-1","btn","btn-outline-success","btn-sm",3,"click"],[1,"col-auto","mb-2"],[1,"col-auto","p-0","m-0"],["type","button","id","dropdownAdd","ngbDropdownToggle","",1,"btn","btn-success","btn-sm"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["class","p-0 px-2 py-1 btn btn-outline-success btn-sm me-2 mb-2","disabled","",4,"ngIf"],["disabled","",1,"p-0","px-2","py-1","btn","btn-outline-success","btn-sm","me-2","mb-2"],[4,"ngIf"],[1,"row","border-bottom","mb-2","pb-2"],[3,"rate","max","rateChange","click"],["rating",""],[1,"star"],[1,"row","my-2"],["class","col-2 col-md-1 col-lg-3 d-inline m-0 mb-sm-2 pe-0",4,"ngFor","ngForOf"],[1,"col-2","col-md-1","col-lg-3","d-inline","m-0","mb-sm-2","pe-0"],[1,"col-auto","col-lg-4","img-fluid","rounded","d-inline","p-0",3,"src","ngbPopover"],[1,"col-auto","d-none","d-lg-inline","my-auto","ps-2"],["routerLink","/discover",1,"p-0","px-2","py-1","btn","btn-outline-dark","btn-sm","me-2","mb-2",3,"click"],["routerLink","/discover",1,"p-0","px-2","py-1","btn","btn-outline-dark","btn-sm","me-2","mb-2"],[1,"col-4","col-sm-2","m-0","p-0","pe-2","pb-2"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/300x200?text=LOADING","alt","Loading",4,"ngIf"],["class","img-fluid rounded btn m-0 p-0","alt","Movie backdrop",3,"src",4,"ngIf"],["src","https://via.placeholder.com/300x200?text=LOADING","alt","Loading",1,"img-fluid","rounded","btn","p-0","m-0"],["alt","Movie backdrop",1,"img-fluid","rounded","btn","m-0","p-0",3,"src"],[1,"col-4","col-sm-2","m-0","p-0","pe-2"],[1,"text-truncate"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING","alt","Loading",3,"routerLink",4,"ngIf"],["alt","Similar movie poster",1,"img-fluid","rounded","btn","m-0","p-0",3,"src","click"],["src","https://via.placeholder.com/200x300?text=LOADING","alt","Loading",1,"img-fluid","rounded","btn","p-0","m-0",3,"routerLink"]],template:function(e,i){1&e&&o.YNc(0,T6e,45,29,"div",0),2&e&&o.Q6J("ngIf",i.ms.cMovie)},dependencies:[z1,N1,ov,qj,pN,gN,uG,Z4e,hi,cn,Qo],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;color:#c8c8c8}.filled[_ngcontent-%COMP%]{color:#646464}.bad[_ngcontent-%COMP%]{color:#c8c8c8}.filled.bad[_ngcontent-%COMP%]{color:#fa6464}"]}),n})(),I6e=(()=>{class n{constructor(e,i,r){this.db=e,this.authService=i,this.afAuth=r,console.log("ListService()");let s=JSON.parse(localStorage.getItem("user"));this.user=s,this.afAuth.authState.subscribe(c=>{this.user=c})}findItemByName(e){return console.log("name: "+e),new Promise(r=>{this.db.list("lists_"+this.user.uid,s=>s.orderByChild("title").equalTo(e)).valueChanges().subscribe(s=>r(s))})}findItem(e){return new Promise(r=>{this.db.list("lists_"+this.user.uid,s=>s.orderByChild("title").equalTo(e)).valueChanges().subscribe(s=>r(s))})}setItem(e){var i=this;return(0,ie.Z)(function*(){let r,s=yield i.findItem(e.title);return console.log("returnedItem"),console.log(s),s.length>0?(r=200,i.db.list("lists_"+i.user.uid).update(e.title.toString(),e)):(console.log("ITEM NOT FOUND!!!"),r=400),r})()}addItem(e){var i=this;return(0,ie.Z)(function*(){let r,s=yield i.findItem(e.title);return console.log("returnedItem"),console.log(s),s.length>0?(console.log("FOUND ITEM!!!"),r=400):(console.log("ITEM NOT FOUND!!!"),r=200,i.db.list("lists_"+i.user.uid).update(e.title.toString(),e),console.log("Item added")),r})()}deleteItem(e){var i=this;return(0,ie.Z)(function*(){i.db.list("lists_"+i.user.uid).remove(e.title.toString())})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Jh),o.LFG(K0),o.LFG(eu))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function S6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",8)(1,"h4",9),o._uU(2,"New List"),o.qZA(),o.TgZ(3,"button",10),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.KtG(s.dismiss("Cross click"))}),o.qZA()(),o.TgZ(4,"div",11)(5,"form")(6,"div",12)(7,"div",13)(8,"div",14),o._UZ(9,"input",15,16),o.qZA(),o._UZ(11,"div",17)(12,"input",18,19),o.qZA()()()(),o.TgZ(14,"div",20)(15,"button",21),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.KtG(s.close("Save click"))}),o._uU(16,"Cancel"),o.qZA(),o.TgZ(17,"button",22),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.MAs(13),d=o.MAs(10);return o.oxw().addList({info:c.value,title:d.value}),o.KtG(s.close("Save click"))}),o._uU(18," Ok "),o.qZA()()}}function z6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",8)(1,"h4",23),o._uU(2,"Delete List"),o.qZA(),o.TgZ(3,"button",10),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.KtG(s.dismiss("Cross click"))}),o.qZA()(),o.TgZ(4,"div",11),o._uU(5),o.qZA(),o.TgZ(6,"div",20)(7,"button",21),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.KtG(s.close("Save click"))}),o._uU(8,"Cancel"),o.qZA(),o.TgZ(9,"button",24),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return c.deleteList(c.cList),o.KtG(s.close("Save click"))}),o._uU(10," Delete "),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(5),o.hij(" ",e.cList.title," ")}}function N6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",37),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function k6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",38),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH),o.MGl("routerLink","/movie/",e.id,"")}}function R6e(n,t){if(1&n&&(o.TgZ(0,"div",34),o.YNc(1,N6e,1,1,"img",35),o.YNc(2,k6e,1,2,"img",36),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading)}}function V6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"b"),o._uU(4),o.qZA()(),o.TgZ(5,"div",27)(6,"button",28),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(),d=o.MAs(3);return o.KtG(c.openDeleteListModal(d,s))}),o._uU(7," Delete list "),o.qZA(),o.TgZ(8,"div",29),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(),d=o.MAs(3);return o.KtG(c.openDeleteListModal(d,s))}),o._UZ(9,"bi",30),o.qZA()()(),o.TgZ(10,"div",31)(11,"div",32)(12,"small"),o._uU(13),o.qZA()()(),o.TgZ(14,"div",31),o.YNc(15,R6e,3,2,"div",33),o.qZA()()}if(2&n){const e=t.$implicit;o.xp6(4),o.Oqu(e.title),o.xp6(9),o.hij(" ",e.info," "),o.xp6(2),o.Q6J("ngForOf",e.movies)}}let bG=(()=>{class n{constructor(e,i,r,s,c,d){this.tmdb=e,this.ms=i,this.ls=r,this.fb=s,this.msg=c,this.modalService=d,this.title="Lists",this.closeResult="",this.content=!1}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-new-list"}).result.then(i=>{},i=>{})}openDeleteListModal(e,i){this.cList=i,this.modalService.open(e,{ariaLabelledBy:"modal-delete-list"}).result.then(r=>{},r=>{})}ngOnInit(){this.init(),this.cLists=this.lists,this.listForm=this.fb.group({list:[null]}),this.cLists?localStorage.removeItem("cLists"):(console.log("No cLists!!!"),localStorage.getItem("cLists"))}init(){var e=this;return(0,ie.Z)(function*(){yield e.ms.loadMovies().then(function(){var i=(0,ie.Z)(function*(r){e.aMovies=[];for(const s of r){let c=new Fa(s);e.aMovies.push(c)}for(const s of e.aMovies)s.preload();for(const s of e.aMovies)s.init()});return function(r){return i.apply(this,arguments)}}()),yield e.ms.loadLists().then(i=>{e.aLists=[];for(const r of i)"Saved"!=r.title&&e.aLists.push(r);for(const r of e.aLists)r.movies=[];for(const r of e.aMovies)for(const s of e.aLists)r.lists.includes(s.title)&&s.movies.push(r)}),console.log(e.aLists)})()}showMsg(e){console.log(e)}submit(){console.log("Form Submitted"),console.log(this.listForm.value)}changeList(){this.cLists=[],this.lists.forEach(e=>{this.listForm.value.list.includes(e.title)&&this.cLists.push(e)})}addList(e){e.title&&this.ls.addItem({info:e.info,title:e.title}),this.content=!1,this.init()}updateList(e){e.title&&this.ls.setItem({info:e.info,title:e.title}),this.init()}deleteList(e){var i=this;return(0,ie.Z)(function*(){yield i.ls.deleteItem(e),i.cList=null,i.init()})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ys),o.Y36(Ya),o.Y36(I6e),o.Y36(ZN),o.Y36(gb),o.Y36(vN))},n.\u0275cmp=o.Xpm({type:n,selectors:[["list-component"]],inputs:{lists:"lists",cMovies:"cMovies"},decls:11,vars:1,consts:[["newlist",""],["deletelist",""],[1,"position-fixed","start-0","top-0","container-fluid","m-2","my-4",2,"z-index","60"],[1,"row","my-4"],[1,"col-w100","py-1","my-1"],[1,"col-0","col-md-1","col-lg-2","p-0","m-0"],[1,"col-auto","btn","btn-outline-primary","bg-white",3,"click"],["class","container-fluid p-0 m-0 pb-4 mb-4 border-bottom",4,"ngFor","ngForOf"],[1,"modal-header"],["id","modal-new-list",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"input-group"],[1,"col-12"],["type","text","placeholder","Name","autocomplete","off","maxlength","50","required","",1,"form-control","mb-2"],["listname",""],[1,"col-w100"],["type","text","placeholder","Description","autocomplete","off","maxlength","50",1,"form-control","mb-2"],["listinfo",""],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],["id","modal-delete-list",1,"modal-title"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"container-fluid","p-0","m-0","pb-4","mb-4","border-bottom"],[1,"d-flex","flex-row","p-0","m-0","justify-content-between"],[1,""],["type","button",1,"col-auto","btn","btn-sm","btn-outline-danger","d-none","d-sm-inline",3,"click"],["type","button",1,"col-auto","btn","btn-sm","btn-outline-danger","d-inline","d-sm-none",3,"click"],["name","X",1,"someclass",2,"height","1.5rem"],[1,"row","p-0","m-0"],[1,"col-auto","p-0","m-0"],["class","col-2 col-sm-1 p-0 m-0 text-truncate",4,"ngFor","ngForOf"],[1,"col-2","col-sm-1","p-0","m-0","text-truncate"],["class","img-fluid rounded btn p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING","alt","",3,"routerLink","click",4,"ngIf"],["class","img-fluid rounded btn p-0 m-0","alt","",3,"src","routerLink","click",4,"ngIf"],["src","https://via.placeholder.com/200x300?text=LOADING","alt","",1,"img-fluid","rounded","btn","p-0","m-0",3,"routerLink","click"],["alt","",1,"img-fluid","rounded","btn","p-0","m-0",3,"src","routerLink","click"]],template:function(e,i){if(1&e){const r=o.EpF();o.YNc(0,S6e,19,0,"ng-template",null,0,o.W1O),o.YNc(2,z6e,11,1,"ng-template",null,1,o.W1O),o.TgZ(4,"div",2)(5,"div",3),o._UZ(6,"div",4)(7,"div",5),o.TgZ(8,"h6",6),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(1);return o.KtG(i.open(c))}),o._uU(9," New List "),o.qZA()()(),o.YNc(10,V6e,16,3,"div",7)}2&e&&(o.xp6(10),o.Q6J("ngForOf",i.aLists))},dependencies:[z1,hi,cn,r0,L0,B0,u5],encapsulation:2}),n})(),yN=(()=>{class n{constructor(e){this.db=e,this.debug=!1,this.debug&&console.log("UserService()")}setItem(e){var i=this;return(0,ie.Z)(function*(){yield i.db.list("users").update(e.uid,e)})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function L6e(n,t){if(1&n&&(o.TgZ(0,"div",2)(1,"div",3),o._uU(2),o.qZA(),o.TgZ(3,"div",3),o._uU(4),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.hij(" Name: ",e.us.user.name," "),o.xp6(2),o.hij(" Email: ",e.us.user.email," ")}}let O6e=(()=>{class n{constructor(e){this.us=e,this.title="profile-component"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(yN))},n.\u0275cmp=o.Xpm({type:n,selectors:[["profile-component"]],decls:2,vars:1,consts:[[1,"container-fluid","my-4","p-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,L6e,5,2,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.us.user))},dependencies:[cn],encapsulation:2}),n})(),P6e=(()=>{class n{constructor(){this.title="settings-component"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["settings-component"]],decls:3,vars:0,consts:[[1,"container-fluid","p-4"],[1,"row"],[1,"col"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2),o.qZA()())},encapsulation:2}),n})();function H6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return s.ds.reset(),s.ds.cGenres[0]=r,o.KtG(s.ds.loadMovies())}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("",e.name," ")}}function F6e(n,t){if(1&n&&(o.TgZ(0,"button",13),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("",e.name," ")}}function B6e(n,t){if(1&n&&(o.TgZ(0,"div",9),o.YNc(1,H6e,2,1,"button",10),o.YNc(2,F6e,2,1,"button",11),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",!e.active),o.xp6(1),o.Q6J("ngIf",e.active)}}function U6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"Sort:\xa0"),o.qZA()(),o.TgZ(4,"div",1)(5,"div",9)(6,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"popularity",""))}),o._uU(7,"Default"),o.qZA()(),o.TgZ(8,"div",9)(9,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"title",""))}),o._uU(10,"Title"),o.qZA()(),o.TgZ(11,"div",9)(12,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"runtime",""))}),o._uU(13,"Runtime"),o.qZA()(),o.TgZ(14,"div",9)(15,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"budget",""))}),o._uU(16,"budget"),o.qZA()(),o.TgZ(17,"div",9)(18,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"vote_average",""))}),o._uU(19,"vote_average"),o.qZA()(),o.TgZ(20,"div",9)(21,"button",12),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.ds.sortArrayBy(r.ds.cMovies,"vote_count",""))}),o._uU(22,"vote_count"),o.qZA()()()()}}function Z6e(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"Searching"),o.qZA())}function j6e(n,t){if(1&n&&(o.TgZ(0,"div",14)(1,"h4"),o._uU(2),o.qZA(),o.YNc(3,Z6e,2,0,"p",15),o.qZA()),2&n){const e=o.oxw();o.xp6(2),o.hij("Results: ",e.ds.cMovies.length,""),o.xp6(1),o.Q6J("ngIf",e.ds.loadingMovies)}}function G6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",23),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.MGl("routerLink","/movie/",e.id,"")}}function $6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"img",24),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw(2);return o.KtG(s.ms.cMovie=r)}),o.qZA()}if(2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w400"+e.poster_path,o.LSH),o.MGl("routerLink","/movie/",e.id,"")}}function q6e(n,t){if(1&n&&(o.TgZ(0,"div",18)(1,"div",19),o._uU(2),o.qZA(),o.TgZ(3,"div",20),o.YNc(4,G6e,1,1,"img",21),o.YNc(5,$6e,1,2,"img",22),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij(" ",e.title," "),o.xp6(2),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",e.poster_path&&!e.poster_loading)}}function W6e(n,t){if(1&n&&(o.TgZ(0,"div",16)(1,"div",1),o.YNc(2,q6e,6,3,"div",17),o.ALo(3,"slice"),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.Q6J("ngForOf",o.Dn7(3,1,e.ds.cMovies,e.ds.result.min,e.ds.result.max))}}function K6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",28),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return r.ds.loadMovies(),o.KtG(r.ds.result.navigate(1))}),o._uU(1," Load more movies "),o.qZA()}}function Y6e(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",29),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return r.ds.loadMovies(),o.KtG(r.ds.result.navigate(1))}),o._uU(1," Searching for movies "),o.qZA()}}function J6e(n,t){if(1&n&&(o.TgZ(0,"div",25),o.YNc(1,K6e,2,0,"div",26),o.YNc(2,Y6e,2,0,"div",27),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",!e.ds.loadingMovies),o.xp6(1),o.Q6J("ngIf",e.ds.loadingMovies)}}function Q6e(n,t){1&n&&(o.TgZ(0,"div",30)(1,"div",31),o._UZ(2,"div",32),o.TgZ(3,"h6",33),o._uU(4,"Loading..."),o.qZA(),o._UZ(5,"div",34),o.TgZ(6,"div",35)(7,"div",36)(8,"span",37),o._uU(9,"Loading..."),o.qZA()()()()())}let X6e=(()=>{class n{constructor(e,i,r,s,c){this.tmdb=e,this.ms=i,this.location=r,this.ds=s,this.auth=c,this.isLoggedIn=!1,this.genresdb=Sw}ngOnInit(){this.isLoggedIn=this.auth.isLoggedIn,this.ds.reset()}ngOnDestroy(){console.log(this.constructor.name+".ngOnDestroy()"),this.ds.reset()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ys),o.Y36(Ya),o.Y36(Ne),o.Y36(pb),o.Y36(K0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["discover-component"]],decls:11,vars:6,consts:[[1,"container-fluid","mb-4","px-4"],[1,"row"],[1,"col-auto","p-0","m-0","mb-2"],["class","col-auto p-0 m-0",4,"ngFor","ngForOf"],["class","container-fluid mb-4 px-4",4,"ngIf"],["class","container-fluid mb-4",4,"ngIf"],["class","container-fluid",4,"ngIf"],["class","d-flex mx-auto justify-content-center",4,"ngIf"],["class","container-fluid pb-4 mb-4",4,"ngIf"],[1,"col-auto","p-0","m-0"],["class","p-0 px-2 py-1 btn btn-outline-dark btn-sm me-2 mb-2",3,"click",4,"ngIf"],["class","p-0 px-2 py-1 btn btn-dark btn-sm me-2 mb-2",4,"ngIf"],[1,"p-0","px-2","py-1","btn","btn-outline-dark","btn-sm","me-2","mb-2",3,"click"],[1,"p-0","px-2","py-1","btn","btn-dark","btn-sm","me-2","mb-2"],[1,"container-fluid","mb-4"],[4,"ngIf"],[1,"container-fluid"],["class","col-4 col-md-3 col-lg-2 m-0 p-0 mb-4 px-2",4,"ngFor","ngForOf"],[1,"col-4","col-md-3","col-lg-2","m-0","p-0","mb-4","px-2"],[1,"col-12","mb-2","text-truncate"],[1,"col-12","btn","p-0","m-0"],["class","img-fluid rounded","src","https://via.placeholder.com/400x600?text=LOADING",3,"routerLink","click",4,"ngIf"],["class","img-fluid rounded",3,"src","routerLink","click",4,"ngIf"],["src","https://via.placeholder.com/400x600?text=LOADING",1,"img-fluid","rounded",3,"routerLink","click"],[1,"img-fluid","rounded",3,"src","routerLink","click"],[1,"d-flex","mx-auto","justify-content-center"],["class","col-auto btn btn-outline-dark btn-sm",3,"click",4,"ngIf"],["class","col-auto btn btn-outline-dark btn-sm disabled",3,"click",4,"ngIf"],[1,"col-auto","btn","btn-outline-dark","btn-sm",3,"click"],[1,"col-auto","btn","btn-outline-dark","btn-sm","disabled",3,"click"],[1,"container-fluid","pb-4","mb-4"],[1,"row","pb-4","mb-4"],[1,"col-w100","pb-4","mb-4"],[1,"col-auto","mx-auto","align-middle"],[1,"col-w100","pb-2","mb-2"],[1,"col-auto","mx-auto"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"By genre:\xa0"),o.qZA()(),o.TgZ(4,"div",1),o.YNc(5,B6e,3,2,"div",3),o.qZA()(),o.YNc(6,U6e,23,0,"div",4),o.YNc(7,j6e,4,2,"div",5),o.YNc(8,W6e,4,5,"div",6),o.YNc(9,J6e,3,2,"div",7),o.YNc(10,Q6e,10,0,"div",8)),2&e&&(o.xp6(5),o.Q6J("ngForOf",i.ds.tmdbGenres),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length>0),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length>0),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length>0),o.xp6(1),o.Q6J("ngIf",i.ds.result.moviesLoaded>0),o.xp6(1),o.Q6J("ngIf",i.ds.cMovies.length<1&&i.ds.loadingMovies))},dependencies:[z1,hi,cn,Qo],encapsulation:2}),n})(),vb=(()=>{class n{constructor(e,i,r){this.db=e,this.tmdb=i,this.authService=r,console.log("SearchService()")}SearchForMoviesTmdb(e){this.results=this.tmdb.searchMoviesTmdb(e,1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Jh),o.LFG(Ys),o.LFG(K0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",6),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.ms.cMovie=s)}),o.TgZ(1,"div",7)(2,"small",8),o._uU(3),o.qZA()(),o._UZ(4,"img",9),o.qZA()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(3),o.Oqu(e.title),o.xp6(1),o.Q6J("src",e.base_url+"w400"+e.poster_path,o.LSH)}}let tme=(()=>{class n{constructor(e,i){this.ss=e,this.ms=i,this.title="search-page-component",console.log("SearchPageComponent();"),this.loadMovies()}ngOnInit(){this.loadMovies()}loadMovies(){this.ss.results?.subscribe(e=>{console.log("loadMovies"),this.movies=e.results,this.pages=e.page,this.movies.forEach(i=>{console.log(i),new Fa(i),i.base_url="https://image.tmdb.org/t/p/"})})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(vb),o.Y36(Ya))},n.\u0275cmp=o.Xpm({type:n,selectors:[["search-page-component"]],decls:8,vars:1,consts:[[1,"container-fluid","p-4"],[1,"row","mb-4"],["class","col-3 mb-4 p-0 m-0",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"col-auto","mx-auto"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"col-3","mb-4","p-0","m-0",3,"routerLink","click"],[1,"text-truncate"],[1,""],[1,"img-fluid","btn","p-0","m-0",3,"src"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,eme,5,3,"div",2),o.qZA()(),o.TgZ(3,"div",1)(4,"div",3)(5,"div",4)(6,"span",5),o._uU(7,"Loading..."),o.qZA()()()()),2&e&&(o.xp6(2),o.Q6J("ngForOf",i.movies))},dependencies:[z1,hi],encapsulation:2}),n})(),nme=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}ngOnInit(){}signin(e,i){var r=this;return(0,ie.Z)(function*(){yield r.authService.SignIn(e.value,i.value).then(()=>{console.log("signed in!!!!")})})()}GoogleAuth(){var e=this;return(0,ie.Z)(function*(){yield e.authService.GoogleAuth().then(()=>{console.log("signed in!!!!")})})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(K0),o.Y36(gi))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-in"]],decls:32,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],[1,"form-group","mb-2"],["type","email","placeholder","Email Address","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],[1,"form-group"],["type","button","value","Log in",1,"col-12","btn","btn-primary",3,"click"],[1,"col-12","text-center"],["type","button",1,"col-12","btn","btn-outline-primary",3,"click"],[1,"fa-brands","fa-google"],["routerLink","/forgot-password"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/register-user"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Sign in"),o.qZA(),o.TgZ(5,"form")(6,"div",4),o._UZ(7,"input",5,6),o.qZA(),o.TgZ(9,"div",4),o._UZ(10,"input",7,8),o.qZA(),o.TgZ(12,"div",9)(13,"input",10),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(8),d=o.MAs(11);return o.KtG(i.signin(c,d))}),o.qZA()(),o.TgZ(14,"div",9)(15,"div",11),o._uU(16,"- or -"),o.qZA()(),o.TgZ(17,"div",4)(18,"button",12),o.NdJ("click",function(){return i.authService.GoogleAuth()}),o._UZ(19,"i",13),o._uU(20," Log in with Google "),o.qZA()(),o.TgZ(21,"div",11)(22,"small"),o._uU(23," Forgot password? "),o.TgZ(24,"a",14),o._uU(25,"Recover"),o.qZA()()()()(),o._UZ(26,"div",15),o.TgZ(27,"div",16)(28,"small"),o._uU(29," Don't have an account? "),o.TgZ(30,"a",17),o._uU(31,"Sign up"),o.qZA()()()()()}},dependencies:[N1,r0,L0,B0]}),n})(),ime=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(K0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-up"]],decls:27,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],[1,"form-group","mb-2"],["type","email","placeholder","Email Address","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],[1,"form-group"],["type","button","value","Sign Up",1,"col-12","btn","btn-primary",3,"click"],[1,"col-12","text-center"],["type","button",1,"col-12","btn","btn-outline-primary",3,"click"],[1,"fa-brands","fa-google"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/sign-in"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Sign up"),o.qZA(),o.TgZ(5,"form")(6,"div",4),o._UZ(7,"input",5,6),o.qZA(),o.TgZ(9,"div",4),o._UZ(10,"input",7,8),o.qZA(),o.TgZ(12,"div",9)(13,"input",10),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(8),d=o.MAs(11);return o.KtG(i.authService.SignUp(c.value,d.value))}),o.qZA()(),o.TgZ(14,"div",9)(15,"div",11),o._uU(16,"- or -"),o.qZA()(),o.TgZ(17,"div",9)(18,"button",12),o.NdJ("click",function(){return i.authService.GoogleAuth()}),o._UZ(19,"i",13),o._uU(20," Continue with Google "),o.qZA()()()(),o._UZ(21,"div",14),o.TgZ(22,"div",15)(23,"small"),o._uU(24," Already have an account? "),o.TgZ(25,"a",16),o._uU(26,"Sign in"),o.qZA()()()()()}},dependencies:[N1,r0,L0,B0]}),n})();function rme(n,t){if(1&n&&o._UZ(0,"img",23),2&n){const e=o.oxw().ngIf;o.s9C("src",e.photoURL,o.LSH),o.s9C("alt",e.displayName)}}function sme(n,t){1&n&&(o.TgZ(0,"div",24),o._UZ(1,"i",25),o.qZA())}function ome(n,t){if(1&n&&(o.TgZ(0,"h4"),o._uU(1),o.qZA()),2&n){const e=o.oxw().ngIf;o.xp6(1),o.hij("Hello ",e.displayName,"")}}function ame(n,t){if(1&n&&(o.TgZ(0,"div",1)(1,"div",19),o.YNc(2,rme,1,2,"img",20),o.YNc(3,sme,2,0,"div",21),o.YNc(4,ome,2,1,"h4",22),o.TgZ(5,"p"),o._uU(6,"ID: "),o.TgZ(7,"strong"),o._uU(8),o.qZA()(),o.TgZ(9,"p"),o._uU(10,"Email: "),o.TgZ(11,"strong"),o._uU(12),o.qZA()(),o.TgZ(13,"p"),o._uU(14,"Email Verified: "),o.TgZ(15,"strong"),o._uU(16),o.qZA()()()()),2&n){const e=t.ngIf;o.xp6(2),o.Q6J("ngIf",e.photoURL),o.xp6(1),o.Q6J("ngIf",!e.photoURL),o.xp6(1),o.Q6J("ngIf",e.displayName),o.xp6(4),o.Oqu(e.uid),o.xp6(4),o.Oqu(e.email),o.xp6(4),o.Oqu(e.emailVerified)}}function lme(n,t){if(1&n&&(o.TgZ(0,"main",14)(1,"div",15)(2,"div",1)(3,"div",16)(4,"h4",17),o._uU(5,"User Profile"),o.qZA()()(),o.YNc(6,ame,17,6,"div",18),o.qZA()()),2&n){const e=o.oxw();o.xp6(6),o.Q6J("ngIf",e.authService.userData)}}function cme(n,t){if(1&n&&(o.TgZ(0,"option",32),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.s9C("value",e),o.xp6(1),o.hij("",e,"+")}}function ume(n,t){if(1&n&&(o.TgZ(0,"div",26),o._uU(1),o.TgZ(2,"div",33)(3,"label",34),o._uU(4),o.qZA(),o._UZ(5,"input",35),o.qZA()()),2&n){const e=o.oxw(3);o.xp6(1),o.hij(" Show as: ",null==e.authService.user?null:e.authService.user.prefs.showAs," "),o.xp6(3),o.hij("Show as: ",null==e.authService.user?null:e.authService.user.prefs.showAs,"")}}function hme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1)(1,"div",26)(2,"div",27)(3,"span",28),o._uU(4,"Age rating"),o.qZA(),o.TgZ(5,"select",29),o.NdJ("change",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.setAge(r))})("ngModelChange",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.authService.user.settings.ageRating=r)}),o.YNc(6,cme,2,2,"option",30),o.qZA()()(),o.YNc(7,ume,6,2,"div",31),o.qZA()}if(2&n){const e=o.oxw(2);o.xp6(5),o.Q6J("ngModel",e.authService.user.settings.ageRating),o.xp6(1),o.Q6J("ngForOf",e.ages),o.xp6(1),o.Q6J("ngIf",null==e.authService.user?null:e.authService.user.prefs)}}function dme(n,t){if(1&n&&(o.TgZ(0,"main",14)(1,"div",15)(2,"div",1)(3,"div",16)(4,"h4",17),o._uU(5,"Settings"),o.qZA()()(),o.YNc(6,hme,8,3,"div",18),o.qZA()()),2&n){const e=o.oxw();o.xp6(6),o.Q6J("ngIf",null==e.authService.user?null:e.authService.user.loaded)}}function fme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",36)(1,"div",37)(2,"div",38)(3,"h4",17),o._uU(4,"Sign out?"),o.qZA()()(),o.TgZ(5,"div",39)(6,"div",40),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.signOut("y"))}),o._uU(7," Yes "),o.qZA(),o.TgZ(8,"div",41),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.signOut("n"))}),o._uU(9," No "),o.qZA()()()}}function gme(n,t){1&n&&o._UZ(0,"div",42)}let pme=(()=>{class n{constructor(e,i){this.authService=e,this.us=i,this.page="settings",this.ages=[7,9,11,13,16,18],this.pages=[],this.promptVisible=!1,this.dBody=document.body,this.isInline=!1,window.addEventListener("resize",r=>{})}ngOnInit(){this.nav(this.page)}ngAfterViewChecked(){}setAge(e){console.log(e.target.value),this.authService.user.settings.ageRating=Number(e.target.value),this.us.setItem(this.authService.user)}setH(){}nav(e){this.pages=[],this.pages.push(document.getElementById("profile")),this.pages.push(document.getElementById("settings"));for(const i of this.pages)i.classList.remove("bg-primary"),i.classList.remove("text-white"),i.style.cursor="pointer",i.id==e&&(i.classList.add("bg-primary"),i.classList.add("text-white"),i.style.cursor="auto");this.page=e}isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}promptSignOut(){this.promptVisible=!0}signOut(e){this.promptVisible=!1,"y"==e&&this.authService.SignOut()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(K0),o.Y36(yN))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-dashboard"]],decls:26,vars:4,consts:[[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-auto","d-flex","d-md-block","p-0","m-0","mb-4","text-center"],["id","profile",1,"col","bg-primary","text-white","py-2","px-4","border",2,"cursor","pointer","user-select","none",3,"click"],[1,"fas","fa-user"],[1,"d-none","d-sm-inline"],["id","settings",1,"col","py-2","px-4","border",2,"cursor","pointer","user-select","none",3,"click"],[1,"fas","fa-gear"],[1,"col","d-none","d-md-block","py-2","px-4","border"],[1,"col","py-2","px-4","border",2,"cursor","pointer","user-select","none",3,"click"],[1,"fa-solid","fa-right-from-bracket"],["role","main","class","col px-4 mx-auto",4,"ngIf"],["class","position-fixed col-10 col-sm-8 col-md-6 col-lg-4 translate-middle start-50 top-50 bg-white p-4 border rounded","style","z-index:1200;",4,"ngIf"],["class","position-fixed translate-middle start-50 top-50","style","z-index:1000; width: 100vw; height: 100vh; background:rgba(0,0,0,0.6);",4,"ngIf"],["role","main",1,"col","px-4","mx-auto"],[1,"inner-adjust"],[1,"col","pb-2","mb-3","border-bottom"],[1,""],["class","row",4,"ngIf"],[1,"col"],["class","img img-fluid rounded-circle mb-2",3,"src","alt",4,"ngIf"],["class","h1 mb-2",4,"ngIf"],[4,"ngIf"],[1,"img","img-fluid","rounded-circle","mb-2",3,"src","alt"],[1,"h1","mb-2"],[1,"fa-solid","fa-user"],[1,"col-12"],[1,"input-group","mb-3"],[1,"input-group-text"],["title","rating","id","set-age",1,"form-select",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[3,"value"],[1,"form-check","form-switch"],["for","flexSwitchCheckDefault",1,"form-check-label"],["type","checkbox","id","flexSwitchCheckDefault","checked","",1,"form-check-input"],[1,"position-fixed","col-10","col-sm-8","col-md-6","col-lg-4","translate-middle","start-50","top-50","bg-white","p-4","border","rounded",2,"z-index","1200"],[1,"row","px-2"],[1,"col-12","pb-4","mb-4","border-bottom"],[1,"row","px-4","justify-content-end"],[1,"col-auto","btn","btn-danger","me-2",3,"click"],[1,"col-auto","btn","btn-outline-primary",3,"click"],[1,"position-fixed","translate-middle","start-50","top-50",2,"z-index","1000","width","100vw","height","100vh","background","rgba(0,0,0,0.6)"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o.NdJ("click",function(){return i.nav("profile")}),o.TgZ(4,"i",4),o._uU(5,"\xa0"),o.qZA(),o.TgZ(6,"div",5),o._uU(7,"\xa0User Profile"),o.qZA()(),o.TgZ(8,"div",6),o.NdJ("click",function(){return i.nav("settings")}),o.TgZ(9,"i",7),o._uU(10,"\xa0"),o.qZA(),o.TgZ(11,"div",5),o._uU(12,"\xa0Settings"),o.qZA()(),o.TgZ(13,"div",8),o._uU(14," \xa0 "),o.TgZ(15,"div",5),o._uU(16,"\xa0"),o.qZA()(),o.TgZ(17,"div",9),o.NdJ("click",function(){return i.promptSignOut()}),o.TgZ(18,"i",10),o._uU(19,"\xa0"),o.qZA(),o.TgZ(20,"div",5),o._uU(21,"\xa0Sign out"),o.qZA()()(),o.YNc(22,lme,7,1,"main",11),o.YNc(23,dme,7,1,"main",11),o.qZA()(),o.YNc(24,fme,10,0,"div",12),o.YNc(25,gme,1,0,"div",13)),2&e&&(o.xp6(22),o.Q6J("ngIf","profile"==i.page),o.xp6(1),o.Q6J("ngIf","settings"==i.page),o.xp6(1),o.Q6J("ngIf",i.promptVisible),o.xp6(1),o.Q6J("ngIf",i.promptVisible))},dependencies:[hi,cn,qf,zd,Sd,Ea,gs],encapsulation:2}),n})(),vme=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(K0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-forgot-password"]],decls:19,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],[1,"form-group","mb-2"],["type","email","placeholder","Email Address","required","",1,"form-control"],["passwordResetEmail",""],["id","emailHelp",1,"form-text","text-muted"],[1,"form-group"],["type","submit","value","Reset Password",1,"col-12","btn","btn-primary",3,"click"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/sign-in"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Reset Password"),o.qZA(),o.TgZ(5,"form")(6,"div",4),o._UZ(7,"input",5,6),o.TgZ(9,"small",7),o._uU(10,"Please enter your email address to request a password reset."),o.qZA()(),o.TgZ(11,"div",8)(12,"input",9),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(8);return o.KtG(i.authService.ForgotPassword(c.value))}),o.qZA()()()(),o._UZ(13,"div",10),o.TgZ(14,"div",11)(15,"small"),o._uU(16," Go back to? "),o.TgZ(17,"a",12),o._uU(18,"Log in"),o.qZA()()()()()}},dependencies:[N1,r0,L0,B0]}),n})();function mme(n,t){if(1&n&&(o.TgZ(0,"div",5)(1,"p",12),o._uU(2,"We have sent a confirmation email to "),o.TgZ(3,"strong"),o._uU(4),o.qZA(),o._uU(5,"."),o.qZA(),o.TgZ(6,"p",13),o._uU(7,"Please check your email and click on the link to verfiy your email address."),o.qZA()()),2&n){const e=t.ngIf;o.xp6(4),o.Oqu(e.email)}}let wme=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(K0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-verify-email"]],decls:18,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-sm-auto","border","rounded","p-4","mx-auto"],[1,"col-12","mb-3","text-center"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"row","justify-content-middle"],["type","button",1,"col-auto","btn","btn-primary","mx-auto",3,"click"],[1,"fas","fa-redo-alt"],[1,"col-w100"],[1,"col-auto","mx-auto","mt-2"],["routerLink","/sign-in"],[1,"text-center","m-0"],[1,"text-center"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Thank You for Registering"),o.qZA(),o.TgZ(5,"form"),o.YNc(6,mme,8,1,"div",4),o.TgZ(7,"div",5)(8,"div",6)(9,"button",7),o.NdJ("click",function(){return i.authService.SendVerificationMail()}),o._UZ(10,"i",8),o._uU(11," Resend verification email "),o.qZA()()()()(),o._UZ(12,"div",9),o.TgZ(13,"div",10)(14,"small"),o._uU(15," Go back to? "),o.TgZ(16,"a",11),o._uU(17,"Sign in"),o.qZA()()()()()),2&e&&(o.xp6(6),o.Q6J("ngIf",i.authService.userData))},dependencies:[N1,cn,r0,L0,B0]}),n})(),sd=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return 1!=this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(K0),o.LFG(gi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _me=[{path:"",component:_G,data:{title:"Home"}},{path:"home",component:_G,data:{title:"Home"}},{path:"movies",component:jve,data:{title:"Movies"},canActivate:[sd]},{path:"movie/:id",component:E6e,data:{title:"Movie details"}},{path:"lists",component:bG,data:{title:"Lists"},canActivate:[sd]},{path:"list/:name",component:bG,data:{title:"List details"},canActivate:[sd]},{path:"profile",component:O6e,data:{title:"Profile"},canActivate:[sd]},{path:"settings",component:P6e,data:{title:"Settings"},canActivate:[sd]},{path:"search",component:tme,pathMatch:"full",data:{title:"Search"},canActivate:[sd]},{path:"discover",component:X6e,data:{title:"Discover"}},{path:"dashboard",component:pme,data:{title:"Dashboard"},canActivate:[sd]},{path:"sign-in",component:nme,data:{title:"Sign in"}},{path:"register-user",component:ime,data:{title:"Register"}},{path:"forgot-password",component:vme,data:{title:"Reset password"}},{path:"verify-email-address",component:wme,data:{title:"Verify email address"}}];let bme=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[oL.forRoot(_me,{onSameUrlNavigation:"reload"}),oL]}),n})(),yme=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.ss=i,this.ms=r,this.tmdb=s,this.ds=c,this.title="search-field-component",e.events.subscribe(d=>{this.clear()})}ngOnInit(){}loadMovies(){var e=this;this.ss.results?.subscribe(function(){var i=(0,ie.Z)(function*(r){e.movies=r.results,console.log(e.movies),e.movies.forEach(s=>{s.base_url="https://image.tmdb.org/t/p/"}),e.ss.movies=e.movies});return function(r){return i.apply(this,arguments)}}())}search(){var e=this;return(0,ie.Z)(function*(){console.log("search"),console.log(e.value),e.movies=[],""!=e.value?e.tmdb.searchMoviesTmdb(e.value,1).subscribe(function(){var i=(0,ie.Z)(function*(r){e.ss.movies=[],r.results.forEach(s=>{let c=new Fa(s);s.base_url="https://image.tmdb.org/t/p/",e.ss.movies.push(s),e.movies.push(c)}),e.movies.forEach(s=>{s.init()})});return function(r){return i.apply(this,arguments)}}()):e.clear()})()}fullSearch(){console.log("Fullsearch"),console.log(this.value),this.ss.SearchForMoviesTmdb(this.value),this.value="",this.movies=[],this.ss.movies=void 0,this.router.navigate(["search"])}clear(){this.ss.movieResults=[],this.value="",this.movies=[],this.ss.movies=void 0}checkEvent(e){"Enter"==e.key&&(console.log("Pressed enter"),""!=this.value?this.fullSearch():(this.value="",this.movies=void 0,this.clear()))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gi),o.Y36(vb),o.Y36(Ya),o.Y36(Ys),o.Y36(pb))},n.\u0275cmp=o.Xpm({type:n,selectors:[["search-field-component"]],decls:3,vars:1,consts:[[1,"form-inline","mx-sm-4","my-2"],["id","sfmovie","type","Search","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keypress","input","close"],["searchForMovie",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"input",1,2),o.NdJ("ngModelChange",function(s){return i.value=s})("keypress",function(s){return i.checkEvent(s)})("input",function(){return i.search()})("close",function(){return i.clear()}),o.qZA()()),2&e&&(o.xp6(1),o.Q6J("ngModel",i.value))},dependencies:[Ls,Ea,gs],encapsulation:2}),n})();function Cme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",19),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="movies")}),o._uU(1,"Movies"),o.qZA()}}function Mme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",20),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="lists")}),o._uU(1,"Lists"),o.qZA()}}function xme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",21),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="dashboard")}),o._uU(1,"Dashboard"),o.qZA()}}function Ame(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"a",22),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.isMenuCollapsed=!0,o.KtG(r.ms.page="sign-in")}),o._UZ(1,"i",23),o._uU(2," Sign in"),o.qZA()}}let Dme=(()=>{class n{constructor(e,i,r){this.authService=e,this.ms=i,this.router=r,this.title="navigation-component",this.isMenuCollapsed=!0,this.navItems=[]}ngOnInit(){this.router.events.pipe(Hn(e=>e instanceof ic)).subscribe(e=>{let r=this.router.routerState.snapshot.root.children;this.title="";for(let c=0;c<r.length;c++){this.page=r[c].data.title}let s=document.querySelectorAll(".nav-item");for(let c=0;c<s.length;c++){let d=s[c];if(d.getAttribute("route")){let g=d.firstChild;g.classList.remove("text-primary","border-bottom","border-primary"),g.style.border="none",g.style.boxShadow="none",d.getAttribute("route").toLowerCase()==this.page.toLowerCase()&&g.classList.add("text-primary","border-bottom","border-primary")}}})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(K0),o.Y36(Ya),o.Y36(gi))},n.\u0275cmp=o.Xpm({type:n,selectors:[["navigation-component"]],decls:22,vars:6,consts:[[1,"fixed-top","navbar","navbar-expand-md","navbar-light","bg-light","border-bottom","p-0","m-0","px-2","px-sm-4",2,"z-index","500","width","100vw"],["routerLink","/",1,"navbar-brand",3,"click"],[1,"d-inline","d-sm-inline","d-md-none","d-lg-none"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav"],["route","movies",1,"nav-item"],["class","nav-link","routerLink","/movies",3,"click",4,"ngIf"],["route","lists",1,"nav-item"],["class","nav-link","routerLink","/lists",3,"click",4,"ngIf"],["route","discover",1,"nav-item"],["routerLink","/discover",1,"nav-link",3,"click"],[1,"d-none","d-sm-none","d-md-block"],[1,"collapse","navbar-collapse","justify-content-end",3,"ngbCollapse"],["route","dashboard",1,"nav-item"],["class","nav-link","routerLink","/dashboard",3,"click",4,"ngIf"],[1,"nav-item"],["class","nav-link","routerLink","/sign-in",3,"click",4,"ngIf"],["routerLink","/movies",1,"nav-link",3,"click"],["routerLink","/lists",1,"nav-link",3,"click"],["routerLink","/dashboard",1,"nav-link",3,"click"],["routerLink","/sign-in",1,"nav-link",3,"click"],[1,"fa-solid","fa-right-to-bracket"]],template:function(e,i){1&e&&(o.TgZ(0,"nav",0)(1,"a",1),o.NdJ("click",function(){return i.isMenuCollapsed=!0,i.ms.page="Home"}),o._uU(2,"Home"),o.qZA(),o._UZ(3,"search-field-component",2),o.TgZ(4,"button",3),o.NdJ("click",function(){return i.isMenuCollapsed=!i.isMenuCollapsed}),o._UZ(5,"span",4),o.qZA(),o.TgZ(6,"div",5)(7,"ul",6)(8,"li",7),o.YNc(9,Cme,2,0,"a",8),o.qZA(),o.TgZ(10,"li",9),o.YNc(11,Mme,2,0,"a",10),o.qZA(),o.TgZ(12,"li",11)(13,"a",12),o.NdJ("click",function(){return i.isMenuCollapsed=!0,i.ms.page="discover"}),o._uU(14,"Discover"),o.qZA()()()(),o._UZ(15,"search-field-component",13),o.TgZ(16,"div",14)(17,"ul",6)(18,"li",15),o.YNc(19,xme,2,0,"a",16),o.qZA(),o.TgZ(20,"li",17),o.YNc(21,Ame,3,0,"a",18),o.qZA()()()()),2&e&&(o.xp6(6),o.Q6J("ngbCollapse",i.isMenuCollapsed),o.xp6(3),o.Q6J("ngIf",i.authService.isLoggedIn),o.xp6(2),o.Q6J("ngIf",i.authService.isLoggedIn),o.xp6(5),o.Q6J("ngbCollapse",i.isMenuCollapsed),o.xp6(3),o.Q6J("ngIf",i.authService.isLoggedIn),o.xp6(2),o.Q6J("ngIf",!i.authService.isLoggedIn))},dependencies:[N1,j3e,fN,cn,yme],encapsulation:2}),n})(),Tme=(()=>{class n{constructor(e,i){this.location=e,this.router=i,this.title="",this.router.events.pipe(Hn(r=>r instanceof ic)).subscribe(r=>{let c=this.router.routerState.snapshot.root.children;this.title="";for(let d=0;d<c.length;d++){this.title+=c[d].data.title}})}ngOnInit(){}ngOnChanges(){console.log("CHANGE!!!")}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ne),o.Y36(gi))},n.\u0275cmp=o.Xpm({type:n,selectors:[["header-component"]],features:[o.TTD],decls:5,vars:1,consts:[[1,"fixed-top","container-fluid","mt-4",2,"z-index","50"],[1,"row","mt-4"],[1,"col-w100","py-1","my-1"],[1,"col-auto","rounded","border","bg-white","text-secondary","mx-auto","py-2","px-3"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2),o.TgZ(3,"h6",3),o._uU(4),o.qZA()()()),2&e&&(o.xp6(4),o.hij(" ",i.title," "))},encapsulation:2}),n})(),Eme=(()=>{class n{constructor(){this.title="footer-component",this.isFixed=!1,this.dBody=document.body,window.addEventListener("resize",e=>{this.setH()})}ngOnInit(){this.footer=document.getElementById("footer")}ngAfterViewInit(){this.setH()}setH(){this.dBody.clientHeight>window.innerHeight-this.footer.clientHeight?this.footer.style.position="relative":(this.footer.style.position="fixed",this.footer.style.bottom="0")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["footer-component"]],decls:13,vars:0,consts:[["id","footer",1,"container-fluid","p-2","mt-4","border-top","bg-white",2,"z-index","600"],[1,"row","text-center"],[1,"col-4","btn","p-0","m-0"],["routerLink","/",1,"btn","p-0","m-0"],[1,"col-4","btn","p-0","m-0","border-end","border-start"],["href","https://www.themoviedb.org/","target","_blank"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),o._uU(4," \xa0 "),o.qZA()(),o.TgZ(5,"div",4)(6,"small"),o._uU(7,"Powered by "),o.TgZ(8,"a",5),o._uU(9,"Tmdb"),o.qZA()()(),o.TgZ(10,"div",2)(11,"a",3),o._uU(12," \xa0 "),o.qZA()()()())},dependencies:[N1],encapsulation:2}),n})();const Ime=function(n,t,e){return{width:n,bottom:t,right:e}};let Sme=(()=>{class n{constructor(){this.title="to-top-angular",this.window={w:0,h:0},this.w=32,this.h=32,this.r=4,this.b=4,this.breakpoints={xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400},this.show=!0,this.window.h=window.innerHeight,this.window.w=window.innerWidth,console.log("change size of window"),console.log(this.window.w),this.setSeizes(),window.addEventListener("resize",()=>{this.window.h=window.innerHeight,this.window.w=window.innerWidth,console.log("change size of window"),console.log(this.window.w),this.setSeizes()}),window.addEventListener("scroll",()=>{this.show=(window,!0)})}setSeizes(){this.r=4,this.b=4,this.w=64,this.h=64,this.window.w<=this.breakpoints.lg&&(this.r=4,this.b=4,this.w=64,this.h=64,this.window.w<=this.breakpoints.md&&(this.r=3,this.b=4,this.w=48,this.h=48,this.window.w<=this.breakpoints.sm&&(this.r=2,this.b=4,this.w=48,this.h=48)))}toTop(){window.scroll({top:0,left:0,behavior:"smooth"})}ngOnChanges(){}ngOnInit(){}ngAfterViewChecked(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["to-top-component"]],features:[o.TTD],decls:4,vars:5,consts:[["id","totop",1,"col-auto","p-0","m-0",2,"z-index","3500",3,"ngStyle","click"],["id","totopbtn",1,"col-auto","p-0","m-0","text-primary","bg-dark","rounded"],["id","svgarrow","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-up-square"],["fill-rule","evenodd","d","M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 9.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.toTop()}),o.TgZ(1,"div",1),o.O4$(),o.TgZ(2,"svg",2),o._UZ(3,"path",3),o.qZA()()()),2&e&&o.Q6J("ngStyle",o.kEZ(1,Ime,i.w+"px",i.b+"rem",i.r+"rem"))},dependencies:[xc],styles:["#totop[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;position:fixed;opacity:.9}"]}),n})();function zme(n,t){1&n&&o._UZ(0,"img",19)}function Nme(n,t){if(1&n&&o._UZ(0,"img",20),2&n){const e=o.oxw().$implicit;o.s9C("src",e.base_url+"w200"+e.poster_path,o.LSH)}}function kme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",11),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(2);return c.ms.cMovie=s,c.ss.movies=[],o.KtG(c.clear())}),o.TgZ(1,"div",12)(2,"div",13),o.YNc(3,zme,1,0,"img",14),o.YNc(4,Nme,1,1,"img",15),o.qZA(),o.TgZ(5,"div",16)(6,"div",17)(7,"div",18)(8,"b"),o._uU(9),o.qZA()()(),o.TgZ(10,"div",12)(11,"div",18),o._uU(12),o.qZA()()()()()}if(2&n){const e=t.$implicit;o.MGl("routerLink","/movie/",e.id,""),o.xp6(3),o.Q6J("ngIf",e.poster_loading),o.xp6(1),o.Q6J("ngIf",!e.poster_loading),o.xp6(5),o.Oqu(e.title),o.xp6(3),o.hij(" ",e.overview," ")}}function Rme(n,t){1&n&&(o.TgZ(0,"div",21),o._uU(1," No results "),o.qZA())}function Vme(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1)(1,"div",2),o._UZ(2,"div",3),o.qZA(),o.TgZ(3,"div",4)(4,"div",5)(5,"h4",6),o._uU(6," Search results "),o.qZA(),o.TgZ(7,"button",7),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clear())}),o._uU(8," X "),o.qZA()()(),o.TgZ(9,"div",8),o.YNc(10,kme,13,5,"div",9),o.YNc(11,Rme,2,0,"div",10),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(10),o.Q6J("ngForOf",e.ss.movies),o.xp6(1),o.Q6J("ngIf",e.ss.movies.length<1)}}let Lme=(()=>{class n{constructor(e,i,r,s){this.router=e,this.ss=i,this.ms=r,this.tmdb=s,this.title="search-result-component",this.visible=!1,e.events.subscribe(c=>{this.clear()})}ngOnInit(){}clear(){this.ss.movieResults=[],this.value="",this.movies=[],this.ss.movies=void 0,this.visible=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gi),o.Y36(vb),o.Y36(Ya),o.Y36(Ys))},n.\u0275cmp=o.Xpm({type:n,selectors:[["search-result-component"]],decls:1,vars:1,consts:[["class","container-fluid position-absolute start-0 top-0 mx-auto p-0 px-2 px-sm-4 my-4 bg-light","style","z-index: 450;",4,"ngIf"],[1,"container-fluid","position-absolute","start-0","top-0","mx-auto","p-0","px-2","px-sm-4","my-4","bg-light",2,"z-index","450"],[1,"row","mx-auto","mt-1","p-0"],[1,"col","p-0","m-0"],[1,"row","p-0","mt-4","border-bottom"],[1,"col-12","col-sm-11","col-md-10","p-0","m-0","mx-auto","px-3","py-2"],[1,"col-auto","d-inline","p-0","m-0"],["type","button",1,"col-auto","float-end","btn","btn-sm","btn-outline-danger","d-inline","px-3",3,"click"],[1,"row","p-0","m-0","bg-light"],["class","col-12 col-sm-11 col-md-10 mx-auto btn border-bottom",3,"routerLink","click",4,"ngFor","ngForOf"],["class","col-12 col-sm-11 col-md-10 mx-auto btn border-bottom",4,"ngIf"],[1,"col-12","col-sm-11","col-md-10","mx-auto","btn","border-bottom",3,"routerLink","click"],[1,"row"],[1,"col-4","col-sm-2"],["class","img-fluid rounded p-0 m-0","src","https://via.placeholder.com/200x300?text=LOADING",4,"ngIf"],["class","img-fluid rounded p-0 m-0",3,"src",4,"ngIf"],[1,"col-8","col-sm-10","text-start"],[1,"row","text-truncate"],[1,"col-12"],["src","https://via.placeholder.com/200x300?text=LOADING",1,"img-fluid","rounded","p-0","m-0"],[1,"img-fluid","rounded","p-0","m-0",3,"src"],[1,"col-12","col-sm-11","col-md-10","mx-auto","btn","border-bottom"]],template:function(e,i){1&e&&o.YNc(0,Vme,12,2,"div",0),2&e&&o.Q6J("ngIf",i.ss.movies)},dependencies:[z1,hi,cn],encapsulation:2}),n})(),Ome=(()=>{class n{constructor(){this.title="tma-angular"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:0,consts:[[1,"container-fluid","p-4","mb-4"],[1,"row","p-2","mb-4"],[1,"col","p-0","m-0"],[1,"col-12","col-md-10","col-lg-8","m-auto","mb-4","p-2"],[1,"row","mb-4"],[1,"col","mb-4"]],template:function(e,i){1&e&&(o._UZ(0,"to-top-component")(1,"navigation-component")(2,"header-component"),o.TgZ(3,"div",0)(4,"div",1),o._UZ(5,"div",2),o.qZA()(),o._UZ(6,"search-result-component"),o.TgZ(7,"div",3),o._UZ(8,"router-outlet"),o.qZA(),o.TgZ(9,"div",4),o._UZ(10,"div",5),o.qZA(),o._UZ(11,"footer-component"))},dependencies:[RD,Dme,Tme,Eme,Sme,Lme]}),n})();const yG="firebasestorage.googleapis.com",CG="storageBucket";class Li extends H.ZR{constructor(t,e,i=0){super(CN(t),`Firebase Storage: ${e} (${CN(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Li.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return CN(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ai=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(ai||(ai={})),ai))();function CN(n){return"storage/"+n}function MN(){return new Li(ai.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function MG(){return new Li(ai.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xG(){return new Li(ai.CANCELED,"User canceled the upload/download.")}function AG(){return new Li(ai.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kf(n){return new Li(ai.INVALID_ARGUMENT,n)}function DG(){return new Li(ai.APP_DELETED,"The Firebase app was deleted.")}function TG(n){return new Li(ai.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lv(n,t){return new Li(ai.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function cv(n){throw new Li(ai.INTERNAL_ERROR,"Internal error: "+n)}class E0{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=E0.makeFromUrl(t,e)}catch{return new E0(t,"")}if(""===i.path)return i;throw function Wme(n){return new Li(ai.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function w(Be){Be.path_=decodeURIComponent(Be.path)}const A=e.replace(/[.]/g,"\\."),He=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Be){"/"===Be.path.charAt(Be.path.length-1)&&(Be.path_=Be.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${e===yG?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Be=0;Be<He.length;Be++){const tt=He[Be],at=tt.regex.exec(t);if(at){let Qt=at[tt.indices.path];Qt||(Qt=""),i=new E0(at[tt.indices.bucket],Qt),tt.postModify(i);break}}if(null==i)throw function qme(n){return new Li(ai.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return i}}class Xme{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function mb(n){return"string"==typeof n||n instanceof String}function EG(n){return xN()&&n instanceof Blob}function xN(){return typeof Blob<"u"&&!(0,H.UG)()}function AN(n,t,e,i){if(i<t)throw kf(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw kf(`Invalid value for '${n}'. Expected ${e} or less.`)}function bc(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function IG(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var gu=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(gu||(gu={})),gu))();function SG(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class s8e{constructor(t,e,i,r,s,c,d,g,w,y,A,I=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=g,this.timeout_=w,this.progressCallback_=y,this.connectionFactory_=A,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,Z)=>{this.resolve_=N,this.reject_=Z,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function n8e(n){return void 0!==n}(g)?s():s(g)}catch(g){c(g)}else if(null!==d){const g=MN();g.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,g):g)}else c(r.canceled?this.appDelete_?DG():xG():MG())};this.canceled_?e(0,new wb(!1,null,!0)):this.backoffId_=function e8e(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function g(){return 2===d}let w=!1;function y(...te){w||(w=!0,t.apply(null,te))}function A(te){r=setTimeout(()=>{r=null,n(N,g())},te)}function I(){s&&clearTimeout(s)}function N(te,...xe){if(w)return void I();if(te)return I(),void y.call(null,te,...xe);if(g()||c)return I(),void y.call(null,te,...xe);let He;i<64&&(i*=2),1===d?(d=2,He=0):He=1e3*(i+Math.random()),A(He)}let Z=!1;function J(te){Z||(Z=!0,I(),!w&&(null!==r?(te||(d=2),clearTimeout(r),A(0)):te||(d=1)))}return A(0),s=setTimeout(()=>{c=!0,J(!0)},e),J}((i,r)=>{if(r)return void i(!1,new wb(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===gu.NO_ERROR,g=s.getStatus();if(!d||SG(g,this.additionalRetryCodes_)&&this.retry){const y=s.getErrorCode()===gu.ABORT;return void i(!1,new wb(!1,null,y))}const w=-1!==this.successCodes_.indexOf(g);i(!0,new wb(w,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function t8e(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class wb{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function d8e(...n){const t=function h8e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(xN())return new Blob(n);throw new Li(ai.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class DN{constructor(t,e){this.data=t,this.contentType=e||null}}function TN(n,t){switch(n){case ro.RAW:return new DN(zG(t));case ro.BASE64:case ro.BASE64URL:return new DN(NG(n,t));case ro.DATA_URL:return new DN(function v8e(n){const t=new kG(n);return t.base64?NG(ro.BASE64,t.rest):function p8e(n){let t;try{t=decodeURIComponent(n)}catch{throw lv(ro.DATA_URL,"Malformed data URL.")}return zG(t)}(t.rest)}(t),function m8e(n){return new kG(n).contentType}(t))}throw MN()}function zG(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function NG(n,t){switch(n){case ro.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw lv(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ro.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw lv(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function g8e(n){if(typeof atob>"u")throw function Qme(n){return new Li(ai.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:lv(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class kG{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw lv(ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function w8e(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class q1{constructor(t,e){let i=0,r="";EG(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(EG(this.data_)){const r=function f8e(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new q1(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new q1(i,!0)}}static getBlob(...t){if(xN()){const e=t.map(i=>i instanceof q1?i.data_:i);return new q1(d8e.apply(null,e))}{const e=t.map(c=>mb(c)?TN(ro.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new q1(r,!0)}}uploadData(){return this.data_}}function EN(n){let t;try{t=JSON.parse(n)}catch{return null}return function r8e(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function RG(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function y8e(n,t){return t}class J0{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||y8e}}let _b=null;function uv(){if(_b)return _b;const n=[];n.push(new J0("bucket")),n.push(new J0("generation")),n.push(new J0("metageneration")),n.push(new J0("name","fullPath",!0));const e=new J0("name");e.xform=function t(s,c){return function C8e(n){return!mb(n)||n.length<2?n:RG(n)}(c)},n.push(e);const r=new J0("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new J0("timeCreated")),n.push(new J0("updated")),n.push(new J0("md5Hash",null,!0)),n.push(new J0("cacheControl",null,!0)),n.push(new J0("contentDisposition",null,!0)),n.push(new J0("contentEncoding",null,!0)),n.push(new J0("contentLanguage",null,!0)),n.push(new J0("contentType",null,!0)),n.push(new J0("metadata","customMetadata",!0)),_b=n,_b}function VG(n,t,e){const i=EN(t);return null===i?null:function x8e(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function M8e(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new E0(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function IN(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const LG="prefixes";class W1{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function K1(n){if(!n)throw MN()}function bb(n,t){return function e(i,r){const s=VG(n,r,t);return K1(null!==s),s}}function Rf(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function Gme(){return new Li(ai.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function jme(){return new Li(ai.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function Zme(n){return new Li(ai.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function $me(n){return new Li(ai.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function hv(n){const t=Rf(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function Ume(n){return new Li(ai.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function PG(n,t,e){const r=bc(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new W1(r,"GET",bb(n,e),c);return d.errorHandler=hv(t),d}function S8e(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=bc(t.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,y=new W1(d,"GET",function E8e(n,t){return function e(i,r){const s=function T8e(n,t,e){const i=EN(e);return null===i?null:function D8e(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[LG])for(const r of e[LG]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new E0(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new E0(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return K1(null!==s),s}}(n,t.bucket),w);return y.urlParams=s,y.errorHandler=Rf(t),y}function FG(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function R8e(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class yb{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function SN(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{K1(!1)}return K1(!!e&&-1!==(t||["active"]).indexOf(e)),e}const P8e={STATE_CHANGED:"state_changed"},Q0={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zN(n){switch(n){case"running":case"pausing":case"canceling":return Q0.RUNNING;case"paused":return Q0.PAUSED;case"success":return Q0.SUCCESS;case"canceled":return Q0.CANCELED;default:return Q0.ERROR}}class H8e{constructor(t,e,i){if(function i8e(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Vf(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class B8e extends class F8e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw cv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function e1(){return new B8e}class jG{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=uv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(ai.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(SG(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=MG()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(ai.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function V8e(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=FG(t,i,r),d={name:c.fullPath},g=bc(s,n.host,n._protocol),y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},A=IN(c,e),Z=new W1(g,"POST",function N(J){let te;SN(J);try{te=J.getResponseHeader("X-Goog-Upload-URL")}catch{K1(!1)}return K1(mb(te)),te},n.maxUploadRetryTime);return Z.urlParams=d,Z.headers=y,Z.body=A,Z.errorHandler=Rf(t),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,e1,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function L8e(n,t,e,i){const g=new W1(e,"POST",function s(w){const y=SN(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{K1(!1)}A||K1(!1);const I=Number(A);return K1(!isNaN(I)),new yb(I,i.size(),"final"===y)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Rf(t),g}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,e1,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new yb(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function O8e(n,t,e,i,r,s,c,d){const g=new yb(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=i.size()),i.size()!==g.total)throw function Yme(){return new Li(ai.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=g.total-g.current;let y=w;r>0&&(y=Math.min(y,r));const A=g.current;let N="";N=0===y?"finalize":w===y?"upload, finalize":"upload";const Z={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${g.current}`},J=i.slice(A,A+y);if(null===J)throw AG();const He=new W1(e,"POST",function te(Be,tt){const at=SN(Be,["active","final"]),Ft=g.current+y,Qt=i.size();let li;return li="final"===at?bb(t,s)(Be,tt):null,new yb(Ft,Qt,"final"===at,li)},t.maxUploadRetryTime);return He.headers=Z,He.body=J.uploadData(),He.progressCallback=d||null,He.errorHandler=Rf(n),He}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const d=this._ref.storage._makeRequest(c,e1,r,s,!1);this._request=d,d.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=PG(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,e1,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function BG(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},g=function d(){let He="";for(let Be=0;Be<2;Be++)He+=Math.random().toString().slice(2);return He}();c["Content-Type"]="multipart/related; boundary="+g;const w=FG(t,i,r),y=IN(w,e),N=q1.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+y+"\r\n--"+g+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",i,"\r\n--"+g+"--");if(null===N)throw AG();const Z={name:w.fullPath},J=bc(s,n.host,n._protocol),xe=n.maxUploadRetryTime,ke=new W1(J,"POST",bb(n,e),xe);return ke.urlParams=Z,ke.headers=c,ke.body=N.uploadData(),ke.errorHandler=Rf(t),ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,e1,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=xG(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=zN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new H8e(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(zN(this._state)){case Q0.SUCCESS:Vf(this._resolve.bind(null,this.snapshot))();break;case Q0.CANCELED:case Q0.ERROR:Vf(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(zN(this._state)){case Q0.RUNNING:case Q0.PAUSED:t.next&&Vf(t.next.bind(t,this.snapshot))();break;case Q0.SUCCESS:t.complete&&Vf(t.complete.bind(t))();break;default:t.error&&Vf(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class od{constructor(t,e){this._service=t,this._location=e instanceof E0?e:E0.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new od(t,e)}get root(){const t=new E0(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RG(this._location.path)}get storage(){return this._service}get parent(){const t=function _8e(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new E0(this._location.bucket,t);return new od(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw TG(t)}}function $G(n,t,e){return NN.apply(this,arguments)}function NN(){return NN=(0,ie.Z)(function*(n,t,e){const r=yield qG(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield $G(n,t,r.nextPageToken))}),NN.apply(this,arguments)}function qG(n,t){null!=t&&"number"==typeof t.maxResults&&AN("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=S8e(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,e1)}function X8e(n){n._throwIfRoot("getDownloadURL");const t=function z8e(n,t,e){const r=bc(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new W1(r,"GET",function I8e(n,t){return function e(i,r){const s=VG(n,r,t);return K1(null!==s),function A8e(n,t,e,i){const r=EN(t);if(null===r||!mb(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(w=>{const A=n.fullPath;return bc("/b/"+c(n.bucket)+"/o/"+c(A),e,i)+IG({alt:"media",token:w})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=hv(t),d}(n.storage,n._location,uv());return n.storage.makeRequestWithTokens(t,e1).then(e=>{if(null===e)throw function Jme(){return new Li(ai.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function WG(n,t){const e=function b8e(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new E0(n._location.bucket,e);return new od(n.storage,i)}function KG(n,t){if(n instanceof kN){const e=n;if(null==e._bucket)throw function Kme(){return new Li(ai.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CG+"' property when initializing the app?")}();const i=new od(e,e._bucket);return null!=t?KG(i,t):i}return void 0!==t?WG(n,t):n}function i7e(n,t){if(t&&function t7e(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof kN)return function n7e(n,t){return new od(n,t)}(n,t);throw kf("To use ref(service, url), the first argument must be a Storage instance.")}return KG(n,t)}function YG(n,t){const e=t?.[CG];return null==e?null:E0.makeFromBucketSpec(e,n)}class kN{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=yG,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?E0.makeFromBucketSpec(r,this._host):YG(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?E0.makeFromBucketSpec(this._url,t):YG(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){AN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){AN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,ie.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,ie.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new od(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new Xme(DG());{const c=function u8e(n,t,e,i,r,s,c=!0){const d=IG(n.urlParams),g=n.url+d,w=Object.assign({},n.headers);return function l8e(n,t){t&&(n["X-Firebase-GMPID"]=t)}(w,t),function o8e(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(w,e),function a8e(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(w,s),function c8e(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(w,i),new s8e(g,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(t,e){var i=this;return(0,ie.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const JG="@firebase/storage";function e$(n,t){return i7e(n=(0,H.m9)(n),t)}function f7e(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new kN(e,i,r,t,Z0.SDK_VERSION)}!function g7e(){(0,Z0._registerComponent)(new Ua.wA("storage",f7e,"PUBLIC").setMultipleInstances(!0)),(0,Z0.registerVersion)(JG,"0.11.2",""),(0,Z0.registerVersion)(JG,"0.11.2","esm2017")}();class Cb{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class n${constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Cb(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new Cb(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new Cb(c,this,this._ref)):{next:e.next?c=>e.next(new Cb(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class i${constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new yc(t,this._service))}get items(){return this._delegate.items.map(t=>new yc(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class yc{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function d7e(n,t){return WG(n,t)}(this._delegate,t);return new yc(e,this.storage)}get root(){return new yc(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new yc(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new n$(function s7e(n,t,e){return function W8e(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new jG(n,new q1(t),e)}(n=(0,H.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=ro.RAW,i){this._throwIfRoot("putString");const r=TN(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new n$(new jG(this._delegate,new q1(r.data,!0),s),this)}listAll(){return function c7e(n){return function Y8e(n){const t={prefixes:[],items:[]};return $G(n,t).then(()=>t)}(n=(0,H.m9)(n))}(this._delegate).then(t=>new i$(t,this.storage))}list(t){return function l7e(n,t){return qG(n=(0,H.m9)(n),t)}(this._delegate,t||void 0).then(e=>new i$(e,this.storage))}getMetadata(){return function o7e(n){return function J8e(n){n._throwIfRoot("getMetadata");const t=PG(n.storage,n._location,uv());return n.storage.makeRequestWithTokens(t,e1)}(n=(0,H.m9)(n))}(this._delegate)}updateMetadata(t){return function a7e(n,t){return function Q8e(n,t){n._throwIfRoot("updateMetadata");const e=function N8e(n,t,e,i){const s=bc(t.fullServerUrl(),n.host,n._protocol),d=IN(e,i),w=n.maxOperationRetryTime,y=new W1(s,"PATCH",bb(n,i),w);return y.headers={"Content-Type":"application/json; charset=utf-8"},y.body=d,y.errorHandler=hv(t),y}(n.storage,n._location,t,uv());return n.storage.makeRequestWithTokens(e,e1)}(n=(0,H.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function u7e(n){return X8e(n=(0,H.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function h7e(n){return function e7e(n){n._throwIfRoot("deleteObject");const t=function k8e(n,t){const i=bc(t.fullServerUrl(),n.host,n._protocol),d=new W1(i,"DELETE",function c(g,w){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=hv(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,e1)}(n=(0,H.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw TG(t)}}class r${constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(s$(t))throw kf("ref() expected a child path but got a URL, use refFromURL instead.");return new yc(e$(this._delegate,t),this)}refFromURL(t){if(!s$(t))throw kf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{E0.makeFromUrl(t,this._delegate.host)}catch{throw kf("refFromUrl() expected a valid full URL but got an invalid one.")}return new yc(e$(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function t$(n,t,e,i={}){!function r7e(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,H.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function s$(n){return/^[A-Za-z]+:\/\//.test(n)}function w7e(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new r$(e,i)}function o$(n){const t=function b7e(n){return new Rn.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(function Pme(n,t=o3.z){return(0,Hi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const w=s;s=null,i.next(w)}};function g(){const w=c+n,y=t.now();if(y<w)return r=this.schedule(void 0,w-y),void i.add(r);d()}e.subscribe((0,In.x)(i,w=>{s=w,c=t.now(),r||(r=t.schedule(g,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ht.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function Mb(n){return{getDownloadURL:()=>pt(void 0).pipe(Sn.fc,Ri(()=>n.getDownloadURL()),Sn.iC),getMetadata:()=>pt(void 0).pipe(Sn.fc,Ri(()=>n.getMetadata()),Sn.iC),delete:()=>(0,gn.D)(n.delete()),child:t=>Mb(n.child(t)),updateMetadata:t=>(0,gn.D)(n.updateMetadata(t)),put:(t,e)=>o$(n.put(t,e)),putString:(t,e,i)=>o$(n.putString(t,e,i)),list:t=>(0,gn.D)(n.list(t)),listAll:()=>(0,gn.D)(n.listAll())}}!function _7e(n){const t={TaskState:Q0,TaskEvent:P8e,StringFormat:ro,Storage:r$,Reference:yc};n.INTERNAL.registerComponent(new Ua.wA("storage-compat",w7e,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(KD.Z);const y7e=new o.OlP("angularfire2.storageBucket"),C7e=new o.OlP("angularfire2.storage.maxUploadRetryTime"),M7e=new o.OlP("angularfire2.storage.maxOperationRetryTime"),x7e=new o.OlP("angularfire2.storage.use-emulator");let A7e=(()=>{class n{constructor(e,i,r,s,c,d,g,w,y,A){const I=(0,Mr.on)(e,c,i);this.storage=(0,Mr.cc)(`${I.name}.storage.${r}`,"AngularFireStorage",I.name,()=>{const N=c.runOutsideAngular(()=>I.storage(r||void 0)),Z=y;return Z&&N.useEmulator(...Z),g&&N.setMaxUploadRetryTime(g),w&&N.setMaxOperationRetryTime(w),N},[g,w])}ref(e){return Mb(this.storage.ref(e))}refFromURL(e){return Mb(this.storage.refFromURL(e))}upload(e,i,r){return Mb(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Mr.Dh),o.LFG(Mr.xv,8),o.LFG(y7e,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Sn.HU),o.LFG(C7e,8),o.LFG(M7e,8),o.LFG(x7e,8),o.LFG(b4,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D7e=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),T7e=(()=>{class n{constructor(){m9.Z.registerVersion("angularfire",Sn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[A7e],imports:[D7e]}),n})();const E7e={Alarm:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-alarm" viewBox="0 0 16 16">\n  <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9V5.5z"/>\n  <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1h-3zm1.038 3.018a6.093 6.093 0 0 1 .924 0 6 6 0 1 1-.924 0zM0 3.5c0 .753.333 1.429.86 1.887A8.035 8.035 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5zM13.5 1c-.753 0-1.429.333-1.887.86a8.035 8.035 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1z"/>\n</svg>',App:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-app" viewBox="0 0 16 16">\n  <path d="M11 2a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3h6zM5 1a4 4 0 0 0-4 4v6a4 4 0 0 0 4 4h6a4 4 0 0 0 4-4V5a4 4 0 0 0-4-4H5z"/>\n</svg>',Bookmark:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-bookmark" viewBox="0 0 16 16">\n  <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>\n</svg>',Trash:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">\n  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n</svg>',X:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">\n  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n</svg>',ArrowBarUp:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-arrow-bar-up" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 10a.5.5 0 0 0 .5-.5V3.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 3.707V9.5a.5.5 0 0 0 .5.5zm-7 2.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5z"/>\n</svg>',ArrowUpSquare:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-arrow-up-square" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 9.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>\n</svg>'};let I7e=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[Ome]}),n.\u0275inj=o.cJS({providers:[K0,yN,Ys,Ya,vb,pb,gb],imports:[Mr.hO.initializeApp(qD_firebase),zue,Hue,T7e,Wfe,bme,W4e,jc,Qb,Pb,kd,Od.pick(E7e),Od]}),n})();(0,o.G48)(),da().bootstrapModule(I7e).catch(n=>console.error(n))},9751:(bt,ze,F)=>{F.d(ze,{y:()=>_e});var o=F(930),j=F(727),V=F(8822),oe=F(9635),de=F(2416),we=F(576),ve=F(2806);let _e=(()=>{class ee{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const Ie=new ee;return Ie.source=this,Ie.operator=Le,Ie}subscribe(Le,Ie,lt){const Ce=function q(ee){return ee&&ee instanceof o.Lv||function W(ee){return ee&&(0,we.m)(ee.next)&&(0,we.m)(ee.error)&&(0,we.m)(ee.complete)}(ee)&&(0,j.Nn)(ee)}(Le)?Le:new o.Hp(Le,Ie,lt);return(0,ve.x)(()=>{const{operator:be,source:Ct}=this;Ce.add(be?be.call(Ce,Ct):Ct?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Le){try{return this._subscribe(Le)}catch(Ie){Le.error(Ie)}}forEach(Le,Ie){return new(Ie=Me(Ie))((lt,Ce)=>{const be=new o.Hp({next:Ct=>{try{Le(Ct)}catch(_t){Ce(_t),be.unsubscribe()}},error:Ce,complete:lt});this.subscribe(be)})}_subscribe(Le){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Le)}[V.L](){return this}pipe(...Le){return(0,oe.U)(Le)(this)}toPromise(Le){return new(Le=Me(Le))((Ie,lt)=>{let Ce;this.subscribe(be=>Ce=be,be=>lt(be),()=>Ie(Ce))})}}return ee.create=Ge=>new ee(Ge),ee})();function Me(ee){var Ge;return null!==(Ge=ee??de.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(bt,ze,F)=>{F.d(ze,{x:()=>ve});var o=F(9751),j=F(727);const oe=(0,F(3888).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=F(8737),we=F(2806);let ve=(()=>{class Me extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ee=new _e(this,this);return ee.operator=q,ee}_throwIfClosed(){if(this.closed)throw new oe}next(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(q)}})}error(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ee}=this;for(;ee.length;)ee.shift().error(q)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ee,isStopped:Ge,observers:Le}=this;return ee||Ge?j.Lc:(this.currentObservers=null,Le.push(q),new j.w0(()=>{this.currentObservers=null,(0,de.P)(Le,q)}))}_checkFinalizedStatuses(q){const{hasError:ee,thrownError:Ge,isStopped:Le}=this;ee?q.error(Ge):Le&&q.complete()}asObservable(){const q=new o.y;return q.source=this,q}}return Me.create=(W,q)=>new _e(W,q),Me})();class _e extends ve{constructor(W,q){super(),this.destination=W,this.source=q}next(W){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ee||ee.call(q,W)}error(W){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ee||ee.call(q,W)}complete(){var W,q;null===(q=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===q||q.call(W)}_subscribe(W){var q,ee;return null!==(ee=null===(q=this.source)||void 0===q?void 0:q.subscribe(W))&&void 0!==ee?ee:j.Lc}}},930:(bt,ze,F)=>{F.d(ze,{Hp:()=>lt,Lv:()=>ee});var o=F(576),j=F(727),V=F(2416),oe=F(7849),de=F(5032);const we=Me("C",void 0,void 0);function Me(Ne,Ee,Se){return{kind:Ne,value:Ee,error:Se}}var W=F(3410),q=F(2806);class ee extends j.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,j.Nn)(Ee)&&Ee.add(this)):this.destination=_t}static create(Ee,Se,qe){return new lt(Ee,Se,qe)}next(Ee){this.isStopped?Ct(function _e(Ne){return Me("N",Ne,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ct(function ve(Ne){return Me("E",void 0,Ne)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ct(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Le(Ne,Ee){return Ge.call(Ne,Ee)}class Ie{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Ee)}catch(qe){Ce(qe)}}error(Ee){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Ee)}catch(qe){Ce(qe)}else Ce(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Se){Ce(Se)}}}class lt extends ee{constructor(Ee,Se,qe){let We;if(super(),(0,o.m)(Ee)||!Ee)We={next:Ee??void 0,error:Se??void 0,complete:qe??void 0};else{let he;this&&V.v.useDeprecatedNextContext?(he=Object.create(Ee),he.unsubscribe=()=>this.unsubscribe(),We={next:Ee.next&&Le(Ee.next,he),error:Ee.error&&Le(Ee.error,he),complete:Ee.complete&&Le(Ee.complete,he)}):We=Ee}this.destination=new Ie(We)}}function Ce(Ne){V.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ne):(0,oe.h)(Ne)}function Ct(Ne,Ee){const{onStoppedNotification:Se}=V.v;Se&&W.z.setTimeout(()=>Se(Ne,Ee))}const _t={closed:!0,next:de.Z,error:function be(Ne){throw Ne},complete:de.Z}},727:(bt,ze,F)=>{F.d(ze,{Lc:()=>we,w0:()=>de,Nn:()=>ve});var o=F(576);const V=(0,F(3888).d)(Me=>function(q){Me(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ee,Ge)=>`${Ge+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var oe=F(8737);class de{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Le of q)Le.remove(this);else q.remove(this);const{initialTeardown:ee}=this;if((0,o.m)(ee))try{ee()}catch(Le){W=Le instanceof V?Le.errors:[Le]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Le of Ge)try{_e(Le)}catch(Ie){W=W??[],Ie instanceof V?W=[...W,...Ie.errors]:W.push(Ie)}}if(W)throw new V(W)}}add(W){var q;if(W&&W!==this)if(this.closed)_e(W);else{if(W instanceof de){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(W)}}_hasParent(W){const{_parentage:q}=this;return q===W||Array.isArray(q)&&q.includes(W)}_addParent(W){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(W),q):q?[q,W]:W}_removeParent(W){const{_parentage:q}=this;q===W?this._parentage=null:Array.isArray(q)&&(0,oe.P)(q,W)}remove(W){const{_finalizers:q}=this;q&&(0,oe.P)(q,W),W instanceof de&&W._removeParent(this)}}de.EMPTY=(()=>{const Me=new de;return Me.closed=!0,Me})();const we=de.EMPTY;function ve(Me){return Me instanceof de||Me&&"closed"in Me&&(0,o.m)(Me.remove)&&(0,o.m)(Me.add)&&(0,o.m)(Me.unsubscribe)}function _e(Me){(0,o.m)(Me)?Me():Me.unsubscribe()}},2416:(bt,ze,F)=>{F.d(ze,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,ze,F)=>{F.d(ze,{E:()=>j});const j=new(F(9751).y)(de=>de.complete())},8996:(bt,ze,F)=>{F.d(ze,{D:()=>Ee});var o=F(8421),j=F(5363),V=F(9468),we=F(9751),_e=F(2202),Me=F(576),W=F(9672);function ee(Se,qe){if(!Se)throw new Error("Iterable cannot be null");return new we.y(We=>{(0,W.f)(We,qe,()=>{const he=Se[Symbol.asyncIterator]();(0,W.f)(We,qe,()=>{he.next().then(Je=>{Je.done?We.complete():We.next(Je.value)})},0,!0)})})}var Ge=F(3670),Le=F(8239),Ie=F(1144),lt=F(6495),Ce=F(2206),be=F(4532),Ct=F(3260);function Ee(Se,qe){return qe?function Ne(Se,qe){if(null!=Se){if((0,Ge.c)(Se))return function oe(Se,qe){return(0,o.Xf)(Se).pipe((0,V.R)(qe),(0,j.Q)(qe))}(Se,qe);if((0,Ie.z)(Se))return function ve(Se,qe){return new we.y(We=>{let he=0;return qe.schedule(function(){he===Se.length?We.complete():(We.next(Se[he++]),We.closed||this.schedule())})})}(Se,qe);if((0,Le.t)(Se))return function de(Se,qe){return(0,o.Xf)(Se).pipe((0,V.R)(qe),(0,j.Q)(qe))}(Se,qe);if((0,Ce.D)(Se))return ee(Se,qe);if((0,lt.T)(Se))return function q(Se,qe){return new we.y(We=>{let he;return(0,W.f)(We,qe,()=>{he=Se[_e.h](),(0,W.f)(We,qe,()=>{let Je,ae;try{({value:Je,done:ae}=he.next())}catch(le){return void We.error(le)}ae?We.complete():We.next(Je)},0,!0)}),()=>(0,Me.m)(he?.return)&&he.return()})}(Se,qe);if((0,Ct.L)(Se))return function _t(Se,qe){return ee((0,Ct.Q)(Se),qe)}(Se,qe)}throw(0,be.z)(Se)}(Se,qe):(0,o.Xf)(Se)}},8421:(bt,ze,F)=>{F.d(ze,{Xf:()=>Ge});var o=F(655),j=F(1144),V=F(8239),oe=F(9751),de=F(3670),we=F(2206),ve=F(4532),_e=F(6495),Me=F(3260),W=F(576),q=F(7849),ee=F(8822);function Ge(Ne){if(Ne instanceof oe.y)return Ne;if(null!=Ne){if((0,de.c)(Ne))return function Le(Ne){return new oe.y(Ee=>{const Se=Ne[ee.L]();if((0,W.m)(Se.subscribe))return Se.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,j.z)(Ne))return function Ie(Ne){return new oe.y(Ee=>{for(let Se=0;Se<Ne.length&&!Ee.closed;Se++)Ee.next(Ne[Se]);Ee.complete()})}(Ne);if((0,V.t)(Ne))return function lt(Ne){return new oe.y(Ee=>{Ne.then(Se=>{Ee.closed||(Ee.next(Se),Ee.complete())},Se=>Ee.error(Se)).then(null,q.h)})}(Ne);if((0,we.D)(Ne))return be(Ne);if((0,_e.T)(Ne))return function Ce(Ne){return new oe.y(Ee=>{for(const Se of Ne)if(Ee.next(Se),Ee.closed)return;Ee.complete()})}(Ne);if((0,Me.L)(Ne))return function Ct(Ne){return be((0,Me.Q)(Ne))}(Ne)}throw(0,ve.z)(Ne)}function be(Ne){return new oe.y(Ee=>{(function _t(Ne,Ee){var Se,qe,We,he;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Se=(0,o.KL)(Ne);!(qe=yield Se.next()).done;)if(Ee.next(qe.value),Ee.closed)return}catch(Je){We={error:Je}}finally{try{qe&&!qe.done&&(he=Se.return)&&(yield he.call(Se))}finally{if(We)throw We.error}}Ee.complete()})})(Ne,Ee).catch(Se=>Ee.error(Se))})}},6451:(bt,ze,F)=>{F.d(ze,{T:()=>we});var o=F(8189),j=F(8421),V=F(515),oe=F(3269),de=F(8996);function we(...ve){const _e=(0,oe.yG)(ve),Me=(0,oe._6)(ve,1/0),W=ve;return W.length?1===W.length?(0,j.Xf)(W[0]):(0,o.J)(Me)((0,de.D)(W,_e)):V.E}},5403:(bt,ze,F)=>{F.d(ze,{x:()=>j});var o=F(930);function j(oe,de,we,ve,_e){return new V(oe,de,we,ve,_e)}class V extends o.Lv{constructor(de,we,ve,_e,Me,W){super(de),this.onFinalize=Me,this.shouldUnsubscribe=W,this._next=we?function(q){try{we(q)}catch(ee){de.error(ee)}}:super._next,this._error=_e?function(q){try{_e(q)}catch(ee){de.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(q){de.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(bt,ze,F)=>{F.d(ze,{U:()=>V});var o=F(4482),j=F(5403);function V(oe,de){return(0,o.e)((we,ve)=>{let _e=0;we.subscribe((0,j.x)(ve,Me=>{ve.next(oe.call(de,Me,_e++))}))})}},8189:(bt,ze,F)=>{F.d(ze,{J:()=>V});var o=F(5577),j=F(4671);function V(oe=1/0){return(0,o.z)(j.y,oe)}},5577:(bt,ze,F)=>{F.d(ze,{z:()=>_e});var o=F(4004),j=F(8421),V=F(4482),oe=F(9672),de=F(5403),ve=F(576);function _e(Me,W,q=1/0){return(0,ve.m)(W)?_e((ee,Ge)=>(0,o.U)((Le,Ie)=>W(ee,Le,Ge,Ie))((0,j.Xf)(Me(ee,Ge))),q):("number"==typeof W&&(q=W),(0,V.e)((ee,Ge)=>function we(Me,W,q,ee,Ge,Le,Ie,lt){const Ce=[];let be=0,Ct=0,_t=!1;const Ne=()=>{_t&&!Ce.length&&!be&&W.complete()},Ee=qe=>be<ee?Se(qe):Ce.push(qe),Se=qe=>{Le&&W.next(qe),be++;let We=!1;(0,j.Xf)(q(qe,Ct++)).subscribe((0,de.x)(W,he=>{Ge?.(he),Le?Ee(he):W.next(he)},()=>{We=!0},void 0,()=>{if(We)try{for(be--;Ce.length&&be<ee;){const he=Ce.shift();Ie?(0,oe.f)(W,Ie,()=>Se(he)):Se(he)}Ne()}catch(he){W.error(he)}}))};return Me.subscribe((0,de.x)(W,Ee,()=>{_t=!0,Ne()})),()=>{lt?.()}}(ee,Ge,Me,q)))}},5363:(bt,ze,F)=>{F.d(ze,{Q:()=>oe});var o=F(9672),j=F(4482),V=F(5403);function oe(de,we=0){return(0,j.e)((ve,_e)=>{ve.subscribe((0,V.x)(_e,Me=>(0,o.f)(_e,de,()=>_e.next(Me),we),()=>(0,o.f)(_e,de,()=>_e.complete(),we),Me=>(0,o.f)(_e,de,()=>_e.error(Me),we)))})}},3099:(bt,ze,F)=>{F.d(ze,{B:()=>de});var o=F(8421),j=F(7579),V=F(930),oe=F(4482);function de(ve={}){const{connector:_e=(()=>new j.x),resetOnError:Me=!0,resetOnComplete:W=!0,resetOnRefCountZero:q=!0}=ve;return ee=>{let Ge,Le,Ie,lt=0,Ce=!1,be=!1;const Ct=()=>{Le?.unsubscribe(),Le=void 0},_t=()=>{Ct(),Ge=Ie=void 0,Ce=be=!1},Ne=()=>{const Ee=Ge;_t(),Ee?.unsubscribe()};return(0,oe.e)((Ee,Se)=>{lt++,!be&&!Ce&&Ct();const qe=Ie=Ie??_e();Se.add(()=>{lt--,0===lt&&!be&&!Ce&&(Le=we(Ne,q))}),qe.subscribe(Se),!Ge&&lt>0&&(Ge=new V.Hp({next:We=>qe.next(We),error:We=>{be=!0,Ct(),Le=we(_t,Me,We),qe.error(We)},complete:()=>{Ce=!0,Ct(),Le=we(_t,W),qe.complete()}}),(0,o.Xf)(Ee).subscribe(Ge))})(ee)}}function we(ve,_e,...Me){if(!0===_e)return void ve();if(!1===_e)return;const W=new V.Hp({next:()=>{W.unsubscribe(),ve()}});return _e(...Me).subscribe(W)}},9468:(bt,ze,F)=>{F.d(ze,{R:()=>j});var o=F(4482);function j(V,oe=0){return(0,o.e)((de,we)=>{we.add(V.schedule(()=>de.subscribe(we),oe))})}},8505:(bt,ze,F)=>{F.d(ze,{b:()=>de});var o=F(576),j=F(4482),V=F(5403),oe=F(4671);function de(we,ve,_e){const Me=(0,o.m)(we)||ve||_e?{next:we,error:ve,complete:_e}:we;return Me?(0,j.e)((W,q)=>{var ee;null===(ee=Me.subscribe)||void 0===ee||ee.call(Me);let Ge=!0;W.subscribe((0,V.x)(q,Le=>{var Ie;null===(Ie=Me.next)||void 0===Ie||Ie.call(Me,Le),q.next(Le)},()=>{var Le;Ge=!1,null===(Le=Me.complete)||void 0===Le||Le.call(Me),q.complete()},Le=>{var Ie;Ge=!1,null===(Ie=Me.error)||void 0===Ie||Ie.call(Me,Le),q.error(Le)},()=>{var Le,Ie;Ge&&(null===(Le=Me.unsubscribe)||void 0===Le||Le.call(Me)),null===(Ie=Me.finalize)||void 0===Ie||Ie.call(Me)}))}):oe.y}},4408:(bt,ze,F)=>{F.d(ze,{o:()=>de});var o=F(727);class j extends o.w0{constructor(ve,_e){super()}schedule(ve,_e=0){return this}}const V={setInterval(we,ve,..._e){const{delegate:Me}=V;return Me?.setInterval?Me.setInterval(we,ve,..._e):setInterval(we,ve,..._e)},clearInterval(we){const{delegate:ve}=V;return(ve?.clearInterval||clearInterval)(we)},delegate:void 0};var oe=F(8737);class de extends j{constructor(ve,_e){super(ve,_e),this.scheduler=ve,this.work=_e,this.pending=!1}schedule(ve,_e=0){var Me;if(this.closed)return this;this.state=ve;const W=this.id,q=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(q,W,_e)),this.pending=!0,this.delay=_e,this.id=null!==(Me=this.id)&&void 0!==Me?Me:this.requestAsyncId(q,this.id,_e),this}requestAsyncId(ve,_e,Me=0){return V.setInterval(ve.flush.bind(ve,this),Me)}recycleAsyncId(ve,_e,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return _e;null!=_e&&V.clearInterval(_e)}execute(ve,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(ve,_e);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,_e){let W,Me=!1;try{this.work(ve)}catch(q){Me=!0,W=q||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ve,scheduler:_e}=this,{actions:Me}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(Me,this),null!=ve&&(this.id=this.recycleAsyncId(_e,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,ze,F)=>{F.d(ze,{v:()=>V});var o=F(6063);class j{constructor(de,we=j.now){this.schedulerActionCtor=de,this.now=we}schedule(de,we=0,ve){return new this.schedulerActionCtor(this,de).schedule(ve,we)}}j.now=o.l.now;class V extends j{constructor(de,we=j.now){super(de,we),this.actions=[],this._active=!1}flush(de){const{actions:we}=this;if(this._active)return void we.push(de);let ve;this._active=!0;do{if(ve=de.execute(de.state,de.delay))break}while(de=we.shift());if(this._active=!1,ve){for(;de=we.shift();)de.unsubscribe();throw ve}}}},4986:(bt,ze,F)=>{F.d(ze,{P:()=>oe,z:()=>V});var o=F(4408);const V=new(F(7565).v)(o.o),oe=V},6063:(bt,ze,F)=>{F.d(ze,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(bt,ze,F)=>{F.d(ze,{z:()=>o});const o={setTimeout(j,V,...oe){const{delegate:de}=o;return de?.setTimeout?de.setTimeout(j,V,...oe):setTimeout(j,V,...oe)},clearTimeout(j){const{delegate:V}=o;return(V?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(bt,ze,F)=>{F.d(ze,{h:()=>j});const j=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,ze,F)=>{F.d(ze,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(bt,ze,F)=>{F.d(ze,{_6:()=>we,jO:()=>oe,yG:()=>de});var o=F(576),j=F(3532);function V(ve){return ve[ve.length-1]}function oe(ve){return(0,o.m)(V(ve))?ve.pop():void 0}function de(ve){return(0,j.K)(V(ve))?ve.pop():void 0}function we(ve,_e){return"number"==typeof V(ve)?ve.pop():_e}},8737:(bt,ze,F)=>{function o(j,V){if(j){const oe=j.indexOf(V);0<=oe&&j.splice(oe,1)}}F.d(ze,{P:()=>o})},3888:(bt,ze,F)=>{function o(j){const oe=j(de=>{Error.call(de),de.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}F.d(ze,{d:()=>o})},2806:(bt,ze,F)=>{F.d(ze,{O:()=>oe,x:()=>V});var o=F(2416);let j=null;function V(de){if(o.v.useDeprecatedSynchronousErrorHandling){const we=!j;if(we&&(j={errorThrown:!1,error:null}),de(),we){const{errorThrown:ve,error:_e}=j;if(j=null,ve)throw _e}}else de()}function oe(de){o.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=de)}},9672:(bt,ze,F)=>{function o(j,V,oe,de=0,we=!1){const ve=V.schedule(function(){oe(),we?j.add(this.schedule(null,de)):this.unsubscribe()},de);if(j.add(ve),!we)return ve}F.d(ze,{f:()=>o})},4671:(bt,ze,F)=>{function o(j){return j}F.d(ze,{y:()=>o})},1144:(bt,ze,F)=>{F.d(ze,{z:()=>o});const o=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(bt,ze,F)=>{F.d(ze,{D:()=>j});var o=F(576);function j(V){return Symbol.asyncIterator&&(0,o.m)(V?.[Symbol.asyncIterator])}},576:(bt,ze,F)=>{function o(j){return"function"==typeof j}F.d(ze,{m:()=>o})},3670:(bt,ze,F)=>{F.d(ze,{c:()=>V});var o=F(8822),j=F(576);function V(oe){return(0,j.m)(oe[o.L])}},6495:(bt,ze,F)=>{F.d(ze,{T:()=>V});var o=F(2202),j=F(576);function V(oe){return(0,j.m)(oe?.[o.h])}},8239:(bt,ze,F)=>{F.d(ze,{t:()=>j});var o=F(576);function j(V){return(0,o.m)(V?.then)}},3260:(bt,ze,F)=>{F.d(ze,{L:()=>oe,Q:()=>V});var o=F(655),j=F(576);function V(de){return(0,o.FC)(this,arguments,function*(){const ve=de.getReader();try{for(;;){const{value:_e,done:Me}=yield(0,o.qq)(ve.read());if(Me)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(_e)}}finally{ve.releaseLock()}})}function oe(de){return(0,j.m)(de?.getReader)}},3532:(bt,ze,F)=>{F.d(ze,{K:()=>j});var o=F(576);function j(V){return V&&(0,o.m)(V.schedule)}},4482:(bt,ze,F)=>{F.d(ze,{A:()=>j,e:()=>V});var o=F(576);function j(oe){return(0,o.m)(oe?.lift)}function V(oe){return de=>{if(j(de))return de.lift(function(we){try{return oe(we,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(bt,ze,F)=>{function o(){}F.d(ze,{Z:()=>o})},9635:(bt,ze,F)=>{F.d(ze,{U:()=>V,z:()=>j});var o=F(4671);function j(...oe){return V(oe)}function V(oe){return 0===oe.length?o.y:1===oe.length?oe[0]:function(we){return oe.reduce((ve,_e)=>_e(ve),we)}}},7849:(bt,ze,F)=>{F.d(ze,{h:()=>V});var o=F(2416),j=F(3410);function V(oe){j.z.setTimeout(()=>{const{onUnhandledError:de}=o.v;if(!de)throw oe;de(oe)})}},4532:(bt,ze,F)=>{function o(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(ze,{z:()=>o})},655:(bt,ze,F)=>{function oe(ae,le){var ye={};for(var fe in ae)Object.prototype.hasOwnProperty.call(ae,fe)&&le.indexOf(fe)<0&&(ye[fe]=ae[fe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Qe=0;for(fe=Object.getOwnPropertySymbols(ae);Qe<fe.length;Qe++)le.indexOf(fe[Qe])<0&&Object.prototype.propertyIsEnumerable.call(ae,fe[Qe])&&(ye[fe[Qe]]=ae[fe[Qe]])}return ye}function _e(ae,le,ye,fe){return new(ye||(ye=Promise))(function(Ue,St){function ln(ci){try{nt(fe.next(ci))}catch(nn){St(nn)}}function dn(ci){try{nt(fe.throw(ci))}catch(nn){St(nn)}}function nt(ci){ci.done?Ue(ci.value):function Qe(Ue){return Ue instanceof ye?Ue:new ye(function(St){St(Ue)})}(ci.value).then(ln,dn)}nt((fe=fe.apply(ae,le||[])).next())})}function Ce(ae){return this instanceof Ce?(this.v=ae,this):new Ce(ae)}function be(ae,le,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,fe=ye.apply(ae,le||[]),Ue=[];return Qe={},St("next"),St("throw"),St("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe;function St(Et){fe[Et]&&(Qe[Et]=function(Xt){return new Promise(function(Dn,Tn){Ue.push([Et,Xt,Dn,Tn])>1||ln(Et,Xt)})})}function ln(Et,Xt){try{!function dn(Et){Et.value instanceof Ce?Promise.resolve(Et.value.v).then(nt,ci):nn(Ue[0][2],Et)}(fe[Et](Xt))}catch(Dn){nn(Ue[0][3],Dn)}}function nt(Et){ln("next",Et)}function ci(Et){ln("throw",Et)}function nn(Et,Xt){Et(Xt),Ue.shift(),Ue.length&&ln(Ue[0][0],Ue[0][1])}}function _t(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,le=ae[Symbol.asyncIterator];return le?le.call(ae):(ae=function ee(ae){var le="function"==typeof Symbol&&Symbol.iterator,ye=le&&ae[le],fe=0;if(ye)return ye.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&fe>=ae.length&&(ae=void 0),{value:ae&&ae[fe++],done:!ae}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),ye={},fe("next"),fe("throw"),fe("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function fe(Ue){ye[Ue]=ae[Ue]&&function(St){return new Promise(function(ln,dn){!function Qe(Ue,St,ln,dn){Promise.resolve(dn).then(function(nt){Ue({value:nt,done:ln})},St)}(ln,dn,(St=ae[Ue](St)).done,St.value)})}}}F.d(ze,{FC:()=>be,KL:()=>_t,_T:()=>oe,mG:()=>_e,qq:()=>Ce})},4650:(bt,ze,F)=>{F.d(ze,{$8M:()=>_1,$Z:()=>v6,AFp:()=>I7,ALo:()=>K8,AaK:()=>_e,CHM:()=>kc,CRH:()=>s7,CZH:()=>p2,CqO:()=>am,D6c:()=>gD,Dn7:()=>Y8,EJc:()=>IA,EpF:()=>sm,F$t:()=>fm,F4k:()=>om,FYo:()=>Yf,FiY:()=>b0,G48:()=>YA,Gf:()=>i7,GfV:()=>Jf,Gpc:()=>q,Hsn:()=>gm,Ikx:()=>Jg,JOm:()=>js,KtG:()=>h1,LFG:()=>ni,LMc:()=>vD,LSH:()=>L,Lbi:()=>DA,Lck:()=>Mx,MAs:()=>im,MGl:()=>r2,MMx:()=>ap,NdJ:()=>Gg,O4$:()=>Pc,OlP:()=>_n,Oqu:()=>Yg,PXZ:()=>jA,Q6J:()=>Hg,QGY:()=>jg,QP$:()=>Ae,Qsj:()=>Vb,QtT:()=>I8,R0b:()=>vs,RDi:()=>Ru,Rgc:()=>ah,SBq:()=>Gl,SDv:()=>E8,Sil:()=>zA,Suo:()=>r7,TTD:()=>el,TgZ:()=>t2,Tol:()=>Sm,Udp:()=>qg,VKq:()=>B8,W1O:()=>c7,WLB:()=>U8,X6Q:()=>KA,XFs:()=>ct,Xpm:()=>Vn,Xts:()=>t5,Y36:()=>d5,YKP:()=>N8,YNc:()=>nm,Yjl:()=>P,Yz7:()=>Xt,Z0I:()=>I0,ZZ4:()=>Np,_Bn:()=>z8,_UZ:()=>Bg,_Vd:()=>s5,_c5:()=>dD,_uU:()=>Om,aQg:()=>kp,c2e:()=>TA,cJS:()=>Tn,cg1:()=>Qg,dDg:()=>FA,dqk:()=>Wt,eFA:()=>U7,ekj:()=>Wg,eoX:()=>H7,f3M:()=>Ca,g9A:()=>z7,h0i:()=>T5,hGG:()=>fD,hij:()=>o2,iGM:()=>n7,ifc:()=>Mt,ip1:()=>E7,jDz:()=>R8,kEZ:()=>Z8,kL8:()=>n8,lG2:()=>G,lqb:()=>x1,lri:()=>O7,n5z:()=>Lr,oAB:()=>yi,oxw:()=>dm,pQV:()=>tp,q4F:()=>Mv,qLn:()=>a5,qOj:()=>Vg,qZA:()=>n2,rWj:()=>P7,s9C:()=>$g,sBO:()=>JA,sIi:()=>Ju,s_b:()=>d2,soG:()=>v2,tb:()=>N7,tp0:()=>Hs,uIk:()=>Pg,vHH:()=>Ie,vpe:()=>Ro,wAp:()=>Rt,xp6:()=>r6,z2F:()=>m2,zSh:()=>Zu,zs3:()=>Wl});var o=F(7579),j=F(727),V=F(9751),oe=F(6451),de=F(3099);function we(a){for(let l in a)if(a[l]===we)return l;throw Error("Could not find renamed property on target object.")}function ve(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function _e(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(_e).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Me(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const W=we({__forward_ref__:we});function q(a){return a.__forward_ref__=q,a.toString=function(){return _e(this())},a}function ee(a){return Ge(a)?a():a}function Ge(a){return"function"==typeof a&&a.hasOwnProperty(W)&&a.__forward_ref__===q}class Ie extends Error{constructor(l,u){super(function lt(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function Ce(a){return"string"==typeof a?a:null==a?"":String(a)}function Ee(a,l){throw new Ie(-201,!1)}function nt(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}function Xt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Tn(a){return{providers:a.providers||[],imports:a.imports||[]}}function Nn(a){return pr(a,Si)||pr(a,Jr)}function I0(a){return null!==Nn(a)}function pr(a,l){return a.hasOwnProperty(l)?a[l]:null}function g0(a){return a&&(a.hasOwnProperty(vr)||a.hasOwnProperty(oo))?a[vr]:null}const Si=we({\u0275prov:we}),vr=we({\u0275inj:we}),Jr=we({ngInjectableDef:we}),oo=we({ngInjectorDef:we});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let bi;function $n(a){const l=bi;return bi=a,l}function Qr(a,l,u){const h=Nn(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&ct.Optional?null:void 0!==l?l:void Ee(_e(a))}function On(a){return{toString:a}.toString()}var En=(()=>((En=En||{})[En.OnPush=0]="OnPush",En[En.Default=1]="Default",En))(),Mt=(()=>{return(a=Mt||(Mt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Mt;var a})();const Wt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},Dt=[],Un=we({\u0275cmp:we}),Pt=we({\u0275dir:we}),Xr=we({\u0275pipe:we}),Kt=we({\u0275mod:we}),Zn=we({\u0275fac:we}),wn=we({__NG_ELEMENT_ID__:we});let Xn=0;function Vn(a){return On(()=>{const u=!0===a.standalone,h={},f={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||Dt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Mt.Emulated,id:"c"+Xn++,styles:a.styles||Dt,_:null,setInput:null,schemas:a.schemas||null,tView:null},v=a.dependencies,_=a.features;return f.inputs=$(a.inputs,h),f.outputs=$(a.outputs),_&&_.forEach(x=>x(f)),f.directiveDefs=v?()=>("function"==typeof v?v():v).map(ei).filter(Er):null,f.pipeDefs=v?()=>("function"==typeof v?v():v).map(Q).filter(Er):null,f})}function ei(a){return O(a)||k(a)}function Er(a){return null!==a}function yi(a){return On(()=>({type:a.type,bootstrap:a.bootstrap||Dt,declarations:a.declarations||Dt,imports:a.imports||Dt,exports:a.exports||Dt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function $(a,l){if(null==a)return Qn;const u={};for(const h in a)if(a.hasOwnProperty(h)){let f=a[h],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),u[f]=h,l&&(l[f]=v)}return u}const G=Vn;function P(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function O(a){return a[Un]||null}function k(a){return a[Pt]||null}function Q(a){return a[Xr]||null}function Ae(a){const l=O(a)||k(a)||Q(a);return null!==l&&l.standalone}function Ye(a,l){const u=a[Kt]||null;if(!u&&!0===l)throw new Error(`Type ${_e(a)} does not have '\u0275mod' property.`);return u}function zi(a){return Array.isArray(a)&&"object"==typeof a[1]}function Wi(a){return Array.isArray(a)&&!0===a[1]}function qo(a){return 0!=(8&a.flags)}function S0(a){return 2==(2&a.flags)}function Wo(a){return 1==(1&a.flags)}function Ir(a){return null!==a.template}function Ko(a){return 0!=(256&a[2])}function As(a,l){return a.hasOwnProperty(Zn)?a[Zn]:null}class v0{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function el(){return o1}function o1(a){return a.type.prototype.ngOnChanges&&(a.setInput=Jo),tl}function tl(){const a=nl(this),l=a?.current;if(l){const u=a.previous;if(u===Qn)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function Jo(a,l,u,h){const f=nl(a)||function wr(a,l){return a[Qo]=l}(a,{previous:Qn,current:null}),v=f.current||(f.current={}),_=f.previous,x=this.declaredInputs[u],T=_[x];v[x]=new v0(T&&T.currentValue,l,_===Qn),a[h]=l}el.ngInherit=!0;const Qo="__ngSimpleChanges__";function nl(a){return a[Qo]||null}function Mn(a){for(;Array.isArray(a);)a=a[0];return a}function Ds(a,l){return Mn(l[a])}function Sr(a,l){return Mn(l[a.index])}function l1(a,l){return a.data[l]}function t0(a,l){return a[l]}function mn(a,l){const u=l[a];return zi(u)?u:u[0]}function uo(a){return 64==(64&a[2])}function zr(a,l){return null==l?null:a[l]}function ar(a){a[18]=0}function ho(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Vt={lFrame:ra(null),bindingsEnabled:!0};function Ts(){return Vt.bindingsEnabled}function Re(){return Vt.lFrame.lView}function $t(){return Vt.lFrame.tView}function kc(a){return Vt.lFrame.contextLView=a,a[8]}function h1(a){return Vt.lFrame.contextLView=null,a}function Wn(){let a=ea();for(;null!==a&&64===a.type;)a=a.parent;return a}function ea(){return Vt.lFrame.currentTNode}function Es(){const a=Vt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}function Nr(a,l){const u=Vt.lFrame;u.currentTNode=a,u.isParent=l}function d1(){return Vt.lFrame.isParent}function f1(){Vt.lFrame.isParent=!1}function Ci(){const a=Vt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Is(){return Vt.lFrame.bindingIndex++}function kr(a){const l=Vt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Rc(a){Vt.lFrame.inI18n=a}function Vc(a,l){const u=Vt.lFrame;u.bindingIndex=u.bindingRootIndex=a,g1(l)}function g1(a){Vt.lFrame.currentDirectiveIndex=a}function ul(){return Vt.lFrame.currentQueryIndex}function m0(a){Vt.lFrame.currentQueryIndex=a}function na(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function hl(a,l,u){if(u&ct.SkipSelf){let f=l,v=a;for(;!(f=f.parent,null!==f||u&ct.Host||(f=na(v),null===f||(v=v[15],10&f.type))););if(null===f)return!1;l=f,a=v}const h=Vt.lFrame=dl();return h.currentTNode=l,h.lView=a,!0}function ia(a){const l=dl(),u=a[1];Vt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function dl(){const a=Vt.lFrame,l=null===a?null:a.child;return null===l?ra(a):l}function ra(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function fl(){const a=Vt.lFrame;return Vt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Oc=fl;function N0(){const a=fl();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Yt(){return Vt.lFrame.selectedIndex}function ts(a){Vt.lFrame.selectedIndex=a}function xn(){const a=Vt.lFrame;return l1(a.tView,a.selectedIndex)}function Pc(){Vt.lFrame.currentNamespace="svg"}function zs(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const v=a.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:x,ngAfterViewInit:T,ngAfterViewChecked:E,ngOnDestroy:R}=v;_&&(a.contentHooks||(a.contentHooks=[])).push(-u,_),x&&((a.contentHooks||(a.contentHooks=[])).push(u,x),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,x)),T&&(a.viewHooks||(a.viewHooks=[])).push(-u,T),E&&((a.viewHooks||(a.viewHooks=[])).push(u,E),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,E)),null!=R&&(a.destroyHooks||(a.destroyHooks=[])).push(u,R)}}function is(a,l,u){vo(a,l,3,u)}function rs(a,l,u,h){(3&a[2])===u&&vo(a,l,u,h)}function po(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function vo(a,l,u,h){const v=h??-1,_=l.length-1;let x=0;for(let T=void 0!==h?65535&a[18]:0;T<_;T++)if("number"==typeof l[T+1]){if(x=l[T],null!=h&&x>=h)break}else l[T]<0&&(a[18]+=65536),(x<v||-1==v)&&(p1(a,u,l,T),a[18]=(4294901760&a[18])+T+2),T++}function p1(a,l,u,h){const f=u[h]<0,v=u[h+1],x=a[f?-u[h]:u[h]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class ss{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function aa(a,l,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const v=u[h++],_=u[h++],x=u[h++];a.setAttribute(l,_,x,v)}else{const v=f,_=u[++h];vl(v)?a.setProperty(l,v,_):a.setAttribute(l,v,_),h++}}return h}function Mu(a){return 3===a||4===a||6===a}function vl(a){return 64===a.charCodeAt(0)}function wo(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const f=l[h];"number"==typeof f?u=f:0===u||xu(a,u,f,null,-1===u||2===u?l[++h]:null)}}return a}function xu(a,l,u,h,f){let v=0,_=a.length;if(-1===l)_=-1;else for(;v<a.length;){const x=a[v++];if("number"==typeof x){if(x===l){_=-1;break}if(x>l){_=v-1;break}}}for(;v<a.length;){const x=a[v];if("number"==typeof x)break;if(x===u){if(null===h)return void(null!==f&&(a[v+1]=f));if(h===a[v+1])return void(a[v+2]=f)}v++,null!==h&&v++,null!==f&&v++}-1!==_&&(a.splice(_,0,l),v=_+1),a.splice(v++,0,u),null!==h&&a.splice(v++,0,h),null!==f&&a.splice(v++,0,f)}function ml(a){return-1!==a}function la(a){return 32767&a}function ks(a,l){let u=function Uc(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let ca=!0;function Vr(a){const l=ca;return ca=a,l}let m1=0;const as={};function ua(a,l){const u=ls(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,ha(h.data,a),ha(l,null),ha(h.blueprint,null));const f=da(a,l),v=a.injectorIndex;if(ml(f)){const _=la(f),x=ks(f,l),T=x[1].data;for(let E=0;E<8;E++)l[v+E]=x[_+E]|T[_+E]}return l[v+8]=f,v}function ha(a,l){a.push(0,0,0,0,0,0,0,0,l)}function ls(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function da(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,f=l;for(;null!==f;){if(h=_o(f),null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function k0(a,l,u){!function _l(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(wn)&&(h=u[wn]),null==h&&(h=u[wn]=m1++);const f=255&h;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function yl(a,l,u){if(u&ct.Optional||void 0!==a)return a;Ee()}function jc(a,l,u,h){if(u&ct.Optional&&void 0===h&&(h=null),0==(u&(ct.Self|ct.Host))){const f=a[9],v=$n(void 0);try{return f?f.get(l,h,u&ct.Optional):Qr(l,h,u&ct.Optional)}finally{$n(v)}}return yl(h,0,u)}function Gc(a,l,u,h=ct.Default,f){if(null!==a){if(1024&l[2]){const _=function Tu(a,l,u,h,f){let v=a,_=l;for(;null!==v&&null!==_&&1024&_[2]&&!(256&_[2]);){const x=Cl(v,_,u,h|ct.Self,as);if(x!==as)return x;let T=v.parent;if(!T){const E=_[21];if(E){const R=E.get(u,as,h);if(R!==as)return R}T=_o(_),_=_[15]}v=T}return f}(a,l,u,h,as);if(_!==as)return _}const v=Cl(a,l,u,h,as);if(v!==as)return v}return jc(l,u,h,f)}function Cl(a,l,u,h,f){const v=function vd(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(wn)?a[wn]:void 0;return"number"==typeof l?l>=0?255&l:ti:l}(u);if("function"==typeof v){if(!hl(l,a,h))return h&ct.Host?yl(f,0,h):jc(l,u,h,f);try{const _=v(h);if(null!=_||h&ct.Optional)return _;Ee()}finally{Oc()}}else if("number"==typeof v){let _=null,x=ls(a,l),T=-1,E=h&ct.Host?l[16][6]:null;for((-1===x||h&ct.SkipSelf)&&(T=-1===x?da(a,l):l[x+8],-1!==T&&Rs(h,!1)?(_=l[1],x=la(T),l=ks(T,l)):x=-1);-1!==x;){const R=l[1];if(Du(v,x,R.data)){const U=Au(x,l,u,_,h,E);if(U!==as)return U}T=l[x+8],-1!==T&&Rs(h,l[1].data[x+8]===E)&&Du(v,x,l)?(_=R,x=la(T),l=ks(T,l)):x=-1}}return f}function Au(a,l,u,h,f,v){const _=l[1],x=_.data[a+8],R=fa(x,_,u,null==h?S0(x)&&ca:h!=_&&0!=(3&x.type),f&ct.Host&&v===x);return null!==R?cs(l,_,R,x):as}function fa(a,l,u,h,f){const v=a.providerIndexes,_=l.data,x=1048575&v,T=a.directiveStart,R=v>>20,K=f?x+R:a.directiveEnd;for(let re=h?x:x+R;re<K;re++){const Te=_[re];if(re<T&&u===Te||re>=T&&Te.type===u)return re}if(f){const re=_[T];if(re&&Ir(re)&&re.type===u)return T}return null}function cs(a,l,u,h){let f=a[u];const v=l.data;if(function gl(a){return a instanceof ss}(f)){const _=f;_.resolving&&function Ct(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${a}${u}`)}(function be(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ce(a)}(v[u]));const x=Vr(_.canSeeViewProviders);_.resolving=!0;const T=_.injectImpl?$n(_.injectImpl):null;hl(a,h,ct.Default);try{f=a[u]=_.factory(void 0,v,a,h),l.firstCreatePass&&u>=h.directiveStart&&function ns(a,l,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:v}=l.type.prototype;if(h){const _=o1(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,_)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),v&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,v))}(u,v[u],l)}finally{null!==T&&$n(T),Vr(x),_.resolving=!1,Oc()}}return f}function Du(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Rs(a,l){return!(a&ct.Self||a&ct.Host&&l)}class w1{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return Gc(this._tNode,this._lView,l,h,u)}}function ti(){return new w1(Wn(),Re())}function Lr(a){return On(()=>{const l=a.prototype.constructor,u=l[Zn]||ga(l),h=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==h;){const v=f[Zn]||ga(f);if(v&&v!==u)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function ga(a){return Ge(a)?()=>{const l=ga(ee(a));return l&&l()}:As(a)}function _o(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function _1(a){return function bl(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const v=u[f];if(Mu(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(v===l)return u[f+1];f+=2}}}return null}(Wn(),a)}const Pn="__parameters__";function w0(a,l,u){return On(()=>{const h=function Ml(a){return function(...u){if(a){const h=a(...u);for(const f in h)this[f]=h[f]}}}(l);function f(...v){if(this instanceof f)return h.apply(this,v),this;const _=new f(...v);return x.annotation=_,x;function x(T,E,R){const U=T.hasOwnProperty(Pn)?T[Pn]:Object.defineProperty(T,Pn,{value:[]})[Pn];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(_),T}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class _n{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Xt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Yi(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),Yi(h,l)):l!==a&&l.push(h)}return l}function _0(a,l){a.forEach(u=>Array.isArray(u)?_0(u,l):l(u))}function va(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function bo(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function lr(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function cr(a,l,u){let h=V0(a,l);return h>=0?a[1|h]=u:(h=~h,function ht(a,l,u,h){let f=a.length;if(f==l)a.push(u,h);else if(1===f)a.push(h,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function ma(a,l){const u=V0(a,l);if(u>=0)return a[1|u]}function V0(a,l){return function ur(a,l,u){let h=0,f=a.length>>u;for(;f!==h;){const v=h+(f-h>>1),_=a[v<<u];if(l===_)return v<<u;_>l?f=v:h=v+1}return~(f<<u)}(a,l,1)}const bn={},Or="__NG_DI_FLAG__",_r="ngTempTokenPath",Sl=/\n/gm,ba="__source";let Ps;function Oi(a){const l=Ps;return Ps=a,l}function Co(a,l=ct.Default){if(void 0===Ps)throw new Ie(-203,!1);return null===Ps?Qr(a,void 0,l):Ps.get(a,l&ct.Optional?null:void 0,l)}function ni(a,l=ct.Default){return(function Jn(){return bi}()||Co)(ee(a),l)}function Ca(a,l=ct.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),ni(a,l)}function Ma(a){const l=[];for(let u=0;u<a.length;u++){const h=ee(a[u]);if(Array.isArray(h)){if(0===h.length)throw new Ie(900,!1);let f,v=ct.Default;for(let _=0;_<h.length;_++){const x=h[_],T=Kc(x);"number"==typeof T?-1===T?f=x.token:v|=T:f=x}l.push(ni(f,v))}else l.push(ni(h))}return l}function hs(a,l){return a[Or]=l,a.prototype[Or]=l,a}function Kc(a){return a[Or]}const b0=hs(w0("Optional"),8),Hs=hs(w0("SkipSelf"),4);let Na,Qc;function Ru(a){Na=a}function O0(a){return function Rl(){if(void 0===Qc&&(Qc=null,Wt.trustedTypes))try{Qc=Wt.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Qc}()?.createHTML(a)||a}class Vl{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function D(a){return a instanceof Vl?a.changingThisBreaksApplicationSecurity:a}class zt{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(O0(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class kt{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=O0(l),u;const h=this.inertDocument.createElement("body");return h.innerHTML=O0(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const _=u.item(f).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&l.removeAttribute(_)}let h=l.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Kn=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function P0(a){return(a=String(a)).match(Kn)?a:"unsafe:"+a}function yr(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function H0(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const dr=yr("area,br,col,hr,img,wbr"),F0=yr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Eo=yr("rp,rt"),Hl=H0(dr,H0(F0,yr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),H0(Eo,yr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),H0(Eo,F0)),Fl=yr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ou=H0(Fl,yr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var m=(()=>((m=m||{})[m.NONE=0]="NONE",m[m.HTML=1]="HTML",m[m.STYLE=2]="STYLE",m[m.SCRIPT=3]="SCRIPT",m[m.URL=4]="URL",m[m.RESOURCE_URL=5]="RESOURCE_URL",m))();function L(a){const l=function r0(){const a=Re();return a&&a[12]}();return l?l.sanitize(m.URL,a)||"":function S(a,l){const u=function B(a){return a instanceof Vl&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}(a,"URL")?D(a):P0(Ce(a))}const t5=new _n("ENVIRONMENT_INITIALIZER"),Bl=new _n("INJECTOR",-1),Hu=new _n("INJECTOR_DEF_TYPES");class xd{get(l,u=bn){if(u===bn){const h=new Error(`NullInjectorError: No provider for ${_e(l)}!`);throw h.name="NullInjectorError",h}return u}}function n5(...a){return{\u0275providers:Fu(0,a)}}function Fu(a,...l){const u=[],h=new Set;let f;return _0(l,v=>{const _=v;Ul(_,u,[],h)&&(f||(f=[]),f.push(_))}),void 0!==f&&i5(f,u),u}function i5(a,l){for(let u=0;u<a.length;u++){const{providers:f}=a[u];_0(f,v=>{l.push(v)})}}function Ul(a,l,u,h){if(!(a=ee(a)))return!1;let f=null,v=g0(a);const _=!v&&O(a);if(v||_){if(_&&!_.standalone)return!1;f=a}else{const T=a.ngModule;if(v=g0(T),!v)return!1;f=T}const x=h.has(f);if(_){if(x)return!1;if(h.add(f),_.dependencies){const T="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const E of T)Ul(E,l,u,h)}}else{if(!v)return!1;{if(null!=v.imports&&!x){let E;h.add(f);try{_0(v.imports,R=>{Ul(R,l,u,h)&&(E||(E=[]),E.push(R))})}finally{}void 0!==E&&i5(E,l)}if(!x){const E=As(f)||(()=>new f);l.push({provide:f,useFactory:E,deps:Dt},{provide:Hu,useValue:f,multi:!0},{provide:t5,useValue:()=>ni(f),multi:!0})}const T=v.providers;null==T||x||_0(T,R=>{l.push(R)})}}return f!==a&&void 0!==a.providers}const Bu=we({provide:String,useValue:we});function Zl(a){return null!==a&&"object"==typeof a&&Bu in a}function Va(a){return"function"==typeof a}const Zu=new _n("Set Injector scope."),Dd={},$f={};let Td;function Ed(){return void 0===Td&&(Td=new xd),Td}class x1{}class mv extends x1{constructor(l,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zd(l,_=>this.processProvider(_)),this.records.set(Bl,r5(void 0,this)),f.has("environment")&&this.records.set(x1,r5(void 0,this));const v=this.records.get(Zu);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Hu.multi,Dt,ct.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=Oi(this),h=$n(void 0);try{return l()}finally{Oi(u),$n(h)}}get(l,u=bn,h=ct.Default){this.assertNotDestroyed();const f=Oi(this),v=$n(void 0);try{if(!(h&ct.SkipSelf)){let x=this.records.get(l);if(void 0===x){const T=function HN(a){return"function"==typeof a||"object"==typeof a&&a instanceof _n}(l)&&Nn(l);x=T&&this.injectableDefInScope(T)?r5(Id(l),Dd):null,this.records.set(l,x)}if(null!=x)return this.hydrate(l,x)}return(h&ct.Self?Ed():this.parent).get(l,u=h&ct.Optional&&u===bn?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[_r]=_[_r]||[]).unshift(_e(l)),f)throw _;return function ds(a,l,u,h){const f=a[_r];throw l[ba]&&f.unshift(l[ba]),a.message=function yd(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let f=_e(l);if(Array.isArray(l))f=l.map(_e).join(" -> ");else if("object"==typeof l){let v=[];for(let _ in l)if(l.hasOwnProperty(_)){let x=l[_];v.push(_+":"+("string"==typeof x?JSON.stringify(x):_e(x)))}f=`{${v.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${a.replace(Sl,"\n  ")}`}("\n"+a.message,f,u,h),a.ngTokenPath=f,a[_r]=null,a}(_,l,"R3InjectorError",this.source)}throw _}finally{$n(v),Oi(f)}}resolveInjectorInitializers(){const l=Oi(this),u=$n(void 0);try{const h=this.get(t5.multi,Dt,ct.Self);for(const f of h)f()}finally{Oi(l),$n(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(_e(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(l){let u=Va(l=ee(l))?l:ee(l&&l.provide);const h=function Sd(a){return Zl(a)?r5(void 0,a.useValue):r5(qf(a),Dd)}(l);if(Va(l)||!0!==l.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=r5(void 0,Dd,!0),f.factory=()=>Ma(f.multi),this.records.set(u,f)),u=l,f.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===Dd&&(u.value=$f,u.value=u.factory()),"object"==typeof u.value&&u.value&&function zb(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ee(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Id(a){const l=Nn(a),u=null!==l?l.factory:As(a);if(null!==u)return u;if(a instanceof _n)throw new Ie(204,!1);if(a instanceof Function)return function Sb(a){const l=a.length;if(l>0)throw lr(l,"?"),new Ie(204,!1);const u=function ys(a){const l=a&&(a[Si]||a[Jr]);if(l){const u=function Yr(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Ie(204,!1)}function qf(a,l,u){let h;if(Va(a)){const f=ee(a);return As(f)||Id(f)}if(Zl(a))h=()=>ee(a.useValue);else if(function vv(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Ma(a.deps||[]));else if(function Uu(a){return!(!a||!a.useExisting)}(a))h=()=>ni(ee(a.useExisting));else{const f=ee(a&&(a.useClass||a.provide));if(!function wv(a){return!!a.deps}(a))return As(f)||Id(f);h=()=>new f(...Ma(a.deps))}return h}function r5(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function Wf(a){return!!a.\u0275providers}function zd(a,l){for(const u of a)Array.isArray(u)?zd(u,l):Wf(u)?zd(u.\u0275providers,l):l(u)}class Kf{}class kb{resolveComponentFactory(l){throw function jl(a){const l=Error(`No component factory found for ${_e(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let s5=(()=>{class a{}return a.NULL=new kb,a})();function Rb(){return o5(Wn(),Re())}function o5(a,l){return new Gl(Sr(a,l))}let Gl=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=Rb,a})();function yv(a){return a instanceof Gl?a.nativeElement:a}class Yf{}let Vb=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Cv(){const a=Re(),u=mn(Wn().index,a);return(zi(u)?u:a)[11]}(),a})(),Lb=(()=>{class a{}return a.\u0275prov=Xt({token:a,providedIn:"root",factory:()=>null}),a})();class Jf{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Mv=new Jf("14.2.5"),Nd={};function Hn(a){return a.ngOriginalError}class a5{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Hn(l);for(;u&&Hn(u);)u=Hn(u);return u||null}}const Dv=/^>|^->|<!--|-->|--!>|<!-$/g,La=/(<|>)/;const l5=new Map;let A1=0;const Mi="__ngContext__";function fr(a,l){zi(l)?(a[Mi]=l[20],function Gb(a){l5.set(a[20],a)}(l)):a[Mi]=l}function D1(a){return a instanceof Function?a():a}var js=(()=>((js=js||{})[js.Important=1]="Important",js[js.DashCase=2]="DashCase",js))();let tg;function $u(a,l){return tg(a,l)}function qu(a){const l=a[3];return Wi(l)?l[3]:l}function Vv(a){return Ld(a[13])}function ng(a){return Ld(a[4])}function Ld(a){for(;null!==a&&!Wi(a);)a=a[4];return a}function u5(a,l,u,h,f){if(null!=h){let v,_=!1;Wi(h)?v=h:zi(h)&&(_=!0,h=h[0]);const x=Mn(h);0===a&&null!==u?null==f?Uv(l,u,x):ql(l,u,x,f||null,!0):1===a&&null!==u?ql(l,u,x,f||null,!0):2===a?Yv(l,x,_):3===a&&l.destroyNode(x),null!=v&&function cy(a,l,u,h,f){const v=u[7];v!==Mn(u)&&u5(l,a,h,v,f);for(let x=10;x<u.length;x++){const T=u[x];Wu(T[1],T,a,l,h,v)}}(l,a,v,u,f)}}function Od(a,l){return a.createText(l)}function Lv(a,l,u){a.setValue(l,u)}function Xb(a,l){return a.createComment(function Tv(a){return a.replace(Dv,l=>l.replace(La,"\u200b$1\u200b"))}(l))}function ig(a,l,u){return a.createElement(l,u)}function Pv(a,l){const u=a[9],h=u.indexOf(l),f=l[3];512&l[2]&&(l[2]&=-513,ho(f,-1)),u.splice(h,1)}function rg(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const f=h[17];null!==f&&f!==a&&Pv(f,h),l>0&&(a[u-1][4]=h[4]);const v=bo(a,10+l);!function Ov(a,l){Wu(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const _=v[19];null!==_&&_.detachView(v[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Hv(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&Wu(a,l,u,3,null,null),function ny(a){let l=a[13];if(!l)return Pd(a[1],a);for(;l;){let u=null;if(zi(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)zi(l)&&Pd(l[1],l),l=l[3];null===l&&(l=a),zi(l)&&Pd(l[1],l),u=l&&l[4]}l=u}}(l)}}function Pd(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function oy(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const f=l[u[h]];if(!(f instanceof ss)){const v=u[h+1];if(Array.isArray(v))for(let _=0;_<v.length;_+=2){const x=f[v[_]],T=v[_+1];try{T.call(x)}finally{}}else try{v.call(f)}finally{}}}}(a,l),function sy(a,l){const u=a.cleanup,h=l[7];let f=-1;if(null!==u)for(let v=0;v<u.length-1;v+=2)if("string"==typeof u[v]){const _=u[v+1],x="function"==typeof _?_(l):Mn(l[_]),T=h[f=u[v+2]],E=u[v+3];"boolean"==typeof E?x.removeEventListener(u[v],T,E):E>=0?h[f=E]():h[f=-E].unsubscribe(),v+=2}else{const _=h[f=u[v+1]];u[v].call(_)}if(null!==h){for(let v=f+1;v<h.length;v++)(0,h[v])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&Wi(l[3])){u!==l[3]&&Pv(u,l);const h=l[19];null!==h&&h.detachView(a)}!function Sv(a){l5.delete(a[20])}(l)}}function Fv(a,l,u){return Bv(a,l.parent,u)}function Bv(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const f=a.data[h.directiveStart].encapsulation;if(f===Mt.None||f===Mt.Emulated)return null}return Sr(h,u)}function ql(a,l,u,h,f){a.insertBefore(l,u,h,f)}function Uv(a,l,u){a.appendChild(l,u)}function Zv(a,l,u,h,f){null!==h?ql(a,l,u,h,f):Uv(a,l,u)}function Hd(a,l){return a.parentNode(l)}function Gv(a,l,u){return qv(a,l,u)}function $v(a,l,u){return 40&a.type?Sr(a,u):null}let sg,qv=$v;function Wv(a,l){qv=a,sg=l}function Fd(a,l,u,h){const f=Fv(a,h,l),v=l[11],x=Gv(h.parent||l[6],h,l);if(null!=f)if(Array.isArray(u))for(let T=0;T<u.length;T++)Zv(v,f,u[T],x,!1);else Zv(v,f,u,x,!1);void 0!==sg&&sg(v,h,l,u,f)}function Bd(a,l){if(null!==l){const u=l.type;if(3&u)return Sr(l,a);if(4&u)return og(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return Bd(a,h);{const f=a[l.index];return Wi(f)?og(-1,f):Mn(f)}}if(32&u)return $u(l,a)()||Mn(a[l.index]);{const h=Kv(a,l);return null!==h?Array.isArray(h)?h[0]:Bd(qu(a[16]),h):Bd(a,l.next)}}return null}function Kv(a,l){return null!==l?a[16][6].projection[l.projection]:null}function og(a,l){const u=10+a+1;if(u<l.length){const h=l[u],f=h[1].firstChild;if(null!==f)return Bd(h,f)}return l[7]}function Yv(a,l,u){const h=Hd(a,l);h&&function ay(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}function ag(a,l,u,h,f,v,_){for(;null!=u;){const x=h[u.index],T=u.type;if(_&&0===l&&(x&&fr(Mn(x),h),u.flags|=4),64!=(64&u.flags))if(8&T)ag(a,l,u.child,h,f,v,!1),u5(l,a,f,x,v);else if(32&T){const E=$u(u,h);let R;for(;R=E();)u5(l,a,f,R,v);u5(l,a,f,x,v)}else 16&T?Jv(a,l,h,u,f,v):u5(l,a,f,x,v);u=_?u.projectionNext:u.next}}function Wu(a,l,u,h,f,v){ag(u,h,a.firstChild,l,f,v,!1)}function Jv(a,l,u,h,f,v){const _=u[16],T=_[6].projection[h.projection];if(Array.isArray(T))for(let E=0;E<T.length;E++)u5(l,a,f,T[E],v);else ag(a,l,T,_[3],f,v,!0)}function Qv(a,l,u){a.setAttribute(l,"style",u)}function lg(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function Xv(a,l,u){let h=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const v=l.length;if(f+v===h||a.charCodeAt(f+v)<=32)return f}u=f+1}}const e6="ng-template";function hy(a,l,u){let h=0;for(;h<a.length;){let f=a[h++];if(u&&"class"===f){if(f=a[h],-1!==Xv(f.toLowerCase(),l,0))return!0}else if(1===f){for(;h<a.length&&"string"==typeof(f=a[h++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function t6(a){return 4===a.type&&a.value!==e6}function dy(a,l,u){return l===(4!==a.type||u?a.value:e6)}function fy(a,l,u){let h=4;const f=a.attrs||[],v=function vy(a){for(let l=0;l<a.length;l++)if(Mu(a[l]))return l;return a.length}(f);let _=!1;for(let x=0;x<l.length;x++){const T=l[x];if("number"!=typeof T){if(!_)if(4&h){if(h=2|1&h,""!==T&&!dy(a,T,u)||""===T&&1===l.length){if(Gs(h))return!1;_=!0}}else{const E=8&h?T:l[++x];if(8&h&&null!==a.attrs){if(!hy(a.attrs,E,u)){if(Gs(h))return!1;_=!0}continue}const U=gy(8&h?"class":T,f,t6(a),u);if(-1===U){if(Gs(h))return!1;_=!0;continue}if(""!==E){let K;K=U>v?"":f[U+1].toLowerCase();const re=8&h?K:null;if(re&&-1!==Xv(re,E,0)||2&h&&E!==K){if(Gs(h))return!1;_=!0}}}}else{if(!_&&!Gs(h)&&!Gs(T))return!1;if(_&&Gs(T))continue;_=!1,h=T|1&h}}return Gs(h)||_}function Gs(a){return 0==(1&a)}function gy(a,l,u,h){if(null===l)return-1;let f=0;if(h||!u){let v=!1;for(;f<l.length;){const _=l[f];if(_===a)return f;if(3===_||6===_)v=!0;else{if(1===_||2===_){let x=l[++f];for(;"string"==typeof x;)x=l[++f];continue}if(4===_)break;if(0===_){f+=4;continue}}f+=v?1:2}return-1}return function my(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function n6(a,l,u=!1){for(let h=0;h<l.length;h++)if(fy(a,l[h],u))return!0;return!1}function wy(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let f=0;f<a.length;f++)if(a[f]!==h[f])continue e;return!0}}return!1}function i6(a,l){return a?":not("+l.trim()+")":l}function _y(a){let l=a[0],u=1,h=2,f="",v=!1;for(;u<a.length;){let _=a[u];if("string"==typeof _)if(2&h){const x=a[++u];f+="["+_+(x.length>0?'="'+x+'"':"")+"]"}else 8&h?f+="."+_:4&h&&(f+=" "+_);else""!==f&&!Gs(_)&&(l+=i6(v,f),f=""),h=_,v=v||!Gs(h);u++}return""!==f&&(l+=i6(v,f)),l}const Bt={};function r6(a){s6($t(),Re(),Yt()+a,!1)}function s6(a,l,u,h){if(!h)if(3==(3&l[2])){const v=a.preOrderCheckHooks;null!==v&&is(l,v,u)}else{const v=a.preOrderHooks;null!==v&&rs(l,v,0,u)}ts(u)}function c6(a,l=null,u=null,h){const f=cg(a,l,u,h);return f.resolveInjectorInitializers(),f}function cg(a,l=null,u=null,h,f=new Set){const v=[u||Dt,n5(a)];return h=h||("object"==typeof a?void 0:_e(a)),new mv(v,l||Ed(),h||null,f)}let Wl=(()=>{class a{static create(u,h){if(Array.isArray(u))return c6({name:""},h,u,"");{const f=u.name??"";return c6({name:f},u.parent,u.providers,f)}}}return a.THROW_IF_NOT_FOUND=bn,a.NULL=new xd,a.\u0275prov=Xt({token:a,providedIn:"any",factory:()=>ni(Bl)}),a.__NG_ELEMENT_ID__=-1,a})();function d5(a,l=ct.Default){const u=Re();return null===u?ni(a,l):Gc(Wn(),u,ee(a),l)}function v6(){throw new Error("invalid")}function Zd(a,l){return a<<17|l<<2}function $s(a){return a>>17&32767}function gg(a){return 2|a}function Oa(a){return(131068&a)>>2}function pg(a,l){return-131069&a|l<<2}function vg(a){return 1|a}function T6(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],v=u[h+1];if(-1!==v){const _=a.data[v];m0(f),_.contentQueries(2,l[v],v)}}}function $d(a,l,u,h,f,v,_,x,T,E,R){const U=l.blueprint.slice();return U[0]=f,U[2]=76|h,(null!==R||a&&1024&a[2])&&(U[2]|=1024),ar(U),U[3]=U[15]=a,U[8]=u,U[10]=_||a&&a[10],U[11]=x||a&&a[11],U[12]=T||a&&a[12]||null,U[9]=E||a&&a[9]||null,U[6]=v,U[20]=function $N(){return A1++}(),U[21]=R,U[16]=2==l.type?a[16]:U,U}function f5(a,l,u,h,f){let v=a.data[l];if(null===v)v=xg(a,l,u,h,f),function ta(){return Vt.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=u,v.value=h,v.attrs=f;const _=Es();v.injectorIndex=null===_?-1:_.injectorIndex}return Nr(v,!0),v}function xg(a,l,u,h,f){const v=ea(),_=d1(),T=a.data[l]=function tC(a,l,u,h,f,v){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?v:v&&v.parent,u,l,h,f);return null===a.firstChild&&(a.firstChild=T),null!==v&&(_?null==v.child&&null!==T.parent&&(v.child=T):null===v.next&&(v.next=T)),T}function g5(a,l,u,h){if(0===u)return-1;const f=l.length;for(let v=0;v<u;v++)l.push(h),a.blueprint.push(h),a.data.push(null);return f}function Ag(a,l,u){ia(l);try{const h=a.viewQuery;null!==h&&Ng(1,h,u);const f=a.template;null!==f&&E6(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&T6(a,l),a.staticViewQueries&&Ng(2,a.viewQuery,u);const v=a.components;null!==v&&function Qy(a,l){for(let u=0;u<l.length;u++)mC(a,l[u])}(l,v)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,N0()}}function qd(a,l,u,h){const f=l[2];if(128!=(128&f)){ia(l);try{ar(l),function Ki(a){return Vt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&E6(a,l,u,2,h);const _=3==(3&f);if(_){const E=a.preOrderCheckHooks;null!==E&&is(l,E,null)}else{const E=a.preOrderHooks;null!==E&&rs(l,E,0,null),po(l,0)}if(function pC(a){for(let l=Vv(a);null!==l;l=ng(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const f=u[h],v=f[3];0==(512&f[2])&&ho(v,1),f[2]|=512}}}(l),function gC(a){for(let l=Vv(a);null!==l;l=ng(l))for(let u=10;u<l.length;u++){const h=l[u],f=h[1];uo(h)&&qd(f,h,f.template,h[8])}}(l),null!==a.contentQueries&&T6(a,l),_){const E=a.contentCheckHooks;null!==E&&is(l,E)}else{const E=a.contentHooks;null!==E&&rs(l,E,1),po(l,1)}!function Yy(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)ts(~f);else{const v=f,_=u[++h],x=u[++h];Vc(_,v),x(2,l[v])}}}finally{ts(-1)}}(a,l);const x=a.components;null!==x&&function Jy(a,l){for(let u=0;u<l.length;u++)vC(a,l[u])}(l,x);const T=a.viewQuery;if(null!==T&&Ng(2,T,h),_){const E=a.viewCheckHooks;null!==E&&is(l,E)}else{const E=a.viewHooks;null!==E&&rs(l,E,2),po(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,ho(l[3],-1))}finally{N0()}}}function E6(a,l,u,h,f){const v=Yt(),_=2&h;try{ts(-1),_&&l.length>22&&s6(a,l,22,!1),u(h,f)}finally{ts(v)}}function Dg(a,l,u){!Ts()||(function oC(a,l,u,h){const f=u.directiveStart,v=u.directiveEnd;a.firstCreatePass||ua(u,l),fr(h,l);const _=u.initialInputs;for(let x=f;x<v;x++){const T=a.data[x],E=Ir(T);E&&hC(l,u,T);const R=cs(l,a,x,u);fr(R,l),null!==_&&dC(0,x-f,R,T,0,_),E&&(mn(u.index,l)[8]=R)}}(a,l,u,Sr(u,l)),128==(128&u.flags)&&function aC(a,l,u){const h=u.directiveStart,f=u.directiveEnd,v=u.index,_=function Lc(){return Vt.lFrame.currentDirectiveIndex}();try{ts(v);for(let x=h;x<f;x++){const T=a.data[x],E=l[x];g1(x),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&L6(T,E)}}finally{ts(-1),g1(_)}}(a,l,u))}function Wd(a,l,u=Sr){const h=l.localNames;if(null!==h){let f=l.index+1;for(let v=0;v<h.length;v+=2){const _=h[v+1],x=-1===_?u(l,a):a[_];a[f++]=x}}}function S6(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Tg(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Tg(a,l,u,h,f,v,_,x,T,E){const R=22+h,U=R+f,K=function Xy(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Bt);return u}(R,U),re="function"==typeof E?E():E;return K[1]={type:a,blueprint:K,template:u,queries:null,viewQuery:x,declTNode:l,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:T,consts:re,incompleteFirstPass:!1}}function z6(a,l,u,h){const f=B6(l);null===u?f.push(h):(f.push(u),a.firstCreatePass&&U6(a).push(h,f.length-1))}function N6(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const f=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,f):u[h]=[l,f]}return u}function k6(a,l){const h=l.directiveEnd,f=a.data,v=l.attrs,_=[];let x=null,T=null;for(let E=l.directiveStart;E<h;E++){const R=f[E],U=R.inputs,K=null===v||t6(l)?null:fC(U,v);_.push(K),x=N6(U,E,x),T=N6(R.outputs,E,T)}null!==x&&(x.hasOwnProperty("class")&&(l.flags|=16),x.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=_,l.inputs=x,l.outputs=T}function U0(a,l,u,h,f,v,_,x){const T=Sr(l,u);let R,E=l.inputs;!x&&null!=E&&(R=E[h])?(kg(a,u,R,h,f),S0(l)&&R6(u,l.index)):3&l.type&&(h=function nC(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),f=null!=_?_(f,l.value||"",h):f,v.setProperty(T,h,f))}function R6(a,l){const u=mn(l,a);16&u[2]||(u[2]|=32)}function Eg(a,l,u,h){let f=!1;if(Ts()){const v=function lC(a,l,u){const h=a.directiveRegistry;let f=null;if(h)for(let v=0;v<h.length;v++){const _=h[v];n6(u,_.selectors,!1)&&(f||(f=[]),k0(ua(u,l),a,_.type),Ir(_)?(O6(a,u),f.unshift(_)):f.push(_))}return f}(a,l,u),_=null===h?null:{"":-1};if(null!==v){f=!0,P6(u,a.data.length,v.length);for(let R=0;R<v.length;R++){const U=v[R];U.providersResolver&&U.providersResolver(U)}let x=!1,T=!1,E=g5(a,l,v.length,null);for(let R=0;R<v.length;R++){const U=v[R];u.mergedAttrs=wo(u.mergedAttrs,U.hostAttrs),H6(a,u,l,E,U),uC(E,U,_),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const K=U.type.prototype;!x&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),x=!0),!T&&(K.ngOnChanges||K.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),T=!0),E++}k6(a,u)}_&&function cC(a,l,u){if(l){const h=a.localNames=[];for(let f=0;f<l.length;f+=2){const v=u[l[f+1]];if(null==v)throw new Ie(-301,!1);h.push(l[f],v)}}}(u,h,_)}return u.mergedAttrs=wo(u.mergedAttrs,u.attrs),f}function V6(a,l,u,h,f,v){const _=v.hostBindings;if(_){let x=a.hostBindingOpCodes;null===x&&(x=a.hostBindingOpCodes=[]);const T=~l.index;(function sC(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(x)!=T&&x.push(T),x.push(h,f,_)}}function L6(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function O6(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function uC(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;Ir(l)&&(u[""]=a)}}function P6(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function H6(a,l,u,h,f){a.data[h]=f;const v=f.factory||(f.factory=As(f.type)),_=new ss(v,Ir(f),d5);a.blueprint[h]=_,u[h]=_,V6(a,l,0,h,g5(a,u,f.hostVars,Bt),f)}function hC(a,l,u){const h=Sr(l,a),f=S6(u),v=a[10],_=Kd(a,$d(a,f,null,u.onPush?32:16,h,l,v,v.createRenderer(h,u),null,null,null));a[l.index]=_}function Ig(a,l,u,h,f,v,_){if(null==v)a.removeAttribute(l,f,u);else{const x=null==_?Ce(v):_(v,h||"",f);a.setAttribute(l,f,x,u)}}function dC(a,l,u,h,f,v){const _=v[l];if(null!==_){const x=h.setInput;for(let T=0;T<_.length;){const E=_[T++],R=_[T++],U=_[T++];null!==x?h.setInput(u,U,E,R):u[R]=U}}}function fC(a,l){let u=null,h=0;for(;h<l.length;){const f=l[h];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,a[f],l[h+1])),h+=2}else h+=2;else h+=4}return u}function F6(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function vC(a,l){const u=mn(l,a);if(uo(u)){const h=u[1];48&u[2]?qd(h,u,h.template,u[8]):u[5]>0&&Sg(u)}}function Sg(a){for(let h=Vv(a);null!==h;h=ng(h))for(let f=10;f<h.length;f++){const v=h[f];if(uo(v))if(512&v[2]){const _=v[1];qd(_,v,_.template,v[8])}else v[5]>0&&Sg(v)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=mn(u[h],a);uo(f)&&f[5]>0&&Sg(f)}}function mC(a,l){const u=mn(l,a),h=u[1];(function wC(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),Ag(h,u,u[8])}function Kd(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function zg(a){for(;a;){a[2]|=32;const l=qu(a);if(Ko(a)&&!l)return a;a=l}return null}function Yd(a,l,u,h=!0){const f=l[10];f.begin&&f.begin();try{qd(a,l,a.template,u)}catch(_){throw h&&j6(l,_),_}finally{f.end&&f.end()}}function Ng(a,l,u){m0(0),l(a,u)}function B6(a){return a[7]||(a[7]=[])}function U6(a){return a.cleanup||(a.cleanup=[])}function j6(a,l){const u=a[9],h=u?u.get(a5,null):null;h&&h.handleError(l)}function kg(a,l,u,h,f){for(let v=0;v<u.length;){const _=u[v++],x=u[v++],T=l[_],E=a.data[_];null!==E.setInput?E.setInput(T,f,h,x):T[x]=f}}function Jd(a,l,u){let h=u?a.styles:null,f=u?a.classes:null,v=0;if(null!==l)for(let _=0;_<l.length;_++){const x=l[_];"number"==typeof x?v=x:1==v?f=Me(f,x):2==v&&(h=Me(h,x+": "+l[++_]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=f:a.classesWithoutHost=f}function Qd(a,l,u,h,f=!1){for(;null!==u;){const v=l[u.index];if(null!==v&&h.push(Mn(v)),Wi(v))for(let x=10;x<v.length;x++){const T=v[x],E=T[1].firstChild;null!==E&&Qd(T[1],T,E,h)}const _=u.type;if(8&_)Qd(a,l,u.child,h);else if(32&_){const x=$u(u,l);let T;for(;T=x();)h.push(T)}else if(16&_){const x=Kv(l,u);if(Array.isArray(x))h.push(...x);else{const T=qu(l[16]);Qd(T[1],T,x,h,!0)}}u=f?u.projectionNext:u.next}return h}class Ku{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Qd(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Wi(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(rg(l,h),bo(u,h))}this._attachedToViewContainer=!1}Hv(this._lView[1],this._lView)}onDestroy(l){z6(this._lView[1],this._lView,null,l)}markForCheck(){zg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Yd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ty(a,l){Wu(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=l}}class _C extends Ku{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Yd(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class Rg extends s5{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=O(l);return new Yu(u,this.ngModule)}}function G6(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class yC{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){const f=this.injector.get(l,Nd,h);return f!==Nd||u===Nd?f:this.parentInjector.get(l,u,h)}}class Yu extends Kf{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function by(a){return a.map(_y).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return G6(this.componentDef.inputs)}get outputs(){return G6(this.componentDef.outputs)}create(l,u,h,f){let v=(f=f||this.ngModule)instanceof x1?f:f?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const _=v?new yC(l,v):l,x=_.get(Yf,null);if(null===x)throw new Ie(407,!1);const T=_.get(Lb,null),E=x.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",U=h?function eC(a,l,u){return a.selectRootElement(l,u===Mt.ShadowDom)}(E,h,this.componentDef.encapsulation):ig(x.createRenderer(null,this.componentDef),R,function bC(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(R)),K=this.componentDef.onPush?288:272,re=Tg(0,null,null,1,0,null,null,null,null,null),Te=$d(null,re,null,K,null,null,x,E,T,_,null);let je,et;ia(Te);try{const wt=function xC(a,l,u,h,f,v){const _=u[1];u[22]=a;const T=f5(_,22,2,"#host",null),E=T.mergedAttrs=l.hostAttrs;null!==E&&(Jd(T,E,!0),null!==a&&(aa(f,a,E),null!==T.classes&&lg(f,a,T.classes),null!==T.styles&&Qv(f,a,T.styles)));const R=h.createRenderer(a,l),U=$d(u,S6(l),null,l.onPush?32:16,u[22],T,h,R,v||null,null,null);return _.firstCreatePass&&(k0(ua(T,u),_,l.type),O6(_,T),P6(T,u.length,1)),Kd(u,U),u[22]=U}(U,this.componentDef,Te,x,E);if(U)if(h)aa(E,U,["ng-version",Mv.full]);else{const{attrs:It,classes:Oe}=function yy(a){const l=[],u=[];let h=1,f=2;for(;h<a.length;){let v=a[h];if("string"==typeof v)2===f?""!==v&&l.push(v,a[++h]):8===f&&u.push(v);else{if(!Gs(f))break;f=v}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);It&&aa(E,U,It),Oe&&Oe.length>0&&lg(E,U,Oe.join(" "))}if(et=l1(re,22),void 0!==u){const It=et.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Lt=u[Oe];It.push(null!=Lt?Array.from(Lt):null)}}je=function AC(a,l,u,h){const f=u[1],v=function rC(a,l,u){const h=Wn();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),H6(a,h,l,g5(a,l,1,null),u),k6(a,h));const f=cs(l,a,h.directiveStart,h);fr(f,l);const v=Sr(h,l);return v&&fr(v,l),f}(f,u,l);if(a[8]=u[8]=v,null!==h)for(const x of h)x(v,l);if(l.contentQueries){const x=Wn();l.contentQueries(1,v,x.directiveStart)}const _=Wn();return!f.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ts(_.index),V6(u[1],_,0,_.directiveStart,_.directiveEnd,l),L6(l,v)),v}(wt,this.componentDef,Te,[DC]),Ag(re,Te,null)}finally{N0()}return new MC(this.componentType,je,o5(et,Te),Te,et)}}class MC extends class _v{}{constructor(l,u,h,f,v){super(),this.location=h,this._rootLView=f,this._tNode=v,this.instance=u,this.hostView=this.changeDetectorRef=new _C(f),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[l])){const v=this._rootLView;kg(v[1],v,f,l,u),R6(v,this._tNode.index)}}get injector(){return new w1(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function DC(){const a=Wn();zs(Re()[1],a)}function Vg(a){let l=function $6(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let f;if(Ir(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Ie(903,!1);f=l.\u0275dir}if(f){if(u){h.push(f);const _=a;_.inputs=Lg(a.inputs),_.declaredInputs=Lg(a.declaredInputs),_.outputs=Lg(a.outputs);const x=f.hostBindings;x&&SC(a,x);const T=f.viewQuery,E=f.contentQueries;if(T&&EC(a,T),E&&IC(a,E),ve(a.inputs,f.inputs),ve(a.declaredInputs,f.declaredInputs),ve(a.outputs,f.outputs),Ir(f)&&f.data.animation){const R=a.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let _=0;_<v.length;_++){const x=v[_];x&&x.ngInherit&&x(a),x===Vg&&(u=!1)}}l=Object.getPrototypeOf(l)}!function TC(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const f=a[h];f.hostVars=l+=f.hostVars,f.hostAttrs=wo(f.hostAttrs,u=wo(u,f.hostAttrs))}}(h)}function Lg(a){return a===Qn?{}:a===Dt?[]:a}function EC(a,l){const u=a.viewQuery;a.viewQuery=u?(h,f)=>{l(h,f),u(h,f)}:l}function IC(a,l){const u=a.contentQueries;a.contentQueries=u?(h,f,v)=>{l(h,f,v),u(h,f,v)}:l}function SC(a,l){const u=a.hostBindings;a.hostBindings=u?(h,f)=>{l(h,f),u(h,f)}:l}let Xd=null;function Kl(){if(!Xd){const a=Wt.Symbol;if(a&&a.iterator)Xd=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Xd=h)}}}return Xd}function Ju(a){return!!Og(a)&&(Array.isArray(a)||!(a instanceof Map)&&Kl()in a)}function Og(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function zo(a,l,u){return a[l]=u}function Fr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Yl(a,l,u,h){const f=Fr(a,l,u);return Fr(a,l+1,h)||f}function Pg(a,l,u,h){const f=Re();return Fr(f,Is(),l)&&($t(),function So(a,l,u,h,f,v){const _=Sr(a,l);Ig(l[11],_,v,a.value,u,h,f)}(xn(),f,a,l,u,h)),Pg}function v5(a,l,u,h){return Fr(a,Is(),u)?l+Ce(u)+h:Bt}function nm(a,l,u,h,f,v,_,x){const T=Re(),E=$t(),R=a+22,U=E.firstCreatePass?function PC(a,l,u,h,f,v,_,x,T){const E=l.consts,R=f5(l,a,4,_||null,zr(E,x));Eg(l,u,R,zr(E,T)),zs(l,R);const U=R.tViews=Tg(2,R,h,f,v,l.directiveRegistry,l.pipeRegistry,null,l.schemas,E);return null!==l.queries&&(l.queries.template(l,R),U.queries=l.queries.embeddedTView(R)),R}(R,E,T,l,u,h,f,v,_):E.data[R];Nr(U,!1);const K=T[11].createComment("");Fd(E,T,K,U),fr(K,T),Kd(T,T[R]=F6(K,T,K,U)),Wo(U)&&Dg(E,T,U),null!=_&&Wd(T,U,x)}function im(a){return t0(function ll(){return Vt.lFrame.contextLView}(),22+a)}function Hg(a,l,u){const h=Re();return Fr(h,Is(),l)&&U0($t(),xn(),h,a,l,h[11],u,!1),Hg}function Fg(a,l,u,h,f){const _=f?"class":"style";kg(a,u,l.inputs[_],_,h)}function t2(a,l,u,h){const f=Re(),v=$t(),_=22+a,x=f[11],T=f[_]=ig(x,l,function go(){return Vt.lFrame.currentNamespace}()),E=v.firstCreatePass?function FC(a,l,u,h,f,v,_){const x=l.consts,E=f5(l,a,2,f,zr(x,v));return Eg(l,u,E,zr(x,_)),null!==E.attrs&&Jd(E,E.attrs,!1),null!==E.mergedAttrs&&Jd(E,E.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,E),E}(_,v,f,0,l,u,h):v.data[_];Nr(E,!0);const R=E.mergedAttrs;null!==R&&aa(x,T,R);const U=E.classes;null!==U&&lg(x,T,U);const K=E.styles;return null!==K&&Qv(x,T,K),64!=(64&E.flags)&&Fd(v,f,T,E),0===function u1(){return Vt.lFrame.elementDepthCount}()&&fr(T,f),function Nc(){Vt.lFrame.elementDepthCount++}(),Wo(E)&&(Dg(v,f,E),function I6(a,l,u){if(qo(l)){const f=l.directiveEnd;for(let v=l.directiveStart;v<f;v++){const _=a.data[v];_.contentQueries&&_.contentQueries(1,u[v],v)}}}(v,E,f)),null!==h&&Wd(f,E),t2}function n2(){let a=Wn();d1()?f1():(a=a.parent,Nr(a,!1));const l=a;!function yu(){Vt.lFrame.elementDepthCount--}();const u=$t();return u.firstCreatePass&&(zs(u,a),qo(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function mo(a){return 0!=(16&a.flags)}(l)&&Fg(u,l,Re(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Fc(a){return 0!=(32&a.flags)}(l)&&Fg(u,l,Re(),l.stylesWithoutHost,!1),n2}function Bg(a,l,u,h){return t2(a,l,u,h),n2(),Bg}function sm(){return Re()}function jg(a){return!!a&&"function"==typeof a.then}function om(a){return!!a&&"function"==typeof a.subscribe}const am=om;function Gg(a,l,u,h){const f=Re(),v=$t(),_=Wn();return function cm(a,l,u,h,f,v,_,x){const T=Wo(h),R=a.firstCreatePass&&U6(a),U=l[8],K=B6(l);let re=!0;if(3&h.type||x){const et=Sr(h,l),wt=x?x(et):et,It=K.length,Oe=x?An=>x(Mn(An[h.index])):h.index;let Lt=null;if(!x&&T&&(Lt=function UC(a,l,u,h){const f=a.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const _=f[v];if(_===u&&f[v+1]===h){const x=l[7],T=f[v+2];return x.length>T?x[T]:null}"string"==typeof _&&(v+=2)}return null}(a,l,f,h.index)),null!==Lt)(Lt.__ngLastListenerFn__||Lt).__ngNextListenerFn__=v,Lt.__ngLastListenerFn__=v,re=!1;else{v=hm(h,l,U,v,!1);const An=u.listen(wt,f,v);K.push(v,An),R&&R.push(f,Oe,It,It+1)}}else v=hm(h,l,U,v,!1);const Te=h.outputs;let je;if(re&&null!==Te&&(je=Te[f])){const et=je.length;if(et)for(let wt=0;wt<et;wt+=2){const ii=l[je[wt]][je[wt+1]].subscribe(v),Xl=K.length;K.push(v,ii),R&&R.push(f,h.index,Xl,-(Xl+1))}}}(v,f,f[11],_,a,l,0,h),Gg}function um(a,l,u,h){try{return!1!==u(h)}catch(f){return j6(a,f),!1}}function hm(a,l,u,h,f){return function v(_){if(_===Function)return h;zg(2&a.flags?mn(a.index,l):l);let T=um(l,0,h,_),E=v.__ngNextListenerFn__;for(;E;)T=um(l,0,E,_)&&T,E=E.__ngNextListenerFn__;return f&&!1===T&&(_.preventDefault(),_.returnValue=!1),T}}function dm(a=1){return function Ss(a){return(Vt.lFrame.contextLView=function Cu(a,l){for(;a>0;)l=l[15],a--;return l}(a,Vt.lFrame.contextLView))[8]}(a)}function ZC(a,l){let u=null;const h=function py(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let f=0;f<l.length;f++){const v=l[f];if("*"!==v){if(null===h?n6(a,v,!0):wy(h,v))return f}else u=f}return u}function fm(a){const l=Re()[16][6];if(!l.projection){const h=l.projection=lr(a?a.length:1,null),f=h.slice();let v=l.child;for(;null!==v;){const _=a?ZC(v,a):0;null!==_&&(f[_]?f[_].projectionNext=v:h[_]=v,f[_]=v),v=v.next}}}function gm(a,l=0,u){const h=Re(),f=$t(),v=f5(f,22+a,16,null,u||null);null===v.projection&&(v.projection=l),f1(),64!=(64&v.flags)&&function ly(a,l,u){Jv(l[11],0,l,u,Fv(a,u,l),Gv(u.parent||l[6],u,l))}(f,h,v)}function $g(a,l,u){return r2(a,"",l,"",u),$g}function r2(a,l,u,h,f){const v=Re(),_=v5(v,l,u,h);return _!==Bt&&U0($t(),xn(),v,a,_,v[11],f,!1),r2}function Mm(a,l,u,h,f){const v=a[u+1],_=null===l;let x=h?$s(v):Oa(v),T=!1;for(;0!==x&&(!1===T||_);){const R=a[x+1];$C(a[x],l)&&(T=!0,a[x+1]=h?vg(R):gg(R)),x=h?$s(R):Oa(R)}T&&(a[u+1]=h?gg(v):vg(v))}function $C(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&V0(a,l)>=0}const Xi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xm(a){return a.substring(Xi.key,Xi.keyEnd)}function Am(a,l){const u=Xi.textEnd;return u===l?-1:(l=Xi.keyEnd=function YC(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,Xi.key=l,u),x5(a,l,u))}function x5(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function qg(a,l,u){return qs(a,l,u,!1),qg}function Wg(a,l){return qs(a,l,null,!0),Wg}function Sm(a){!function Ws(a,l,u,h){const f=$t(),v=kr(2);f.firstUpdatePass&&Nm(f,null,v,h);const _=Re();if(u!==Bt&&Fr(_,v,u)){const x=f.data[Yt()];if(Lm(x,h)&&!zm(f,v)){let T=h?x.classesWithoutHost:x.stylesWithoutHost;null!==T&&(u=Me(T,u||"")),Fg(f,x,_,u,h)}else!function sM(a,l,u,h,f,v,_,x){f===Bt&&(f=Dt);let T=0,E=0,R=0<f.length?f[0]:null,U=0<v.length?v[0]:null;for(;null!==R||null!==U;){const K=T<f.length?f[T+1]:void 0,re=E<v.length?v[E+1]:void 0;let je,Te=null;R===U?(T+=2,E+=2,K!==re&&(Te=U,je=re)):null===U||null!==R&&R<U?(T+=2,Te=R):(E+=2,Te=U,je=re),null!==Te&&Rm(a,l,u,h,Te,je,_,x),R=T<f.length?f[T]:null,U=E<v.length?v[E]:null}}(f,x,_,_[11],_[v+1],_[v+1]=function rM(a,l,u){if(null==u||""===u)return Dt;const h=[],f=D(u);if(Array.isArray(f))for(let v=0;v<f.length;v++)a(h,f[v],!0);else if("object"==typeof f)for(const v in f)f.hasOwnProperty(v)&&a(h,v,f[v]);else"string"==typeof f&&l(h,f);return h}(a,l,u),h,v)}}(cr,ko,a,!0)}function ko(a,l){for(let u=function WC(a){return function Tm(a){Xi.key=0,Xi.keyEnd=0,Xi.value=0,Xi.valueEnd=0,Xi.textEnd=a.length}(a),Am(a,x5(a,0,Xi.textEnd))}(l);u>=0;u=Am(l,u))cr(a,xm(l),!0)}function qs(a,l,u,h){const f=Re(),v=$t(),_=kr(2);v.firstUpdatePass&&Nm(v,a,_,h),l!==Bt&&Fr(f,_,l)&&Rm(v,v.data[Yt()],f,f[11],a,f[_+1]=function oM(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=_e(D(a)))),a}(l,u),h,_)}function zm(a,l){return l>=a.expandoStartIndex}function Nm(a,l,u,h){const f=a.data;if(null===f[u+1]){const v=f[Yt()],_=zm(a,u);Lm(v,h)&&null===l&&!_&&(l=!1),l=function eM(a,l,u,h){const f=function cl(a){const l=Vt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let v=h?l.residualClasses:l.residualStyles;if(null===f)0===(h?l.classBindings:l.styleBindings)&&(u=Xu(u=Kg(null,a,l,u,h),l.attrs,h),v=null);else{const _=l.directiveStylingLast;if(-1===_||a[_]!==f)if(u=Kg(f,a,l,u,h),null===v){let T=function tM(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==Oa(h))return a[$s(h)]}(a,l,h);void 0!==T&&Array.isArray(T)&&(T=Kg(null,a,l,T[1],h),T=Xu(T,l.attrs,h),function nM(a,l,u,h){a[$s(u?l.classBindings:l.styleBindings)]=h}(a,l,h,T))}else v=function iM(a,l,u){let h;const f=l.directiveEnd;for(let v=1+l.directiveStylingLast;v<f;v++)h=Xu(h,a[v].hostAttrs,u);return Xu(h,l.attrs,u)}(a,l,h)}return void 0!==v&&(h?l.residualClasses=v:l.residualStyles=v),u}(f,v,l,h),function jC(a,l,u,h,f,v){let _=v?l.classBindings:l.styleBindings,x=$s(_),T=Oa(_);a[h]=u;let R,E=!1;if(Array.isArray(u)){const U=u;R=U[1],(null===R||V0(U,R)>0)&&(E=!0)}else R=u;if(f)if(0!==T){const K=$s(a[x+1]);a[h+1]=Zd(K,x),0!==K&&(a[K+1]=pg(a[K+1],h)),a[x+1]=function Fy(a,l){return 131071&a|l<<17}(a[x+1],h)}else a[h+1]=Zd(x,0),0!==x&&(a[x+1]=pg(a[x+1],h)),x=h;else a[h+1]=Zd(T,0),0===x?x=h:a[T+1]=pg(a[T+1],h),T=h;E&&(a[h+1]=gg(a[h+1])),Mm(a,R,h,!0),Mm(a,R,h,!1),function GC(a,l,u,h,f){const v=f?a.residualClasses:a.residualStyles;null!=v&&"string"==typeof l&&V0(v,l)>=0&&(u[h+1]=vg(u[h+1]))}(l,R,a,h,v),_=Zd(x,T),v?l.classBindings=_:l.styleBindings=_}(f,v,l,u,_,h)}}function Kg(a,l,u,h,f){let v=null;const _=u.directiveEnd;let x=u.directiveStylingLast;for(-1===x?x=u.directiveStart:x++;x<_&&(v=l[x],h=Xu(h,v.hostAttrs,f),v!==a);)x++;return null!==a&&(u.directiveStylingLast=x),h}function Xu(a,l,u){const h=u?1:2;let f=-1;if(null!==l)for(let v=0;v<l.length;v++){const _=l[v];"number"==typeof _?f=_:f===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),cr(a,_,!!u||l[++v]))}return void 0===a?null:a}function Rm(a,l,u,h,f,v,_,x){if(!(3&l.type))return;const T=a.data,E=T[x+1];s2(function _6(a){return 1==(1&a)}(E)?Vm(T,l,u,f,Oa(E),_):void 0)||(s2(v)||function w6(a){return 2==(2&a)}(E)&&(v=Vm(T,null,u,f,x,_)),function uy(a,l,u,h,f){if(l)f?a.addClass(u,h):a.removeClass(u,h);else{let v=-1===h.indexOf("-")?void 0:js.DashCase;null==f?a.removeStyle(u,h,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=js.Important),a.setStyle(u,h,f,v))}}(h,_,Ds(Yt(),u),f,v))}function Vm(a,l,u,h,f,v){const _=null===l;let x;for(;f>0;){const T=a[f],E=Array.isArray(T),R=E?T[1]:T,U=null===R;let K=u[f+1];K===Bt&&(K=U?Dt:void 0);let re=U?ma(K,h):R===h?K:void 0;if(E&&!s2(re)&&(re=ma(T,h)),s2(re)&&(x=re,_))return x;const Te=a[f+1];f=_?$s(Te):Oa(Te)}if(null!==l){let T=v?l.residualClasses:l.residualStyles;null!=T&&(x=ma(T,h))}return x}function s2(a){return void 0!==a}function Lm(a,l){return 0!=(a.flags&(l?16:32))}function Om(a,l=""){const u=Re(),h=$t(),f=a+22,v=h.firstCreatePass?f5(h,f,1,l,null):h.data[f],_=u[f]=Od(u[11],l);Fd(h,u,_,v),Nr(v,!1)}function Yg(a){return o2("",a,""),Yg}function o2(a,l,u){const h=Re(),f=v5(h,a,l,u);return f!==Bt&&function Pa(a,l,u){const h=Ds(l,a);Lv(a[11],h,u)}(h,Yt(),f),o2}function Jg(a,l,u){const h=Re();return Fr(h,Is(),l)&&U0($t(),xn(),h,a,l,h[11],u,!0),Jg}const Jl=void 0;var DM=["en",[["a","p"],["AM","PM"],Jl],[["AM","PM"],Jl,Jl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jl,"{1} 'at' {0}",Jl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AM(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let A5={};function Qg(a){const l=function TM(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=i8(l);if(u)return u;const h=l.split("-")[0];if(u=i8(h),u)return u;if("en"===h)return DM;throw new Ie(701,!1)}function n8(a){return Qg(a)[Rt.PluralCase]}function i8(a){return a in A5||(A5[a]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[a]),A5[a]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const EM=["zero","one","two","few","many"],D5="en-US",a2={marker:"element"},l2={marker:"ICU"};var xi=(()=>((xi=xi||{})[xi.SHIFT=2]="SHIFT",xi[xi.APPEND_EAGERLY=1]="APPEND_EAGERLY",xi[xi.COMMENT=2]="COMMENT",xi))();let r8=D5;function s8(a){(function dn(a,l){null==a&&nt(l,a,null,"!=")})(a,"Expected localeId to be defined"),"string"==typeof a&&(r8=a.toLowerCase().replace(/_/g,"-"))}function o8(a,l,u){const h=l.insertBeforeIndex,f=Array.isArray(h)?h[0]:h;return null===f?$v(a,0,u):Mn(u[f])}function a8(a,l,u,h,f){const v=l.insertBeforeIndex;if(Array.isArray(v)){let _=h,x=null;if(3&l.type||(x=_,_=f),null!==_&&0==(2&l.flags))for(let T=1;T<v.length;T++)ql(a,_,u[v[T]],x,!1)}}function l8(a,l){if(a.push(l),a.length>1)for(let u=a.length-2;u>=0;u--){const h=a[u];c8(h)||NM(h,l)&&null===kM(h)&&RM(h,l.index)}}function c8(a){return!(64&a.type)}function NM(a,l){return c8(l)||a.index>l.index}function kM(a){const l=a.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function RM(a,l){const u=a.insertBeforeIndex;Array.isArray(u)?u[0]=l:(Wv(o8,a8),a.insertBeforeIndex=l)}function eh(a,l){const u=a.data[l];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function OM(a,l,u){const h=xg(a,u,64,null,null);return l8(l,h),h}function c2(a,l){const u=l[a.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function u8(a){return a>>>17}function h8(a){return(131070&a)>>>1}let th=0,nh=0;function f8(a,l,u,h){const f=u[11];let _,v=null;for(let x=0;x<l.length;x++){const T=l[x];if("string"==typeof T){const E=l[++x];null===u[E]&&(u[E]=Od(f,T))}else if("number"==typeof T)switch(1&T){case 0:const E=u8(T);let R,U;if(null===v&&(v=E,_=Hd(f,h)),E===v?(R=h,U=_):(R=null,U=Mn(u[E])),null!==U){const je=h8(T);ql(f,U,u[je],R,!1);const wt=eh(a,je);if(null!==wt&&"object"==typeof wt){const It=c2(wt,u);null!==It&&f8(a,wt.create[It],u,u[wt.anchorIdx])}}break;case 1:const re=l[++x],Te=l[++x];Ig(f,Ds(T>>>1,u),null,null,re,Te,null)}else switch(T){case l2:const E=l[++x],R=l[++x];null===u[R]&&fr(u[R]=Xb(f,E),u);break;case a2:const U=l[++x],K=l[++x];null===u[K]&&fr(u[K]=ig(f,U,null),u)}}}function g8(a,l,u,h,f){for(let v=0;v<u.length;v++){const _=u[v],x=u[++v];if(_&f){let T="";for(let E=v+1;E<=v+x;E++){const R=u[E];if("string"==typeof R)T+=R;else if("number"==typeof R)if(R<0)T+=Ce(l[h-R]);else{const U=R>>>2;switch(3&R){case 1:const K=u[++E],re=u[++E],Te=a.data[U];"string"==typeof Te?Ig(l[11],l[U],null,Te,K,T,re):U0(a,Te,l,K,T,l[11],re,!1);break;case 0:const je=l[U];null!==je&&Lv(l[11],je,T);break;case 2:UM(a,eh(a,U),l,T);break;case 3:p8(a,eh(a,U),h,l)}}}}else{const T=u[v+1];if(T>0&&3==(3&T)){const R=eh(a,T>>>2);l[R.currentCaseLViewIndex]<0&&p8(a,R,h,l)}}v+=x}}function p8(a,l,u,h){let f=h[l.currentCaseLViewIndex];if(null!==f){let v=th;f<0&&(f=h[l.currentCaseLViewIndex]=~f,v=-1),g8(a,h,l.update[f],u,v)}}function UM(a,l,u,h){const f=function ZM(a,l){let u=a.cases.indexOf(l);if(-1===u)switch(a.type){case 1:{const h=function IM(a,l){const u=n8(l)(parseInt(a,10)),h=EM[u];return void 0!==h?h:"other"}(l,function zM(){return r8}());u=a.cases.indexOf(h),-1===u&&"other"!==h&&(u=a.cases.indexOf("other"));break}case 0:u=a.cases.indexOf("other")}return-1===u?null:u}(l,h);if(c2(l,u)!==f&&(v8(a,l,u),u[l.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const _=u[l.anchorIdx];_&&f8(a,l.create[f],u,_)}}function v8(a,l,u){let h=c2(l,u);if(null!==h){const f=l.remove[h];for(let v=0;v<f.length;v++){const _=f[v];if(_>0){const x=Ds(_,u);null!==x&&Yv(u[11],x)}else v8(a,eh(a,~_),u)}}}function jM(){const a=[];let u,h,l=-1;function v(x,T){l=0;const E=c2(x,T);h=null!==E?x.remove[E]:Dt}function _(){if(l<h.length){const x=h[l++];return x>0?u[x]:(a.push(l,h),v(u[1].data[~x],u),_())}return 0===a.length?null:(h=a.pop(),l=a.pop(),_())}return function f(x,T){for(u=T;a.length;)a.pop();return v(x.value,T),_}}const u2=/\ufffd(\d+):?\d*\ufffd/gi,$M=/\ufffd(\d+)\ufffd/,w8=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,qM=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,WM=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,KM=/\uE500/g;function _8(a,l,u,h,f,v,_){const x=g5(a,h,1,null);let T=x<<xi.SHIFT,E=Es();l===E&&(E=null),null===E&&(T|=xi.APPEND_EAGERLY),_&&(T|=xi.COMMENT,function Yb(a){void 0===tg&&(tg=a())}(jM)),f.push(T,null===v?"":v);const R=xg(a,x,_?32:1,null===v?"":v,null);l8(u,R);const U=R.index;return Nr(R,!1),null!==E&&l!==E&&function LM(a,l){let u=a.insertBeforeIndex;null===u?(Wv(o8,a8),u=a.insertBeforeIndex=[null,l]):(function Je(a,l,u){a!=l&&nt(u,a,l,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(l))}(E,U),R}function QM(a,l,u,h,f,v,_){const x=_.match(u2),T=_8(a,l,u,v,h,x?null:_,!1);x&&rh(f,_,T.index,null,0,null)}function rh(a,l,u,h,f,v){const _=a.length,x=_+1;a.push(null,null);const T=_+2,E=l.split(u2);let R=0;for(let U=0;U<E.length;U++){const K=E[U];if(1&U){const re=f+parseInt(K,10);a.push(-1-re),R|=b8(re)}else""!==K&&a.push(K)}return a.push(u<<2|(h?1:0)),h&&a.push(h,v),a[_]=R,a[x]=a.length-T,R}function b8(a){return 1<<Math.min(a,31)}function y8(a){let l,v,u="",h=0,f=!1;for(;null!==(l=qM.exec(a));)f?l[0]===`\ufffd/*${v}\ufffd`&&(h=l.index,f=!1):(u+=a.substring(h,l.index+l[0].length),v=l[1],f=!0);return u+=a.slice(h),u}function C8(a,l,u,h,f,v){let _=0;const x={type:f.type,currentCaseLViewIndex:g5(a,l,1,null),anchorIdx:v,cases:[],create:[],remove:[],update:[]};(function ox(a,l,u){a.push(b8(l.mainBinding),2,-1-l.mainBinding,u<<2|2)})(u,f,v),function VM(a,l,u){const h=a.data[l];null===h?a.data[l]=u:h.value=u}(a,v,x);const T=f.values;for(let E=0;E<T.length;E++){const R=T[E],U=[];for(let K=0;K<R.length;K++){const re=R[K];if("string"!=typeof re){const Te=U.push(re)-1;R[K]=`\x3c!--\ufffd${Te}\ufffd--\x3e`}}_=rx(a,x,l,u,h,f.cases[E],R.join(""),U)|_}_&&function ax(a,l,u){a.push(l,1,u<<2|3)}(u,_,v)}function ix(a){const l=[],u=[];let h=1,f=0;const v=Xg(a=a.replace(w8,function(_,x,T){return h="select"===T?0:1,f=parseInt(x.slice(1),10),""}));for(let _=0;_<v.length;){let x=v[_++].trim();1===h&&(x=x.replace(/\s*(?:=)?(\w+)\s*/,"$1")),x.length&&l.push(x);const T=Xg(v[_++]);l.length>u.length&&u.push(T)}return{type:h,mainBinding:f,cases:l,values:u}}function Xg(a){if(!a)return[];let l=0;const u=[],h=[],f=/[{}]/g;let v;for(f.lastIndex=0;v=f.exec(a);){const x=v.index;if("}"==v[0]){if(u.pop(),0==u.length){const T=a.substring(l,x);w8.test(T)?h.push(ix(T)):h.push(T),l=x+1}}else{if(0==u.length){const T=a.substring(l,x);h.push(T),l=x+1}u.push("{")}}const _=a.substring(l);return h.push(_),h}function rx(a,l,u,h,f,v,_,x){const T=[],E=[],R=[];l.cases.push(v),l.create.push(T),l.remove.push(E),l.update.push(R);const K=function dt(a){const l=new kt(a);return function hr(){try{return!!(new window.DOMParser).parseFromString(O0(""),"text/html")}catch{return!1}}()?new zt(l):l}(function Cd(){return void 0!==Na?Na:typeof document<"u"?document:void 0}()).getInertBodyElement(_),re=function b(a){return"content"in a&&function p(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}(K)||K;return re?M8(a,l,u,h,T,E,R,re,f,x,0):0}function M8(a,l,u,h,f,v,_,x,T,E,R){let U=0,K=x.firstChild;for(;K;){const re=g5(a,u,1,null);switch(K.nodeType){case Node.ELEMENT_NODE:const Te=K,je=Te.tagName.toLowerCase();if(Hl.hasOwnProperty(je)){ep(f,a2,je,T,re),a.data[re]=je;const Oe=Te.attributes;for(let Lt=0;Lt<Oe.length;Lt++){const An=Oe.item(Lt),ii=An.name.toLowerCase();An.value.match(u2)?Ou.hasOwnProperty(ii)&&rh(_,An.value,re,An.name,0,Fl[ii]?P0:null):lx(f,re,An)}U=M8(a,l,u,h,f,v,_,K,re,E,R+1)|U,x8(v,re,R)}break;case Node.TEXT_NODE:const et=K.textContent||"",wt=et.match(u2);ep(f,null,wt?"":et,T,re),x8(v,re,R),wt&&(U=rh(_,et,re,null,0,null)|U);break;case Node.COMMENT_NODE:const It=$M.exec(K.textContent||"");if(It){const Lt=E[parseInt(It[1],10)];ep(f,l2,"",T,re),C8(a,u,h,T,Lt,re),sx(v,re,R)}}K=K.nextSibling}return U}function x8(a,l,u){0===u&&a.push(l)}function sx(a,l,u){0===u&&(a.push(~l),a.push(l))}function ep(a,l,u,h,f){null!==l&&a.push(l),a.push(u,f,function PM(a,l,u){return a|l<<17|u<<1}(0,h,f))}function lx(a,l,u){a.push(l<<1|1,u.name,u.value)}function D8(a,l,u=-1){const h=$t(),f=Re(),v=22+a,_=zr(h.consts,l),x=Es();h.firstCreatePass&&function JM(a,l,u,h,f,v){const _=Es(),x=[],T=[],E=[[]];f=function nx(a,l){if(function tx(a){return-1===a}(l))return y8(a);{const u=a.indexOf(`:${l}\ufffd`)+2+l.toString().length,h=a.search(new RegExp(`\ufffd\\/\\*\\d+:${l}\ufffd`));return y8(a.substring(u,h))}}(f,v);const R=function YM(a){return a.replace(KM," ")}(f).split(WM);for(let U=0;U<R.length;U++){let K=R[U];if(0==(1&U)){const re=Xg(K);for(let Te=0;Te<re.length;Te++){let je=re[Te];if(0==(1&Te)){const et=je;""!==et&&QM(a,_,E[0],x,T,u,et)}else{const et=je;if("object"!=typeof et)throw new Error(`Unable to parse ICU expression in "${f}" message.`);C8(a,u,T,l,et,_8(a,_,E[0],u,x,"",!0).index)}}}else{const re=47===K.charCodeAt(0),je=(K.charCodeAt(re?1:0),22+Number.parseInt(K.substring(re?2:1)));if(re)E.shift(),Nr(Es(),!1);else{const et=OM(a,E[0],je);E.unshift([]),Nr(et,!0)}}}a.data[h]={create:x,update:T}}(h,null===x?0:x.index,f,v,_,u);const T=h.data[v],R=Bv(h,x===f[6]?null:x,f);(function BM(a,l,u,h){const f=a[11];for(let v=0;v<l.length;v++){const _=l[v++],x=l[v],T=(_&xi.COMMENT)===xi.COMMENT,E=(_&xi.APPEND_EAGERLY)===xi.APPEND_EAGERLY,R=_>>>xi.SHIFT;let U=a[R];null===U&&(U=a[R]=T?f.createComment(x):Od(f,x)),E&&null!==u&&ql(f,u,U,h,!1)}})(f,T.create,R,x&&8&x.type?f[x.index]:null),Rc(!0)}function E8(a,l,u){D8(a,l,u),function T8(){Rc(!1)}()}function tp(a){return function HM(a){a&&(th|=1<<Math.min(nh,31)),nh++}(Fr(Re(),Is(),a)),tp}function I8(a){!function FM(a,l,u){if(nh>0){const h=a.data[u];g8(a,l,Array.isArray(h)?h:h.update,function Ni(){return Vt.lFrame.bindingIndex}()-nh-1,th)}th=0,nh=0}($t(),Re(),a+22)}function np(a,l,u,h,f){if(a=ee(a),Array.isArray(a))for(let v=0;v<a.length;v++)np(a[v],l,u,h,f);else{const v=$t(),_=Re();let x=Va(a)?a:ee(a.provide),T=qf(a);const E=Wn(),R=1048575&E.providerIndexes,U=E.directiveStart,K=E.providerIndexes>>20;if(Va(a)||!a.multi){const re=new ss(T,f,d5),Te=rp(x,l,f?R:R+K,U);-1===Te?(k0(ua(E,_),v,x),ip(v,a,l.length),l.push(x),E.directiveStart++,E.directiveEnd++,f&&(E.providerIndexes+=1048576),u.push(re),_.push(re)):(u[Te]=re,_[Te]=re)}else{const re=rp(x,l,R+K,U),Te=rp(x,l,R,R+K),je=re>=0&&u[re],et=Te>=0&&u[Te];if(f&&!et||!f&&!je){k0(ua(E,_),v,x);const wt=function Cx(a,l,u,h,f){const v=new ss(a,u,d5);return v.multi=[],v.index=l,v.componentProviders=0,S8(v,f,h&&!u),v}(f?yx:bx,u.length,f,h,T);!f&&et&&(u[Te].providerFactory=wt),ip(v,a,l.length,0),l.push(x),E.directiveStart++,E.directiveEnd++,f&&(E.providerIndexes+=1048576),u.push(wt),_.push(wt)}else ip(v,a,re>-1?re:Te,S8(u[f?Te:re],T,!f&&h));!f&&h&&et&&u[Te].componentProviders++}}}function ip(a,l,u,h){const f=Va(l),v=function Ib(a){return!!a.useClass}(l);if(f||v){const T=(v?ee(l.useClass):l).prototype.ngOnDestroy;if(T){const E=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const R=E.indexOf(u);-1===R?E.push(u,[h,T]):E[R+1].push(h,T)}else E.push(u,T)}}}function S8(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function rp(a,l,u,h){for(let f=u;f<h;f++)if(l[f]===a)return f;return-1}function bx(a,l,u,h){return sp(this.multi,[])}function yx(a,l,u,h){const f=this.multi;let v;if(this.providerFactory){const _=this.providerFactory.componentProviders,x=cs(u,u[1],this.providerFactory.index,h);v=x.slice(0,_),sp(f,v);for(let T=_;T<x.length;T++)v.push(x[T])}else v=[],sp(f,v);return v}function sp(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function z8(a,l=[]){return u=>{u.providersResolver=(h,f)=>function _x(a,l,u){const h=$t();if(h.firstCreatePass){const f=Ir(a);np(u,h.data,h.blueprint,f,!0),np(l,h.data,h.blueprint,f,!1)}}(h,f?f(a):a,l)}}class T5{}class N8{}function Mx(a,l){return new k8(a,l??null)}class k8 extends T5{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rg(this);const h=Ye(l);this._bootstrapComponents=D1(h.bootstrap),this._r3Injector=cg(l,u,[{provide:T5,useValue:this},{provide:s5,useValue:this.componentFactoryResolver}],_e(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class op extends N8{constructor(l){super(),this.moduleType=l}create(l){return new k8(this.moduleType,l)}}class xx extends T5{constructor(l,u,h){super(),this.componentFactoryResolver=new Rg(this),this.instance=null;const f=new mv([...l,{provide:T5,useValue:this},{provide:s5,useValue:this.componentFactoryResolver}],u||Ed(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function ap(a,l,u=null){return new xx(a,l,u).injector}let Ax=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=Fu(0,u.type),f=h.length>0?ap([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Xt({token:a,providedIn:"environment",factory:()=>new a(ni(x1))}),a})();function R8(a){a.getStandaloneInjector=l=>l.get(Ax).getOrCreateStandaloneInjector(a)}function B8(a,l,u,h){return function j8(a,l,u,h,f,v){const _=l+u;return Fr(a,_,f)?zo(a,_+1,v?h.call(v,f):h(f)):sh(a,_+1)}(Re(),Ci(),a,l,u,h)}function U8(a,l,u,h,f){return function G8(a,l,u,h,f,v,_){const x=l+u;return Yl(a,x,f,v)?zo(a,x+2,_?h.call(_,f,v):h(f,v)):sh(a,x+2)}(Re(),Ci(),a,l,u,h,f)}function Z8(a,l,u,h,f,v){return $8(Re(),Ci(),a,l,u,h,f,v)}function sh(a,l){const u=a[l];return u===Bt?void 0:u}function $8(a,l,u,h,f,v,_,x){const T=l+u;return function e2(a,l,u,h,f){const v=Yl(a,l,u,h);return Fr(a,l+2,f)||v}(a,T,f,v,_)?zo(a,T+3,x?h.call(x,f,v,_):h(f,v,_)):sh(a,T+3)}function K8(a,l){const u=$t();let h;const f=a+22;u.firstCreatePass?(h=function Bx(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const v=h.factory||(h.factory=As(h.type)),_=$n(d5);try{const x=Vr(!1),T=v();return Vr(x),function HC(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,Re(),f,T),T}finally{$n(_)}}function Y8(a,l,u,h,f){const v=a+22,_=Re(),x=t0(_,v);return function oh(a,l){return a[1].data[l].pure}(_,v)?$8(_,Ci(),l,x.transform,u,h,f,x):x.transform(u,h,f)}function cp(a){return l=>{setTimeout(a,void 0,l)}}const Ro=class $x extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let f=l,v=u||(()=>null),_=h;if(l&&"object"==typeof l){const T=l;f=T.next?.bind(T),v=T.error?.bind(T),_=T.complete?.bind(T)}this.__isAsync&&(v=cp(v),f&&(f=cp(f)),_&&(_=cp(_)));const x=super.subscribe({next:f,error:v,complete:_});return l instanceof j.w0&&l.add(x),x}};function qx(){return this._results[Kl()]()}class up{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Kl(),h=up.prototype;h[u]||(h[u]=qx)}get changes(){return this._changes||(this._changes=new Ro)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const f=Yi(l);(this._changesDetected=!function b1(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let f=a[h],v=l[h];if(u&&(f=u(f),v=u(v)),v!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ah=(()=>{class a{}return a.__NG_ELEMENT_ID__=Yx,a})();const Wx=ah,Kx=class extends Wx{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tViews,f=$d(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(f[19]=_.createEmbeddedView(h)),Ag(h,f,l),new Ku(f)}};function Yx(){return h2(Wn(),Re())}function h2(a,l){return 4&a.type?new Kx(l,a,o5(a,l)):null}let d2=(()=>{class a{}return a.__NG_ELEMENT_ID__=Jx,a})();function Jx(){return X8(Wn(),Re())}const Qx=d2,J8=class extends Qx{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return o5(this._hostTNode,this._hostLView)}get injector(){return new w1(this._hostTNode,this._hostLView)}get parentInjector(){const l=da(this._hostTNode,this._hostLView);if(ml(l)){const u=ks(l,this._hostLView),h=la(l);return new w1(u[1].data[h+8],u)}return new w1(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Q8(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){let f,v;"number"==typeof h?f=h:null!=h&&(f=h.index,v=h.injector);const _=l.createEmbeddedView(u||{},v);return this.insert(_,f),_}createComponent(l,u,h,f,v){const _=l&&!function Rn(a){return"function"==typeof a}(l);let x;if(_)x=u;else{const U=u||{};x=U.index,h=U.injector,f=U.projectableNodes,v=U.environmentInjector||U.ngModuleRef}const T=_?l:new Yu(O(l)),E=h||this.parentInjector;if(!v&&null==T.ngModule){const K=(_?E:this.parentInjector).get(x1,null);K&&(v=K)}const R=T.create(E,f,void 0,v);return this.insert(R.hostView,x),R}insert(l,u){const h=l._lView,f=h[1];if(function c1(a){return Wi(a[3])}(h)){const R=this.indexOf(l);if(-1!==R)this.detach(R);else{const U=h[3],K=new J8(U,U[6],U[3]);K.detach(K.indexOf(l))}}const v=this._adjustIndex(u),_=this._lContainer;!function iy(a,l,u,h){const f=10+h,v=u.length;h>0&&(u[f-1][4]=l),h<v-10?(l[4]=u[f],va(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const _=l[17];null!==_&&u!==_&&function ry(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(_,l);const x=l[19];null!==x&&x.insertView(a),l[2]|=64}(f,h,_,v);const x=og(v,_),T=h[11],E=Hd(T,_[7]);return null!==E&&function ey(a,l,u,h,f,v){h[0]=f,h[6]=l,Wu(a,h,u,1,f,v)}(f,_[6],T,h,E,x),l.attachToViewContainerRef(),va(hp(_),v,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Q8(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=rg(this._lContainer,u);h&&(bo(hp(this._lContainer),u),Hv(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=rg(this._lContainer,u);return h&&null!=bo(hp(this._lContainer),u)?new Ku(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function Q8(a){return a[8]}function hp(a){return a[8]||(a[8]=[])}function X8(a,l){let u;const h=l[a.index];if(Wi(h))u=h;else{let f;if(8&a.type)f=Mn(h);else{const v=l[11];f=v.createComment("");const _=Sr(a,l);ql(v,Hd(v,_),f,function jv(a,l){return a.nextSibling(l)}(v,_),!1)}l[a.index]=u=F6(h,l,f,a),Kd(l,u)}return new J8(u,a,l)}class dp{constructor(l){this.queryList=l,this.matches=null}clone(){return new dp(this.queryList)}setDirty(){this.queryList.setDirty()}}class fp{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let v=0;v<h;v++){const _=u.getByIndex(v);f.push(this.queries[_.indexInDeclarationView].clone())}return new fp(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==l7(l,u).matches&&this.queries[u].setDirty()}}class e7{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class gp{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,v=this.getByIndex(h).embeddedTView(l,f);v&&(v.indexInDeclarationView=h,null!==u?u.push(v):u=[v])}return null!==u?new gp(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class pp{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new pp(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const v=h[f];this.matchTNodeWithReadOption(l,u,tA(u,v)),this.matchTNodeWithReadOption(l,u,fa(u,l,v,!1,!1))}else h===ah?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,fa(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===Gl||f===d2||f===ah&&4&u.type)this.addMatch(u.index,-2);else{const v=fa(u,l,f,!1,!1);null!==v&&this.addMatch(u.index,v)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function tA(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function iA(a,l,u,h){return-1===u?function nA(a,l){return 11&a.type?o5(a,l):4&a.type?h2(a,l):null}(l,a):-2===u?function rA(a,l,u){return u===Gl?o5(l,a):u===ah?h2(l,a):u===d2?X8(l,a):void 0}(a,l,h):cs(a,a[1],u,l)}function t7(a,l,u,h){const f=l[19].queries[h];if(null===f.matches){const v=a.data,_=u.matches,x=[];for(let T=0;T<_.length;T+=2){const E=_[T];x.push(E<0?null:iA(l,v[E],_[T+1],u.metadata.read))}f.matches=x}return f.matches}function vp(a,l,u,h){const f=a.queries.getByIndex(u),v=f.matches;if(null!==v){const _=t7(a,l,f,u);for(let x=0;x<v.length;x+=2){const T=v[x];if(T>0)h.push(_[x/2]);else{const E=v[x+1],R=l[-T];for(let U=10;U<R.length;U++){const K=R[U];K[17]===K[3]&&vp(K[1],K,E,h)}if(null!==R[9]){const U=R[9];for(let K=0;K<U.length;K++){const re=U[K];vp(re[1],re,E,h)}}}}}return h}function n7(a){const l=Re(),u=$t(),h=ul();m0(h+1);const f=l7(u,h);if(a.dirty&&function sl(a){return 4==(4&a[2])}(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const v=f.crossesNgTemplate?vp(u,l,h,[]):t7(u,l,f,h);a.reset(v,yv),a.notifyOnChanges()}return!0}return!1}function i7(a,l,u){const h=$t();h.firstCreatePass&&(a7(h,new e7(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),o7(h,Re(),l)}function r7(a,l,u,h){const f=$t();if(f.firstCreatePass){const v=Wn();a7(f,new e7(l,u,h),v.index),function oA(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}o7(f,Re(),u)}function s7(){return function sA(a,l){return a[19].queries[l].queryList}(Re(),ul())}function o7(a,l,u){const h=new up(4==(4&u));z6(a,l,h,h.destroy),null===l[19]&&(l[19]=new fp),l[19].queries.push(new dp(h))}function a7(a,l,u){null===a.queries&&(a.queries=new gp),a.queries.track(new pp(l,u))}function l7(a,l){return a.queries.getByIndex(l)}function c7(a,l){return h2(a,l)}function g2(...a){}const E7=new _n("Application Initializer");let p2=(()=>{class a{constructor(u){this.appInits=u,this.resolve=g2,this.reject=g2,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(jg(v))u.push(v);else if(am(v)){const _=new Promise((x,T)=>{v.subscribe({complete:x,error:T})});u.push(_)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(ni(E7,8))},a.\u0275prov=Xt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const I7=new _n("AppId",{providedIn:"root",factory:function S7(){return`${yp()}${yp()}${yp()}`}});function yp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const z7=new _n("Platform Initializer"),DA=new _n("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),N7=new _n("appBootstrapListener");let TA=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Xt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const v2=new _n("LocaleId",{providedIn:"root",factory:()=>Ca(v2,ct.Optional|ct.SkipSelf)||function EA(){return typeof $localize<"u"&&$localize.locale||D5}()}),IA=new _n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class SA{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let zA=(()=>{class a{compileModuleSync(u){return new op(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),v=D1(Ye(u).declarations).reduce((_,x)=>{const T=O(x);return T&&_.push(new Yu(T)),_},[]);return new SA(h,v)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Xt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const RA=(()=>Promise.resolve(0))();function Cp(a){typeof Zone>"u"?RA.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class vs{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function VA(){let a=Wt.requestAnimationFrame,l=Wt.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function PA(a){const l=()=>{!function OA(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Wt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,xp(a),a.isCheckStableRunning=!0,Mp(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),xp(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,v,_,x)=>{try{return V7(a),u.invokeTask(f,v,_,x)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||a.shouldCoalesceRunChangeDetection)&&l(),L7(a)}},onInvoke:(u,h,f,v,_,x,T)=>{try{return V7(a),u.invoke(f,v,_,x,T)}finally{a.shouldCoalesceRunChangeDetection&&l(),L7(a)}},onHasTask:(u,h,f,v)=>{u.hasTask(f,v),h===f&&("microTask"==v.change?(a._hasPendingMicrotasks=v.microTask,xp(a),Mp(a)):"macroTask"==v.change&&(a.hasPendingMacrotasks=v.macroTask))},onHandleError:(u,h,f,v)=>(u.handleError(f,v),a.runOutsideAngular(()=>a.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vs.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(vs.isInAngularZone())throw new Ie(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,f){const v=this._inner,_=v.scheduleEventTask("NgZoneEvent: "+f,l,LA,g2,g2);try{return v.runTask(_,u,h)}finally{v.cancelTask(_)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const LA={};function Mp(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function xp(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function V7(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function L7(a){a._nesting--,Mp(a)}class HA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ro,this.onMicrotaskEmpty=new Ro,this.onStable=new Ro,this.onError=new Ro}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,f){return l.apply(u,h)}}const O7=new _n(""),P7=new _n("");let Ap,FA=(()=>{class a{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ap||(function BA(a){Ap=a}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vs.assertNotInAngularZone(),Cp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cp(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let v=-1;h&&h>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==v),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:v,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(ni(vs),ni(H7),ni(P7))},a.\u0275prov=Xt({token:a,factory:a.\u0275fac}),a})(),H7=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return Ap?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Xt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),I1=null;const F7=new _n("AllowMultipleToken"),Dp=new _n("PlatformDestroyListeners");class jA{constructor(l,u){this.name=l,this.token=u}}function U7(a,l,u=[]){const h=`Platform: ${l}`,f=new _n(h);return(v=[])=>{let _=Tp();if(!_||_.injector.get(F7,!1)){const x=[...u,...v,{provide:f,useValue:!0}];a?a(x):function GA(a){if(I1&&!I1.get(F7,!1))throw new Ie(400,!1);I1=a;const l=a.get(j7);(function B7(a){const l=a.get(z7,null);l&&l.forEach(u=>u())})(a)}(function Z7(a=[],l){return Wl.create({name:l,providers:[{provide:Zu,useValue:"platform"},{provide:Dp,useValue:new Set([()=>I1=null])},...a]})}(x,h))}return function qA(a){const l=Tp();if(!l)throw new Ie(401,!1);return l}()}}function Tp(){return I1?.get(j7)??null}let j7=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function $7(a,l){let u;return u="noop"===a?new HA:("zone.js"===a?void 0:a)||new vs(l),u}(h?.ngZone,function G7(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),v=[{provide:vs,useValue:f}];return f.run(()=>{const _=Wl.create({providers:v,parent:this.injector,name:u.moduleType.name}),x=u.create(_),T=x.injector.get(a5,null);if(!T)throw new Ie(402,!1);return f.runOutsideAngular(()=>{const E=f.onError.subscribe({next:R=>{T.handleError(R)}});x.onDestroy(()=>{w2(this._modules,x),E.unsubscribe()})}),function q7(a,l,u){try{const h=u();return jg(h)?h.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(T,f,()=>{const E=x.injector.get(p2);return E.runInitializers(),E.donePromise.then(()=>(s8(x.injector.get(v2,D5)||D5),this._moduleDoBootstrap(x),x))})})}bootstrapModule(u,h=[]){const f=W7({},h);return function UA(a,l,u){const h=new op(u);return Promise.resolve(h)}(0,0,u).then(v=>this.bootstrapModuleFactory(v,f))}_moduleDoBootstrap(u){const h=u.injector.get(m2);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ie(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Dp,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(ni(Wl))},a.\u0275prov=Xt({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function W7(a,l){return Array.isArray(l)?l.reduce(W7,a):{...a,...l}}let m2=(()=>{class a{constructor(u,h,f){this._zone=u,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new V.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),_=new V.y(x=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{vs.assertNotInAngularZone(),Cp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const E=this._zone.onUnstable.subscribe(()=>{vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{T.unsubscribe(),E.unsubscribe()}});this.isStable=(0,oe.T)(v,_.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof Kf;if(!this._injector.get(p2).done)throw!f&&Ae(u),new Ie(405,false);let _;_=f?u:this._injector.get(s5).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const x=function ZA(a){return a.isBoundToModule}(_)?void 0:this._injector.get(T5),E=_.create(Wl.NULL,[],h||_.selector,x),R=E.location.nativeElement,U=E.injector.get(O7,null);return U?.registerApplication(R),E.onDestroy(()=>{this.detachView(E.hostView),w2(this.components,E),U?.unregisterApplication(R)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;w2(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(N7,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>w2(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(ni(vs),ni(x1),ni(a5))},a.\u0275prov=Xt({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function w2(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let Y7=!0,J7=!1;function KA(){return J7=!0,Y7}function YA(){if(J7)throw new Error("Cannot enable prod mode after platform setup.");Y7=!1}let JA=(()=>{class a{}return a.__NG_ELEMENT_ID__=QA,a})();function QA(a){return function XA(a,l,u){if(S0(a)&&!u){const h=mn(a.index,l);return new Ku(h,h)}return 47&a.type?new Ku(l[16],l):null}(Wn(),Re(),16==(16&a))}class tw{constructor(){}supports(l){return Ju(l)}create(l){return new sD(l)}}const rD=(a,l)=>l;class sD{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||rD}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,f=0,v=null;for(;u||h;){const _=!h||u&&u.currentIndex<iw(h,f,v)?u:h,x=iw(_,f,v),T=_.currentIndex;if(_===h)f--,h=h._nextRemoved;else if(u=u._next,null==_.previousIndex)f++;else{v||(v=[]);const E=x-f,R=T-f;if(E!=R){for(let K=0;K<E;K++){const re=K<v.length?v[K]:v[K]=0,Te=re+K;R<=Te&&Te<E&&(v[K]=re+1)}v[_.previousIndex]=R-E}}x!==T&&l(_,x,T)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Ju(l))throw new Ie(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,v,_,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let x=0;x<this.length;x++)v=l[x],_=this._trackByFn(x,v),null!==u&&Object.is(u.trackById,_)?(h&&(u=this._verifyReinsertion(u,v,_,x)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,_,x),h=!0),u=u._next}else f=0,function VC(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Kl()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,x=>{_=this._trackByFn(f,x),null!==u&&Object.is(u.trackById,_)?(h&&(u=this._verifyReinsertion(u,x,_,f)),Object.is(u.item,x)||this._addIdentityChange(u,x)):(u=this._mismatch(u,x,_,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,f){let v;return null===l?v=this._itTail:(v=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,v,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,v,f)):l=this._addAfter(new oD(u,h),v,f),l}_verifyReinsertion(l,u,h,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==v?l=this._reinsertAfter(v,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,v=l._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new nw),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nw),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class oD{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aD{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class nw{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new aD,this.map.set(u,h)),h.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iw(a,l,u){const h=a.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+l+f}class rw{constructor(){}supports(l){return l instanceof Map||Og(l)}create(){return new lD}}class lD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Og(l)))throw new Ie(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const v=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,v)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const v=f._prev,_=f._next;return v&&(v._next=_),_&&(_._prev=v),f._next=null,f._prev=null,f}const h=new cD(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class cD{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sw(){return new Np([new tw])}let Np=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||sw()),deps:[[a,new Hs,new b0]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Ie(901,!1)}}return a.\u0275prov=Xt({token:a,providedIn:"root",factory:sw}),a})();function ow(){return new kp([new rw])}let kp=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||ow()),deps:[[a,new Hs,new b0]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Ie(901,!1)}}return a.\u0275prov=Xt({token:a,providedIn:"root",factory:ow}),a})();const dD=U7(null,"core",[]);let fD=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(ni(m2))},a.\u0275mod=yi({type:a}),a.\u0275inj=Tn({}),a})();function gD(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function vD(a,l){const u=O(a),h=l.elementInjector||Ed();return new Yu(u).create(h,l.projectableNodes,l.hostElement,l.environmentInjector)}},3942:(bt,ze,F)=>{F.d(ze,{Z:()=>Ie});var o=F(2090),j=F(4859),V=F(6881),oe=F(1877);class de{constructor(Ce,be){this._delegate=Ce,this.firebase=be,(0,V._addComponent)(Ce,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(Ce,be=V._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(Ce);return!_t.isInitialized()&&"EXPLICIT"===(null===(Ct=_t.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:be})}_removeServiceInstance(Ce,be=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(be)}_addComponent(Ce){(0,V._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,V._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Me(){const lt=function _e(lt){const Ce={},be={__esModule:!0,initializeApp:function Ne(We,he={}){const Je=V.initializeApp(We,he);if((0,o.r3)(Ce,Je.name))return Ce[Je.name];const ae=new lt(Je,be);return Ce[Je.name]=ae,ae},app:_t,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Se(We){const he=We.name,Je=he.replace("-compat","");if(V._registerComponent(We)&&"PUBLIC"===We.type){const ae=(le=_t())=>{if("function"!=typeof le[Je])throw ve.create("invalid-app-argument",{appName:he});return le[Je]()};void 0!==We.serviceProps&&(0,o.ZB)(ae,We.serviceProps),be[Je]=ae,lt.prototype[Je]=function(...le){return this._getService.bind(this,he).apply(this,We.multipleInstances?le:[])}}return"PUBLIC"===We.type?be[Je]:null},removeApp:function Ct(We){delete Ce[We]},useAsService:function qe(We,he){return"serverAuth"===he?null:he},modularAPIs:V}};function _t(We){if(!(0,o.r3)(Ce,We=We||V._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:We});return Ce[We]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ee(){return Object.keys(Ce).map(We=>Ce[We])}}),_t.App=lt,be}(de);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function Ce(be){(0,o.ZB)(lt,be)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),lt}(),q=new oe.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=W;!function Le(lt){(0,V.registerVersion)("@firebase/app-compat","0.2.10",lt)}()},6881:(bt,ze,F)=>{F.r(ze),F.d(ze,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Xr,_DEFAULT_ENTRY_NAME:()=>rr,_addComponent:()=>gt,_addOrOverwriteComponent:()=>Mt,_apps:()=>En,_clearComponents:()=>Qn,_components:()=>Ht,_getProvider:()=>sr,_registerComponent:()=>Wt,_removeServiceInstance:()=>ui,deleteApp:()=>Xn,getApp:()=>Zn,getApps:()=>wn,initializeApp:()=>Kt,onLog:()=>ei,registerVersion:()=>or,setLogLevel:()=>Er});var o=F(5861),j=F(4859),V=F(1877),oe=F(2090);let we,ve;const W=new WeakMap,q=new WeakMap,ee=new WeakMap,Ge=new WeakMap,Le=new WeakMap;let Ce={get(ce,se,Pe){if(ce instanceof IDBTransaction){if("done"===se)return q.get(ce);if("objectStoreNames"===se)return ce.objectStoreNames||ee.get(ce);if("store"===se)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return Ne(ce[se])},set:(ce,se,Pe)=>(ce[se]=Pe,!0),has:(ce,se)=>ce instanceof IDBTransaction&&("done"===se||"store"===se)||se in ce};function _t(ce){return"function"==typeof ce?function Ct(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...se){return ce.apply(Ee(this),se),Ne(W.get(this))}:function(...se){return Ne(ce.apply(Ee(this),se))}:function(se,...Pe){const Fe=ce.call(Ee(this),se,...Pe);return ee.set(Fe,se.sort?se.sort():[se]),Ne(Fe)}}(ce):(ce instanceof IDBTransaction&&function lt(ce){if(q.has(ce))return;const se=new Promise((Pe,Fe)=>{const Tt=()=>{ce.removeEventListener("complete",Ot),ce.removeEventListener("error",fn),ce.removeEventListener("abort",fn)},Ot=()=>{Pe(),Tt()},fn=()=>{Fe(ce.error||new DOMException("AbortError","AbortError")),Tt()};ce.addEventListener("complete",Ot),ce.addEventListener("error",fn),ce.addEventListener("abort",fn)});q.set(ce,se)}(ce),((ce,se)=>se.some(Pe=>ce instanceof Pe))(ce,function _e(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Ce):ce)}function Ne(ce){if(ce instanceof IDBRequest)return function Ie(ce){const se=new Promise((Pe,Fe)=>{const Tt=()=>{ce.removeEventListener("success",Ot),ce.removeEventListener("error",fn)},Ot=()=>{Pe(Ne(ce.result)),Tt()},fn=()=>{Fe(ce.error),Tt()};ce.addEventListener("success",Ot),ce.addEventListener("error",fn)});return se.then(Pe=>{Pe instanceof IDBCursor&&W.set(Pe,ce)}).catch(()=>{}),Le.set(se,ce),se}(ce);if(Ge.has(ce))return Ge.get(ce);const se=_t(ce);return se!==ce&&(Ge.set(ce,se),Le.set(se,ce)),se}const Ee=ce=>Le.get(ce),We=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],Je=new Map;function ae(ce,se){if(!(ce instanceof IDBDatabase)||se in ce||"string"!=typeof se)return;if(Je.get(se))return Je.get(se);const Pe=se.replace(/FromIndex$/,""),Fe=se!==Pe,Tt=he.includes(Pe);if(!(Pe in(Fe?IDBIndex:IDBObjectStore).prototype)||!Tt&&!We.includes(Pe))return;const Ot=function(){var fn=(0,o.Z)(function*(jn,...Gt){const qi=this.transaction(jn,Tt?"readwrite":"readonly");let e0=qi.store;return Fe&&(e0=e0.index(Gt.shift())),(yield Promise.all([e0[Pe](...Gt),Tt&&qi.done]))[0]});return function(Gt){return fn.apply(this,arguments)}}();return Je.set(se,Ot),Ot}!function be(ce){Ce=ce(Ce)}(ce=>({...ce,get:(se,Pe,Fe)=>ae(se,Pe)||ce.get(se,Pe,Fe),has:(se,Pe)=>!!ae(se,Pe)||ce.has(se,Pe)}));class le{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function ye(ce){return"VERSION"===ce.getComponent()?.type}(Pe)){const Fe=Pe.getImmediate();return`${Fe.library}/${Fe.version}`}return null}).filter(Pe=>Pe).join(" ")}}const fe="@firebase/app",Ue=new V.Yd("@firebase/app"),rr="[DEFAULT]",On={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},En=new Map,Ht=new Map;function gt(ce,se){try{ce.container.addComponent(se)}catch(Pe){Ue.debug(`Component ${se.name} failed to register with FirebaseApp ${ce.name}`,Pe)}}function Mt(ce,se){ce.container.addOrOverwriteComponent(se)}function Wt(ce){const se=ce.name;if(Ht.has(se))return Ue.debug(`There were multiple attempts to register component ${se}.`),!1;Ht.set(se,ce);for(const Pe of En.values())gt(Pe,ce);return!0}function sr(ce,se){const Pe=ce.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),ce.container.getProvider(se)}function ui(ce,se,Pe=rr){sr(ce,se).clearInstance(Pe)}function Qn(){Ht.clear()}const Un=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pt{constructor(se,Pe,Fe){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=Fe,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}const Xr="9.22.0";function Kt(ce,se={}){let Pe=ce;"object"!=typeof se&&(se={name:se});const Fe=Object.assign({name:rr,automaticDataCollectionEnabled:!1},se),Tt=Fe.name;if("string"!=typeof Tt||!Tt)throw Un.create("bad-app-name",{appName:String(Tt)});if(Pe||(Pe=(0,oe.aH)()),!Pe)throw Un.create("no-options");const Ot=En.get(Tt);if(Ot){if((0,oe.vZ)(Pe,Ot.options)&&(0,oe.vZ)(Fe,Ot.config))return Ot;throw Un.create("duplicate-app",{appName:Tt})}const fn=new j.H0(Tt);for(const Gt of Ht.values())fn.addComponent(Gt);const jn=new Pt(Pe,Fe,fn);return En.set(Tt,jn),jn}function Zn(ce=rr){const se=En.get(ce);if(!se&&ce===rr&&(0,oe.aH)())return Kt();if(!se)throw Un.create("no-app",{appName:ce});return se}function wn(){return Array.from(En.values())}function Xn(ce){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,o.Z)(function*(ce){const se=ce.name;En.has(se)&&(En.delete(se),yield Promise.all(ce.container.getProviders().map(Pe=>Pe.delete())),ce.isDeleted=!0)})).apply(this,arguments)}function or(ce,se,Pe){var Fe;let Tt=null!==(Fe=On[ce])&&void 0!==Fe?Fe:ce;Pe&&(Tt+=`-${Pe}`);const Ot=Tt.match(/\s|\//),fn=se.match(/\s|\//);if(Ot||fn){const jn=[`Unable to register library "${Tt}" with version "${se}":`];return Ot&&jn.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Ot&&fn&&jn.push("and"),fn&&jn.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void Ue.warn(jn.join(" "))}Wt(new j.wA(`${Tt}-version`,()=>({library:Tt,version:se}),"VERSION"))}function ei(ce,se){if(null!==ce&&"function"!=typeof ce)throw Un.create("invalid-log-argument");(0,V.Am)(ce,se)}function Er(ce){(0,V.Ub)(ce)}const $="firebase-heartbeat-store";let G=null;function P(){return G||(G=function Se(ce,se,{blocked:Pe,upgrade:Fe,blocking:Tt,terminated:Ot}={}){const fn=indexedDB.open(ce,se),jn=Ne(fn);return Fe&&fn.addEventListener("upgradeneeded",Gt=>{Fe(Ne(fn.result),Gt.oldVersion,Gt.newVersion,Ne(fn.transaction),Gt)}),Pe&&fn.addEventListener("blocked",Gt=>Pe(Gt.oldVersion,Gt.newVersion,Gt)),jn.then(Gt=>{Ot&&Gt.addEventListener("close",()=>Ot()),Tt&&Gt.addEventListener("versionchange",qi=>Tt(qi.oldVersion,qi.newVersion,qi))}).catch(()=>{}),jn}("firebase-heartbeat-database",1,{upgrade:(ce,se)=>{0===se&&ce.createObjectStore($)}}).catch(ce=>{throw Un.create("idb-open",{originalErrorMessage:ce.message})})),G}function k(){return(k=(0,o.Z)(function*(ce){try{return yield(yield P()).transaction($).objectStore($).get(Ye(ce))}catch(se){if(se instanceof oe.ZR)Ue.warn(se.message);else{const Pe=Un.create("idb-get",{originalErrorMessage:se?.message});Ue.warn(Pe.message)}}})).apply(this,arguments)}function Q(ce,se){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,o.Z)(function*(ce,se){try{const Fe=(yield P()).transaction($,"readwrite");yield Fe.objectStore($).put(se,Ye(ce)),yield Fe.done}catch(Pe){if(Pe instanceof oe.ZR)Ue.warn(Pe.message);else{const Fe=Un.create("idb-set",{originalErrorMessage:Pe?.message});Ue.warn(Fe.message)}}})).apply(this,arguments)}function Ye(ce){return`${ce.name}!${ce.options.appId}`}class it{constructor(se){this.container=se,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new Nt(Pe),this._heartbeatsCachePromise=this._storage.read().then(Fe=>(this._heartbeatsCache=Fe,Fe))}triggerHeartbeat(){var se=this;return(0,o.Z)(function*(){const Fe=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=ut();if(null===se._heartbeatsCache&&(se._heartbeatsCache=yield se._heartbeatsCachePromise),se._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!se._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Tt))return se._heartbeatsCache.heartbeats.push({date:Tt,agent:Fe}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(Ot=>{const fn=new Date(Ot.date).valueOf();return Date.now()-fn<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,o.Z)(function*(){if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null===se._heartbeatsCache||0===se._heartbeatsCache.heartbeats.length)return"";const Pe=ut(),{heartbeatsToSend:Fe,unsentEntries:Tt}=function jt(ce,se=1024){const Pe=[];let Fe=ce.slice();for(const Tt of ce){const Ot=Pe.find(fn=>fn.agent===Tt.agent);if(Ot){if(Ot.dates.push(Tt.date),en(Pe)>se){Ot.dates.pop();break}}else if(Pe.push({agent:Tt.agent,dates:[Tt.date]}),en(Pe)>se){Pe.pop();break}Fe=Fe.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:Fe}}(se._heartbeatsCache.heartbeats),Ot=(0,oe.L)(JSON.stringify({version:2,heartbeats:Fe}));return se._heartbeatsCache.lastSentHeartbeatDate=Pe,Tt.length>0?(se._heartbeatsCache.heartbeats=Tt,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),Ot})()}}function ut(){return(new Date).toISOString().substring(0,10)}class Nt{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,o.Z)(function*(){return(yield se._canUseIndexedDBPromise)&&(yield function O(ce){return k.apply(this,arguments)}(se.app))||{heartbeats:[]}})()}overwrite(se){var Pe=this;return(0,o.Z)(function*(){var Fe;if(yield Pe._canUseIndexedDBPromise){const Ot=yield Pe.read();return Q(Pe.app,{lastSentHeartbeatDate:null!==(Fe=se.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Ot.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var Pe=this;return(0,o.Z)(function*(){var Fe;if(yield Pe._canUseIndexedDBPromise){const Ot=yield Pe.read();return Q(Pe.app,{lastSentHeartbeatDate:null!==(Fe=se.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...se.heartbeats]})}})()}}function en(ce){return(0,oe.L)(JSON.stringify({version:2,heartbeats:ce})).length}!function $i(ce){Wt(new j.wA("platform-logger",se=>new le(se),"PRIVATE")),Wt(new j.wA("heartbeat",se=>new it(se),"PRIVATE")),or(fe,"0.9.10",ce),or(fe,"0.9.10","esm2017"),or("fire-js","")}("")},4859:(bt,ze,F)=>{F.d(ze,{H0:()=>_e,wA:()=>V,zt:()=>de});var o=F(5861),j=F(2090);class V{constructor(W,q,ee){this.name=W,this.instanceFactory=q,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const oe="[DEFAULT]";class de{constructor(W,q){this.name=W,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const q=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(q)){const ee=new j.BH;if(this.instancesDeferred.set(q,ee),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:q});Ge&&ee.resolve(Ge)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(W){var q;const ee=this.normalizeInstanceIdentifier(W?.identifier),Ge=null!==(q=W?.optional)&&void 0!==q&&q;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Le){if(Ge)return null;throw Le}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ve(Me){return"EAGER"===Me.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[q,ee]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(q);try{const Le=this.getOrInitializeService({instanceIdentifier:Ge});ee.resolve(Le)}catch{}}}}clearInstance(W=oe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,o.Z)(function*(){const q=Array.from(W.instances.values());yield Promise.all([...q.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...q.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=oe){return this.instances.has(W)}getOptions(W=oe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:q={}}=W,ee=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ee,options:q});for(const[Le,Ie]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Le)&&Ie.resolve(Ge);return Ge}onInit(W,q){var ee;const Ge=this.normalizeInstanceIdentifier(q),Le=null!==(ee=this.onInitCallbacks.get(Ge))&&void 0!==ee?ee:new Set;Le.add(W),this.onInitCallbacks.set(Ge,Le);const Ie=this.instances.get(Ge);return Ie&&W(Ie,Ge),()=>{Le.delete(W)}}invokeOnInitCallbacks(W,q){const ee=this.onInitCallbacks.get(q);if(ee)for(const Ge of ee)try{Ge(W,q)}catch{}}getOrInitializeService({instanceIdentifier:W,options:q={}}){let ee=this.instances.get(W);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=W,Me===oe?void 0:Me),options:q}),this.instances.set(W,ee),this.instancesOptions.set(W,q),this.invokeOnInitCallbacks(ee,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ee)}catch{}var Me;return ee||null}normalizeInstanceIdentifier(W=oe){return this.component?this.component.multipleInstances?W:oe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const q=this.getProvider(W.name);if(q.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);q.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const q=new de(W,this);return this.providers.set(W,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,ze,F)=>{F.d(ze,{Am:()=>Me,Ub:()=>_e,Yd:()=>ve,in:()=>j});const o=[];var j=(()=>{return(W=j||(j={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",j;var W})();const V={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},oe=j.INFO,de={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},we=(W,q,...ee)=>{if(q<W.logLevel)return;const Ge=(new Date).toISOString(),Le=de[q];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Le](`[${Ge}]  ${W.name}:`,...ee)};class ve{constructor(q){this.name=q,this._logLevel=oe,this._logHandler=we,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in j))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?V[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...q),this._logHandler(this,j.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...q),this._logHandler(this,j.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,j.INFO,...q),this._logHandler(this,j.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,j.WARN,...q),this._logHandler(this,j.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...q),this._logHandler(this,j.ERROR,...q)}}function _e(W){o.forEach(q=>{q.setLogLevel(W)})}function Me(W,q){for(const ee of o){let Ge=null;q&&q.level&&(Ge=V[q.level]),ee.userLogHandler=null===W?null:(Le,Ie,...lt)=>{const Ce=lt.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");Ie>=(Ge??Le.logLevel)&&W({level:j[Ie].toLowerCase(),message:Ce,args:lt,type:Le.name})}}}},259:(bt,ze,F)=>{F.d(ze,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=F(6881);(0,o.registerVersion)("firebase","9.22.0","app")},9260:(bt,ze,F)=>{F.d(ze,{Z:()=>o.Z});var o=F(3942);o.Z.registerVersion("firebase","9.22.0","app-compat")},9568:(bt,ze,F)=>{F.r(ze);var o=F(5861),j=F(3942),V=F(1389),oe=F(2090),ve=(F(6881),F(1877),F(4859));function _e(){return window}function q(){return(q=(0,o.Z)(function*(P,O,k){var Q;const{BuildInfo:Ae}=_e();(0,V.as)(O.sessionId,"AuthEvent did not contain a session ID");const Ye=yield be(O.sessionId),mt={};return(0,V.at)()?mt.ibi=Ae.packageName:(0,V.au)()?mt.apn=Ae.packageName:(0,V.av)(P,"operation-not-supported-in-this-environment"),Ae.displayName&&(mt.appDisplayName=Ae.displayName),mt.sessionId=Ye,(0,V.aw)(P,k,O.type,void 0,null!==(Q=O.eventId)&&void 0!==Q?Q:void 0,mt)})).apply(this,arguments)}function Ge(){return(Ge=(0,o.Z)(function*(P){const{BuildInfo:O}=_e(),k={};(0,V.at)()?k.iosBundleId=O.packageName:(0,V.au)()?k.androidPackageName=O.packageName:(0,V.av)(P,"operation-not-supported-in-this-environment"),yield(0,V.ax)(P,k)})).apply(this,arguments)}function lt(){return(lt=(0,o.Z)(function*(P,O,k){const{cordova:Q}=_e();let Ae=()=>{};try{yield new Promise((Ye,mt)=>{let De=null;function it(){var Nt;Ye();const en=null===(Nt=Q.plugins.browsertab)||void 0===Nt?void 0:Nt.close;"function"==typeof en&&en(),"function"==typeof k?.close&&k.close()}function ut(){De||(De=window.setTimeout(()=>{mt((0,V.az)(P,"redirect-cancelled-by-user"))},2e3))}function jt(){"visible"===document?.visibilityState&&ut()}O.addPassiveListener(it),document.addEventListener("resume",ut,!1),(0,V.au)()&&document.addEventListener("visibilitychange",jt,!1),Ae=()=>{O.removePassiveListener(it),document.removeEventListener("resume",ut,!1),document.removeEventListener("visibilitychange",jt,!1),De&&window.clearTimeout(De)}})}finally{Ae()}})).apply(this,arguments)}function be(P){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,o.Z)(function*(P){const O=_t(P),k=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(k)).map(Ae=>Ae.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _t(P){if((0,V.as)(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(P);const O=new ArrayBuffer(P.length),k=new Uint8Array(O);for(let Q=0;Q<P.length;Q++)k[Q]=P.charCodeAt(Q);return k}class Ee extends V.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(k=>k(O)),super.onEvent(O)}initialized(){var O=this;return(0,o.Z)(function*(){yield O.initPromise})()}}function We(P){return he.apply(this,arguments)}function he(){return(he=(0,o.Z)(function*(P){const O=yield le()._get(ye(P));return O&&(yield le()._remove(ye(P))),O})).apply(this,arguments)}function ae(){const P=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<20;k++){const Q=Math.floor(Math.random()*O.length);P.push(O.charAt(Q))}return P.join("")}function le(){return(0,V.aC)(V.b)}function ye(P){return(0,V.aD)("authEvent",P.config.apiKey,P.name)}function Ue(P){if(!P?.includes("?"))return{};const[O,...k]=P.split("?");return(0,oe.zd)(k.join("?"))}function nt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,V.az)("no-auth-event")}}function Dn(){var P;return(null===(P=self?.location)||void 0===P?void 0:P.protocol)||null}function Nn(P=(0,oe.z$)()){return!("file:"!==Dn()&&"ionic:"!==Dn()&&"capacitor:"!==Dn()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function g0(){try{const P=self.localStorage,O=V.aL();if(P)return P.setItem(O,"1"),P.removeItem(O),!function Yr(P=(0,oe.z$)()){return function pr(){return(0,oe.w1)()&&11===document?.documentMode}()||function ys(P=(0,oe.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,oe.hl)()}catch{return Si()&&(0,oe.hl)()}return!1}function Si(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vr(){return(function Tn(){return"http:"===Dn()||"https:"===Dn()}()||(0,oe.ru)()||Nn())&&!function I0(){return(0,oe.b$)()||(0,oe.UG)()}()&&g0()&&!Si()}function Jr(){return Nn()&&typeof document<"u"}function ct(){return(ct=(0,o.Z)(function*(){return!!Jr()&&new Promise(P=>{const O=setTimeout(()=>{P(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),P(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},$n=V.aA,Qr="persistence";function On(P){return En.apply(this,arguments)}function En(){return(En=(0,o.Z)(function*(P){yield P._initializationPromise;const O=gt(),k=V.aD(Qr,P.config.apiKey,P.name);O&&O.setItem(k,P._getPersistence())})).apply(this,arguments)}function gt(){var P;try{return(null===(P=function bi(){return typeof window<"u"?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch{return null}}const Mt=V.aA;class Wt{constructor(){this.browserResolver=V.aC(V.k),this.cordovaResolver=V.aC(class ln{constructor(){this._redirectPersistence=V.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=V.aE,this._overrideRedirectResult=V.aF}_initialize(O){var k=this;return(0,o.Z)(function*(){const Q=O._key();let Ae=k.eventManagers.get(Q);return Ae||(Ae=new Ee(O),k.eventManagers.set(Q,Ae),k.attachCallbackListeners(O,Ae)),Ae})()}_openPopup(O){(0,V.av)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,k,Q,Ae){var Ye=this;return(0,o.Z)(function*(){!function Ce(P){var O,k,Q,Ae,Ye,mt,De,it,ut,jt;const Nt=_e();(0,V.aA)("function"==typeof(null===(O=Nt?.universalLinks)||void 0===O?void 0:O.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,V.aA)(typeof(null===(k=Nt?.BuildInfo)||void 0===k?void 0:k.packageName)<"u",P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,V.aA)("function"==typeof(null===(Ye=null===(Ae=null===(Q=Nt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===Ye?void 0:Ye.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aA)("function"==typeof(null===(it=null===(De=null===(mt=Nt?.cordova)||void 0===mt?void 0:mt.plugins)||void 0===De?void 0:De.browsertab)||void 0===it?void 0:it.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aA)("function"==typeof(null===(jt=null===(ut=Nt?.cordova)||void 0===ut?void 0:ut.InAppBrowser)||void 0===jt?void 0:jt.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const mt=yield Ye._initialize(O);yield mt.initialized(),mt.resetRedirect(),(0,V.aG)(),yield Ye._originValidation(O);const De=function Se(P,O,k=null){return{type:O,eventId:k,urlResponse:null,sessionId:ae(),postBody:null,tenantId:P.tenantId,error:(0,V.az)(P,"no-auth-event")}}(O,Q,Ae);yield function qe(P,O){return le()._set(ye(P),O)}(O,De);const it=yield function W(P,O,k){return q.apply(this,arguments)}(O,De,k),ut=yield function Le(P){const{cordova:O}=_e();return new Promise(k=>{O.plugins.browsertab.isAvailable(Q=>{let Ae=null;Q?O.plugins.browsertab.openUrl(P):Ae=O.InAppBrowser.open(P,(0,V.ay)()?"_blank":"_system","location=yes"),k(Ae)})})}(it);return function Ie(P,O,k){return lt.apply(this,arguments)}(O,mt,ut)})()}_isIframeWebStorageSupported(O,k){throw new Error("Method not implemented.")}_originValidation(O){const k=O._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function ee(P){return Ge.apply(this,arguments)}(O)),this.originValidationPromises[k]}attachCallbackListeners(O,k){const{universalLinks:Q,handleOpenURL:Ae,BuildInfo:Ye}=_e(),mt=setTimeout((0,o.Z)(function*(){yield We(O),k.onEvent(nt())}),500),De=function(){var jt=(0,o.Z)(function*(Nt){clearTimeout(mt);const en=yield We(O);let $i=null;en&&Nt?.url&&($i=function Je(P,O){var k,Q;const Ae=function Qe(P){const O=Ue(P),k=O.link?decodeURIComponent(O.link):void 0,Q=Ue(k).link,Ae=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return Ue(Ae).link||Ae||Q||k||P}(O);if(Ae.includes("/__/auth/callback")){const Ye=Ue(Ae),mt=Ye.firebaseError?function fe(P){try{return JSON.parse(P)}catch{return null}}(decodeURIComponent(Ye.firebaseError)):null,De=null===(Q=null===(k=mt?.code)||void 0===k?void 0:k.split("auth/"))||void 0===Q?void 0:Q[1],it=De?(0,V.az)(De):null;return it?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:it,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:Ae,postBody:null}}return null}(en,Nt.url)),k.onEvent($i||nt())});return function(en){return jt.apply(this,arguments)}}();typeof Q<"u"&&"function"==typeof Q.subscribe&&Q.subscribe(null,De);const it=Ae,ut=`${Ye.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var jt=(0,o.Z)(function*(Nt){if(Nt.toLowerCase().startsWith(ut)&&De({url:Nt}),"function"==typeof it)try{it(Nt)}catch(en){console.error(en)}});return function(Nt){return jt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=V.a,this._completeRedirectFn=V.aE,this._overrideRedirectResult=V.aF}_initialize(O){var k=this;return(0,o.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,k,Q,Ae){var Ye=this;return(0,o.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openPopup(O,k,Q,Ae)})()}_openRedirect(O,k,Q,Ae){var Ye=this;return(0,o.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openRedirect(O,k,Q,Ae)})()}_isIframeWebStorageSupported(O,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,k)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return Jr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,o.Z)(function*(){if(O.underlyingResolver)return;const k=yield function oo(){return ct.apply(this,arguments)}();O.underlyingResolver=k?O.cordovaResolver:O.browserResolver})()}}function sr(P){return P.unwrap()}function Qn(P){return Un(P)}function Un(P){const{_tokenResponse:O}=P instanceof oe.ZR?P.customData:P;if(!O)return null;if(!(P instanceof oe.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return V.P.credentialFromResult(P);const k=O.providerId;if(!k||k===V.p.PASSWORD)return null;let Q;switch(k){case V.p.GOOGLE:Q=V.V;break;case V.p.FACEBOOK:Q=V.U;break;case V.p.GITHUB:Q=V.W;break;case V.p.TWITTER:Q=V.Z;break;default:const{oauthIdToken:Ae,oauthAccessToken:Ye,oauthTokenSecret:mt,pendingToken:De,nonce:it}=O;return Ye||mt||Ae||De?De?k.startsWith("saml.")?V.aO._create(k,De):V.L._fromParams({providerId:k,signInMethod:k,pendingToken:De,idToken:Ae,accessToken:Ye}):new V.X(k).credential({idToken:Ae,accessToken:Ye,rawNonce:it}):null}return P instanceof oe.ZR?Q.credentialFromError(P):Q.credentialFromResult(P)}function Pt(P,O){return O.catch(k=>{throw k instanceof oe.ZR&&function Dt(P,O){var k;const Q=null===(k=O.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===O?.code)O.resolver=new Zn(P,V.aq(P,O));else if(Q){const Ae=Un(O),Ye=O;Ae&&(Ye.credential=Ae,Ye.tenantId=Q.tenantId||void 0,Ye.email=Q.email||void 0,Ye.phoneNumber=Q.phoneNumber||void 0)}}(P,k),k}).then(k=>{const Ae=k.user;return{operationType:k.operationType,credential:Qn(k),additionalUserInfo:V.ao(k),user:wn.getOrCreate(Ae)}})}function Xr(P,O){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,o.Z)(function*(P,O){const k=yield O;return{verificationId:k.verificationId,confirm:Q=>Pt(P,k.confirm(Q))}})).apply(this,arguments)}class Zn{constructor(O,k){this.resolver=k,this.auth=function ui(P){return P.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return Pt(sr(this.auth),this.resolver.resolveSignIn(O))}}class wn{constructor(O){this._delegate=O,this.multiFactor=V.ar(O)}static getOrCreate(O){return wn.USER_MAP.has(O)||wn.USER_MAP.set(O,new wn(O)),wn.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var k=this;return(0,o.Z)(function*(){return Pt(k.auth,V.a0(k._delegate,O))})()}linkWithPhoneNumber(O,k){var Q=this;return(0,o.Z)(function*(){return Xr(Q.auth,V.l(Q._delegate,O,k))})()}linkWithPopup(O){var k=this;return(0,o.Z)(function*(){return Pt(k.auth,V.d(k._delegate,O,Wt))})()}linkWithRedirect(O){var k=this;return(0,o.Z)(function*(){return yield On(V.aH(k.auth)),V.g(k._delegate,O,Wt)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var k=this;return(0,o.Z)(function*(){return Pt(k.auth,V.a1(k._delegate,O))})()}reauthenticateWithPhoneNumber(O,k){return Xr(this.auth,V.r(this._delegate,O,k))}reauthenticateWithPopup(O){return Pt(this.auth,V.e(this._delegate,O,Wt))}reauthenticateWithRedirect(O){var k=this;return(0,o.Z)(function*(){return yield On(V.aH(k.auth)),V.h(k._delegate,O,Wt)})()}sendEmailVerification(O){return V.ae(this._delegate,O)}unlink(O){var k=this;return(0,o.Z)(function*(){return yield V.an(k._delegate,O),k})()}updateEmail(O){return V.aj(this._delegate,O)}updatePassword(O){return V.ak(this._delegate,O)}updatePhoneNumber(O){return V.u(this._delegate,O)}updateProfile(O){return V.ai(this._delegate,O)}verifyBeforeUpdateEmail(O,k){return V.af(this._delegate,O,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wn.USER_MAP=new WeakMap;const Xn=V.aA;let Vn=(()=>{class P{constructor(k,Q){if(this.app=k,Q.isInitialized())return this._delegate=Q.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ae}=k.options;Xn(Ae,"invalid-api-key",{appName:k.name}),Xn(Ae,"invalid-api-key",{appName:k.name});const Ye=typeof window<"u"?Wt:void 0;this._delegate=Q.initialize({options:{persistence:ei(Ae,k.name),popupRedirectResolver:Ye}}),this._delegate._updateErrorMap(V.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,Q){V.I(this._delegate,k,Q)}applyActionCode(k){return V.a5(this._delegate,k)}checkActionCode(k){return V.a6(this._delegate,k)}confirmPasswordReset(k,Q){return V.a4(this._delegate,k,Q)}createUserWithEmailAndPassword(k,Q){var Ae=this;return(0,o.Z)(function*(){return Pt(Ae._delegate,V.a8(Ae._delegate,k,Q))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return V.ad(this._delegate,k)}isSignInWithEmailLink(k){return V.ab(this._delegate,k)}getRedirectResult(){var k=this;return(0,o.Z)(function*(){Xn(vr(),k._delegate,"operation-not-supported-in-this-environment");const Q=yield V.j(k._delegate,Wt);return Q?Pt(k._delegate,Promise.resolve(Q)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function ci(P,O){(0,V.aH)(P)._logFramework(O)}(this._delegate,k)}onAuthStateChanged(k,Q,Ae){const{next:Ye,error:mt,complete:De}=or(k,Q,Ae);return this._delegate.onAuthStateChanged(Ye,mt,De)}onIdTokenChanged(k,Q,Ae){const{next:Ye,error:mt,complete:De}=or(k,Q,Ae);return this._delegate.onIdTokenChanged(Ye,mt,De)}sendSignInLinkToEmail(k,Q){return V.aa(this._delegate,k,Q)}sendPasswordResetEmail(k,Q){return V.a3(this._delegate,k,Q||void 0)}setPersistence(k){var Q=this;return(0,o.Z)(function*(){let Ae;switch(function rr(P,O){$n(Object.values(Jn).includes(O),P,"invalid-persistence-type"),(0,oe.b$)()?$n(O!==Jn.SESSION,P,"unsupported-persistence-type"):(0,oe.UG)()?$n(O===Jn.NONE,P,"unsupported-persistence-type"):Si()?$n(O===Jn.NONE||O===Jn.LOCAL&&(0,oe.hl)(),P,"unsupported-persistence-type"):$n(O===Jn.NONE||g0(),P,"unsupported-persistence-type")}(Q._delegate,k),k){case Jn.SESSION:Ae=V.a;break;case Jn.LOCAL:Ae=(yield V.aC(V.i)._isAvailable())?V.i:V.b;break;case Jn.NONE:Ae=V.N;break;default:return V.av("argument-error",{appName:Q._delegate.name})}return Q._delegate.setPersistence(Ae)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return Pt(this._delegate,V._(this._delegate))}signInWithCredential(k){return Pt(this._delegate,V.$(this._delegate,k))}signInWithCustomToken(k){return Pt(this._delegate,V.a2(this._delegate,k))}signInWithEmailAndPassword(k,Q){return Pt(this._delegate,V.a9(this._delegate,k,Q))}signInWithEmailLink(k,Q){return Pt(this._delegate,V.ac(this._delegate,k,Q))}signInWithPhoneNumber(k,Q){return Xr(this._delegate,V.s(this._delegate,k,Q))}signInWithPopup(k){var Q=this;return(0,o.Z)(function*(){return Xn(vr(),Q._delegate,"operation-not-supported-in-this-environment"),Pt(Q._delegate,V.c(Q._delegate,k,Wt))})()}signInWithRedirect(k){var Q=this;return(0,o.Z)(function*(){return Xn(vr(),Q._delegate,"operation-not-supported-in-this-environment"),yield On(Q._delegate),V.f(Q._delegate,k,Wt)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return V.a7(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=Jn,P})();function or(P,O,k){let Q=P;"function"!=typeof P&&({next:Q,error:O,complete:k}=P);const Ae=Q;return{next:mt=>Ae(mt&&wn.getOrCreate(mt)),error:O,complete:k}}function ei(P,O){const k=function Ht(P,O){const k=gt();if(!k)return[];const Q=V.aD(Qr,P,O);switch(k.getItem(Q)){case Jn.NONE:return[V.N];case Jn.LOCAL:return[V.i,V.a];case Jn.SESSION:return[V.a];default:return[]}}(P,O);if(typeof self<"u"&&!k.includes(V.i)&&k.push(V.i),typeof window<"u")for(const Q of[V.b,V.a])k.includes(Q)||k.push(Q);return k.includes(V.N)||k.push(V.N),k}class Er{constructor(){this.providerId="phone",this._delegate=new V.P(sr(j.Z.auth()))}static credential(O,k){return V.P.credential(O,k)}verifyPhoneNumber(O,k){return this._delegate.verifyPhoneNumber(O,k)}unwrap(){return this._delegate}}Er.PHONE_SIGN_IN_METHOD=V.P.PHONE_SIGN_IN_METHOD,Er.PROVIDER_ID=V.P.PROVIDER_ID;const yi=V.aA;class Gi{constructor(O,k,Q=j.Z.app()){var Ae;yi(null===(Ae=Q.options)||void 0===Ae?void 0:Ae.apiKey,"invalid-api-key",{appName:Q.name}),this._delegate=new V.R(O,k,Q.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function G(P){P.INTERNAL.registerComponent(new ve.wA("auth-compat",O=>{const k=O.getProvider("app-compat").getImmediate(),Q=O.getProvider("auth");return new Vn(k,Q)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:V.A.EMAIL_SIGNIN,PASSWORD_RESET:V.A.PASSWORD_RESET,RECOVER_EMAIL:V.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:V.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:V.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:V.A.VERIFY_EMAIL}},EmailAuthProvider:V.Q,FacebookAuthProvider:V.U,GithubAuthProvider:V.W,GoogleAuthProvider:V.V,OAuthProvider:V.X,SAMLAuthProvider:V.Y,PhoneAuthProvider:Er,PhoneMultiFactorGenerator:V.m,RecaptchaVerifier:Gi,TwitterAuthProvider:V.Z,Auth:Vn,AuthCredential:V.J,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.4.2")}(j.Z)},5861:(bt,ze,F)=>{function o(V,oe,de,we,ve,_e,Me){try{var W=V[_e](Me),q=W.value}catch(ee){return void de(ee)}W.done?oe(q):Promise.resolve(q).then(we,ve)}function j(V){return function(){var oe=this,de=arguments;return new Promise(function(we,ve){var _e=V.apply(oe,de);function Me(q){o(_e,we,ve,Me,W,"next",q)}function W(q){o(_e,we,ve,Me,W,"throw",q)}Me(void 0)})}}F.d(ze,{Z:()=>j})}},bt=>{bt(bt.s=1671)}]);